var Playspecs=function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const n={WHITESPACE:" ",CONCATENATION:",",DOTS_GREEDY:"...",DOTS_RELUCTANT:"..",DOTS_OMEGA:"***",LEFT_PAREN:"(",RIGHT_PAREN:")",CAPTURING_LEFT_PAREN:"$(",ALTERNATION:";",INTERSECTION:"^",AND:"&",OR:"|",NOT:"not",START:"start",END:"end",TRUE:"true",FALSE:"false",ERROR:"error"},s={OMEGA:n.DOTS_OMEGA,REPETITION:n.DOTS_GREEDY,CONCATENATION:n.CONCATENATION,CAPTURE:"$(",GROUP:n.LEFT_PAREN,ALTERNATION:n.ALTERNATION,INTERSECTION:n.INTERSECTION,AND:n.AND,OR:n.OR,NOT:n.NOT,START:n.START,END:n.END,TRUE:n.TRUE,FALSE:n.FALSE,ERROR:n.ERROR};function i(t){return{type:t.type,value:t.value,children:t.children.slice(),range:{start:t.range.start,end:t.range.end}}}const a=function(t){return function(e){return t}},o=function(t,e){return t.node(e.type,e.value)},c=function(t,e,r){let n=[e];return n.push(t.parseExpression(r.tightness-1)),t.node(r.type,r.value,n)},h=function(t,e,r){if(!f(e))return t.error("Left hand side of token must be propositional",r,e);let n=[e];const s=t.parseExpression(r.tightness-1);return f(s)?(n.push(s),t.node(r.type,r.value,n)):t.error("Right hand side of token must be propositional",r,s)},u="$END",l=[{type:n.WHITESPACE,match:/^\s+/},{type:n.CONCATENATION,match:[n.CONCATENATION],tightness:100,extendParse:c},{type:n.DOTS_GREEDY,match:/^([0-9]*)\s*\.\.\.\s*([0-9]*)/,value:function(t){return{greedy:!0,lowerBound:t[1]?parseInt(t[1]):0,upperBound:t[2]?parseInt(t[2]):u}},tightness:110,startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.start,t.node(s.REPETITION,e.value,[r])},extendParse:function(t,e,r){return t.node(s.REPETITION,r.value,[e])}},{type:n.DOTS_RELUCTANT,match:/^([0-9]*)\s*\.\.\s*([0-9]*)/,tightness:110,value:function(t){return{greedy:!1,lowerBound:t[1]?parseInt(t[1]):0,upperBound:t[2]?parseInt(t[2]):u}},startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.start,t.node(s.REPETITION,e.value,[r])},extendParse:function(t,e,r){return t.node(s.REPETITION,r.value,[e])}},{type:n.DOTS_OMEGA,match:[n.DOTS_OMEGA],tightness:110,startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.end,t.node(s.OMEGA,e.value,[r])},extendParse:function(t,e,r){return t.node(s.OMEGA,r.value,[e])}},{type:n.LEFT_PAREN,match:[n.LEFT_PAREN],startParse:function(t,e){const r=t.parseExpression(0);return t.currentToken().type!=n.RIGHT_PAREN?t.error("Missing right parenthesis",e,r):(t.advance(),t.node(s.GROUP,e.value,[r]))}},{type:n.RIGHT_PAREN,match:[n.RIGHT_PAREN]},{type:n.CAPTURING_LEFT_PAREN,match:/^\$([A-z_][A-z_0-9]*)?\(/,value:function(t){return{group:t[1]||"$implicit"}},startParse:function(t,e){const r=t.parseExpression(0);return t.currentToken().type!=n.RIGHT_PAREN?t.error("Missing right parenthesis",e,r):(t.advance(),t.node(s.CAPTURE,e.value,[r]))}},{type:n.ALTERNATION,match:[n.ALTERNATION],tightness:60,extendParse:c},{type:n.INTERSECTION,match:[n.INTERSECTION],tightness:50,extendParse:c},{type:n.AND,match:[n.AND],tightness:200,extendParse:h},{type:n.OR,match:[n.OR],tightness:210,extendParse:h},{type:n.NOT,match:[n.NOT],tightness:220,startParse:function(t,e){const r=t.parseExpression(e.tightness);return f(r)?t.node(e.type,e.value,[r]):t.error("NOT may only negate propositional state formulae",e,r)}},{type:n.START,match:[n.START],startParse:o},{type:n.END,match:[n.END],startParse:o},{type:n.TRUE,match:[n.TRUE],value:a(!0),startParse:o},{type:n.FALSE,match:[n.FALSE],value:a(!1),startParse:o},{type:n.ERROR,match:/^\S+/,startParse:o}],p=300,d="ERROR";function g(t){for(var e in s)if(s[e]==t.type)return!1;return!0}function f(t){return g(t)||t.type==s.AND||t.type==s.OR||t.type==s.NOT||t.type==s.TRUE||t.type==s.FALSE||t.type==s.START||t.type==s.END||(t.type==s.GROUP||t.type==s.CAPTURE)&&t.children.every(function(t){return f(t)})}class y{constructor(t){this.tokenDefinitions=[],this.tokensByType={},this.parseErrors=[];const e=t||[],r=e.concat(l);for(let t=0;t<r.length;t++){const n=r[t],s=n.tightness||0,i={type:n.type,match:n.match instanceof RegExp?n.match:"string"==typeof n.match?[n.match]:n.match,value:n.value||function(t){return t[0]},tightness:t<e.length?s+p:s,startParse:n.startParse||function(t,e){return t.error("Can't start a parse tree with this token",e)},extendParse:n.extendParse||function(t,e,r){return t.error("Can't extend a parse tree with this token",r,e)}};this.tokenDefinitions.push(i),this.tokensByType[i.type]=i}this.resetStream()}node(t,e,r=[]){return{type:t,value:e,children:r,range:{start:-1,end:-1}}}error(t,e,r){const n=this.node(d,{message:t,token:e,tree:r});return this.parseErrors.push(n),n}tokenize(t){let e=[],r=[],s=t,i=0;for(;s.length;)for(let t=0;t<this.tokenDefinitions.length;t++){const a=this.tokenDefinitions[t],o=a.match;let c={match:null,index:-1};if(o instanceof RegExp){let t=o.exec(s);t&&(c.match=t,c.index=t.index)}else if(Array.isArray(o))for(let t=0;t<o.length;t++){const e=o[t];s.substr(0,e.length)==e&&(c.match=[e],c.index=0)}if(c.match&&0==c.index){const t=c.match[0].length;s=s.substr(c.match[0].length);const o=i;i+=t,a.type!==n.WHITESPACE&&(a.type===n.ERROR&&r.push(e.length),e.push({type:a.type,value:a.value(c.match),tightness:a.tightness||0,range:{start:o,end:i}}));break}}return{string:t,tokens:e,position:0,errors:r}}resetStream(){this.stream={string:"",tokens:[],position:0,errors:[]}}charPosition(){return this.currentToken()?this.currentToken().range.start:this.stream.string.length}remainder(){const t=this.charPosition();return this.stream.string.substr(t)}currentToken(){return this.stream.tokens[this.stream.position]}advance(){this.stream.position++}parse(t){this.stream=this.tokenize(t),this.parseErrors=[];var e={tree:this.parseExpression(0),errors:this.parseErrors,remainder:this.remainder()};return this.parseErrors=[],this.resetStream(),e}parseExpression(t){let e=this.currentToken(),r=this.tokensByType[e.type];const n=e.range.start;this.advance();let s=r.startParse(this,e);if(s.range.start=n,s.range.end=this.charPosition(),s.type==d)return s;for(e=this.currentToken();e&&t<e.tightness;){r=this.tokensByType[e.type],this.advance();let t=r.extendParse(this,s,e);if(t.range.start=s.range.start,t.range.end=this.charPosition(),t.type==d)return t;s=t,e=this.currentToken()}return s}}let m=0;function T(){m=0}class E{constructor(){this.startStates=[new A],this.acceptingStates=[]}newState(t){return new A(t)}markAccepting(t){-1==this.acceptingStates.indexOf(t)&&this.acceptingStates.push(t),t.addEdge(new P(t,null,[])),t.isAccepting=!0}markNonAccepting(t){t.isAccepting=!1,-1!=this.acceptingStates.indexOf(t)&&this.acceptingStates.splice(this.acceptingStates.indexOf(t),1)}getStates(){let t={},e=this.startStates.slice();for(;e.length;){const r=e.pop();t[r.id]=r;for(let n in r.edges){let s=r.edges[n];!s.target||s.target.id in t||e.push(s.target)}}return Object.keys(t).map(e=>t[e])}toDot(){return"digraph g {\n  rankdir=LR;\n"+this.getStates().map(function(t){return["  "+t.id+` [shape=${t.isAccepting?"doublecircle":"circle"}];`].concat(t.edges.map(function(e,r){return"  "+t.id+"->"+e.target.id+` [label="${r}:${e.formula?S(e.formula):"&#949;"}:${e.label.map(t=>t.type+"."+t.group).join(",")}"];`})).join("\n")}).join("\n")+"\n}"}eelim(){let t=this.startStates.slice(),e={};for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(;t.length;){const r=t.pop();let n={[r.id]:r};for(let t=0;t<r.edges.length;t++){const e=r.edges[t];if(!(e.formula||r.isAccepting&&e.target==r)){if(e.target.id in n){r.edges.splice(t,1),t--;continue}{const n=e.target.edges.map(t=>new P(t.target==e.target&&null==t.formula?r:t.target,t.formula,e.label.concat(t.label)));e.target.isAccepting&&!r.isAccepting&&(this.acceptingStates.push(r),r.isAccepting=!0),r.edges.splice(t,1,...n)}}n[e.target.id]=e.target}for(let r in n)r in e||(t.push(n[r]),e[r]=n[r])}return this}intersect(t){this.eelim();const e=this;t.eelim();let r=new E;r.startStates=[];let n=[],i={};for(let s=0;s<e.startStates.length;s++){const a=e.startStates[s];for(let e=0;e<t.startStates.length;e++){const s=t.startStates[e];n.push([a,s]),a.id in i||(i[a.id]={});let o=r.newState(`a${a.id}x${s.id}b`);r.startStates.push(o),i[a.id][s.id]=o,a.isAccepting&&s.isAccepting&&r.markAccepting(o)}}for(;n.length;){const[t,e]=n.pop(),c=i[t.id][e.id];for(let h=0;h<t.edges.length;h++){const u=t.edges[h],l=u.target,p=t.isAccepting&&l==t&&!u.formula;for(let t=0;t<e.edges.length;t++){const h=e.edges[t],d=h.target;let g=null;if(p!=(e.isAccepting&&d==e&&!h.formula))continue;if(!(p||(u.formula&&h.formula||console.error("Uneliminated non ASE epsilon transition"),a=u.formula,o=h.formula,g={type:s.AND,value:"&",children:[a,o],range:{start:-1,end:-1}})))continue;let f=null;l.id in i&&d.id in i[l.id]?f=i[l.id][d.id]:(f=r.newState(`a${l.id}x${d.id}b`),l.id in i||(i[l.id]={}),i[l.id][d.id]=f,n.push([l,d]),l.isAccepting&&d.isAccepting&&(f.isAccepting=!0,r.acceptingStates.push(f))),c.addEdge(new P(f,g,u.label.concat(h.label)))}}}var a,o;return r}}class A{constructor(t){this.id=t||(m++).toString(10),this.edges=[],this.isAccepting=!1}addEdge(t){this.edges.push(t)}removeEdge(t){this.edges.splice(this.edges.indexOf(t),1)}}class P{constructor(t,e,r){this.target=t,this.formula=e,this.label=r}}function N(t){const e=new E,r=function t(e,r,n){if(f(n)&&n.type!=s.CAPTURE){const t=new P(null,n,[]);return r.addEdge(t),[t]}if(n.type==s.CONCATENATION){const s=t(e,r,n.children[0]),i=e.newState();for(let t=0;t<s.length;t++){let e=s[t];e.target=i}return t(e,i,n.children[1])}if(n.type==s.REPETITION){const a=n.value.greedy,o=n.value.lowerBound,c=n.value.upperBound,h=n.children[0];if(o>0){let a=i(n);a.value.lowerBound--,"$END"!=a.value.upperBound&&a.value.upperBound--;let o={type:s.CONCATENATION,value:",",children:[i(h),a],range:{start:a.range.start,end:a.range.end}};return t(e,r,o)}if("$END"!=c){let o=i(n);o.value.upperBound--;let u={type:s.CONCATENATION,value:",",children:[i(h),o],range:{start:o.range.start,end:o.range.end}};if(a){let n=[];n=0==c?n.concat([new P(null,h,[])]):n.concat(t(e,r,u));const s=new P(null,null,[]);return r.addEdge(s),n.push(s),n}{let n=[];const s=new P(null,null,[]);return r.addEdge(s),n.push(s),n=1==c?n.concat([new P(null,h,[])]):n.concat(t(e,r,u))}}if(a){let n=t(e,r,h);for(let t=0;t<n.length;t++){let e=n[t];e.target=r}const s=new P(null,null,[]);return r.addEdge(s),[s]}{const n=new P(null,null,[]);r.addEdge(n);let s=t(e,r,h);for(let t=0;t<s.length;t++){let e=s[t];e.target=r}return[n]}}if(n.type==s.GROUP){let s=e.newState();r.addEdge(new P(s,null,[]));const i=t(e,s,n.children[0]);return i}if(n.type==s.CAPTURE){let s=e.newState(),i={type:"start-capture",group:"$implicit"==n.value.group?s.id:n.value.group};r.addEdge(new P(s,null,[i]));const a=t(e,s,n.children[0]);for(let t=0;t<a.length;t++){let e=a[t];e.label.push({type:"end-capture",group:"$implicit"==n.value.group?s.id:n.value.group,start:i})}return a}if(n.type==s.ALTERNATION){const s=e.newState(),i=e.newState();r.addEdge(new P(s,null,[])),r.addEdge(new P(i,null,[]));const a=t(e,s,n.children[0]),o=t(e,i,n.children[1]);return a.concat(o)}if(n.type==s.INTERSECTION){const t=N(n.children[0]),s=N(n.children[1]),i=t.intersect(s),a=i.acceptingStates.slice();for(let t=0;t<i.startStates.length;t++)r.addEdge(new P(i.startStates[t],null,[]));let o=[];for(let t=0;t<a.length;t++){const r=a[t];e.markNonAccepting(r);for(let t=0;t<r.edges.length;t++)r.edges[t].target!=r||r.edges[t].formula||(r.edges[t].target=null,o.push(r.edges[t]))}return o}throw"Not yet implemented"}(e,e.startStates[0],t),n=e.newState();for(let t=0;t<r.length;t++){r[t].target=n}return e.markAccepting(n),e}const R=!1;class v{constructor(t){this.captureIdx=0}compileTree(t,e){if(t.type==s.GROUP)return this.compileTree(t.children[0],e);if(t.type==s.CAPTURE){const r=this.captureIdx,n="$implicit"==t.value.group?r:t.value.group,s={type:"start",group:n,captureID:r,index:e,source:t};this.captureIdx++;const i=this.compileTree(t.children[0],e+1),a={type:"end",group:n,captureID:r,index:e+1+i.length,source:t};return[s].concat(i).concat([a])}if(f(t))return[{type:"check",formula:t,index:e,source:t}];if(t.type==s.CONCATENATION){const r=e,n=this.compileTree(t.children[0],r),s=e+n.length,i=this.compileTree(t.children[1],s);return n.concat(i)}if(t.type==s.ALTERNATION){const r=e+1,n=this.compileTree(t.children[0],r),s=r+n.length+1,i=[{type:"split",left:r,right:s,index:e,source:t}],a=this.compileTree(t.children[1],s),o=[{type:"jump",target:s+a.length,index:r+n.length,source:t}];return i.concat(n).concat(o).concat(a)}if(t.type==s.INTERSECTION){const r=N(t.children[0]),n=N(t.children[1]),s=r.intersect(n);return this.compileSFA(s,e)}if(t.type==s.REPETITION){const r=t.value.greedy,n=t.value.lowerBound,s=t.children[0];let i=[];for(let t=0;t<n;t++){const t=this.compileTree(s,e);e+=t.length,i.push(...t)}if(t.value.upperBound!=u){const a=t.value.upperBound;let o=[],c=[];for(let t=n;t<a;t++){e+=1,c.push(e);const t=this.compileTree(s,e);e+=t.length,o.push(t)}let h=[];for(let n=0;n<o.length;n++)h.push({type:"split",left:r?c[n]:e,right:r?e:c[n],index:c[n]-1,source:t}),h.push(...o[n]);return i.concat(h)}{const n=e,a=n+1,o=this.compileTree(s,a),c=[{type:"jump",target:n,index:a+o.length,source:t}],h=a+o.length+1,u=[{type:"split",left:r?a:h,right:r?h:a,index:e,source:t}];return i.concat(u).concat(o).concat(c)}}throw new Error("Can't compile "+JSON.stringify(t))}compileSFA(t,e){let r={},n=[],s=[];for(let i=0;i<t.startStates.length;i++){const a=t.startStates[i],o=this.compileSFA_(a,e,r,n);s=s.concat(o),e+=o.length}for(let t=0;t<n.length;t++)n[t].target=e;return s}compileSFA_(t,e,r,n){if(t.id in r)return[{type:"jump",target:r[t.id],index:e,source:{type:"state",value:t.id}}];if(r[t.id]=e,0==t.edges.length){if(t.isAccepting){const r={type:"jump",target:null,index:e,source:{type:"state",value:t.id,children:[],range:{start:-1,end:-1}}};return n.push(r),[r]}throw new Error("Compiling an SFA state with no outgoing edges")}{let s=[];for(let i=0;i<t.edges.length-1;i++){const a=t.edges[i],o={type:"split",left:e+1,right:null,index:e,source:{type:"state",value:`${t.id}.${i}`,children:[],range:{start:-1,end:-1}}},c=[o].concat(this.compileSFA_edge(t,a,e+1,r,n));s=s.concat(c),e+=c.length,o.right=e}const i=t.edges[t.edges.length-1],a=this.compileSFA_edge(t,i,e,r,n);return s.concat(a)}}compileSFA_edge(t,e,r,n,s){const i=this.compileSFA_edgeLabel(t,e,r);if(r+=i.length,t.isAccepting&&e.target==t&&!e.formula){const n={type:"jump",target:null,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};return s.push(n),i.concat([n])}return e.formula?i.concat([{type:"check",formula:e.formula,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`}}]).concat(this.compileSFA_(e.target,r+1,n,s)):i.concat(this.compileSFA_(e.target,r,n,s))}compileSFA_edgeLabel(t,e,r){let n=[];for(let s=0;s<e.label.length;s++){const i=e.label[s];if("start-capture"==i.type){const s=this.captureIdx,a=i.group;i.captureID=s;const o={type:"start",group:a,captureID:s,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};this.captureIdx++,n.push(o),r++}else if("end-capture"==i.type){const s=i.start.captureID,a={type:"end",group:i.group,captureID:s,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};n.push(a),r++}}return n}compile(t,e=!1){if(!this.validateParseTree(t))throw new Error("Parse tree did not represent a valid program");T(),this.captureIdx=0;const r=[{type:"split",left:3,right:1,index:0,source:"root"},{type:"check",formula:{type:s.TRUE,value:!0,children:[],range:{start:0,end:0}},index:1,source:"root"},{type:"jump",target:0,index:2,source:"root"},{type:"start",group:"$root",captureID:-1,index:3,source:"root"}],n=this.compileTree(t,r.length),i=r.concat(n).concat([{type:"end",group:"$root",captureID:-1,index:r.length+n.length,source:"root"},{type:"match",index:r.length+n.length+1,source:"root"}]);if(!this.validateProgram(i))throw new Error("Error compiling tree "+JSON.stringify(t)+" into result "+JSON.stringify(i));if(!e)for(let t=0;t<i.length;t++)delete i[t].source,delete i[t].index;return i}validateParseTree(t){return!R||!this.anyCapturesInsidePropositions(t)}anyCapturesInsidePropositions(t){const e=f(t);for(let r=0;r<t.children.length;r++){const n=t.children[r];if(e&&n.type==s.CAPTURE)return console.log(`Can't put a capturing group inside of a propositional term: ${S(t)}!`),!0;if(this.anyCapturesInsidePropositions(n))return!0}return!1}validateProgram(t){if(!R)return!0;for(let e=0;e<t.length;e++){const r=t[e];if(r.index!==e)throw new Error(`Bad code generation:${r.index} != ${e} for ${x([r])} in ${x(t)}`)}const e=this.reachableInstructions(t,0,{});for(let r=0;r<t.length;r++)if(!e[r])throw new Error(`Bad code generation:${r} not reachable for ${x([t[r]])} in ${x(t)}`);return!0}reachableInstructions(t,e,r){if(e in r||e>=t.length)return r;r[e]=!0;const n=t[e];if("split"==n.type){let e=this.reachableInstructions(t,n.left,r);return this.reachableInstructions(t,n.right,e)}return"jump"==n.type?this.reachableInstructions(t,n.target,r):this.reachableInstructions(t,e+1,r)}}function I(t){const e=void 0===t.value?"":t.value.toString(),r=t.children&&t.children.length?t.children.map(t=>S(t)).join(","):"";return`${t.type}(${e},${r})`}function S(t){switch(t.type){case s.TRUE:return"true";case s.FALSE:return"false";case s.START:return"start";case s.END:return"end";case s.AND:return`${S(t.children[0])} & ${S(t.children[1])}`;case s.OR:return`${S(t.children[0])} | ${S(t.children[1])}`;case s.NOT:return`not ${S(t.children[0])}`;case s.GROUP:return`(${S(t.children[0])})`;case s.CAPTURE:return`$${t.value.captureID}:${t.value.group}(${S(t.children[0])})`;default:return I(t)}}function x(t){let e=[];for(let n=0;n<t.length;n++){const s=t[n];let i=`${n}:${s.type}`;switch(s.type){case"split":i+=` ${s.left} ${s.right}`;break;case"jump":i+=` ${s.target}`;break;case"check":i+=" "+S(s.formula);break;case"start":case"end":i+=` ${s.group} (${s.captureID})`;break;case"match":break;default:throw new Error("Unrecognized instruction "+s)}if(s.source){var r=s.source;"root"==r?i+="  \t\t(root)":"check"==s.type&&"range"in r?i+=`\t(ch. ${r.range.start}-${r.range.end})`:i+=`\t\t(${r.type} ${JSON.stringify(r.value)})`}e.push(i)}return e.join("\n")}class w{constructor(t,e,r=!1){this.context=e,this.spec=t;const n=new y(e.tokens),s=new v(e.tokens);if(this.parseResult=n.parse(t),this.parseResult.errors.length)throw new Error("Parsed with errors:"+JSON.stringify(this.parseResult.errors));this.program=s.compile(this.parseResult.tree,r)}get traceAPI(){return this.context.trace}get checkAPI(){return this.context.checks}check(t,e,r,n){switch(n.type){case s.TRUE:return!0;case s.FALSE:return!1;case s.START:return 0==r;case s.END:return this.traceAPI.isAtEnd(t);case s.AND:return this.check(t,e,r,n.children[0])&&this.check(t,e,r,n.children[1]);case s.OR:return this.check(t,e,r,n.children[0])||this.check(t,e,r,n.children[1]);case s.NOT:return!this.check(t,e,r,n.children[0]);case s.GROUP:return this.check(t,e,r,n.children[0]);default:if(this.checkAPI[n.type])return this.checkAPI[n.type](t,e,r,n);throw new Error("Unrecognized propositional formula")}}match(t,e=!1){return new F({spec:this,preserveStates:e},function(t){return{queue:new _,nextQueue:new _,threads:[],liveSet:new k((t,e)=>t==e,t=>t),maxThreadID:0,index:-1,pastEnd:!1,trace:t,matchQueue:new U(t=>t.priority),matchSet:new k(b,D),lastMatchPriority:0}}(t),void 0).next()}}class O{constructor(t,e,r,n){this.id=t,this.pc=e,this.priority=r,this.matches=n.map(function(t){let e=C(t);return e.priority=Math.max(r,t.priority),e})}equals(t){return this.pc==t.pc}hash(){return this.pc}mergeThread(t){for(let e=0;e<t.matches.length;e++){let r=!1;for(let n=0;n<this.matches.length;n++)if(b(this.matches[n],t.matches[e])){r=!0;break}if(!r){let r=C(t.matches[e]);r.priority=Math.max(this.priority,this.matches[e].priority),this.matches.push(r)}}}hasOpenMatch(){for(let t=0;t<this.matches.length;t++)if(this.matches[t].instructions.length>0)return!0;return!1}pushMatchInstruction(t){for(let e=0;e<this.matches.length;e++)this.matches[e].instructions.push(t)}terminate(){this.matches=[]}}class k{constructor(t,e,r=1e3){this.equiv=t,this.hash=e,this.coll=new Array(r),this.length=0}bucketFind(t,e){for(let r=0;r<t.length;r++)if(this.equiv?this.equiv(t[r].key,e):t[r].key==e)return t[r].val}push(t,e){const r=this.hash(t)%this.coll.length;let n=this.coll[r];if(n){if(void 0!==this.bucketFind(n,t))return!1;n.push({key:t,val:e})}else this.coll[r]=[{key:t,val:e}];return this.length++,!0}get(t){if(0==this.length)return;const e=this.hash(t)%this.coll.length;let r=this.coll[e];return r?this.bucketFind(r,t):void 0}clear(){for(let t=0;t<this.coll.length;t++)this.coll[t]=[];this.length=0}contains(t){if(0==this.length)return!1;const e=this.hash(t)%this.coll.length;let r=this.coll[e];return!!r&&void 0!==this.bucketFind(r,t)}}function $(t,e){return t+=0|e,t+=t<<10|0,t^=t>>6|0,t+=e>>8|0,t+=t<<10|0,t^=t>>6|0,t+=e>>16|0,t+=t<<10|0,t^=t>>6|0,t+=e>>24|0,t+=t<<10|0,t^=t>>6|0}const b=function(t,e){if(t.instructions.length!=e.instructions.length)return!1;for(let r=0;r<t.instructions.length;r++){const n=t.instructions[r],s=e.instructions[r];if(n.type!=s.type||n.index!=s.index||n.group!=s.group)return!1}return!0},D=function(t){return function(...t){let e=0;for(let r=0;r<t.length;r++)e=$(e,t[r]);return function(t){return t+=t<<3|0,t^=t>>11|0,t+=t<<15|0}(e)}(t.instructions.length)};function C(t){return{priority:t.priority,instructions:t.instructions.slice()}}class _{constructor(){this.array=[],this.length=0}push(t){this.array[this.length]=t,this.length++}clear(){this.length=0}get first(){if(0!=this.length)return this.array[0]}get(t){if(!(t<0||t>=this.length))return this.array[t]}}class U{constructor(t,e,r){this.queues=[],this.priorityFunction=t,this.length=0,this.lowestPriority=1/0,this.highestPriority=-1/0,this.members=e&&r?new k(e,r):void 0,this.clear()}push(t){const e=this.priorityFunction(t);if(this.members){if(this.members.contains(t))return!1;this.members.push(t,!0)}return e in this.queues?this.queues[e].push(t):this.queues[e]=[t],e<this.lowestPriority&&(this.lowestPriority=e),e>this.highestPriority&&(this.highestPriority=e),this.length++,!0}shift(){if(this.lowestPriority>=1/0||0==this.length)return;const t=this.queues[this.lowestPriority],e=t.pop();if(0==t.length)if(delete this.queues[this.lowestPriority],this.highestPriority<=this.lowestPriority)this.lowestPriority=1/0,this.highestPriority=-1/0;else for(;!this.queues[this.lowestPriority]&&this.lowestPriority<this.highestPriority;)this.lowestPriority++;return this.length--,e}get first(){if(0!=this.length)return this.queues[this.lowestPriority][0]}clear(){this.queues=[],this.lowestPriority=1/0,this.highestPriority=-1/0,this.length=0,this.members&&this.members.clear()}}const q=100;class F{constructor(t,e,r){if(this.config=t,this.state=e,-1==this.state.index){this.state.trace=this.config.spec.traceAPI.start(this.state.trace);let t=new O(0,0,0,[{priority:0,instructions:[]}]);this.enqueueThread(t);const e=this.state.queue;this.state.queue=this.state.nextQueue,this.state.nextQueue=e,this.state.liveSet.clear(),this.state.matchSet.clear(),this.state.index=0}this.match=r}get start(){return this.match?this.match.start:-1}get end(){return this.match?this.match.end:-1}get states(){return this.match?this.match.states:void 0}get subgroups(){return this.match?this.match.subgroups:void 0}hasReadyMatch(){return!!this.state.matchQueue.length&&(!this.state.queue.length||this.state.matchQueue.first.priority<=this.state.queue.first.priority)}enqueueThread(t){const e=this.config.spec.program[t.pc];switch(e.type){case"jump":return t.pc=e.target,void this.enqueueThread(t);case"split":this.state.maxThreadID++,t.pc=e.left;const r=new O(this.state.maxThreadID,e.right,t.priority+1,t.matches);return this.enqueueThread(t),void this.enqueueThread(r);case"start":return t.pushMatchInstruction({type:"start",index:this.state.index+1,group:e.group,groupIndex:e.captureID}),t.pc++,void this.enqueueThread(t);case"end":return t.pushMatchInstruction({type:"end",index:this.state.index+1,group:e.group,groupIndex:e.captureID}),t.pc++,void this.enqueueThread(t);case"match":for(let e=0;e<t.matches.length;e++)t.matches[e].priority>=t.priority&&this.state.matchSet.push(t.matches[e],!0)&&this.state.matchQueue.push(t.matches[e]);return void t.terminate();case"check":const n=t.hash();let s=this.state,i=s.liveSet.get(n);if(i){if(i.index!=s.index)i.index=s.index,i.threads.clear(),i.threads.push(t);else for(let e=0;e<i.threads.length;e++)if(i.threads.get(e).equals(t))return i.threads.get(e).mergeThread(t),void t.terminate()}else{let e=new _;e.push(t),s.liveSet.push(n,{index:s.index,threads:e})}return void s.nextQueue.push(t);default:throw new Error("Unrecognized instruction type ${instr.type}")}}prettifyMatch(t){let e=[],r={};for(let n=0;n<t.instructions.length;n++){const s=t.instructions[n];switch(s.type){case"start":let t={group:s.group,groupIndex:s.groupIndex,start:s.index,end:1/0,states:void 0};if(this.config.preserveStates&&(t.states=[]),e.push(t),r[t.group])throw new Error("Duplicate capture group");r[t.group]=t;break;case"state":let n=Object.getOwnPropertyNames(r);for(let t=0;t<n.length;t++){r[n[t]].states.push(s.state)}break;case"end":r[s.group].end=s.index,delete r[s.group]}}let n=Object.getOwnPropertyNames(r);if(n.length)throw new Error(`Open capture groups: ${n.join(",")}`);let s=e.shift(),i={start:s.start,end:s.end,subgroups:e.filter(t=>t.start!=t.end),states:void 0};return this.config.preserveStates&&(i.states=s.states),i}next(){if(!this.state)throw new Error("Don't call next() on the same PlayspecResult twice!");for(;!this.hasReadyMatch()&&this.state.queue.length;){const t=this.config.spec.traceAPI.currentState(this.state.trace);let e=void 0;const r=this.state.queue.length;let n=0;for(let s=0;s<this.state.queue.length;s++){if(s>=r)throw new Error("The thread queue should never grow during a single trace state!");let i=this.state.queue.get(s);if(i.priority<n)throw new Error("Decreasing priority!");const a=this.config.spec.program[i.pc];switch(a.type){case"check":this.config.spec.check(this.state.trace,t,this.state.index,a.formula)?(i.pc++,i.hasOpenMatch&&this.config.preserveStates&&(e||(e=this.config.spec.traceAPI.copyCurrentState?this.config.spec.traceAPI.copyCurrentState(this.state.trace):t),i.pushMatchInstruction({type:"state",index:this.state.index,state:e})),this.enqueueThread(i)):i.terminate();break;default:throw new Error("Thread should be parked on a check.")}}let s=this.state.queue;if(this.state.queue=this.state.nextQueue,s.clear(),this.state.nextQueue=s,this.state.index%q==0&&this.state.liveSet.clear(),this.state.matchSet.clear(),this.config.spec.traceAPI.isAtEnd(this.state.trace)){this.config.spec.traceAPI.isStreaming&&this.config.spec.traceAPI.isStreaming(this.state.trace)||this.state.queue.clear();break}this.config.spec.traceAPI.advanceState(this.state.trace),this.state.index++}if(this.hasReadyMatch()){const t=this.state.matchQueue.shift();if(this.state.lastMatchPriority>t.priority)throw new Error("Matches popped out of order!");this.state.lastMatchPriority=t.priority;const e=this.prettifyMatch(t),r=this.state;return this.state=void 0,new F(this.config,r,e)}if(this.config.spec.traceAPI.isStreaming&&this.config.spec.traceAPI.isStreaming(this.state.trace)){const t=this.state;return this.state=void 0,new F(this.config,t,void 0)}return this.state=void 0,null}}r.d(e,"tokenTypes",function(){return n}),r.d(e,"parseTypes",function(){return s}),r.d(e,"cloneTree",function(){return i}),r.d(e,"constantValue",function(){return a}),r.d(e,"parseValue",function(){return o}),r.d(e,"parseInfixR",function(){return c}),r.d(e,"parseInfixRPropositional",function(){return h}),r.d(e,"BOUND_INFINITE",function(){return u}),r.d(e,"standardTokens",function(){return l}),r.d(e,"isCustom",function(){return g}),r.d(e,"isPropositional",function(){return f}),r.d(e,"Parser",function(){return y}),r.d(e,"Compiler",function(){return v}),r.d(e,"stringifyCustom",function(){return I}),r.d(e,"stringifyFormula",function(){return S}),r.d(e,"stringify",function(){return x}),r.d(e,"Playspec",function(){return w}),r.d(e,"SFA",function(){return E}),r.d(e,"fromParseTree",function(){return N}),r.d(e,"resetStateID",function(){return T})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QbGF5c3BlY3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vUGxheXNwZWNzLy4vc3JjL3BhcnNlci50cyIsIndlYnBhY2s6Ly9QbGF5c3BlY3MvLi9zcmMvc2ZhLnRzIiwid2VicGFjazovL1BsYXlzcGVjcy8uL3NyYy9jb21waWxlci50cyIsIndlYnBhY2s6Ly9QbGF5c3BlY3MvLi9zcmMvcGxheXNwZWMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRva2VuVHlwZXMiLCJXSElURVNQQUNFIiwiQ09OQ0FURU5BVElPTiIsIkRPVFNfR1JFRURZIiwiRE9UU19SRUxVQ1RBTlQiLCJET1RTX09NRUdBIiwiTEVGVF9QQVJFTiIsIlJJR0hUX1BBUkVOIiwiQ0FQVFVSSU5HX0xFRlRfUEFSRU4iLCJBTFRFUk5BVElPTiIsIklOVEVSU0VDVElPTiIsIkFORCIsIk9SIiwiTk9UIiwiU1RBUlQiLCJFTkQiLCJUUlVFIiwiRkFMU0UiLCJFUlJPUiIsInBhcnNlVHlwZXMiLCJPTUVHQSIsIlJFUEVUSVRJT04iLCJDQVBUVVJFIiwiR1JPVVAiLCJjbG9uZVRyZWUiLCJ0eXBlIiwiY2hpbGRyZW4iLCJzbGljZSIsInJhbmdlIiwic3RhcnQiLCJlbmQiLCJjb25zdGFudFZhbHVlIiwiX21yIiwicGFyc2VWYWx1ZSIsInBhcnNlciIsInRva2VuIiwibm9kZSIsInBhcnNlSW5maXhSIiwibGVmdCIsInB1c2giLCJwYXJzZUV4cHJlc3Npb24iLCJ0aWdodG5lc3MiLCJwYXJzZUluZml4UlByb3Bvc2l0aW9uYWwiLCJpc1Byb3Bvc2l0aW9uYWwiLCJlcnJvciIsInJpZ2h0IiwiQk9VTkRfSU5GSU5JVEUiLCJzdGFuZGFyZFRva2VucyIsIm1hdGNoIiwiZXh0ZW5kUGFyc2UiLCJtYXRjaFJlc3VsdCIsImdyZWVkeSIsImxvd2VyQm91bmQiLCJwYXJzZUludCIsInVwcGVyQm91bmQiLCJzdGFydFBhcnNlIiwidHJ1ZVBoaSIsImV4cHIiLCJjdXJyZW50VG9rZW4iLCJhZHZhbmNlIiwiZ3JvdXAiLCJwaGkiLCJjdXN0b21UaWdodG5lc3NPZmZzZXQiLCJpc0N1c3RvbSIsImsiLCJldmVyeSIsIlBhcnNlciIsIltvYmplY3QgT2JqZWN0XSIsImNvbnRleHRUb2tlbnMiLCJ0aGlzIiwidG9rZW5EZWZpbml0aW9ucyIsInRva2Vuc0J5VHlwZSIsInBhcnNlRXJyb3JzIiwiY3VzdG9tVG9rZW5zIiwidG9rZW5zIiwiY29uY2F0IiwidGkiLCJsZW5ndGgiLCJpbnB1dCIsImRlZm4iLCJSZWdFeHAiLCJtciIsInBhcnNlVHJlZSIsInJlc2V0U3RyZWFtIiwibXNnIiwidHJlZSIsImVyciIsIm1lc3NhZ2UiLCJzdHIiLCJyZXN1bHQiLCJlcnJvcnMiLCJzdWJzdHJpbmciLCJpbmRleCIsInRva2VuRGVmaW5pdGlvbiIsImV4ZWNSZXN1bHQiLCJleGVjIiwiQXJyYXkiLCJpc0FycmF5IiwibWkiLCJjYW5kaWRhdGUiLCJzdWJzdHIiLCJtYXRjaExlbmd0aCIsIm9sZEluZGV4Iiwic3RyaW5nIiwicG9zaXRpb24iLCJzdHJlYW0iLCJjaGFyUG9zaXRpb24iLCJ0b2tlbml6ZSIsInJlbWFpbmRlciIsInRva2VuRGVmIiwibmV3VHJlZSIsInN0YXRlSUQiLCJyZXNldFN0YXRlSUQiLCJzZmFfU0ZBIiwic3RhcnRTdGF0ZXMiLCJTdGF0ZSIsImFjY2VwdGluZ1N0YXRlcyIsIm9wdElEIiwiaW5kZXhPZiIsImFkZEVkZ2UiLCJFZGdlIiwiaXNBY2NlcHRpbmciLCJzcGxpY2UiLCJmb3VuZCIsInN0YWNrIiwiaGVyZSIsInBvcCIsImlkIiwiZWsiLCJlZGdlcyIsImUiLCJ0YXJnZXQiLCJrZXlzIiwibWFwIiwiZ2V0U3RhdGVzIiwiZm9ybXVsYSIsInN0cmluZ2lmeUZvcm11bGEiLCJsYWJlbCIsImpvaW4iLCJzZWVuIiwic2siLCJyZWFjaGFibGUiLCJuZXdFcyIsInRlIiwicmsiLCJiIiwiZWVsaW0iLCJhIiwiYXhiIiwic3RhdGVzIiwic2EiLCJqIiwic2IiLCJzYXNiIiwibmV3U3RhdGUiLCJtYXJrQWNjZXB0aW5nIiwic2FiIiwiYWUiLCJhZXQiLCJhZUlzQWNjZXB0aW5nU2VsZkVkZ2UiLCJiZSIsImJldCIsImNvbnNvbGUiLCJwMSIsInAyIiwiY29tYmluZWQiLCJ0b1N0cmluZyIsImZyb21QYXJzZVRyZWUiLCJzZmEiLCJvdXRFZGdlcyIsImJ1aWxkIiwic2VlZFN0YXRlIiwiYWVzIiwibWluIiwibWF4IiwiY2xvbmVkIiwibmV4dCIsIm91dCIsImVzIiwiY2FwdHVyZVN0YXJ0IiwiYmVzIiwiaW50ZXJzZWN0Iiwib2xkQWNjZXB0aW5nIiwic3RhcnRrIiwiYWNjayIsImFjYyIsIm1hcmtOb25BY2NlcHRpbmciLCJlaSIsInRlcm1pbnVzIiwiREVCVUdfTU9ERSIsImNvbXBpbGVyX0NvbXBpbGVyIiwiX3Rva2VuRGVmcyIsImNhcHR1cmVJZHgiLCJpZHgiLCJjb21waWxlVHJlZSIsImNhcHR1cmVJRCIsInNvdXJjZSIsImFJZHgiLCJiSWR4IiwiYnJhbmNoIiwianVtcCIsImNvbXBpbGVTRkEiLCJwcmVmYWNlIiwicGhpUGdtIiwib3B0aW9uYWxzIiwidGFyZ2V0cyIsInJlcGV0aXRpb24iLCJjSWR4IiwiRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdGVTdGFydHMiLCJlbmRKdW1wcyIsInBnbSIsInN0YXJ0UGdtIiwiY29tcGlsZVNGQV8iLCJzdGF0ZSIsImVkZ2UiLCJlZGdlU3BsaXQiLCJlZGdlUGdtIiwiY29tcGlsZVNGQV9lZGdlIiwiY29tcGlsZVNGQV9lZGdlTGFiZWwiLCJkZWJ1ZyIsInZhbGlkYXRlUGFyc2VUcmVlIiwiYm9keSIsInZhbGlkYXRlUHJvZ3JhbSIsImFueUNhcHR1cmVzSW5zaWRlUHJvcG9zaXRpb25zIiwicGFyZW50IiwicHJvcCIsImNpIiwiY2hpbGQiLCJsb2ciLCJpbnN0ciIsInJlYWNoYWJsZUluc3RydWN0aW9ucyIsImkwIiwib3RoZXIiLCJzZWVuTGVmdCIsInN0cmluZ2lmeUN1c3RvbSIsInVuZGVmaW5lZCIsImNvZGUiLCJpbnN0clN0ciIsInNyYyIsInBsYXlzcGVjX1BsYXlzcGVjIiwic3BlYyIsImNvbnRleHQiLCJjb21waWxlciIsInBhcnNlUmVzdWx0IiwicGFyc2UiLCJwcm9ncmFtIiwiY29tcGlsZSIsInRyYWNlQVBJIiwidHJhY2UiLCJjaGVja0FQSSIsImNoZWNrcyIsImlzQXRFbmQiLCJjaGVjayIsInByZXNlcnZlU3RhdGVzIiwiUGxheXNwZWNSZXN1bHQiLCJxdWV1ZSIsIk5vblNocmlua2luZ0FycmF5IiwibmV4dFF1ZXVlIiwidGhyZWFkcyIsImxpdmVTZXQiLCJOb25SZXBsYWNpbmdIYXNoTWFwIiwibWF4VGhyZWFkSUQiLCJwYXN0RW5kIiwibWF0Y2hRdWV1ZSIsIlByaW9yaXR5UXVldWUiLCJwcmlvcml0eSIsIm1hdGNoU2V0IiwibWF0Y2hFcXVpdkZuIiwibWF0Y2hIYXNoRm4iLCJsYXN0TWF0Y2hQcmlvcml0eSIsInBsYXlzcGVjUmVzdWx0U3RhdGVJbml0IiwiVGhyZWFkIiwicGMiLCJtYXRjaGVzIiwibTIiLCJjbG9uZU1hdGNoIiwiTWF0aCIsInQyIiwiaW5zdHJ1Y3Rpb25zIiwiZXF1aXZGbiIsImhhc2hGbiIsImJ1Y2tldENvdW50IiwiZXF1aXYiLCJoYXNoIiwiY29sbCIsImJ1Y2tldCIsIm9iaiIsImtleSIsInZhbCIsImhhc2hDb2RlIiwiYnVja2V0RmluZCIsImhhc2hJbnQiLCJoIiwiaW50MzIiLCJpbnNBIiwiaW5zQiIsIm51bWJlcnMiLCJmaW5hbGl6ZUhhc2giLCJoYXNoTnVtYmVycyIsImFycmF5IiwiZmlyc3QiLCJwZm4iLCJxdWV1ZXMiLCJwcmlvcml0eUZ1bmN0aW9uIiwibG93ZXN0UHJpb3JpdHkiLCJJbmZpbml0eSIsImhpZ2hlc3RQcmlvcml0eSIsIm1lbWJlcnMiLCJjbGVhciIsImNvbnRhaW5zIiwicSIsIkxJVkVTRVRfQ0xFQVJfSU5URVJWQUwiLCJjb25maWciLCJpbml0VGhyZWFkIiwiZW5xdWV1ZVRocmVhZCIsInRlbXAiLCJzdWJncm91cHMiLCJ0aHJlYWQiLCJ0aHJlYWQyIiwicHVzaE1hdGNoSW5zdHJ1Y3Rpb24iLCJncm91cEluZGV4IiwidGVybWluYXRlIiwibGl2ZSIsImVxdWFscyIsIm1lcmdlVGhyZWFkIiwidGhyZWFkTGlzdCIsImdyb3VwcyIsImxpdmVHcm91cHMiLCJuZXdHIiwib3Blbkdyb3VwcyIsImdldE93blByb3BlcnR5TmFtZXMiLCJnaSIsInJvb3RHcm91cCIsInNoaWZ0Iiwicm9vdE1hdGNoIiwiZmlsdGVyIiwiaGFzUmVhZHlNYXRjaCIsImN1cnJlbnRTdGF0ZSIsImNvcGllZFN0YXRlIiwibGltaXQiLCJsYXN0UHJpb3JpdHkiLCJ0IiwiaGFzT3Blbk1hdGNoIiwiY29weUN1cnJlbnRTdGF0ZSIsImlzU3RyZWFtaW5nIiwiYWR2YW5jZVN0YXRlIiwicHJldHR5TWF0Y2giLCJwcmV0dGlmeU1hdGNoIiwibmV4dFN0YXRlIl0sIm1hcHBpbmdzIjoiMEJBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQTJDQSxPQXRDQUYsRUFBQVEsRUFBQUYsRUFH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ckMsTUFBTSxJQUFJNUQsTUFBTSxnQ0FFcEIzSSxLQUFLbUosTUFBTXdELGtCQUFvQmhPLEVBQU00TixTQUNyQyxNQUFNaUYsRUFBY3hSLEtBQUt5UixjQUFjOVMsR0FDakMrUyxFQUFZMVIsS0FBS21KLE1BRXZCLE9BREFuSixLQUFLbUosV0FBUXNCLEVBQ04sSUFBSW1CLEVBQ1A1TCxLQUFLc1AsT0FDTG9DLEVBQ0FGLEdBR1IsR0FBSXhSLEtBQUtzUCxPQUFPeEUsS0FBS08sU0FBU2lHLGFBQzFCdFIsS0FBS3NQLE9BQU94RSxLQUFLTyxTQUFTaUcsWUFBWXRSLEtBQUttSixNQUFNbUMsT0FBUSxDQUN6RCxNQUFNb0csRUFBWTFSLEtBQUttSixNQUV2QixPQURBbkosS0FBS21KLFdBQVFzQixFQUNOLElBQUltQixFQUNQNUwsS0FBS3NQLE9BQ0xvQyxPQUNBakgsR0FLUixPQURBekssS0FBS21KLFdBQVFzQixFQUNOIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBUb2tlbkRlZmluaXRpb24sIFRva2VuLCBQYXJzZVRyZWUsIE1hdGNoUmVzdWx0LCBJUGFyc2VyIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IHRva2VuVHlwZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgV0hJVEVTUEFDRTogXCIgXCIsXG4gICAgQ09OQ0FURU5BVElPTjogXCIsXCIsXG4gICAgLy8gQm91bmRpbmcgaW50ZWdlcnMgYXJlIHRva2VuaXplZCBhcyBwYXJ0IG9mIHRoZSBkb3RzIHRvIG1pbmltaXplIHBvdGVudGlhbCBjb25mbGljdHMgd2l0aCB1c2VyLXByb3ZpZGVkIHN5bnRheC5cbiAgICBET1RTX0dSRUVEWTogXCIuLi5cIixcbiAgICBET1RTX1JFTFVDVEFOVDogXCIuLlwiLFxuICAgIERPVFNfT01FR0E6IFwiKioqXCIsXG4gICAgTEVGVF9QQVJFTjogXCIoXCIsXG4gICAgUklHSFRfUEFSRU46IFwiKVwiLFxuICAgIENBUFRVUklOR19MRUZUX1BBUkVOOiBcIiQoXCIsXG4gICAgQUxURVJOQVRJT046IFwiO1wiLFxuICAgIElOVEVSU0VDVElPTjogXCJeXCIsXG4gICAgQU5EOiBcIiZcIixcbiAgICBPUjogXCJ8XCIsXG4gICAgTk9UOiBcIm5vdFwiLFxuICAgIFNUQVJUOiBcInN0YXJ0XCIsXG4gICAgRU5EOiBcImVuZFwiLFxuICAgIFRSVUU6IFwidHJ1ZVwiLFxuICAgIEZBTFNFOiBcImZhbHNlXCIsXG4gICAgRVJST1I6IFwiZXJyb3JcIlxufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlVHlwZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgT01FR0E6IHRva2VuVHlwZXMuRE9UU19PTUVHQSxcbiAgICBSRVBFVElUSU9OOiB0b2tlblR5cGVzLkRPVFNfR1JFRURZLFxuICAgIENPTkNBVEVOQVRJT046IHRva2VuVHlwZXMuQ09OQ0FURU5BVElPTixcbiAgICBDQVBUVVJFOiBcIiQoXCIsXG4gICAgR1JPVVA6IHRva2VuVHlwZXMuTEVGVF9QQVJFTixcbiAgICBBTFRFUk5BVElPTjogdG9rZW5UeXBlcy5BTFRFUk5BVElPTixcbiAgICBJTlRFUlNFQ1RJT046IHRva2VuVHlwZXMuSU5URVJTRUNUSU9OLFxuICAgIEFORDogdG9rZW5UeXBlcy5BTkQsXG4gICAgT1I6IHRva2VuVHlwZXMuT1IsXG4gICAgTk9UOiB0b2tlblR5cGVzLk5PVCxcbiAgICBTVEFSVDogdG9rZW5UeXBlcy5TVEFSVCxcbiAgICBFTkQ6IHRva2VuVHlwZXMuRU5ELFxuICAgIFRSVUU6IHRva2VuVHlwZXMuVFJVRSxcbiAgICBGQUxTRTogdG9rZW5UeXBlcy5GQUxTRSxcbiAgICBFUlJPUjogdG9rZW5UeXBlcy5FUlJPUlxufTtcblxuXG5leHBvcnQgdHlwZSBUb2tlblN0cmVhbSA9IHtcbiAgICBzdHJpbmc6IHN0cmluZyxcbiAgICB0b2tlbnM6IEFycmF5PFRva2VuPixcbiAgICBwb3NpdGlvbjogbnVtYmVyLFxuICAgIGVycm9yczogQXJyYXk8bnVtYmVyPlxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsb25lVHJlZShwOiBQYXJzZVRyZWUpOiBQYXJzZVRyZWUge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IHAudHlwZSxcbiAgICAgICAgdmFsdWU6IHAudmFsdWUsXG4gICAgICAgIGNoaWxkcmVuOiBwLmNoaWxkcmVuLnNsaWNlKCksXG4gICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICBzdGFydDogcC5yYW5nZS5zdGFydCxcbiAgICAgICAgICAgIGVuZDogcC5yYW5nZS5lbmRcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCBjb25zdCBjb25zdGFudFZhbHVlID0gZnVuY3Rpb24gKGM6IGFueSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoX21yOiBNYXRjaFJlc3VsdCkge1xuICAgICAgICByZXR1cm4gYztcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgcGFyc2VWYWx1ZSA9IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbikge1xuICAgIHJldHVybiBwYXJzZXIubm9kZSh0b2tlbi50eXBlLCB0b2tlbi52YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgcGFyc2VJbmZpeFIgPSBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCBsZWZ0OiBQYXJzZVRyZWUsIHRva2VuOiBUb2tlbikge1xuICAgIGxldCBjaGlsZHJlbiA9IFtsZWZ0XTtcbiAgICBjaGlsZHJlbi5wdXNoKHBhcnNlci5wYXJzZUV4cHJlc3Npb24odG9rZW4udGlnaHRuZXNzIC0gMSkpO1xuICAgIHJldHVybiBwYXJzZXIubm9kZSh0b2tlbi50eXBlLCB0b2tlbi52YWx1ZSwgY2hpbGRyZW4pO1xufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlSW5maXhSUHJvcG9zaXRpb25hbCA9IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIGxlZnQ6IFBhcnNlVHJlZSwgdG9rZW46IFRva2VuKSB7XG4gICAgaWYgKCFpc1Byb3Bvc2l0aW9uYWwobGVmdCkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlci5lcnJvcihcIkxlZnQgaGFuZCBzaWRlIG9mIHRva2VuIG11c3QgYmUgcHJvcG9zaXRpb25hbFwiLCB0b2tlbiwgbGVmdCk7XG4gICAgfVxuICAgIGxldCBjaGlsZHJlbiA9IFtsZWZ0XTtcbiAgICBjb25zdCByaWdodCA9IHBhcnNlci5wYXJzZUV4cHJlc3Npb24odG9rZW4udGlnaHRuZXNzIC0gMSk7XG4gICAgaWYgKCFpc1Byb3Bvc2l0aW9uYWwocmlnaHQpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJSaWdodCBoYW5kIHNpZGUgb2YgdG9rZW4gbXVzdCBiZSBwcm9wb3NpdGlvbmFsXCIsIHRva2VuLCByaWdodCk7XG4gICAgfVxuICAgIGNoaWxkcmVuLnB1c2gocmlnaHQpO1xuICAgIHJldHVybiBwYXJzZXIubm9kZSh0b2tlbi50eXBlLCB0b2tlbi52YWx1ZSwgY2hpbGRyZW4pO1xufTtcblxuZXhwb3J0IGNvbnN0IEJPVU5EX0lORklOSVRFID0gXCIkRU5EXCI7XG5cbmV4cG9ydCBjb25zdCBzdGFuZGFyZFRva2VuczogQXJyYXk8VG9rZW5EZWZpbml0aW9uPiA9IFtcbiAgICB7XG4gICAgICAgIFwidHlwZVwiOiB0b2tlblR5cGVzLldISVRFU1BBQ0UsXG4gICAgICAgIG1hdGNoOiAvXlxccysvXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuQ09OQ0FURU5BVElPTixcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkNPTkNBVEVOQVRJT05dLFxuICAgICAgICB0aWdodG5lc3M6IDEwMCxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IHBhcnNlSW5maXhSXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuRE9UU19HUkVFRFksXG4gICAgICAgIG1hdGNoOiAvXihbMC05XSopXFxzKlxcLlxcLlxcLlxccyooWzAtOV0qKS8sXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiAobWF0Y2hSZXN1bHQ6IE1hdGNoUmVzdWx0KTogYW55IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ3JlZWR5OiB0cnVlLFxuICAgICAgICAgICAgICAgIGxvd2VyQm91bmQ6IG1hdGNoUmVzdWx0WzFdID8gcGFyc2VJbnQobWF0Y2hSZXN1bHRbMV0pIDogMCxcbiAgICAgICAgICAgICAgICB1cHBlckJvdW5kOiBtYXRjaFJlc3VsdFsyXSA/IHBhcnNlSW50KG1hdGNoUmVzdWx0WzJdKSA6IEJPVU5EX0lORklOSVRFXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICB0aWdodG5lc3M6IDExMCxcbiAgICAgICAgc3RhcnRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIGNvbnN0IHRydWVQaGkgPSBwYXJzZXIubm9kZShwYXJzZVR5cGVzLlRSVUUsIHRydWUpO1xuICAgICAgICAgICAgdHJ1ZVBoaS5yYW5nZS5zdGFydCA9IHRva2VuLnJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgdHJ1ZVBoaS5yYW5nZS5lbmQgPSB0b2tlbi5yYW5nZS5zdGFydDtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZShwYXJzZVR5cGVzLlJFUEVUSVRJT04sIHRva2VuLnZhbHVlLCBbdHJ1ZVBoaV0pO1xuICAgICAgICB9LFxuICAgICAgICBleHRlbmRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgbGVmdDogUGFyc2VUcmVlLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuUkVQRVRJVElPTiwgdG9rZW4udmFsdWUsIFtsZWZ0XSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5ET1RTX1JFTFVDVEFOVCxcbiAgICAgICAgbWF0Y2g6IC9eKFswLTldKilcXHMqXFwuXFwuXFxzKihbMC05XSopLyxcbiAgICAgICAgdGlnaHRuZXNzOiAxMTAsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiAobWF0Y2hSZXN1bHQ6IE1hdGNoUmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGdyZWVkeTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbG93ZXJCb3VuZDogbWF0Y2hSZXN1bHRbMV0gPyBwYXJzZUludChtYXRjaFJlc3VsdFsxXSkgOiAwLFxuICAgICAgICAgICAgICAgIHVwcGVyQm91bmQ6IG1hdGNoUmVzdWx0WzJdID8gcGFyc2VJbnQobWF0Y2hSZXN1bHRbMl0pIDogQk9VTkRfSU5GSU5JVEVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJ0UGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICBjb25zdCB0cnVlUGhpID0gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5UUlVFLCB0cnVlKTtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2Uuc3RhcnQgPSB0b2tlbi5yYW5nZS5zdGFydDtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2UuZW5kID0gdG9rZW4ucmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5SRVBFVElUSU9OLCB0b2tlbi52YWx1ZSwgW3RydWVQaGldKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIGxlZnQ6IFBhcnNlVHJlZSwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZShwYXJzZVR5cGVzLlJFUEVUSVRJT04sIHRva2VuLnZhbHVlLCBbbGVmdF0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuRE9UU19PTUVHQSxcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkRPVFNfT01FR0FdLFxuICAgICAgICB0aWdodG5lc3M6IDExMCxcbiAgICAgICAgc3RhcnRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIGNvbnN0IHRydWVQaGkgPSBwYXJzZXIubm9kZShwYXJzZVR5cGVzLlRSVUUsIHRydWUpO1xuICAgICAgICAgICAgdHJ1ZVBoaS5yYW5nZS5zdGFydCA9IHRva2VuLnJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgdHJ1ZVBoaS5yYW5nZS5lbmQgPSB0b2tlbi5yYW5nZS5lbmQ7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5PTUVHQSwgdG9rZW4udmFsdWUsIFt0cnVlUGhpXSk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4dGVuZFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCBsZWZ0OiBQYXJzZVRyZWUsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5PTUVHQSwgdG9rZW4udmFsdWUsIFtsZWZ0XSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5MRUZUX1BBUkVOLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuTEVGVF9QQVJFTl0sXG4gICAgICAgIHN0YXJ0UGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICAvL3BhcnNlIGFuIGV4cHJlc3Npb24gYXQgUkJQIDAsIHRoZW4gZWF0IGEgKVxuICAgICAgICAgICAgY29uc3QgZXhwciA9IHBhcnNlci5wYXJzZUV4cHJlc3Npb24oMCk7XG4gICAgICAgICAgICBpZiAocGFyc2VyLmN1cnJlbnRUb2tlbigpLnR5cGUgIT0gdG9rZW5UeXBlcy5SSUdIVF9QQVJFTikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJNaXNzaW5nIHJpZ2h0IHBhcmVudGhlc2lzXCIsIHRva2VuLCBleHByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci5hZHZhbmNlKCk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5HUk9VUCwgdG9rZW4udmFsdWUsIFtleHByXSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5SSUdIVF9QQVJFTixcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLlJJR0hUX1BBUkVOXVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkNBUFRVUklOR19MRUZUX1BBUkVOLFxuICAgICAgICBtYXRjaDogL15cXCQoW0Etel9dW0Etel8wLTldKik/XFwoLyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChtYXRjaFJlc3VsdDogTWF0Y2hSZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ3JvdXA6IG1hdGNoUmVzdWx0WzFdIHx8IFwiJGltcGxpY2l0XCJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXJ0UGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICAvL3BhcnNlIGFuIGV4cHJlc3Npb24gYXQgUkJQIDAsIHRoZW4gZWF0IGEgKVxuICAgICAgICAgICAgY29uc3QgZXhwciA9IHBhcnNlci5wYXJzZUV4cHJlc3Npb24oMCk7XG4gICAgICAgICAgICBpZiAocGFyc2VyLmN1cnJlbnRUb2tlbigpLnR5cGUgIT0gdG9rZW5UeXBlcy5SSUdIVF9QQVJFTikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJNaXNzaW5nIHJpZ2h0IHBhcmVudGhlc2lzXCIsIHRva2VuLCBleHByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci5hZHZhbmNlKCk7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5DQVBUVVJFLCB0b2tlbi52YWx1ZSwgW2V4cHJdKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkFMVEVSTkFUSU9OLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuQUxURVJOQVRJT05dLFxuICAgICAgICB0aWdodG5lc3M6IDYwLFxuICAgICAgICBleHRlbmRQYXJzZTogcGFyc2VJbmZpeFJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5JTlRFUlNFQ1RJT04sXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5JTlRFUlNFQ1RJT05dLFxuICAgICAgICB0aWdodG5lc3M6IDUwLFxuICAgICAgICBleHRlbmRQYXJzZTogcGFyc2VJbmZpeFJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5BTkQsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5BTkRdLFxuICAgICAgICB0aWdodG5lc3M6IDIwMCxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IHBhcnNlSW5maXhSUHJvcG9zaXRpb25hbFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLk9SLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuT1JdLFxuICAgICAgICB0aWdodG5lc3M6IDIxMCxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IHBhcnNlSW5maXhSUHJvcG9zaXRpb25hbFxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLk5PVCxcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLk5PVF0sXG4gICAgICAgIHRpZ2h0bmVzczogMjIwLFxuICAgICAgICBzdGFydFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgY29uc3QgcGhpID0gcGFyc2VyLnBhcnNlRXhwcmVzc2lvbih0b2tlbi50aWdodG5lc3MpO1xuICAgICAgICAgICAgaWYgKCFpc1Byb3Bvc2l0aW9uYWwocGhpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJOT1QgbWF5IG9ubHkgbmVnYXRlIHByb3Bvc2l0aW9uYWwgc3RhdGUgZm9ybXVsYWVcIiwgdG9rZW4sIHBoaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUodG9rZW4udHlwZSwgdG9rZW4udmFsdWUsIFtwaGldKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLlNUQVJULFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuU1RBUlRdLFxuICAgICAgICBzdGFydFBhcnNlOiBwYXJzZVZhbHVlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuRU5ELFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuRU5EXSxcbiAgICAgICAgc3RhcnRQYXJzZTogcGFyc2VWYWx1ZVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLlRSVUUsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5UUlVFXSxcbiAgICAgICAgdmFsdWU6IGNvbnN0YW50VmFsdWUodHJ1ZSksXG4gICAgICAgIHN0YXJ0UGFyc2U6IHBhcnNlVmFsdWVcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5GQUxTRSxcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkZBTFNFXSxcbiAgICAgICAgdmFsdWU6IGNvbnN0YW50VmFsdWUoZmFsc2UpLFxuICAgICAgICBzdGFydFBhcnNlOiBwYXJzZVZhbHVlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuRVJST1IsXG4gICAgICAgIG1hdGNoOiAvXlxcUysvLFxuICAgICAgICBzdGFydFBhcnNlOiBwYXJzZVZhbHVlXG4gICAgfVxuXTtcblxuY29uc3QgY3VzdG9tVGlnaHRuZXNzT2Zmc2V0ID0gMzAwO1xuXG5jb25zdCBFUlJPUiA9IFwiRVJST1JcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQ3VzdG9tKHA6IFBhcnNlVHJlZSk6IGJvb2xlYW4ge1xuICAgIGZvciAodmFyIGsgaW4gcGFyc2VUeXBlcykge1xuICAgICAgICBpZiAocGFyc2VUeXBlc1trXSA9PSBwLnR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvcG9zaXRpb25hbChwOiBQYXJzZVRyZWUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaXNDdXN0b20ocCkgfHxcbiAgICAgICAgcC50eXBlID09IHBhcnNlVHlwZXMuQU5EIHx8XG4gICAgICAgIHAudHlwZSA9PSBwYXJzZVR5cGVzLk9SIHx8XG4gICAgICAgIHAudHlwZSA9PSBwYXJzZVR5cGVzLk5PVCB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5UUlVFIHx8XG4gICAgICAgIHAudHlwZSA9PSBwYXJzZVR5cGVzLkZBTFNFIHx8XG4gICAgICAgIHAudHlwZSA9PSBwYXJzZVR5cGVzLlNUQVJUIHx8XG4gICAgICAgIHAudHlwZSA9PSBwYXJzZVR5cGVzLkVORCB8fFxuICAgICAgICAoKHAudHlwZSA9PSBwYXJzZVR5cGVzLkdST1VQIHx8IHAudHlwZSA9PSBwYXJzZVR5cGVzLkNBUFRVUkUpICYmXG4gICAgICAgICAgICBwLmNoaWxkcmVuLmV2ZXJ5KGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzUHJvcG9zaXRpb25hbChjKTtcbiAgICAgICAgICAgIH0pKTtcbn1cbmV4cG9ydCB0eXBlIFBhcnNlUmVzdWx0ID0ge1xuICAgIHRyZWU6IFBhcnNlVHJlZSxcbiAgICBlcnJvcnM6IEFycmF5PFBhcnNlVHJlZT4sXG4gICAgcmVtYWluZGVyOiBzdHJpbmdcbn07XG5leHBvcnQgY2xhc3MgUGFyc2VyIGltcGxlbWVudHMgSVBhcnNlciB7XG4gICAgcHVibGljIHRva2VuRGVmaW5pdGlvbnM6IEFycmF5PFRva2VuRGVmaW5pdGlvbj47XG4gICAgcHVibGljIHRva2Vuc0J5VHlwZTogeyBba2V5OiBzdHJpbmddOiBUb2tlbkRlZmluaXRpb24gfTtcbiAgICBwdWJsaWMgcGFyc2VFcnJvcnM6IEFycmF5PFBhcnNlVHJlZT47XG4gICAgcHVibGljIHN0cmVhbT86IFRva2VuU3RyZWFtO1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHRUb2tlbnM6IEFycmF5PFRva2VuRGVmaW5pdGlvbj4pIHtcbiAgICAgICAgdGhpcy50b2tlbkRlZmluaXRpb25zID0gW107XG4gICAgICAgIHRoaXMudG9rZW5zQnlUeXBlID0ge307XG4gICAgICAgIHRoaXMucGFyc2VFcnJvcnMgPSBbXTtcbiAgICAgICAgY29uc3QgY3VzdG9tVG9rZW5zID0gY29udGV4dFRva2VucyB8fCBbXTtcbiAgICAgICAgY29uc3QgdG9rZW5zID0gY3VzdG9tVG9rZW5zLmNvbmNhdChzdGFuZGFyZFRva2Vucyk7XG4gICAgICAgIGZvciAobGV0IHRpID0gMDsgdGkgPCB0b2tlbnMubGVuZ3RoOyB0aSsrKSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dDogVG9rZW5EZWZpbml0aW9uID0gdG9rZW5zW3RpXTtcbiAgICAgICAgICAgIGNvbnN0IHRpZ2h0bmVzczogbnVtYmVyID0gaW5wdXQudGlnaHRuZXNzIHx8IDA7XG4gICAgICAgICAgICBjb25zdCBkZWZuOiBUb2tlbkRlZmluaXRpb24gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogaW5wdXQudHlwZSxcbiAgICAgICAgICAgICAgICBtYXRjaDogaW5wdXQubWF0Y2ggaW5zdGFuY2VvZiBSZWdFeHAgPyBpbnB1dC5tYXRjaCA6XG4gICAgICAgICAgICAgICAgICAgICh0eXBlb2YgKGlucHV0Lm1hdGNoKSA9PSAnc3RyaW5nJykgPyBbaW5wdXQubWF0Y2hdIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0Lm1hdGNoLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBpbnB1dC52YWx1ZSB8fCBmdW5jdGlvbiAobXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1yWzBdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGlnaHRuZXNzOiB0aSA8IGN1c3RvbVRva2Vucy5sZW5ndGggPyB0aWdodG5lc3MgKyBjdXN0b21UaWdodG5lc3NPZmZzZXQgOiB0aWdodG5lc3MsXG4gICAgICAgICAgICAgICAgc3RhcnRQYXJzZTogaW5wdXQuc3RhcnRQYXJzZSB8fCBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5lcnJvcihcIkNhbid0IHN0YXJ0IGEgcGFyc2UgdHJlZSB3aXRoIHRoaXMgdG9rZW5cIiwgdG9rZW4pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXh0ZW5kUGFyc2U6IGlucHV0LmV4dGVuZFBhcnNlIHx8IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHBhcnNlVHJlZTogUGFyc2VUcmVlLCB0b2tlbjogVG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5lcnJvcihcIkNhbid0IGV4dGVuZCBhIHBhcnNlIHRyZWUgd2l0aCB0aGlzIHRva2VuXCIsIHRva2VuLCBwYXJzZVRyZWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnRva2VuRGVmaW5pdGlvbnMucHVzaChkZWZuKTtcbiAgICAgICAgICAgIHRoaXMudG9rZW5zQnlUeXBlW2RlZm4udHlwZV0gPSBkZWZuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVzZXRTdHJlYW0oKTtcbiAgICB9XG5cbiAgICBub2RlKHR5cGU6IHN0cmluZywgdmFsdWU6IGFueSA9IHVuZGVmaW5lZCwgY2hpbGRyZW46IEFycmF5PFBhcnNlVHJlZT4gPSBbXSk6IFBhcnNlVHJlZSB7XG4gICAgICAgIHJldHVybiB7IHR5cGUsIHZhbHVlLCBjaGlsZHJlbiwgcmFuZ2U6IHsgc3RhcnQ6IC0xLCBlbmQ6IC0xIH0gfTtcbiAgICB9XG5cbiAgICBlcnJvcihtc2c6IHN0cmluZywgdG9rZW46IFRva2VuLCB0cmVlPzogUGFyc2VUcmVlKTogUGFyc2VUcmVlIHtcbiAgICAgICAgY29uc3QgZXJyID0gdGhpcy5ub2RlKEVSUk9SLCB7IG1lc3NhZ2U6IG1zZywgdG9rZW4sIHRyZWUgfSk7XG4gICAgICAgIHRoaXMucGFyc2VFcnJvcnMucHVzaChlcnIpO1xuICAgICAgICByZXR1cm4gZXJyO1xuICAgIH1cblxuICAgIHRva2VuaXplKHN0cjogc3RyaW5nKTogVG9rZW5TdHJlYW0ge1xuICAgICAgICBsZXQgcmVzdWx0OiBBcnJheTxUb2tlbj4gPSBbXTtcbiAgICAgICAgbGV0IGVycm9yczogQXJyYXk8bnVtYmVyPiA9IFtdO1xuICAgICAgICBsZXQgc3Vic3RyaW5nOiBzdHJpbmcgPSBzdHI7XG4gICAgICAgIGxldCBpbmRleDogbnVtYmVyID0gMDtcbiAgICAgICAgd2hpbGUgKHN1YnN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZvciAobGV0IHRpID0gMDsgdGkgPCB0aGlzLnRva2VuRGVmaW5pdGlvbnMubGVuZ3RoOyB0aSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW5EZWZpbml0aW9uOiBUb2tlbkRlZmluaXRpb24gPSB0aGlzLnRva2VuRGVmaW5pdGlvbnNbdGldO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdG9rZW5EZWZpbml0aW9uLm1hdGNoO1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaFJlc3VsdDoge1xuICAgICAgICAgICAgICAgICAgICBtYXRjaDogQXJyYXk8c3RyaW5nPiB8IFJlZ0V4cEV4ZWNBcnJheSB8IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBudW1iZXJcbiAgICAgICAgICAgICAgICB9ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogLTFcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4ZWNSZXN1bHQgPSBtYXRjaC5leGVjKHN1YnN0cmluZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGVjUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5tYXRjaCA9IGV4ZWNSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5pbmRleCA9IGV4ZWNSZXN1bHQuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWF0Y2gpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG1pID0gMDsgbWkgPCBtYXRjaC5sZW5ndGg7IG1pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IG1hdGNoW21pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWJzdHJpbmcuc3Vic3RyKDAsIGNhbmRpZGF0ZS5sZW5ndGgpID09IGNhbmRpZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0Lm1hdGNoID0gW2NhbmRpZGF0ZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuaW5kZXggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtYXRjaFJlc3VsdC5tYXRjaCAmJiBtYXRjaFJlc3VsdC5pbmRleCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoTGVuZ3RoID0gbWF0Y2hSZXN1bHQubWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBzdWJzdHJpbmcgPSBzdWJzdHJpbmcuc3Vic3RyKG1hdGNoUmVzdWx0Lm1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZEluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ICs9IG1hdGNoTGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5EZWZpbml0aW9uLnR5cGUgIT09IHRva2VuVHlwZXMuV0hJVEVTUEFDRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuRGVmaW5pdGlvbi50eXBlID09PSB0b2tlblR5cGVzLkVSUk9SKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2gocmVzdWx0Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdG9rZW5EZWZpbml0aW9uLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRva2VuRGVmaW5pdGlvbi52YWx1ZSEobWF0Y2hSZXN1bHQubWF0Y2gpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpZ2h0bmVzczogdG9rZW5EZWZpbml0aW9uLnRpZ2h0bmVzcyB8fCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiB7IHN0YXJ0OiBvbGRJbmRleCwgZW5kOiBpbmRleCB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RyaW5nOiBzdHIsIHRva2VuczogcmVzdWx0LCBwb3NpdGlvbjogMCwgZXJyb3JzOiBlcnJvcnMgfTtcbiAgICB9XG5cbiAgICByZXNldFN0cmVhbSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB7IHN0cmluZzogXCJcIiwgdG9rZW5zOiBbXSwgcG9zaXRpb246IDAsIGVycm9yczogW10gfTtcbiAgICB9XG5cbiAgICBjaGFyUG9zaXRpb24oKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFRva2VuKCkgPyB0aGlzLmN1cnJlbnRUb2tlbigpLnJhbmdlLnN0YXJ0IDogdGhpcy5zdHJlYW0hLnN0cmluZy5sZW5ndGg7XG4gICAgfVxuXG4gICAgcmVtYWluZGVyKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGVuZCA9IHRoaXMuY2hhclBvc2l0aW9uKCk7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmVhbSEuc3RyaW5nLnN1YnN0cihlbmQpO1xuICAgIH1cblxuICAgIGN1cnJlbnRUb2tlbigpOiBUb2tlbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0cmVhbSEudG9rZW5zW3RoaXMuc3RyZWFtIS5wb3NpdGlvbl07XG4gICAgfVxuXG4gICAgYWR2YW5jZSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdHJlYW0hLnBvc2l0aW9uKys7XG4gICAgfVxuXG4gICAgcGFyc2Uoc3RyOiBzdHJpbmcpOiBQYXJzZVJlc3VsdCB7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy50b2tlbml6ZShzdHIpO1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3JzID0gW107XG4gICAgICAgIGNvbnN0IHRyZWUgPSB0aGlzLnBhcnNlRXhwcmVzc2lvbigwKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHsgdHJlZSwgZXJyb3JzOiB0aGlzLnBhcnNlRXJyb3JzLCByZW1haW5kZXI6IHRoaXMucmVtYWluZGVyKCkgfTtcbiAgICAgICAgdGhpcy5wYXJzZUVycm9ycyA9IFtdO1xuICAgICAgICB0aGlzLnJlc2V0U3RyZWFtKCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcGFyc2VFeHByZXNzaW9uKHRpZ2h0bmVzczogbnVtYmVyKTogUGFyc2VUcmVlIHtcbiAgICAgICAgbGV0IHRva2VuID0gdGhpcy5jdXJyZW50VG9rZW4oKTtcbiAgICAgICAgbGV0IHRva2VuRGVmID0gdGhpcy50b2tlbnNCeVR5cGVbdG9rZW4udHlwZV07XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gdG9rZW4ucmFuZ2Uuc3RhcnQ7XG4gICAgICAgIHRoaXMuYWR2YW5jZSgpO1xuICAgICAgICBsZXQgdHJlZSA9IHRva2VuRGVmLnN0YXJ0UGFyc2UhKHRoaXMsIHRva2VuKTtcbiAgICAgICAgdHJlZS5yYW5nZS5zdGFydCA9IHN0YXJ0O1xuICAgICAgICB0cmVlLnJhbmdlLmVuZCA9IHRoaXMuY2hhclBvc2l0aW9uKCk7XG4gICAgICAgIGlmICh0cmVlLnR5cGUgPT0gRVJST1IpIHtcbiAgICAgICAgICAgIHJldHVybiB0cmVlO1xuICAgICAgICB9XG4gICAgICAgIHRva2VuID0gdGhpcy5jdXJyZW50VG9rZW4oKTtcbiAgICAgICAgd2hpbGUgKHRva2VuICYmIHRpZ2h0bmVzcyA8IHRva2VuLnRpZ2h0bmVzcykge1xuICAgICAgICAgICAgdG9rZW5EZWYgPSB0aGlzLnRva2Vuc0J5VHlwZVt0b2tlbi50eXBlXTtcbiAgICAgICAgICAgIHRoaXMuYWR2YW5jZSgpO1xuICAgICAgICAgICAgbGV0IG5ld1RyZWUgPSB0b2tlbkRlZi5leHRlbmRQYXJzZSEodGhpcywgdHJlZSwgdG9rZW4pO1xuICAgICAgICAgICAgbmV3VHJlZS5yYW5nZS5zdGFydCA9IHRyZWUucmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICBuZXdUcmVlLnJhbmdlLmVuZCA9IHRoaXMuY2hhclBvc2l0aW9uKCk7XG4gICAgICAgICAgICBpZiAobmV3VHJlZS50eXBlID09IEVSUk9SKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ld1RyZWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmVlID0gbmV3VHJlZTtcbiAgICAgICAgICAgIHRva2VuID0gdGhpcy5jdXJyZW50VG9rZW4oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJlZTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7IHBhcnNlVHlwZXMsIGlzUHJvcG9zaXRpb25hbCwgY2xvbmVUcmVlIH0gZnJvbSBcIi4vcGFyc2VyXCI7XG5pbXBvcnQgeyBQYXJzZVRyZWUgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgc3RyaW5naWZ5Rm9ybXVsYSB9IGZyb20gXCIuL2NvbXBpbGVyXCI7XG5sZXQgc3RhdGVJRCA9IDA7XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldFN0YXRlSUQoKSB7XG4gICAgc3RhdGVJRCA9IDA7XG59XG5cbmV4cG9ydCBjbGFzcyBTRkEge1xuICAgIHN0YXJ0U3RhdGVzOiBTdGF0ZVtdO1xuICAgIGFjY2VwdGluZ1N0YXRlczogU3RhdGVbXTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdGFydFN0YXRlcyA9IFtuZXcgU3RhdGUoKV07XG4gICAgICAgIHRoaXMuYWNjZXB0aW5nU3RhdGVzID0gW107XG4gICAgfVxuXG4gICAgbmV3U3RhdGUob3B0SUQ/OiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdGF0ZShvcHRJRCk7XG4gICAgfVxuXG4gICAgbWFya0FjY2VwdGluZyhzOiBTdGF0ZSkge1xuICAgICAgICAvL2FkZCB0byBhY2NlcHRpbmdTdGF0ZXNcbiAgICAgICAgaWYgKHRoaXMuYWNjZXB0aW5nU3RhdGVzLmluZGV4T2YocykgPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuYWNjZXB0aW5nU3RhdGVzLnB1c2gocyk7XG4gICAgICAgIH1cbiAgICAgICAgLy9hZGQgYWNjZXB0aW5nIHNlbGYtZWRnZVxuICAgICAgICBzLmFkZEVkZ2UobmV3IEVkZ2UocywgbnVsbCwgW10pKTtcbiAgICAgICAgLy9tYXJrIGFjY2VwdGluZ1xuICAgICAgICBzLmlzQWNjZXB0aW5nID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBtYXJrTm9uQWNjZXB0aW5nKHM6IFN0YXRlKSB7XG4gICAgICAgIC8vbWFyayBub24tYWNjZXB0aW5nXG4gICAgICAgIHMuaXNBY2NlcHRpbmcgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuYWNjZXB0aW5nU3RhdGVzLmluZGV4T2YocykgIT0gLTEpIHtcbiAgICAgICAgICAgIC8vcmVtb3ZlIGZyb20gYWNjZXB0aW5nU3RhdGVzXG4gICAgICAgICAgICB0aGlzLmFjY2VwdGluZ1N0YXRlcy5zcGxpY2UodGhpcy5hY2NlcHRpbmdTdGF0ZXMuaW5kZXhPZihzKSwgMSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRTdGF0ZXMoKSB7XG4gICAgICAgIGxldCBmb3VuZDogeyBbaWQ6IHN0cmluZ106IFN0YXRlIH0gPSB7fTtcbiAgICAgICAgbGV0IHN0YWNrID0gdGhpcy5zdGFydFN0YXRlcy5zbGljZSgpO1xuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBoZXJlOiBTdGF0ZSA9IHN0YWNrLnBvcCgpITtcbiAgICAgICAgICAgIGZvdW5kW2hlcmUuaWRdID0gaGVyZTtcbiAgICAgICAgICAgIGZvciAobGV0IGVrIGluIGhlcmUuZWRnZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IGhlcmUuZWRnZXNbZWtdO1xuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCAmJiAhKGUudGFyZ2V0LmlkIGluIGZvdW5kKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGZvdW5kKS5tYXAoKGspID0+IGZvdW5kW2tdKTtcbiAgICB9XG5cbiAgICB0b0RvdCgpIHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBcImRpZ3JhcGggZyB7XFxuXCIgK1xuICAgICAgICAgICAgXCIgIHJhbmtkaXI9TFI7XFxuXCI7XG4gICAgICAgIGNvbnN0IG1pZGRsZSA9IHRoaXMuZ2V0U3RhdGVzKCkubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gW1wiICBcIiArIHMuaWQgKyBgIFtzaGFwZT0ke3MuaXNBY2NlcHRpbmcgPyBcImRvdWJsZWNpcmNsZVwiIDogXCJjaXJjbGVcIn1dO2BdLmNvbmNhdChcbiAgICAgICAgICAgICAgICBzLmVkZ2VzLm1hcChmdW5jdGlvbiAoZSwgaSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCIgIFwiICsgcy5pZCArIFwiLT5cIiArIGUudGFyZ2V0IS5pZCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgIFtsYWJlbD1cIiR7aX06JHtlLmZvcm11bGEgPyBzdHJpbmdpZnlGb3JtdWxhKGUuZm9ybXVsYSkgOiBcIiYjOTQ5O1wifToke2UubGFiZWwubWFwKChsKSA9PiBsLnR5cGUgKyBcIi5cIiArIGwuZ3JvdXApLmpvaW4oXCIsXCIpfVwiXTtgO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIH0pLmpvaW4oXCJcXG5cIik7XG4gICAgICAgIGNvbnN0IGVuZCA9IFwiXFxufVwiO1xuICAgICAgICByZXR1cm4gc3RhcnQgKyBtaWRkbGUgKyBlbmQ7XG4gICAgfVxuXG4gICAgZWVsaW0oKSB7XG4gICAgICAgIGxldCBzdGFjayA9IHRoaXMuc3RhcnRTdGF0ZXMuc2xpY2UoKSxcbiAgICAgICAgICAgIHNlZW46IHsgW2lkOiBzdHJpbmddOiBTdGF0ZSB9ID0ge307XG4gICAgICAgIGZvciAobGV0IHNrID0gMDsgc2sgPCBzdGFjay5sZW5ndGg7IHNrKyspIHtcbiAgICAgICAgICAgIHNlZW5bc3RhY2tbc2tdLmlkXSA9IHN0YWNrW3NrXTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gc3RhY2sucG9wKCkhO1xuICAgICAgICAgICAgbGV0IHJlYWNoYWJsZSA9IHsgW3MuaWRdOiBzIH07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMuZWRnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcy5lZGdlc1tpXTtcbiAgICAgICAgICAgICAgICAvL2UgaXMgYSBudWxsIHRyYW5zaXRpb24gYnV0IG5vdCBhbiBhY2NlcHRpbmcgbnVsbCB0cmFuc2l0aW9uXG4gICAgICAgICAgICAgICAgaWYgKCFlLmZvcm11bGEgJiYgIShzLmlzQWNjZXB0aW5nICYmIGUudGFyZ2V0ID09IHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCEuaWQgaW4gcmVhY2hhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzLmVkZ2VzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGktLTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0RXMgPSBlLnRhcmdldCEuZWRnZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdFcyA9IHRhcmdldEVzLm1hcCgodGUpID0+IG5ldyBFZGdlKHRlLnRhcmdldCA9PSBlLnRhcmdldCAmJiB0ZS5mb3JtdWxhID09IG51bGwgPyBzIDogdGUudGFyZ2V0LCB0ZS5mb3JtdWxhLCBlLmxhYmVsLmNvbmNhdCh0ZS5sYWJlbCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldCEuaXNBY2NlcHRpbmcgJiYgIXMuaXNBY2NlcHRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjY2VwdGluZ1N0YXRlcy5wdXNoKHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuaXNBY2NlcHRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcy5lZGdlcy5zcGxpY2UoaSwgMSwgLi4ubmV3RXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlYWNoYWJsZVtlLnRhcmdldCEuaWRdID0gZS50YXJnZXQhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChsZXQgcmsgaW4gcmVhY2hhYmxlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEocmsgaW4gc2VlbikpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChyZWFjaGFibGVbcmtdKTtcbiAgICAgICAgICAgICAgICAgICAgc2Vlbltya10gPSByZWFjaGFibGVbcmtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBpbnRlcnNlY3QoYjogU0ZBKTogU0ZBIHtcbiAgICAgICAgdGhpcy5lZWxpbSgpO1xuICAgICAgICBjb25zdCBhID0gdGhpcztcbiAgICAgICAgYi5lZWxpbSgpO1xuICAgICAgICBsZXQgYXhiID0gbmV3IFNGQSgpO1xuICAgICAgICBheGIuc3RhcnRTdGF0ZXMgPSBbXTtcbiAgICAgICAgbGV0IHN0YWNrOiBTdGF0ZVtdW10gPSBbXSwgc3RhdGVzOiB7IFtpZDogc3RyaW5nXTogeyBbaWQ6IHN0cmluZ106IFN0YXRlIH0gfSA9IHt9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEuc3RhcnRTdGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHNhID0gYS5zdGFydFN0YXRlc1tpXTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYi5zdGFydFN0YXRlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNiID0gYi5zdGFydFN0YXRlc1tqXTtcbiAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFtzYSwgc2JdKTtcbiAgICAgICAgICAgICAgICBpZiAoIShzYS5pZCBpbiBzdGF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlc1tzYS5pZF0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHNhc2IgPSBheGIubmV3U3RhdGUoYGEke3NhLmlkfXgke3NiLmlkfWJgKTtcbiAgICAgICAgICAgICAgICBheGIuc3RhcnRTdGF0ZXMucHVzaChzYXNiKTtcbiAgICAgICAgICAgICAgICBzdGF0ZXNbc2EuaWRdW3NiLmlkXSA9IHNhc2I7XG4gICAgICAgICAgICAgICAgaWYgKHNhLmlzQWNjZXB0aW5nICYmIHNiLmlzQWNjZXB0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGF4Yi5tYXJrQWNjZXB0aW5nKHNhc2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBbc2EsIHNiXSA9IHN0YWNrLnBvcCgpITtcbiAgICAgICAgICAgIGNvbnN0IHNhYiA9IHN0YXRlc1tzYS5pZF1bc2IuaWRdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzYS5lZGdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFlID0gc2EuZWRnZXNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgYWV0ID0gYWUudGFyZ2V0ITtcbiAgICAgICAgICAgICAgICBjb25zdCBhZUlzQWNjZXB0aW5nU2VsZkVkZ2UgPSBzYS5pc0FjY2VwdGluZyAmJiBhZXQgPT0gc2EgJiYgIWFlLmZvcm11bGE7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzYi5lZGdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiZSA9IHNiLmVkZ2VzW2pdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiZXQgPSBiZS50YXJnZXQhO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBiZUlzQWNjZXB0aW5nU2VsZkVkZ2UgPSBzYi5pc0FjY2VwdGluZyAmJiBiZXQgPT0gc2IgJiYgIWJlLmZvcm11bGE7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwaGkgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWVJc0FjY2VwdGluZ1NlbGZFZGdlICE9IGJlSXNBY2NlcHRpbmdTZWxmRWRnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWFlSXNBY2NlcHRpbmdTZWxmRWRnZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhZS5mb3JtdWxhIHx8ICFiZS5mb3JtdWxhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVuZWxpbWluYXRlZCBub24gQVNFIGVwc2lsb24gdHJhbnNpdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBoaSA9IGludGVyc2VjdEZvcm11bGFlKGFlLmZvcm11bGEhLCBiZS5mb3JtdWxhISk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBoaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxldCBjb21iaW5lZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZXQuaWQgaW4gc3RhdGVzICYmIGJldC5pZCBpbiBzdGF0ZXNbYWV0LmlkXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tYmluZWQgPSBzdGF0ZXNbYWV0LmlkXVtiZXQuaWRdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tYmluZWQgPSBheGIubmV3U3RhdGUoYGEke2FldC5pZH14JHtiZXQuaWR9YmApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYWV0LmlkIGluIHN0YXRlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXNbYWV0LmlkXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzW2FldC5pZF1bYmV0LmlkXSA9IGNvbWJpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChbYWV0LCBiZXRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhZXQuaXNBY2NlcHRpbmcgJiYgYmV0LmlzQWNjZXB0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9ubyBuZWVkIGZvciBtYXJrYWNjZXB0aW5nIG9yIHRvIGNoZWNrIG1lbWJlcnNoaXAgb2YgY29tYmluZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9mb3JtZXIgYmVjYXVzZSB3ZSdsbCBnZXQgdGhlIGFjY2VwdGluZyBzZWxmIGVkZ2VzIGZvciBmcmVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sYXR0ZXIgYmVjYXVzZSB0aGlzIHN0YXRlIGlzIGJ5IGRlZmluaXRpb24gbmV3XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tYmluZWQuaXNBY2NlcHRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF4Yi5hY2NlcHRpbmdTdGF0ZXMucHVzaChjb21iaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2FiLmFkZEVkZ2UobmV3IEVkZ2UoY29tYmluZWQsIHBoaSwgYWUubGFiZWwuY29uY2F0KGJlLmxhYmVsKSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXhiO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW50ZXJzZWN0Rm9ybXVsYWUocDE6IFBhcnNlVHJlZSwgcDI6IFBhcnNlVHJlZSkge1xuICAgIC8vdG9kbzogZml4bWU6IGltcGxlbWVudCBmb3IgcmVhbFxuICAgIHJldHVybiB7IHR5cGU6IHBhcnNlVHlwZXMuQU5ELCB2YWx1ZTogXCImXCIsIGNoaWxkcmVuOiBbcDEsIHAyXSwgcmFuZ2U6IHsgc3RhcnQ6IC0xLCBlbmQ6IC0xIH0gfTtcbn1cblxuZXhwb3J0IGNsYXNzIFN0YXRlIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGVkZ2VzOiBFZGdlW107XG4gICAgaXNBY2NlcHRpbmc6IGJvb2xlYW47XG4gICAgY29uc3RydWN0b3IoaWQ/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkIHx8IChzdGF0ZUlEKyspLnRvU3RyaW5nKDEwKTtcbiAgICAgICAgdGhpcy5lZGdlcyA9IFtdO1xuICAgICAgICB0aGlzLmlzQWNjZXB0aW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgYWRkRWRnZShlOiBFZGdlKSB7XG4gICAgICAgIHRoaXMuZWRnZXMucHVzaChlKTtcbiAgICB9XG5cbiAgICByZW1vdmVFZGdlKGU6IEVkZ2UpIHtcbiAgICAgICAgdGhpcy5lZGdlcy5zcGxpY2UodGhpcy5lZGdlcy5pbmRleE9mKGUpLCAxKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFZGdlIHtcbiAgICB0YXJnZXQ6IFN0YXRlIHwgbnVsbDtcbiAgICBmb3JtdWxhOiBQYXJzZVRyZWUgfCBudWxsO1xuICAgIGxhYmVsOiBhbnlbXTtcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXQ6IFN0YXRlIHwgbnVsbCwgZm9ybXVsYTogUGFyc2VUcmVlIHwgbnVsbCwgbGFiZWw6IGFueVtdKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB0aGlzLmZvcm11bGEgPSBmb3JtdWxhO1xuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbVBhcnNlVHJlZSh0cmVlOiBQYXJzZVRyZWUpIHtcbiAgICBjb25zdCBzZmEgPSBuZXcgU0ZBKCk7XG4gICAgY29uc3QgcyA9IHNmYS5zdGFydFN0YXRlc1swXTtcbiAgICBjb25zdCBvdXRFZGdlcyA9IGJ1aWxkKHNmYSwgcywgdHJlZSk7XG4gICAgY29uc3QgdGVybWludXMgPSBzZmEubmV3U3RhdGUoKTtcbiAgICBmb3IgKGxldCBlayA9IDA7IGVrIDwgb3V0RWRnZXMubGVuZ3RoOyBlaysrKSB7XG4gICAgICAgIGNvbnN0IGUgPSBvdXRFZGdlc1tla107XG4gICAgICAgIGUudGFyZ2V0ID0gdGVybWludXM7XG4gICAgfVxuICAgIHNmYS5tYXJrQWNjZXB0aW5nKHRlcm1pbnVzKTtcbiAgICByZXR1cm4gc2ZhO1xufVxuXG5mdW5jdGlvbiBidWlsZChzZmE6IFNGQSwgc2VlZFN0YXRlOiBTdGF0ZSwgdHJlZTogUGFyc2VUcmVlKTogRWRnZVtdIHtcbiAgICBpZiAoaXNQcm9wb3NpdGlvbmFsKHRyZWUpICYmIHRyZWUudHlwZSAhPSBwYXJzZVR5cGVzLkNBUFRVUkUpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBFZGdlKG51bGwsIHRyZWUsIFtdKTtcbiAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UoZSk7XG4gICAgICAgIHJldHVybiBbZV07XG4gICAgfSBlbHNlIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5DT05DQVRFTkFUSU9OKSB7XG4gICAgICAgIGNvbnN0IGFlcyA9IGJ1aWxkKHNmYSwgc2VlZFN0YXRlLCB0cmVlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgY29uc3QgcyA9IHNmYS5uZXdTdGF0ZSgpO1xuICAgICAgICBmb3IgKGxldCBlayA9IDA7IGVrIDwgYWVzLmxlbmd0aDsgZWsrKykge1xuICAgICAgICAgICAgbGV0IGUgPSBhZXNbZWtdO1xuICAgICAgICAgICAgZS50YXJnZXQgPSBzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWlsZChzZmEsIHMsIHRyZWUuY2hpbGRyZW5bMV0pO1xuICAgIH0gZWxzZSBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuUkVQRVRJVElPTikge1xuICAgICAgICBjb25zdCBncmVlZHkgPSB0cmVlLnZhbHVlLmdyZWVkeTtcbiAgICAgICAgY29uc3QgbWluID0gdHJlZS52YWx1ZS5sb3dlckJvdW5kO1xuICAgICAgICBjb25zdCBtYXggPSB0cmVlLnZhbHVlLnVwcGVyQm91bmQ7XG4gICAgICAgIGNvbnN0IHBoaSA9IHRyZWUuY2hpbGRyZW5bMF07XG4gICAgICAgIGlmIChtaW4gPiAwKSB7XG4gICAgICAgICAgICBsZXQgY2xvbmVkID0gY2xvbmVUcmVlKHRyZWUpO1xuICAgICAgICAgICAgY2xvbmVkLnZhbHVlLmxvd2VyQm91bmQtLTtcbiAgICAgICAgICAgIGlmIChjbG9uZWQudmFsdWUudXBwZXJCb3VuZCAhPSBcIiRFTkRcIikge1xuICAgICAgICAgICAgICAgIGNsb25lZC52YWx1ZS51cHBlckJvdW5kLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZVR5cGVzLkNPTkNBVEVOQVRJT04sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFwiLFwiLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbY2xvbmVUcmVlKHBoaSksIGNsb25lZF0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHsgc3RhcnQ6IGNsb25lZC5yYW5nZS5zdGFydCwgZW5kOiBjbG9uZWQucmFuZ2UuZW5kIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gYnVpbGQoc2ZhLCBzZWVkU3RhdGUsIG5leHQpO1xuICAgICAgICB9IGVsc2UgaWYgKG1heCAhPSBcIiRFTkRcIikge1xuICAgICAgICAgICAgbGV0IGNsb25lZCA9IGNsb25lVHJlZSh0cmVlKTtcbiAgICAgICAgICAgIGNsb25lZC52YWx1ZS51cHBlckJvdW5kLS07XG4gICAgICAgICAgICBsZXQgbmV4dCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZVR5cGVzLkNPTkNBVEVOQVRJT04sXG4gICAgICAgICAgICAgICAgdmFsdWU6IFwiLFwiLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbY2xvbmVUcmVlKHBoaSksIGNsb25lZF0sXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHsgc3RhcnQ6IGNsb25lZC5yYW5nZS5zdGFydCwgZW5kOiBjbG9uZWQucmFuZ2UuZW5kIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvL0xvdHMgb2YgZHVwbGljYXRpb24gaGVyZSB3aGVuIG9ubHkgb3JkZXJpbmdzIGFyZSBjaGFuZ2VkLiBOb3Qgc28gcHJvdWQgb2YgaXRcbiAgICAgICAgICAgIC8vYnV0IGxldCdzIGp1c3QgbWFrZSBzdXJlIGl0J3Mgd29ya2luZyBmaXJzdC5cbiAgICAgICAgICAgIGlmIChncmVlZHkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZWRnZXM6IEVkZ2VbXSA9IFtdO1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBlZGdlcyA9IGVkZ2VzLmNvbmNhdChbbmV3IEVkZ2UobnVsbCwgcGhpLCBbXSldKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlZGdlcyA9IGVkZ2VzLmNvbmNhdChidWlsZChzZmEsIHNlZWRTdGF0ZSwgbmV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBvdXQgPSBuZXcgRWRnZShudWxsLCBudWxsLCBbXSk7XG4gICAgICAgICAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2Uob3V0KTtcbiAgICAgICAgICAgICAgICBlZGdlcy5wdXNoKG91dCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVkZ2VzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgZWRnZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXQgPSBuZXcgRWRnZShudWxsLCBudWxsLCBbXSk7XG4gICAgICAgICAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2Uob3V0KTtcbiAgICAgICAgICAgICAgICBlZGdlcy5wdXNoKG91dCk7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzID0gZWRnZXMuY29uY2F0KFtuZXcgRWRnZShudWxsLCBwaGksIFtdKV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzID0gZWRnZXMuY29uY2F0KGJ1aWxkKHNmYSwgc2VlZFN0YXRlLCBuZXh0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBlZGdlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChncmVlZHkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZWRnZXMgPSBidWlsZChzZmEsIHNlZWRTdGF0ZSwgcGhpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlayA9IDA7IGVrIDwgZWRnZXMubGVuZ3RoOyBlaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlID0gZWRnZXNbZWtdO1xuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldCA9IHNlZWRTdGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFZGdlKG51bGwsIG51bGwsIFtdKTtcbiAgICAgICAgICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2VdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IEVkZ2UobnVsbCwgbnVsbCwgW10pO1xuICAgICAgICAgICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKGUpO1xuICAgICAgICAgICAgICAgIGxldCBlZGdlcyA9IGJ1aWxkKHNmYSwgc2VlZFN0YXRlLCBwaGkpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGVrID0gMDsgZWsgPCBlZGdlcy5sZW5ndGg7IGVrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGUgPSBlZGdlc1tla107XG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0ID0gc2VlZFN0YXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gW2VdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5HUk9VUCkge1xuICAgICAgICBsZXQgcyA9IHNmYS5uZXdTdGF0ZSgpO1xuICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShuZXcgRWRnZShzLCBudWxsLCBbXSkpO1xuICAgICAgICBjb25zdCBlcyA9IGJ1aWxkKHNmYSwgcywgdHJlZS5jaGlsZHJlblswXSk7XG4gICAgICAgIHJldHVybiBlcztcbiAgICB9IGVsc2UgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkNBUFRVUkUpIHtcbiAgICAgICAgbGV0IHMgPSBzZmEubmV3U3RhdGUoKTtcbiAgICAgICAgLy9oYWNrOiB3ZSBzdG9yZSBhIGxpbmsgZnJvbSB0aGUgZW5kIHRvIGl0cyBjb3JyZXNwb25kaW5nIHN0YXJ0XG4gICAgICAgIC8vc28gdGhhdCB0aGUgY29ycmVjdCBjYXB0dXJlSUQgY2FuIGJlIHByb3BhZ2F0ZWQgdG8gdGhlIFwiZW5kXCJcbiAgICAgICAgLy9mcm9tIHRoZSBcInN0YXJ0XCIgZHVyaW5nIGNvbXBpbGF0aW9uXG4gICAgICAgIGxldCBjYXB0dXJlU3RhcnQgPSB7IHR5cGU6IFwic3RhcnQtY2FwdHVyZVwiLCBncm91cDogKHRyZWUudmFsdWUuZ3JvdXAgPT0gXCIkaW1wbGljaXRcIiA/IHMuaWQgOiB0cmVlLnZhbHVlLmdyb3VwKSB9O1xuICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShuZXcgRWRnZShzLCBudWxsLCBbY2FwdHVyZVN0YXJ0XSkpO1xuICAgICAgICBjb25zdCBlcyA9IGJ1aWxkKHNmYSwgcywgdHJlZS5jaGlsZHJlblswXSk7XG4gICAgICAgIGZvciAobGV0IGVrID0gMDsgZWsgPCBlcy5sZW5ndGg7IGVrKyspIHtcbiAgICAgICAgICAgIGxldCBlID0gZXNbZWtdO1xuICAgICAgICAgICAgZS5sYWJlbC5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImVuZC1jYXB0dXJlXCIsXG4gICAgICAgICAgICAgICAgZ3JvdXA6ICh0cmVlLnZhbHVlLmdyb3VwID09IFwiJGltcGxpY2l0XCIgPyBzLmlkIDogdHJlZS52YWx1ZS5ncm91cCksXG4gICAgICAgICAgICAgICAgc3RhcnQ6IGNhcHR1cmVTdGFydFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVzO1xuICAgIH0gZWxzZSBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuQUxURVJOQVRJT04pIHtcbiAgICAgICAgY29uc3QgYSA9IHNmYS5uZXdTdGF0ZSgpO1xuICAgICAgICBjb25zdCBiID0gc2ZhLm5ld1N0YXRlKCk7XG4gICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKG5ldyBFZGdlKGEsIG51bGwsIFtdKSk7XG4gICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKG5ldyBFZGdlKGIsIG51bGwsIFtdKSk7XG4gICAgICAgIGNvbnN0IGFlcyA9IGJ1aWxkKHNmYSwgYSwgdHJlZS5jaGlsZHJlblswXSk7XG4gICAgICAgIGNvbnN0IGJlcyA9IGJ1aWxkKHNmYSwgYiwgdHJlZS5jaGlsZHJlblsxXSk7XG4gICAgICAgIHJldHVybiBhZXMuY29uY2F0KGJlcyk7XG4gICAgfSBlbHNlIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5JTlRFUlNFQ1RJT04pIHtcbiAgICAgICAgY29uc3QgYSA9IGZyb21QYXJzZVRyZWUodHJlZS5jaGlsZHJlblswXSk7XG4gICAgICAgIGNvbnN0IGIgPSBmcm9tUGFyc2VUcmVlKHRyZWUuY2hpbGRyZW5bMV0pO1xuICAgICAgICBjb25zdCBheGIgPSBhLmludGVyc2VjdChiKTtcbiAgICAgICAgY29uc3Qgb2xkQWNjZXB0aW5nID0gYXhiLmFjY2VwdGluZ1N0YXRlcy5zbGljZSgpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKFwiU3VwcG9zZWQgYWNjZXB0aW5nOlwiLCBvbGRBY2NlcHRpbmcsIFwiYWN0dWFsXCIsXG4gICAgICAgIC8vICAgIGF4Yi5nZXRTdGF0ZXMoKS5maWx0ZXIoKHMpID0+IHMuaXNBY2NlcHRpbmcpXG4gICAgICAgIC8vKTtcbiAgICAgICAgZm9yIChsZXQgc3RhcnRrID0gMDsgc3RhcnRrIDwgYXhiLnN0YXJ0U3RhdGVzLmxlbmd0aDsgc3RhcnRrKyspIHtcbiAgICAgICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKG5ldyBFZGdlKGF4Yi5zdGFydFN0YXRlc1tzdGFydGtdLCBudWxsLCBbXSkpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBvdXRFZGdlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBhY2NrID0gMDsgYWNjayA8IG9sZEFjY2VwdGluZy5sZW5ndGg7IGFjY2srKykge1xuICAgICAgICAgICAgY29uc3QgYWNjID0gb2xkQWNjZXB0aW5nW2FjY2tdO1xuICAgICAgICAgICAgc2ZhLm1hcmtOb25BY2NlcHRpbmcoYWNjKTtcbiAgICAgICAgICAgIC8vZmluZCB0aGUgc2VsZi1lZGdlIGFuZCByZXBvaW50IGl0IHRvd2FyZHMgbm90aGluZywgaW5jbHVkaW5nIGl0IGluIG91dEVkZ2VzXG4gICAgICAgICAgICBmb3IgKGxldCBlaSA9IDA7IGVpIDwgYWNjLmVkZ2VzLmxlbmd0aDsgZWkrKykge1xuICAgICAgICAgICAgICAgIGlmIChhY2MuZWRnZXNbZWldLnRhcmdldCA9PSBhY2MgJiYgIWFjYy5lZGdlc1tlaV0uZm9ybXVsYSkge1xuICAgICAgICAgICAgICAgICAgICBhY2MuZWRnZXNbZWldLnRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG91dEVkZ2VzLnB1c2goYWNjLmVkZ2VzW2VpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIlBPU1Qgc3VwcG9zZWQgYWNjZXB0aW5nOlwiLCBzZmEuYWNjZXB0aW5nU3RhdGVzLCBcImFjdHVhbFwiLFxuICAgICAgICAvLyAgICBzZmEuZ2V0U3RhdGVzKCkuZmlsdGVyKChzKSA9PiBzLmlzQWNjZXB0aW5nKVxuICAgICAgICAvLyk7XG5cbiAgICAgICAgcmV0dXJuIG91dEVkZ2VzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IFwiTm90IHlldCBpbXBsZW1lbnRlZFwiO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IHBhcnNlVHlwZXMsIGlzUHJvcG9zaXRpb25hbCwgQk9VTkRfSU5GSU5JVEUgfSBmcm9tIFwiLi9wYXJzZXJcIjtcbmltcG9ydCB7IGZyb21QYXJzZVRyZWUsIHJlc2V0U3RhdGVJRCwgU0ZBLCBTdGF0ZSwgRWRnZSB9IGZyb20gXCIuL3NmYVwiO1xuaW1wb3J0IHsgVG9rZW5EZWZpbml0aW9uLCBQYXJzZVRyZWUgfSBmcm9tIFwiLi90eXBlc1wiO1xudHlwZSBKdW1wID0geyB0eXBlOiBcImp1bXBcIiwgdGFyZ2V0OiBudW1iZXIgfCBudWxsLCBpbmRleD86IG51bWJlciwgc291cmNlPzogXCJyb290XCIgfCBQYXJzZVRyZWUgfTtcbnR5cGUgU3BsaXQgPSB7IHR5cGU6IFwic3BsaXRcIiwgbGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyIHwgbnVsbCwgaW5kZXg/OiBudW1iZXIsIHNvdXJjZT86IFwicm9vdFwiIHwgUGFyc2VUcmVlIH07XG50eXBlIFN0YXJ0ID0geyB0eXBlOiBcInN0YXJ0XCIsIGdyb3VwOiBzdHJpbmcgfCBudW1iZXIsIGNhcHR1cmVJRDogbnVtYmVyLCBpbmRleD86IG51bWJlciwgc291cmNlPzogXCJyb290XCIgfCBQYXJzZVRyZWUgfTtcbnR5cGUgTWF0Y2ggPSB7IHR5cGU6IFwibWF0Y2hcIiwgaW5kZXg/OiBudW1iZXIsIHNvdXJjZT86IFwicm9vdFwiIHwgUGFyc2VUcmVlIH07XG50eXBlIEVuZCA9IHsgdHlwZTogXCJlbmRcIiwgZ3JvdXA6IHN0cmluZyB8IG51bWJlciwgY2FwdHVyZUlEOiBudW1iZXIsIGluZGV4PzogbnVtYmVyLCBzb3VyY2U/OiBcInJvb3RcIiB8IFBhcnNlVHJlZSB9O1xudHlwZSBDaGVjayA9IHsgdHlwZTogXCJjaGVja1wiLCBmb3JtdWxhOiBQYXJzZVRyZWUsIGluZGV4PzogbnVtYmVyLCBzb3VyY2U/OiBcInJvb3RcIiB8IFBhcnNlVHJlZSB9O1xudHlwZSBJbnN0cnVjdGlvbiA9XG4gICAgQ2hlY2sgfFxuICAgIEp1bXAgfFxuICAgIFNwbGl0IHxcbiAgICBNYXRjaCB8XG4gICAgU3RhcnQgfFxuICAgIEVuZDtcbmV4cG9ydCB0eXBlIFByb2dyYW0gPSBBcnJheTxJbnN0cnVjdGlvbj47XG5cbmNvbnN0IERFQlVHX01PREUgPSBmYWxzZTtcblxuZXhwb3J0IGNsYXNzIENvbXBpbGVyIHtcbiAgICBjYXB0dXJlSWR4OiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IoX3Rva2VuRGVmczogQXJyYXk8VG9rZW5EZWZpbml0aW9uPikge1xuICAgICAgICB0aGlzLmNhcHR1cmVJZHggPSAwO1xuICAgIH1cblxuICAgIGNvbXBpbGVUcmVlKHRyZWU6IFBhcnNlVHJlZSwgaWR4OiBudW1iZXIpOiBQcm9ncmFtIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhgY29tcGlsZSAke3RyZWUudHlwZX0gYXQgaW5kZXggJHtpZHh9YCk7XG4gICAgICAgIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5HUk9VUCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVRyZWUodHJlZS5jaGlsZHJlblswXSwgaWR4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuQ0FQVFVSRSkge1xuICAgICAgICAgICAgY29uc3QgY2FwdHVyZUlEID0gdGhpcy5jYXB0dXJlSWR4O1xuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSB0cmVlLnZhbHVlLmdyb3VwID09IFwiJGltcGxpY2l0XCIgPyBjYXB0dXJlSUQgOiB0cmVlLnZhbHVlLmdyb3VwO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSB7IHR5cGU6IFwic3RhcnRcIiwgZ3JvdXA6IGdyb3VwLCBjYXB0dXJlSUQ6IGNhcHR1cmVJRCwgaW5kZXg6IGlkeCwgc291cmNlOiB0cmVlIH07XG4gICAgICAgICAgICB0aGlzLmNhcHR1cmVJZHgrKztcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuOiBBcnJheTxJbnN0cnVjdGlvbj4gPSB0aGlzLmNvbXBpbGVUcmVlKHRyZWUuY2hpbGRyZW5bMF0sIGlkeCArIDEpO1xuICAgICAgICAgICAgY29uc3QgZW5kID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiZW5kXCIsXG4gICAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLFxuICAgICAgICAgICAgICAgIGNhcHR1cmVJRDogY2FwdHVyZUlELFxuICAgICAgICAgICAgICAgIGluZGV4OiBpZHggKyAxICsgY2hpbGRyZW4ubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogdHJlZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiAoW3N0YXJ0XSBhcyBQcm9ncmFtKS5jb25jYXQoY2hpbGRyZW4pLmNvbmNhdChbZW5kXSBhcyBQcm9ncmFtKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcm9wb3NpdGlvbmFsKHRyZWUpKSB7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwidHJlZSBcIiArIEpTT04uc3RyaW5naWZ5KHRyZWUpICsgXCI6XCIgKyB0cmVlLnR5cGUgKyBcIiBpcyBwcm9wb3NpdGlvbmFsXCIpO1xuICAgICAgICAgICAgcmV0dXJuIFt7IHR5cGU6IFwiY2hlY2tcIiwgZm9ybXVsYTogdHJlZSwgaW5kZXg6IGlkeCwgc291cmNlOiB0cmVlIH1dO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5DT05DQVRFTkFUSU9OKSB7XG4gICAgICAgICAgICBjb25zdCBhSWR4ID0gaWR4O1xuICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMuY29tcGlsZVRyZWUodHJlZS5jaGlsZHJlblswXSwgYUlkeCk7XG4gICAgICAgICAgICBjb25zdCBiSWR4ID0gaWR4ICsgYS5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBiID0gdGhpcy5jb21waWxlVHJlZSh0cmVlLmNoaWxkcmVuWzFdLCBiSWR4KTtcbiAgICAgICAgICAgIHJldHVybiBhLmNvbmNhdChiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuQUxURVJOQVRJT04pIHtcbiAgICAgICAgICAgIC8vIGJyYW5jaDsgYnV0IG5lZWQgdG8gY29tcGlsZSBsZWZ0IGZpcnN0LlxuICAgICAgICAgICAgLy8gbGVmdDpcbiAgICAgICAgICAgIGNvbnN0IGFJZHggPSBpZHggKyAxO1xuICAgICAgICAgICAgY29uc3QgbGVmdCA9IHRoaXMuY29tcGlsZVRyZWUodHJlZS5jaGlsZHJlblswXSwgYUlkeCk7XG4gICAgICAgICAgICBjb25zdCBiSWR4ID0gYUlkeCArIGxlZnQubGVuZ3RoICsgMTsgLy8gTGVhdmUgcm9vbSBmb3IganVtcCBhZnRlciBsZWZ0XG4gICAgICAgICAgICAvLyBub3cgd2UgY2FuIGRlZmluZSBicmFuY2gsIHdoaWNoIGdvZXMgYmVmb3JlIGxlZnQ6XG4gICAgICAgICAgICBjb25zdCBicmFuY2g6IFByb2dyYW0gPSBbeyB0eXBlOiBcInNwbGl0XCIsIGxlZnQ6IGFJZHgsIHJpZ2h0OiBiSWR4LCBpbmRleDogaWR4LCBzb3VyY2U6IHRyZWUgfV07XG4gICAgICAgICAgICAvLyByaWdodDpcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0ID0gdGhpcy5jb21waWxlVHJlZSh0cmVlLmNoaWxkcmVuWzFdLCBiSWR4KTtcbiAgICAgICAgICAgIGNvbnN0IGNJZHggPSBiSWR4ICsgcmlnaHQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QganVtcDogUHJvZ3JhbSA9IFt7IHR5cGU6IFwianVtcFwiLCB0YXJnZXQ6IGNJZHgsIGluZGV4OiBhSWR4ICsgbGVmdC5sZW5ndGgsIHNvdXJjZTogdHJlZSB9XTtcbiAgICAgICAgICAgIHJldHVybiBicmFuY2guY29uY2F0KGxlZnQpLmNvbmNhdChqdW1wKS5jb25jYXQocmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5JTlRFUlNFQ1RJT04pIHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBmcm9tUGFyc2VUcmVlKHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgY29uc3QgYiA9IGZyb21QYXJzZVRyZWUodHJlZS5jaGlsZHJlblsxXSk7XG4gICAgICAgICAgICBjb25zdCBheGIgPSBhLmludGVyc2VjdChiKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVTRkEoYXhiLCBpZHgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5SRVBFVElUSU9OKSB7XG4gICAgICAgICAgICBjb25zdCBncmVlZHkgPSB0cmVlLnZhbHVlLmdyZWVkeTtcbiAgICAgICAgICAgIGNvbnN0IG1pbiA9IHRyZWUudmFsdWUubG93ZXJCb3VuZDtcbiAgICAgICAgICAgIGNvbnN0IHBoaSA9IHRyZWUuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICAvLyBtaW4gcmVwZXRpdGlvbnMgb2YgcGhpXG4gICAgICAgICAgICBsZXQgcHJlZmFjZSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtaW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBoaVBnbSA9IHRoaXMuY29tcGlsZVRyZWUocGhpLCBpZHgpO1xuICAgICAgICAgICAgICAgIGlkeCArPSBwaGlQZ20ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHByZWZhY2UucHVzaCguLi5waGlQZ20pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyZWUudmFsdWUudXBwZXJCb3VuZCAhPSBCT1VORF9JTkZJTklURSkge1xuICAgICAgICAgICAgICAgIC8vIE0tTiByZXBldGl0aW9ucyBvZiAocGhpPylcbiAgICAgICAgICAgICAgICBjb25zdCBtYXggPSB0cmVlLnZhbHVlLnVwcGVyQm91bmQ7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbmFscyA9IFtdO1xuICAgICAgICAgICAgICAgIGxldCB0YXJnZXRzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IG1pbjsgaSA8IG1heDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugcm9vbSBmb3Igc3BsaXQgbGksbFpcbiAgICAgICAgICAgICAgICAgICAgaWR4ID0gaWR4ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgLy8gc3RvcmUganVtcCB0YXJnZXQgbGkgaW4gdGFyZ2V0c1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRzLnB1c2goaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhpUGdtID0gdGhpcy5jb21waWxlVHJlZShwaGksIGlkeCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIG1ha2Ugcm9vbSBmb3IgcGhpUGdtXG4gICAgICAgICAgICAgICAgICAgIGlkeCArPSBwaGlQZ20ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbHMucHVzaChwaGlQZ20pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2lkeCBpcyBub3cganVzdCBwYXN0IHRoZSBlbmQgb2YgYWxsIHRoZSBcIm9wdGlvbmFsc1wiLlxuICAgICAgICAgICAgICAgIGxldCByZXBldGl0aW9uOiBQcm9ncmFtID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcHRpb25hbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwZXRpdGlvbi5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3BsaXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IChncmVlZHkgPyB0YXJnZXRzW2ldIDogaWR4KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAoZ3JlZWR5ID8gaWR4IDogdGFyZ2V0c1tpXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGFyZ2V0c1tpXSAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHRyZWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcGV0aXRpb24ucHVzaCguLi4ob3B0aW9uYWxzW2ldKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwcmVmYWNlLmNvbmNhdChyZXBldGl0aW9uKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQTogc3BsaXQgQiwgQzsgYnV0IG11c3QgY29tcGlsZSBCIGZpcnN0IHRvIGdldCBsYWJlbCBmb3IgQ1xuICAgICAgICAgICAgICAgIGNvbnN0IGFJZHggPSBpZHg7XG4gICAgICAgICAgICAgICAgLy8gbWFrZSByb29tIGZvciB0aGUgc3BsaXRcbiAgICAgICAgICAgICAgICBjb25zdCBiSWR4ID0gYUlkeCArIDE7XG4gICAgICAgICAgICAgICAgLy8gdGhlbiBwdXQgaW4gQlxuICAgICAgICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLmNvbXBpbGVUcmVlKHBoaSwgYklkeCk7XG4gICAgICAgICAgICAgICAgY29uc3QganVtcDogUHJvZ3JhbSA9IFt7IHR5cGU6IFwianVtcFwiLCB0YXJnZXQ6IGFJZHgsIGluZGV4OiBiSWR4ICsgYi5sZW5ndGgsIHNvdXJjZTogdHJlZSB9XTtcbiAgICAgICAgICAgICAgICAvLyB0aGVuIGxhYmVsIENcbiAgICAgICAgICAgICAgICBjb25zdCBjSWR4ID0gYklkeCArIGIubGVuZ3RoICsgMTtcbiAgICAgICAgICAgICAgICBjb25zdCBicmFuY2g6IFByb2dyYW0gPSBbe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNwbGl0XCIsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IChncmVlZHkgPyBiSWR4IDogY0lkeCksXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAoZ3JlZWR5ID8gY0lkeCA6IGJJZHgpLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHRyZWVcbiAgICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlZmFjZS5jb25jYXQoYnJhbmNoKS5jb25jYXQoYikuY29uY2F0KGp1bXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IGNvbXBpbGUgXCIgKyBKU09OLnN0cmluZ2lmeSh0cmVlKSk7XG4gICAgfVxuXG4gICAgY29tcGlsZVNGQShzZmE6IFNGQSwgaWR4OiBudW1iZXIpOiBQcm9ncmFtIHtcbiAgICAgICAgbGV0IHN0YXRlU3RhcnRzID0ge30sIGVuZEp1bXBzOiBKdW1wW10gPSBbXTtcbiAgICAgICAgbGV0IHBnbTogUHJvZ3JhbSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNmYS5zdGFydFN0YXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSBzZmEuc3RhcnRTdGF0ZXNbaV07XG4gICAgICAgICAgICBjb25zdCBzdGFydFBnbSA9IHRoaXMuY29tcGlsZVNGQV8oc3RhcnQsIGlkeCwgc3RhdGVTdGFydHMsIGVuZEp1bXBzKTtcbiAgICAgICAgICAgIHBnbSA9IHBnbS5jb25jYXQoc3RhcnRQZ20pO1xuICAgICAgICAgICAgaWR4ICs9IHN0YXJ0UGdtLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVuZEp1bXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBlbmRKdW1wc1tpXS50YXJnZXQgPSBpZHg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBnbTtcbiAgICB9XG5cbiAgICBjb21waWxlU0ZBXyhzdGF0ZTogU3RhdGUsIGlkeDogbnVtYmVyLCBzdGF0ZVN0YXJ0czogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSwgZW5kSnVtcHM6IEp1bXBbXSk6IFByb2dyYW0ge1xuICAgICAgICBpZiAoc3RhdGUuaWQgaW4gc3RhdGVTdGFydHMpIHtcbiAgICAgICAgICAgIHJldHVybiBbe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwianVtcFwiLFxuICAgICAgICAgICAgICAgIHRhcmdldDogc3RhdGVTdGFydHNbc3RhdGUuaWRdLFxuICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgc291cmNlOiB7IHR5cGU6IFwic3RhdGVcIiwgdmFsdWU6IHN0YXRlLmlkIH1cbiAgICAgICAgICAgIH1dIGFzIFByb2dyYW07XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGVTdGFydHNbc3RhdGUuaWRdID0gaWR4O1xuICAgICAgICBpZiAoc3RhdGUuZWRnZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZS5pc0FjY2VwdGluZykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGp1bXA6IEp1bXAgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwianVtcFwiLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogeyB0eXBlOiBcInN0YXRlXCIsIHZhbHVlOiBzdGF0ZS5pZCwgY2hpbGRyZW46IFtdLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfSB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBlbmRKdW1wcy5wdXNoKGp1bXApO1xuICAgICAgICAgICAgICAgIHJldHVybiBbanVtcF0gYXMgUHJvZ3JhbTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ29tcGlsaW5nIGFuIFNGQSBzdGF0ZSB3aXRoIG5vIG91dGdvaW5nIGVkZ2VzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IHBnbTogUHJvZ3JhbSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0ZS5lZGdlcy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc3RhdGUuZWRnZXNbaV07XG4gICAgICAgICAgICAgICAgY29uc3QgZWRnZVNwbGl0OiBTcGxpdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzcGxpdFwiLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBpZHggKyAxLFxuICAgICAgICAgICAgICAgICAgICByaWdodDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0YXRlXCIsIHZhbHVlOiBgJHtzdGF0ZS5pZH0uJHtpfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2VQZ206IFByb2dyYW0gPSAoW2VkZ2VTcGxpdF0gYXMgUHJvZ3JhbSkuY29uY2F0KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBpbGVTRkFfZWRnZShzdGF0ZSwgZWRnZSwgaWR4ICsgMSwgc3RhdGVTdGFydHMsIGVuZEp1bXBzKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgcGdtID0gcGdtLmNvbmNhdChlZGdlUGdtKTtcbiAgICAgICAgICAgICAgICBpZHggKz0gZWRnZVBnbS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZWRnZVNwbGl0LnJpZ2h0ID0gaWR4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZWRnZSA9IHN0YXRlLmVkZ2VzW3N0YXRlLmVkZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgZWRnZVBnbSA9IHRoaXMuY29tcGlsZVNGQV9lZGdlKHN0YXRlLCBlZGdlLCBpZHgsIHN0YXRlU3RhcnRzLCBlbmRKdW1wcyk7XG4gICAgICAgICAgICByZXR1cm4gcGdtLmNvbmNhdChlZGdlUGdtKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBpbGVTRkFfZWRnZShzdGF0ZTogU3RhdGUsIGVkZ2U6IEVkZ2UsIGlkeDogbnVtYmVyLCBzdGF0ZVN0YXJ0czogeyBbaWQ6IHN0cmluZ106IG51bWJlciB9LCBlbmRKdW1wczogSnVtcFtdKTogUHJvZ3JhbSB7XG4gICAgICAgIC8vYWNjZXB0aW5nIHNlbGYtZWRnZXMgbmVlZCB0byBiZSB0cmVhdGVkIHNwZWNpYWxseSBzbyB0aGV5IGRvbid0IGp1bXAgcmlnaHQgYmFja1xuICAgICAgICAvL3RvIHRoZSBwYXJlbnQgc3RhdGUuXG4gICAgICAgIGNvbnN0IGVkZ2VQZ206IFByb2dyYW0gPSB0aGlzLmNvbXBpbGVTRkFfZWRnZUxhYmVsKHN0YXRlLCBlZGdlLCBpZHgpO1xuICAgICAgICBpZHggKz0gZWRnZVBnbS5sZW5ndGg7XG4gICAgICAgIGlmIChzdGF0ZS5pc0FjY2VwdGluZyAmJiBlZGdlLnRhcmdldCA9PSBzdGF0ZSAmJiAhZWRnZS5mb3JtdWxhKSB7XG4gICAgICAgICAgICBjb25zdCBqdW1wOiBKdW1wID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwianVtcFwiLFxuICAgICAgICAgICAgICAgIHRhcmdldDogbnVsbCxcbiAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImVkZ2VcIiwgdmFsdWU6IGAke3N0YXRlLmlkfS0+JHtlZGdlLnRhcmdldC5pZH1gLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGVuZEp1bXBzLnB1c2goanVtcCk7XG4gICAgICAgICAgICByZXR1cm4gZWRnZVBnbS5jb25jYXQoW2p1bXBdIGFzIFByb2dyYW0pO1xuICAgICAgICB9IGVsc2UgaWYgKGVkZ2UuZm9ybXVsYSkge1xuICAgICAgICAgICAgcmV0dXJuIGVkZ2VQZ20uY29uY2F0KFt7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJjaGVja1wiLFxuICAgICAgICAgICAgICAgIGZvcm11bGE6IGVkZ2UuZm9ybXVsYSxcbiAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgIHNvdXJjZTogeyB0eXBlOiBcImVkZ2VcIiwgdmFsdWU6IGAke3N0YXRlLmlkfS0+JHtlZGdlLnRhcmdldCEuaWR9YCB9XG4gICAgICAgICAgICB9XSBhcyBQcm9ncmFtKS5jb25jYXQoXG4gICAgICAgICAgICAgICAgdGhpcy5jb21waWxlU0ZBXyhlZGdlLnRhcmdldCEsIGlkeCArIDEsIHN0YXRlU3RhcnRzLCBlbmRKdW1wcylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZWRnZVBnbS5jb25jYXQoXG4gICAgICAgICAgICAgICAgdGhpcy5jb21waWxlU0ZBXyhlZGdlLnRhcmdldCEsIGlkeCwgc3RhdGVTdGFydHMsIGVuZEp1bXBzKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbXBpbGVTRkFfZWRnZUxhYmVsKHN0YXRlOiBTdGF0ZSwgZWRnZTogRWRnZSwgaWR4OiBudW1iZXIpOiBQcm9ncmFtIHtcbiAgICAgICAgbGV0IHBnbTogUHJvZ3JhbSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVkZ2UubGFiZWwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGwgPSBlZGdlLmxhYmVsW2ldO1xuICAgICAgICAgICAgaWYgKGwudHlwZSA9PSBcInN0YXJ0LWNhcHR1cmVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVJRCA9IHRoaXMuY2FwdHVyZUlkeDtcbiAgICAgICAgICAgICAgICBjb25zdCBncm91cCA9IGwuZ3JvdXA7XG4gICAgICAgICAgICAgICAgbC5jYXB0dXJlSUQgPSBjYXB0dXJlSUQ7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnQ6IFN0YXJ0ID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwOiBncm91cCxcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUlEOiBjYXB0dXJlSUQsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlZGdlXCIsIHZhbHVlOiBgJHtzdGF0ZS5pZH0tPiR7ZWRnZS50YXJnZXQhLmlkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuY2FwdHVyZUlkeCsrO1xuICAgICAgICAgICAgICAgIHBnbS5wdXNoKHN0YXJ0KTtcbiAgICAgICAgICAgICAgICBpZHgrKztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobC50eXBlID09IFwiZW5kLWNhcHR1cmVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVJRCA9IGwuc3RhcnQuY2FwdHVyZUlEO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gbC5ncm91cDtcbiAgICAgICAgICAgICAgICBjb25zdCBlbmQ6IEVuZCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlbmRcIixcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLFxuICAgICAgICAgICAgICAgICAgICBjYXB0dXJlSUQ6IGNhcHR1cmVJRCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImVkZ2VcIiwgdmFsdWU6IGAke3N0YXRlLmlkfS0+JHtlZGdlLnRhcmdldCEuaWR9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwgcmFuZ2U6IHsgc3RhcnQ6IC0xLCBlbmQ6IC0xIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcGdtLnB1c2goZW5kKTtcbiAgICAgICAgICAgICAgICBpZHgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGdtO1xuICAgIH1cblxuICAgIGNvbXBpbGUodHJlZTogUGFyc2VUcmVlLCBkZWJ1ZzogYm9vbGVhbiA9IGZhbHNlKTogUHJvZ3JhbSB7XG4gICAgICAgIC8vIGlmICghdHJlZS50eXBlICYmIHRyZWUudHJlZSAmJiB0cmVlLmVycm9ycyAmJiB0cmVlLnJlbWFpbmRlcikge1xuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIC8vIFwiUmVjZWl2ZWQgYSBQYXJzZVJlc3VsdCwgYnV0IGV4cGVjdGVkIGEgUGFyc2VUcmVlLlwiICtcbiAgICAgICAgLy8gXCJDYWxsIGNvbXBpbGUoKSB3aXRoIHRoZSAudHJlZSBlbGVtZW50IG9mIFwiICsgdHJlZVxuICAgICAgICAvLyApO1xuICAgICAgICAvLyB9XG4gICAgICAgIGlmICghdGhpcy52YWxpZGF0ZVBhcnNlVHJlZSh0cmVlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2UgdHJlZSBkaWQgbm90IHJlcHJlc2VudCBhIHZhbGlkIHByb2dyYW1cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmVzZXRTdGF0ZUlEKCk7XG4gICAgICAgIHRoaXMuY2FwdHVyZUlkeCA9IDA7XG4gICAgICAgIC8vIFdlIHByZWZhY2UgZXZlcnkgcHJvZ3JhbSB3aXRoIFwidHJ1ZSAuLlwiIHNvIHRoYXQgYWxsIFBsYXlzcGVjcyBhcmUgZWZmZWN0aXZlbHkgc3RhcnQtYW5jaG9yZWQuXG4gICAgICAgIC8vIFRoaXMgaXMgYXMgcGVyIGh0dHBzOi8vc3d0Y2guY29tL35yc2MvcmVnZXhwL3JlZ2V4cDIuaHRtbFxuICAgICAgICBjb25zdCBwcmVmYWNlOiBQcm9ncmFtID0gW1xuICAgICAgICAgICAgeyB0eXBlOiBcInNwbGl0XCIsIGxlZnQ6IDMsIHJpZ2h0OiAxLCBpbmRleDogMCwgc291cmNlOiBcInJvb3RcIiB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiY2hlY2tcIixcbiAgICAgICAgICAgICAgICBmb3JtdWxhOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlVHlwZXMuVFJVRSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsgc3RhcnQ6IDAsIGVuZDogMCB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbmRleDogMSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IFwicm9vdFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyB0eXBlOiBcImp1bXBcIiwgdGFyZ2V0OiAwLCBpbmRleDogMiwgc291cmNlOiBcInJvb3RcIiB9LFxuICAgICAgICAgICAgeyB0eXBlOiBcInN0YXJ0XCIsIGdyb3VwOiBcIiRyb290XCIsIGNhcHR1cmVJRDogLTEsIGluZGV4OiAzLCBzb3VyY2U6IFwicm9vdFwiIH1cbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgYm9keSA9IHRoaXMuY29tcGlsZVRyZWUodHJlZSwgcHJlZmFjZS5sZW5ndGgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBwcmVmYWNlLmNvbmNhdChib2R5KS5jb25jYXQoW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiZW5kXCIsXG4gICAgICAgICAgICAgICAgZ3JvdXA6IFwiJHJvb3RcIixcbiAgICAgICAgICAgICAgICBjYXB0dXJlSUQ6IC0xLFxuICAgICAgICAgICAgICAgIGluZGV4OiBwcmVmYWNlLmxlbmd0aCArIGJvZHkubGVuZ3RoLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJyb290XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJtYXRjaFwiLFxuICAgICAgICAgICAgICAgIGluZGV4OiBwcmVmYWNlLmxlbmd0aCArIGJvZHkubGVuZ3RoICsgMSxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IFwicm9vdFwiXG4gICAgICAgICAgICB9XG4gICAgICAgIF0pO1xuICAgICAgICBpZiAoIXRoaXMudmFsaWRhdGVQcm9ncmFtKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBcIkVycm9yIGNvbXBpbGluZyB0cmVlIFwiICsgSlNPTi5zdHJpbmdpZnkodHJlZSkgKyBcIiBpbnRvIHJlc3VsdCBcIiArIEpTT04uc3RyaW5naWZ5KHJlc3VsdClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkZWJ1Zykge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0W2ldLnNvdXJjZTtcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0W2ldLmluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgdmFsaWRhdGVQYXJzZVRyZWUocGFyc2VUcmVlOiBQYXJzZVRyZWUpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCFERUJVR19NT0RFKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBlbnN1cmUgbm8gJHt9IHVuZGVybmVhdGggYSBwcm9wb3NpdGlvblxuICAgICAgICBpZiAodGhpcy5hbnlDYXB0dXJlc0luc2lkZVByb3Bvc2l0aW9ucyhwYXJzZVRyZWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdG9kbzogb3RoZXIgc2FuaXR5IGNoZWNrc1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBhbnlDYXB0dXJlc0luc2lkZVByb3Bvc2l0aW9ucyhwYXJlbnQ6IFBhcnNlVHJlZSkge1xuICAgICAgICBjb25zdCBwcm9wID0gaXNQcm9wb3NpdGlvbmFsKHBhcmVudCk7XG4gICAgICAgIGZvciAobGV0IGNpID0gMDsgY2kgPCBwYXJlbnQuY2hpbGRyZW4ubGVuZ3RoOyBjaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZCA9IHBhcmVudC5jaGlsZHJlbltjaV07XG4gICAgICAgICAgICBpZiAocHJvcCAmJiBjaGlsZC50eXBlID09IHBhcnNlVHlwZXMuQ0FQVFVSRSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDYW4ndCBwdXQgYSBjYXB0dXJpbmcgZ3JvdXAgaW5zaWRlIG9mIGEgcHJvcG9zaXRpb25hbCB0ZXJtOiAke3N0cmluZ2lmeUZvcm11bGEocGFyZW50KX0hYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbnlDYXB0dXJlc0luc2lkZVByb3Bvc2l0aW9ucyhjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFsaWRhdGVQcm9ncmFtKHBnbTogUHJvZ3JhbSk6IGJvb2xlYW4ge1xuICAgICAgICAvLyB0b2RvOiB2YWxpZGF0ZSBwcm9ncmFtcyBhZ2FpbnN0IG1vcmUgYmFzaWMgc2FuaXR5IGNoZWNrcy5cbiAgICAgICAgLy9lbnN1cmUgZWFjaCBpbnN0cnVjdGlvbidzIGluZGV4IGlzIGl0cyBpbmRleCBpbiBwZ21cbiAgICAgICAgLy9lbnN1cmUgbm8gc3BsaXQgb3IganVtcCBnb2VzIGJleW9uZCBlbmQgb2YgcHJvZ3JhbVxuICAgICAgICAvLy4uLlxuICAgICAgICBpZiAoIURFQlVHX01PREUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGdtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0ciA9IHBnbVtpXTtcbiAgICAgICAgICAgIC8vaXMgaXRzIGluZGV4IGNvcnJlY3Q/XG4gICAgICAgICAgICBpZiAoaW5zdHIuaW5kZXggIT09IGkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhZCBjb2RlIGdlbmVyYXRpb246JHtpbnN0ci5pbmRleH0gIT0gJHtpfSBmb3IgJHtzdHJpbmdpZnkoW2luc3RyXSl9IGluICR7c3RyaW5naWZ5KHBnbSl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVhY2hhYmxlID0gdGhpcy5yZWFjaGFibGVJbnN0cnVjdGlvbnMocGdtLCAwLCB7fSk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGdtLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXJlYWNoYWJsZVtpXSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQmFkIGNvZGUgZ2VuZXJhdGlvbjoke2l9IG5vdCByZWFjaGFibGUgZm9yICR7c3RyaW5naWZ5KFtwZ21baV1dKX0gaW4gJHtzdHJpbmdpZnkocGdtKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZWFjaGFibGVJbnN0cnVjdGlvbnMocGdtOiBQcm9ncmFtLCBpMDogbnVtYmVyLCBzZWVuOiB7IFtwb2ludDogbnVtYmVyXTogYm9vbGVhbiB9KTogeyBbcG9pbnQ6IG51bWJlcl06IGJvb2xlYW4gfSB7XG4gICAgICAgIC8vYSBsb29wLCBvciBlbHNlIG91dCBvZiBwcm9ncmFtIGNvZGVcbiAgICAgICAgaWYgKChpMCBpbiBzZWVuKSB8fCBpMCA+PSBwZ20ubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VlbjtcbiAgICAgICAgfVxuICAgICAgICAvL21hcmsgaTAgYXMgc2VlblxuICAgICAgICBzZWVuW2kwXSA9IHRydWU7XG4gICAgICAgIGNvbnN0IG90aGVyID0gcGdtW2kwXTtcbiAgICAgICAgLy9mb2xsb3cgaW5kaXJlY3Rpb24gdmlhIHJlY3Vyc2l2ZSBzZWFyY2gsIGtlZXBpbmcgdHJhY2sgb2Ygc2VlbiBsb2NhdGlvbnNcbiAgICAgICAgaWYgKG90aGVyLnR5cGUgPT0gXCJzcGxpdFwiKSB7XG4gICAgICAgICAgICBsZXQgc2VlbkxlZnQgPSB0aGlzLnJlYWNoYWJsZUluc3RydWN0aW9ucyhwZ20sIG90aGVyLmxlZnQsIHNlZW4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhY2hhYmxlSW5zdHJ1Y3Rpb25zKHBnbSwgb3RoZXIucmlnaHQhLCBzZWVuTGVmdCk7XG4gICAgICAgIH0gZWxzZSBpZiAob3RoZXIudHlwZSA9PSBcImp1bXBcIikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhY2hhYmxlSW5zdHJ1Y3Rpb25zKHBnbSwgb3RoZXIudGFyZ2V0ISwgc2Vlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL2ZvciBub24taW5kaXJlY3QgaW5zdHJ1Y3Rpb25zLCBqdXN0IGluY3JlbWVudCBpMCBhbmQgbW92ZSBvblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVhY2hhYmxlSW5zdHJ1Y3Rpb25zKHBnbSwgaTAgKyAxLCBzZWVuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeUN1c3RvbShmb3JtdWxhOiBQYXJzZVRyZWUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHZhbHVlID0gZm9ybXVsYS52YWx1ZSA9PT0gdW5kZWZpbmVkID8gXCJcIiA6IGZvcm11bGEudmFsdWUudG9TdHJpbmcoKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IGZvcm11bGEuY2hpbGRyZW4gJiYgZm9ybXVsYS5jaGlsZHJlbi5sZW5ndGggP1xuICAgICAgICAoZm9ybXVsYS5jaGlsZHJlbi5tYXAoKGMpID0+IHN0cmluZ2lmeUZvcm11bGEoYykpKS5qb2luKFwiLFwiKSA6XG4gICAgICAgIFwiXCI7XG4gICAgcmV0dXJuIGAke2Zvcm11bGEudHlwZX0oJHt2YWx1ZX0sJHtjaGlsZHJlbn0pYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeUZvcm11bGEoZm9ybXVsYTogUGFyc2VUcmVlKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKGZvcm11bGEudHlwZSkge1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuVFJVRTpcbiAgICAgICAgICAgIHJldHVybiBcInRydWVcIjtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkZBTFNFOlxuICAgICAgICAgICAgcmV0dXJuIFwiZmFsc2VcIjtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLlNUQVJUOlxuICAgICAgICAgICAgcmV0dXJuIFwic3RhcnRcIjtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkVORDpcbiAgICAgICAgICAgIHJldHVybiBcImVuZFwiO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuQU5EOlxuICAgICAgICAgICAgcmV0dXJuIGAke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblswXSl9ICYgJHtzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGEuY2hpbGRyZW5bMV0pfWA7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5PUjpcbiAgICAgICAgICAgIHJldHVybiBgJHtzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGEuY2hpbGRyZW5bMF0pfSB8ICR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzFdKX1gO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuTk9UOlxuICAgICAgICAgICAgcmV0dXJuIGBub3QgJHtzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGEuY2hpbGRyZW5bMF0pfWA7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5HUk9VUDpcbiAgICAgICAgICAgIHJldHVybiBgKCR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzBdKX0pYDtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkNBUFRVUkU6XG4gICAgICAgICAgICByZXR1cm4gYCQke2Zvcm11bGEudmFsdWUuY2FwdHVyZUlEfToke2Zvcm11bGEudmFsdWUuZ3JvdXB9KCR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzBdKX0pYDtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmdpZnlDdXN0b20oZm9ybXVsYSk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5KGNvZGU6IFByb2dyYW0pOiBzdHJpbmcge1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgaW5zdHIgPSBjb2RlW2ldO1xuICAgICAgICBsZXQgaW5zdHJTdHIgPSBgJHtpfToke2luc3RyLnR5cGV9YDtcbiAgICAgICAgc3dpdGNoIChpbnN0ci50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwic3BsaXRcIjpcbiAgICAgICAgICAgICAgICBpbnN0clN0ciArPSBgICR7aW5zdHIubGVmdH0gJHtpbnN0ci5yaWdodH1gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImp1bXBcIjpcbiAgICAgICAgICAgICAgICBpbnN0clN0ciArPSBgICR7aW5zdHIudGFyZ2V0fWA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY2hlY2tcIjpcbiAgICAgICAgICAgICAgICBpbnN0clN0ciArPSBcIiBcIiArIHN0cmluZ2lmeUZvcm11bGEoaW5zdHIuZm9ybXVsYSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICBpbnN0clN0ciArPSBgICR7aW5zdHIuZ3JvdXB9ICgke2luc3RyLmNhcHR1cmVJRH0pYDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJtYXRjaFwiOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgaW5zdHJ1Y3Rpb24gXCIgKyBpbnN0cik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluc3RyLnNvdXJjZSkge1xuICAgICAgICAgICAgdmFyIHNyYyA9IGluc3RyLnNvdXJjZSE7XG4gICAgICAgICAgICBpZiAoc3JjID09IFwicm9vdFwiKSB7XG4gICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gXCIgIFxcdFxcdChyb290KVwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5zdHIudHlwZSA9PSBcImNoZWNrXCIgJiYgXCJyYW5nZVwiIGluIHNyYykge1xuICAgICAgICAgICAgICAgICAgICBpbnN0clN0ciArPSBgXFx0KGNoLiAke3NyYy5yYW5nZS5zdGFydH0tJHtzcmMucmFuZ2UuZW5kfSlgO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RyU3RyICs9IGBcXHRcXHQoJHtzcmMudHlwZX0gJHtKU09OLnN0cmluZ2lmeShzcmMudmFsdWUpfSlgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXN1bHQucHVzaChpbnN0clN0cik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQuam9pbihcIlxcblwiKTtcbn1cbiIsImltcG9ydCB7IFBsYXlzcGVjc0NvbnRleHQgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgcGFyc2VUeXBlcywgUGFyc2VyLCBQYXJzZVJlc3VsdCB9IGZyb20gXCIuL3BhcnNlclwiO1xuaW1wb3J0IHsgUGFyc2VUcmVlIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IENvbXBpbGVyLCBQcm9ncmFtIH0gZnJvbSBcIi4vY29tcGlsZXJcIjtcbmV4cG9ydCBjbGFzcyBQbGF5c3BlYzxUcmFjZSwgU3RhdGU+IHtcbiAgICBjb250ZXh0OiBQbGF5c3BlY3NDb250ZXh0PFRyYWNlLCBTdGF0ZT47XG4gICAgc3BlYzogc3RyaW5nO1xuICAgIHBhcnNlUmVzdWx0OiBQYXJzZVJlc3VsdDtcbiAgICBwcm9ncmFtOiBQcm9ncmFtO1xuICAgIGNvbnN0cnVjdG9yKHNwZWM6IHN0cmluZywgY29udGV4dDogUGxheXNwZWNzQ29udGV4dDxUcmFjZSwgU3RhdGU+LCBkZWJ1ZzogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgICAgIGNvbnN0IHBhcnNlciA9IG5ldyBQYXJzZXIoY29udGV4dC50b2tlbnMpO1xuICAgICAgICBjb25zdCBjb21waWxlciA9IG5ldyBDb21waWxlcihjb250ZXh0LnRva2Vucyk7XG4gICAgICAgIHRoaXMucGFyc2VSZXN1bHQgPSBwYXJzZXIucGFyc2Uoc3BlYyk7XG4gICAgICAgIGlmICh0aGlzLnBhcnNlUmVzdWx0LmVycm9ycy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcnNlZCB3aXRoIGVycm9yczpcIiArIEpTT04uc3RyaW5naWZ5KHRoaXMucGFyc2VSZXN1bHQuZXJyb3JzKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcm9ncmFtID0gY29tcGlsZXIuY29tcGlsZSh0aGlzLnBhcnNlUmVzdWx0LnRyZWUsIGRlYnVnKTtcbiAgICB9XG4gICAgZ2V0IHRyYWNlQVBJKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnRyYWNlO1xuICAgIH1cbiAgICBnZXQgY2hlY2tBUEkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuY2hlY2tzO1xuICAgIH1cbiAgICBjaGVjayh0cmFjZTogVHJhY2UsIHN0YXRlOiBTdGF0ZSwgaWR4OiBudW1iZXIsIGZvcm11bGE6IFBhcnNlVHJlZSk6IEJvb2xlYW4ge1xuICAgICAgICBzd2l0Y2ggKGZvcm11bGEudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLlRSVUU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuRkFMU0U6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLlNUQVJUOlxuICAgICAgICAgICAgICAgIHJldHVybiBpZHggPT0gMDtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5FTkQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhY2VBUEkuaXNBdEVuZCh0cmFjZSk7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuQU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhLmNoaWxkcmVuWzBdKSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5PUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVjayh0cmFjZSwgc3RhdGUsIGlkeCwgZm9ybXVsYS5jaGlsZHJlblswXSkgfHxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVjayh0cmFjZSwgc3RhdGUsIGlkeCwgZm9ybXVsYS5jaGlsZHJlblsxXSk7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuTk9UOlxuICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy5jaGVjayh0cmFjZSwgc3RhdGUsIGlkeCwgZm9ybXVsYS5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuR1JPVVA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2sodHJhY2UsIHN0YXRlLCBpZHgsIGZvcm11bGEuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0FQSVtmb3JtdWxhLnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrQVBJW2Zvcm11bGEudHlwZV0odHJhY2UsIHN0YXRlLCBpZHgsIGZvcm11bGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBwcm9wb3NpdGlvbmFsIGZvcm11bGFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbWF0Y2godHJhY2U6IFRyYWNlLCBwcmVzZXJ2ZVN0YXRlczogYm9vbGVhbiA9IGZhbHNlKTogUGxheXNwZWNSZXN1bHQ8VHJhY2UsIFN0YXRlPiB8IG51bGwge1xuICAgICAgICByZXR1cm4gKG5ldyBQbGF5c3BlY1Jlc3VsdCh7XG4gICAgICAgICAgICBzcGVjOiB0aGlzLFxuICAgICAgICAgICAgcHJlc2VydmVTdGF0ZXNcbiAgICAgICAgfSwgcGxheXNwZWNSZXN1bHRTdGF0ZUluaXQodHJhY2UpLCB1bmRlZmluZWQpKS5uZXh0KCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwbGF5c3BlY1Jlc3VsdFN0YXRlSW5pdDxUPih0cmFjZTogVCk6IFBsYXlzcGVjUmVzdWx0U3RhdGU8VD4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIC8vIFdlIGNhbiB1c2UgcGxhaW4gYXJyYXlzIGZvciB0aGUgcHJpb3JpdHkgcXVldWUgZm9yIG5vdywgc2luY2Ugd2Uga25vdyB0aHJlYWRzIHdpbGwgYmUgYWRkZWRcbiAgICAgICAgLy8gaW4gcHJpb3JpdHkgb3JkZXIuIFRoaXMgYWxzbyBtZWFucyB3ZSBuZXZlciBzaGlmdCwgYnV0IGluY3JlbWVudCBpIGdvaW5nIHVwIHRocm91Z2ggdGhlIHF1ZXVlLlxuICAgICAgICBxdWV1ZTogbmV3IE5vblNocmlua2luZ0FycmF5PFRocmVhZD4oKSxcbiAgICAgICAgbmV4dFF1ZXVlOiBuZXcgTm9uU2hyaW5raW5nQXJyYXk8VGhyZWFkPigpLFxuICAgICAgICB0aHJlYWRzOiBbXSxcbiAgICAgICAgLy8gVGhpcyBOb25SZXBsYWNpbmdIYXNoTWFwIHdpbGwgaGF2ZSBudW1iZXIga2V5cyBzbyBpdCBjYW4gdXNlIGRlZmF1bHQgaGFzaC9lcXVpdlxuICAgICAgICBsaXZlU2V0OiBuZXcgTm9uUmVwbGFjaW5nSGFzaE1hcDxudW1iZXIsIFRocmVhZFN0YXRlPihcbiAgICAgICAgICAgICgoYSwgYikgPT4gYSA9PSBiKSxcbiAgICAgICAgICAgICgoYSkgPT4gYSlcbiAgICAgICAgKSxcbiAgICAgICAgbWF4VGhyZWFkSUQ6IDAsXG4gICAgICAgIC8vIFdlIHN0YXJ0IGF0IC0xIHNpbmNlIHRoZSBpbml0aWFsIGFjdGlvbnMgb2YgdGhlIGluaXRpYWwgdGhyZWFkXG4gICAgICAgIC8vIHNob3VsZCBoYXBwZW4gYmVmb3JlIHRoZSB0cmFjZSByZWFjaGVzIGluZGV4IDAuIFRoaXMgbWFpbmx5IGVuc3VyZXMgdGhhdFxuICAgICAgICAvLyBjYXB0dXJlIGdyb3VwcyBsaW5lIHVwIGNvcnJlY3RseS5cbiAgICAgICAgaW5kZXg6IC0xLFxuICAgICAgICBwYXN0RW5kOiBmYWxzZSxcbiAgICAgICAgdHJhY2U6IHRyYWNlLFxuICAgICAgICAvLyBTYW1lIGhlcmUgZm9yIG1hdGNoZXMsIGFsd2F5cyBhZGRlZCBpbiBwcmlvcml0eSBvcmRlciAtLSBidXQgY2FuIHVzZSBhIHJlZ3VsYXIgYXJyYXlcbiAgICAgICAgbWF0Y2hRdWV1ZTogbmV3IFByaW9yaXR5UXVldWUoXG4gICAgICAgICAgICAobTogTWF0Y2gpID0+IG0ucHJpb3JpdHlcbiAgICAgICAgKSxcbiAgICAgICAgbWF0Y2hTZXQ6IG5ldyBOb25SZXBsYWNpbmdIYXNoTWFwKG1hdGNoRXF1aXZGbiwgbWF0Y2hIYXNoRm4pLFxuICAgICAgICBsYXN0TWF0Y2hQcmlvcml0eTogMFxuICAgIH07XG59XG5cbmNsYXNzIFRocmVhZCB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBwYzogbnVtYmVyO1xuICAgIHByaW9yaXR5OiBudW1iZXI7XG4gICAgbWF0Y2hlczogTWF0Y2hbXTtcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwYzogbnVtYmVyLCBwcmlvcml0eTogbnVtYmVyLCBtYXRjaGVzOiBBcnJheTxNYXRjaD4pIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnBjID0gcGM7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgLy9tYXRjaCBzaGFyaW5nOiBpbnN0ZWFkIHNldCB0aGlzLm1hdGNoZXMgdG8gbWF0Y2hlcyBhbmQgc2V0IHNoYXJlZE1hdGNoZXMgdG8gdHJ1ZVxuICAgICAgICB0aGlzLm1hdGNoZXMgPSBtYXRjaGVzLm1hcChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgbGV0IG0yID0gY2xvbmVNYXRjaChtKTtcbiAgICAgICAgICAgIG0yLnByaW9yaXR5ID0gTWF0aC5tYXgocHJpb3JpdHksIG0ucHJpb3JpdHkpO1xuICAgICAgICAgICAgcmV0dXJuIG0yO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBlcXVhbHModDI6IFRocmVhZCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5wYyA9PSB0Mi5wYztcbiAgICB9XG5cbiAgICBoYXNoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBjO1xuICAgIH1cblxuICAgIG1lcmdlVGhyZWFkKG90aGVyOiBUaHJlYWQpIHtcbiAgICAgICAgLy8gTWF0Y2ggc2hhcmluZzogaWYgbWF0Y2hlcyBhcmUgc2hhcmVkLCByZXBsYWNlIG1hdGNoZXMgbGlzdCB3aXRoIHNsaWNlIG9mIG1hdGNoZXMgbGlzdCxcbiAgICAgICAgLy8gYW5kIGluc2VydCBlaXRoZXIgY2xvbmVzIG9mIG90aGVyJ3MgbWF0Y2hlcyAoaWYgb3RoZXIgaXMgc2hhcmluZyBtYXRjaGVzKSBvciBvdGhlcidzIG1hdGNoZXMgZGlyZWN0bHlcbiAgICAgICAgLy8gQWxzbyB1cGRhdGUgcHJpb3JpdHkgb2YgbmV3IG1hdGNoZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdGhlci5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5tYXRjaGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoRXF1aXZGbih0aGlzLm1hdGNoZXNbal0sIG90aGVyLm1hdGNoZXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IGNsb25lTWF0Y2gob3RoZXIubWF0Y2hlc1tpXSk7XG4gICAgICAgICAgICAgICAgbWF0Y2gucHJpb3JpdHkgPSBNYXRoLm1heCh0aGlzLnByaW9yaXR5LCB0aGlzLm1hdGNoZXNbaV0ucHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hlcy5wdXNoKG1hdGNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBNZXJnZSBhbnkgb3RoZXIgc3RhdGVcbiAgICB9XG5cbiAgICBoYXNPcGVuTWF0Y2goKTogYm9vbGVhbiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXRjaGVzW2ldLmluc3RydWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHB1c2hNYXRjaEluc3RydWN0aW9uKGluc3RyOiBNYXRjaEluc3RydWN0aW9uKSB7XG4gICAgICAgIC8vIE1hdGNoIHNoYXJpbmc6IGlmIG1hdGNoZXMgYXJlIHNoYXJlZCwgcmVwbGFjZSBtYXRjaGVzIGxpc3Qgd2l0aCBhIG5ldyBsaXN0IGNvbnRhaW5pbmcgY2xvbmVzIG9mIG1hdGNoZXNcbiAgICAgICAgLy8gQWxzbyB1cGRhdGUgcHJpb3JpdHkgb2YgbWF0Y2hlc1xuICAgICAgICAvLyBBbmQgc2V0IHNoYXJlZE1hdGNoZXMgdG8gZmFsc2VcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1hdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMubWF0Y2hlc1tpXS5pbnN0cnVjdGlvbnMucHVzaChpbnN0cik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIC8vIExldCBtYXRjaGVzLCBhbmQgdGh1cyBrZXB0IHN0YXRlcywgYmUgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAgICAgICAgdGhpcy5tYXRjaGVzID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBJdGVtPEssIFY+IHtcbiAgICBrZXk6IEs7XG4gICAgdmFsOiBWO1xuICAgIGNvbnN0cnVjdG9yKGs6IEssIHY6IFYpIHtcbiAgICAgICAgdGhpcy5rZXkgPSBrO1xuICAgICAgICB0aGlzLnZhbCA9IHY7XG4gICAgfVxufVxuXG5jbGFzcyBOb25SZXBsYWNpbmdIYXNoTWFwPEssIFY+IHtcbiAgICBlcXVpdjogKGE6IEssIGI6IEspID0+IGJvb2xlYW47XG4gICAgaGFzaDogKGE6IEspID0+IG51bWJlcjtcbiAgICBjb2xsOiBJdGVtPEssIFY+W11bXTtcbiAgICBsZW5ndGg6IG51bWJlcjtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgZXF1aXZGbjogKGE6IEssIGI6IEspID0+IGJvb2xlYW4sXG4gICAgICAgIGhhc2hGbjogKGE6IEspID0+IG51bWJlcixcbiAgICAgICAgYnVja2V0Q291bnQ6IG51bWJlciA9IDEwMDApIHtcbiAgICAgICAgdGhpcy5lcXVpdiA9IGVxdWl2Rm47XG4gICAgICAgIHRoaXMuaGFzaCA9IGhhc2hGbjtcbiAgICAgICAgdGhpcy5jb2xsID0gbmV3IEFycmF5KGJ1Y2tldENvdW50KTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGJ1Y2tldEZpbmQoYnVja2V0OiBJdGVtPEssIFY+W10sIG9iajogSykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1Y2tldC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuZXF1aXYgPyB0aGlzLmVxdWl2KGJ1Y2tldFtpXS5rZXksIG9iaikgOiBidWNrZXRbaV0ua2V5ID09IG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBidWNrZXRbaV0udmFsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gSWYgdmFsIGlzIG5vdCBwcm92aWRlZCwgaXQgZGVmYXVsdHMgdG8gdHJ1ZVxuICAgIC8vIFVubGlrZSBhIHJlZ3VsYXIgbWFwLCB0aGlzIHdpbGwgTk9UIHJlcGxhY2UgZXhpc3Rpbmcga2V5cyFcbiAgICBwdXNoKG9iajogSywgdmFsOiBWKSB7XG4gICAgICAgIGNvbnN0IGhhc2hDb2RlID0gdGhpcy5oYXNoKG9iaikgJSB0aGlzLmNvbGwubGVuZ3RoO1xuICAgICAgICBsZXQgYnVja2V0ID0gdGhpcy5jb2xsW2hhc2hDb2RlXTtcbiAgICAgICAgaWYgKCFidWNrZXQpIHtcbiAgICAgICAgICAgIHRoaXMuY29sbFtoYXNoQ29kZV0gPSBbeyBrZXk6IG9iaiwgdmFsOiB2YWwgfV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5idWNrZXRGaW5kKGJ1Y2tldCwgb2JqKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBidWNrZXQucHVzaCh7IGtleTogb2JqLCB2YWw6IHZhbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlbmd0aCsrO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXQob2JqOiBLKTogViB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc2hDb2RlID0gdGhpcy5oYXNoKG9iaikgJSB0aGlzLmNvbGwubGVuZ3RoO1xuICAgICAgICBsZXQgYnVja2V0ID0gdGhpcy5jb2xsW2hhc2hDb2RlXTtcbiAgICAgICAgaWYgKCFidWNrZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVja2V0RmluZChidWNrZXQsIG9iaik7XG4gICAgfVxuXG4gICAgY2xlYXIoKTogdm9pZCB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb2xsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvL3RvZG86IGdlbmVyYXRlIGxlc3MgZ2FyYmFnZT9cbiAgICAgICAgICAgIHRoaXMuY29sbFtpXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBjb250YWlucyhvYmo6IEspOiBib29sZWFuIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYXNoQ29kZSA9IHRoaXMuaGFzaChvYmopICUgdGhpcy5jb2xsLmxlbmd0aDtcbiAgICAgICAgbGV0IGJ1Y2tldCA9IHRoaXMuY29sbFtoYXNoQ29kZV07XG4gICAgICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVja2V0RmluZChidWNrZXQsIG9iaikgIT09IHVuZGVmaW5lZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGhhc2hJbnQoaDogbnVtYmVyLCBpbnQzMjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBoICs9IChpbnQzMikgfCAwO1xuICAgIGggKz0gKGggPDwgMTApIHwgMDtcbiAgICBoIF49IChoID4+IDYpIHwgMDtcbiAgICBoICs9ICgoaW50MzIgPj4gOCkpIHwgMDtcbiAgICBoICs9IChoIDw8IDEwKSB8IDA7XG4gICAgaCBePSAoaCA+PiA2KSB8IDA7XG4gICAgaCArPSAoKGludDMyID4+IDE2KSkgfCAwO1xuICAgIGggKz0gKGggPDwgMTApIHwgMDtcbiAgICBoIF49IChoID4+IDYpIHwgMDtcbiAgICBoICs9ICgoaW50MzIgPj4gMjQpKSB8IDA7XG4gICAgaCArPSAoaCA8PCAxMCkgfCAwO1xuICAgIGggXj0gKGggPj4gNikgfCAwO1xuICAgIHJldHVybiBoO1xufVxuZnVuY3Rpb24gZmluYWxpemVIYXNoKGg6IG51bWJlcik6IG51bWJlciB7XG4gICAgaCArPSAoaCA8PCAzKSB8IDA7XG4gICAgaCBePSAoaCA+PiAxMSkgfCAwO1xuICAgIGggKz0gKGggPDwgMTUpIHwgMDtcbiAgICByZXR1cm4gaDtcbn1cbmZ1bmN0aW9uIGhhc2hOdW1iZXJzKC4uLm51bWJlcnM6IG51bWJlcltdKTogbnVtYmVyIHtcbiAgICBsZXQgaCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGggPSBoYXNoSW50KGgsIG51bWJlcnNbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gZmluYWxpemVIYXNoKGgpO1xufVxudHlwZSBNYXRjaFN0YXJ0RW5kID0ge1xuICAgIHR5cGU6IFwic3RhcnRcIiB8IFwiZW5kXCIsXG4gICAgZ3JvdXA6IHN0cmluZyB8IG51bWJlcixcbiAgICBncm91cEluZGV4OiBudW1iZXIsXG4gICAgaW5kZXg6IG51bWJlclxufTtcbnR5cGUgTWF0Y2hSZWdpc3RlclN0YXRlID0geyB0eXBlOiBcInN0YXRlXCIsIGluZGV4OiBudW1iZXIsIHN0YXRlOiBhbnkgfTtcbnR5cGUgTWF0Y2hJbnN0cnVjdGlvbiA9IE1hdGNoU3RhcnRFbmQgfCBNYXRjaFJlZ2lzdGVyU3RhdGU7XG50eXBlIE1hdGNoID0geyBwcmlvcml0eTogbnVtYmVyLCBpbnN0cnVjdGlvbnM6IEFycmF5PE1hdGNoSW5zdHJ1Y3Rpb24+IH07XG5cbmNvbnN0IG1hdGNoRXF1aXZGbiA9IGZ1bmN0aW9uIChhOiBNYXRjaCwgYjogTWF0Y2gpIHtcbiAgICBpZiAoYS5pbnN0cnVjdGlvbnMubGVuZ3RoICE9IGIuaW5zdHJ1Y3Rpb25zLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5pbnN0cnVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgaW5zQSA9IGEuaW5zdHJ1Y3Rpb25zW2ldO1xuICAgICAgICBjb25zdCBpbnNCID0gYi5pbnN0cnVjdGlvbnNbaV07XG4gICAgICAgIGlmIChpbnNBLnR5cGUgIT0gaW5zQi50eXBlIHx8XG4gICAgICAgICAgICBpbnNBLmluZGV4ICE9IGluc0IuaW5kZXggfHxcbiAgICAgICAgICAgICgoaW5zQSBhcyBNYXRjaFN0YXJ0RW5kKS5ncm91cCAhPSAoaW5zQiBhcyBNYXRjaFN0YXJ0RW5kKS5ncm91cCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmNvbnN0IG1hdGNoSGFzaEZuID0gZnVuY3Rpb24gKGE6IE1hdGNoKSB7XG4gICAgcmV0dXJuIGhhc2hOdW1iZXJzKGEuaW5zdHJ1Y3Rpb25zLmxlbmd0aCk7XG59XG5cbmZ1bmN0aW9uIGNsb25lTWF0Y2gobTogTWF0Y2gpOiBNYXRjaCB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJpb3JpdHk6IG0ucHJpb3JpdHksXG4gICAgICAgIGluc3RydWN0aW9uczogbS5pbnN0cnVjdGlvbnMuc2xpY2UoKVxuICAgIH07XG59XG5cbmNsYXNzIE5vblNocmlua2luZ0FycmF5PFQ+IHtcbiAgICBhcnJheTogVFtdO1xuICAgIGxlbmd0aDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFycmF5ID0gW107XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBwdXNoKG9iajogVCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFycmF5W3RoaXMubGVuZ3RoXSA9IG9iajtcbiAgICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICB9XG5cbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGdldCBmaXJzdCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMF07XG4gICAgfVxuXG4gICAgZ2V0KGk6IG51bWJlcik6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoaSA8IDAgfHwgaSA+PSB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hcnJheVtpXTtcbiAgICB9XG59XG5cbi8vIFdlIGtub3cgYSBwcmlvcmkgdGhhdCB0aGUgbnVtYmVyIG9mIHByaW9yaXR5IGxldmVscyBpcyByZWxhdGl2ZWx5IHNtYWxsXG5jbGFzcyBQcmlvcml0eVF1ZXVlPFQ+IHtcbiAgICBxdWV1ZXM6IFRbXVtdO1xuICAgIG1lbWJlcnM6IE5vblJlcGxhY2luZ0hhc2hNYXA8VCwgYm9vbGVhbj4gfCB1bmRlZmluZWQ7XG4gICAgcHJpb3JpdHlGdW5jdGlvbjogKHQ6IFQpID0+IG51bWJlcjtcbiAgICBsZW5ndGg6IG51bWJlcjtcbiAgICBsb3dlc3RQcmlvcml0eTogbnVtYmVyO1xuICAgIGhpZ2hlc3RQcmlvcml0eTogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwZm46ICh0OiBUKSA9PiBudW1iZXIsXG4gICAgICAgIGVxdWl2Rm4/OiAodDE6IFQsIHQyOiBUKSA9PiBib29sZWFuLFxuICAgICAgICBoYXNoRm4/OiAodDogVCkgPT4gbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucXVldWVzID0gW107XG4gICAgICAgIHRoaXMucHJpb3JpdHlGdW5jdGlvbiA9IHBmbjtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmxvd2VzdFByaW9yaXR5ID0gSW5maW5pdHk7XG4gICAgICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5ID0gLUluZmluaXR5O1xuICAgICAgICBpZiAoZXF1aXZGbiAmJiBoYXNoRm4pIHtcbiAgICAgICAgICAgIHRoaXMubWVtYmVycyA9IG5ldyBOb25SZXBsYWNpbmdIYXNoTWFwKGVxdWl2Rm4sIGhhc2hGbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1lbWJlcnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgIH1cblxuICAgIC8vIFdlIGFsc28ga25vdyBhIHByaW9yaSB0aGF0IGR1cGxpY2F0ZXMgd2lsbCBiZSBkZXRlY3RlZCBleHRlcm5hbGx5IGlmIHRoZXJlIGlzIG5vIGVxdWl2Rm4vaGFzaEZuXG4gICAgcHVzaChvYmo6IFQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5wcmlvcml0eUZ1bmN0aW9uKG9iaik7XG4gICAgICAgIGlmICh0aGlzLm1lbWJlcnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1lbWJlcnMuY29udGFpbnMob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVtYmVycy5wdXNoKG9iaiwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoaWR4IGluIHRoaXMucXVldWVzKSkge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZXNbaWR4XSA9IFtvYmpdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZXNbaWR4XS5wdXNoKG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkeCA8IHRoaXMubG93ZXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHRoaXMubG93ZXN0UHJpb3JpdHkgPSBpZHg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkeCA+IHRoaXMuaGlnaGVzdFByaW9yaXR5KSB7XG4gICAgICAgICAgICB0aGlzLmhpZ2hlc3RQcmlvcml0eSA9IGlkeDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlbmd0aCsrO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBzaGlmdCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMubG93ZXN0UHJpb3JpdHkgPj0gSW5maW5pdHkgfHwgdGhpcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxID0gdGhpcy5xdWV1ZXNbdGhpcy5sb3dlc3RQcmlvcml0eV07XG4gICAgICAgIC8vIFdpdGhpbiBhIHByaW9yaXR5IGxldmVsLCB3ZSB3YW50IHRoZSBfcmV2ZXJzZV8gb3JkZXIgb2YgYWRkaXRpb25cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcS5wb3AoKTtcbiAgICAgICAgaWYgKHEubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlc1t0aGlzLmxvd2VzdFByaW9yaXR5XTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhpZ2hlc3RQcmlvcml0eSA8PSB0aGlzLmxvd2VzdFByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb3dlc3RQcmlvcml0eSA9IEluZmluaXR5O1xuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5ID0gLUluZmluaXR5O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoISh0aGlzLnF1ZXVlc1t0aGlzLmxvd2VzdFByaW9yaXR5XSkgJiYgdGhpcy5sb3dlc3RQcmlvcml0eSA8IHRoaXMuaGlnaGVzdFByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG93ZXN0UHJpb3JpdHkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZW5ndGgtLTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBnZXQgZmlyc3QoKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlc1t0aGlzLmxvd2VzdFByaW9yaXR5XVswXTtcbiAgICB9XG5cbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgLy90b2RvOiBnZW5lcmF0ZSBsZXNzIGdhcmJhZ2VcbiAgICAgICAgdGhpcy5xdWV1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5sb3dlc3RQcmlvcml0eSA9IEluZmluaXR5O1xuICAgICAgICB0aGlzLmhpZ2hlc3RQcmlvcml0eSA9IC1JbmZpbml0eTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgICBpZiAodGhpcy5tZW1iZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm1lbWJlcnMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgTElWRVNFVF9DTEVBUl9JTlRFUlZBTCA9IDEwMDtcblxudHlwZSBUaHJlYWRTdGF0ZSA9IHtcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIHRocmVhZHM6IE5vblNocmlua2luZ0FycmF5PFRocmVhZD5cbn07XG5cbnR5cGUgUGxheXNwZWNSZXN1bHRTdGF0ZTxUcmFjZT4gPSB7XG4gICAgdHJhY2U6IFRyYWNlLFxuICAgIHRocmVhZHM6IFRocmVhZFtdLFxuICAgIG1heFRocmVhZElEOiBudW1iZXIsXG4gICAgcXVldWU6IE5vblNocmlua2luZ0FycmF5PFRocmVhZD4sXG4gICAgbmV4dFF1ZXVlOiBOb25TaHJpbmtpbmdBcnJheTxUaHJlYWQ+LFxuICAgIGxpdmVTZXQ6IE5vblJlcGxhY2luZ0hhc2hNYXA8bnVtYmVyLCBUaHJlYWRTdGF0ZT4sXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBwYXN0RW5kOiBib29sZWFuLFxuICAgIG1hdGNoUXVldWU6IFByaW9yaXR5UXVldWU8TWF0Y2g+LFxuICAgIG1hdGNoU2V0OiBOb25SZXBsYWNpbmdIYXNoTWFwPE1hdGNoLCBib29sZWFuPixcbiAgICBsYXN0TWF0Y2hQcmlvcml0eTogbnVtYmVyXG59O1xuXG50eXBlIEdyb3VwRGF0YTxTdGF0ZT4gPSB7XG4gICAgZ3JvdXA6IHN0cmluZyB8IG51bWJlcixcbiAgICBncm91cEluZGV4OiBudW1iZXIsXG4gICAgc3RhcnQ6IG51bWJlcixcbiAgICBlbmQ6IG51bWJlcixcbiAgICBzdGF0ZXM6IFN0YXRlW10gfCB1bmRlZmluZWRcbn07XG5cbnR5cGUgUGxheXNwZWNNYXRjaFJlc3VsdDxTdGF0ZT4gPSB7XG4gICAgc3RhcnQ6IG51bWJlcixcbiAgICBlbmQ6IG51bWJlcixcbiAgICBzdGF0ZXM/OiBTdGF0ZVtdLFxuICAgIHN1Ymdyb3VwczogR3JvdXBEYXRhPFN0YXRlPltdXG59O1xuXG5jbGFzcyBQbGF5c3BlY1Jlc3VsdDxUcmFjZSwgU3RhdGU+IHtcbiAgICBjb25maWc6IHsgc3BlYzogUGxheXNwZWM8VHJhY2UsIFN0YXRlPiwgcHJlc2VydmVTdGF0ZXM6IGJvb2xlYW4gfTtcbiAgICBzdGF0ZTogUGxheXNwZWNSZXN1bHRTdGF0ZTxUcmFjZT4gfCB1bmRlZmluZWQ7XG4gICAgbWF0Y2g6IFBsYXlzcGVjTWF0Y2hSZXN1bHQ8U3RhdGU+IHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBjb25maWc6IHsgc3BlYzogUGxheXNwZWM8VHJhY2UsIFN0YXRlPiwgcHJlc2VydmVTdGF0ZXM6IGJvb2xlYW4gfSxcbiAgICAgICAgc3RhdGU6IFBsYXlzcGVjUmVzdWx0U3RhdGU8VHJhY2U+LFxuICAgICAgICBtYXRjaDogUGxheXNwZWNNYXRjaFJlc3VsdDxTdGF0ZT4gfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudHJhY2UgPSB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLnN0YXJ0KHRoaXMuc3RhdGUudHJhY2UpO1xuICAgICAgICAgICAgbGV0IGluaXRUaHJlYWQgPSBuZXcgVGhyZWFkKDAsIDAsIDAsIFt7IHByaW9yaXR5OiAwLCBpbnN0cnVjdGlvbnM6IFtdIH1dKTtcbiAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZChpbml0VGhyZWFkKTtcbiAgICAgICAgICAgIC8vc3dhcCBxdWV1ZXNcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLnN0YXRlLnF1ZXVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5xdWV1ZSA9IHRoaXMuc3RhdGUubmV4dFF1ZXVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5uZXh0UXVldWUgPSB0ZW1wO1xuICAgICAgICAgICAgLy9jbGVhciBsaXZlIGFuZCBtYXRjaCBzZXRzXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmxpdmVTZXQuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubWF0Y2hTZXQuY2xlYXIoKTtcbiAgICAgICAgICAgIC8vbW92ZSBpbmRleCB0byBzdGFydFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXRjaCA9IG1hdGNoO1xuICAgIH1cblxuICAgIGdldCBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2ggPyB0aGlzLm1hdGNoLnN0YXJ0IDogLTE7XG4gICAgfVxuXG4gICAgZ2V0IGVuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2ggPyB0aGlzLm1hdGNoLmVuZCA6IC0xO1xuICAgIH1cblxuICAgIGdldCBzdGF0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoID8gdGhpcy5tYXRjaC5zdGF0ZXMgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZ2V0IHN1Ymdyb3VwcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2ggPyB0aGlzLm1hdGNoLnN1Ymdyb3VwcyA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBoYXNSZWFkeU1hdGNoKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUhLm1hdGNoUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlIS5xdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlIS5tYXRjaFF1ZXVlLmZpcnN0IS5wcmlvcml0eSA8PSB0aGlzLnN0YXRlIS5xdWV1ZS5maXJzdCEucHJpb3JpdHlcbiAgICB9XG5cbiAgICBlbnF1ZXVlVGhyZWFkKHRocmVhZDogVGhyZWFkKSB7XG4gICAgICAgIC8vIFVubGlrZSBDb3gncyBpbXBsZW1lbnRhdGlvbiwgd2UgY2FuIG9ubHkgZG8gZHVwbGljYXRlIGNoZWNraW5nIGZvciB0aHJlYWRzIHRoYXQgYXJlIGFib3V0IHRvIHBhcmsuXG4gICAgICAgIC8vIFNvIHdlJ2xsIGRvIHNvbWUgcmVkdW5kYW50IGp1bXBpbmcvc3BsaXR0aW5nL21hdGNoaW5nLCBidXQgc2luY2Ugd2UgbmVlZCB0byBtZXJnZSB0aHJlYWRzIGl0IGNhbid0XG4gICAgICAgIC8vIHJlYWxseSBiZSBhdm9pZGVkLlxuICAgICAgICBjb25zdCBpbnN0ciA9IHRoaXMuY29uZmlnLnNwZWMucHJvZ3JhbVt0aHJlYWQucGNdO1xuICAgICAgICBzd2l0Y2ggKGluc3RyLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJqdW1wXCI6XG4gICAgICAgICAgICAgICAgdGhyZWFkLnBjID0gaW5zdHIudGFyZ2V0ITtcbiAgICAgICAgICAgICAgICB0aGlzLmVucXVldWVUaHJlYWQodGhyZWFkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlIFwic3BsaXRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlIS5tYXhUaHJlYWRJRCErKztcbiAgICAgICAgICAgICAgICB0aHJlYWQucGMgPSBpbnN0ci5sZWZ0O1xuICAgICAgICAgICAgICAgIC8vbWF0Y2ggc2hhcmluZzogQmUgc3VyZSB0aHJlYWQxIGtub3dzIHRocmVhZDIgaXMgdXNpbmcgaXRzIG1hdGNoZXMuXG4gICAgICAgICAgICAgICAgLy90aHJlYWQuc2hhcmVkTWF0Y2hlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdGhyZWFkMiA9IG5ldyBUaHJlYWQodGhpcy5zdGF0ZSEubWF4VGhyZWFkSUQsIGluc3RyLnJpZ2h0ISwgdGhyZWFkLnByaW9yaXR5ICsgMSwgdGhyZWFkLm1hdGNoZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZCh0aHJlYWQyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgICAgICAgICAgICB0aHJlYWQucHVzaE1hdGNoSW5zdHJ1Y3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIC8vICsxIGJlY2F1c2UgdGhlIF9jdXJyZW50XyB0cmFjZSBpbmRleCBqdXN0IG1hdGNoZWQgcHJldmlvdXNseSwgc28gd2UgZG9uJ3Qgd2FudCB0byBpbmNsdWRlIGl0IGluXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBtYXRjaCB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBfbmV4dF8gY2hhcmFjdGVyLlxuICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5zdGF0ZSEuaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgICAgICBncm91cDogaW5zdHIuZ3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSW5kZXg6IGluc3RyLmNhcHR1cmVJRFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocmVhZC5wYysrO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICB0aHJlYWQucHVzaE1hdGNoSW5zdHJ1Y3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImVuZFwiLFxuICAgICAgICAgICAgICAgICAgICAvLyArMSBmb3Igc2FtZSByZWFzb24gYXMgYWJvdmUuXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnN0YXRlIS5pbmRleCArIDEsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwOiBpbnN0ci5ncm91cCxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJbmRleDogaW5zdHIuY2FwdHVyZUlEXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyZWFkLnBjKys7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnF1ZXVlVGhyZWFkKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBcIm1hdGNoXCI6XG4gICAgICAgICAgICAgICAgLy8gQWRkIG1hdGNoZXMgdG8gcXVldWVcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRocmVhZC5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aHJlYWQubWF0Y2hlc1tpXS5wcmlvcml0eSA+PSB0aHJlYWQucHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBub3ZlbCBtYXRjaC4uLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUhLm1hdGNoU2V0LnB1c2godGhyZWFkLm1hdGNoZXNbaV0sIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBxdWV1ZSFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlIS5tYXRjaFF1ZXVlLnB1c2godGhyZWFkLm1hdGNoZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZHJvcCB0aHJlYWQsIGl0cyB3b3JrIGlzIGRvbmVcbiAgICAgICAgICAgICAgICB0aHJlYWQudGVybWluYXRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBcImNoZWNrXCI6XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgbGl2ZSBzZXQsIHRoZW4gYWRkIHRvIHF1ZXVlXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IHRocmVhZC5oYXNoKCk7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5zdGF0ZSE7XG4gICAgICAgICAgICAgICAgbGV0IGxpdmU6IFRocmVhZFN0YXRlIHwgdW5kZWZpbmVkID0gc3RhdGUubGl2ZVNldC5nZXQoaGFzaCk7XG4gICAgICAgICAgICAgICAgaWYgKCFsaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aHJlYWRMaXN0ID0gbmV3IE5vblNocmlua2luZ0FycmF5PFRocmVhZD4oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyZWFkTGlzdC5wdXNoKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmxpdmVTZXQucHVzaChoYXNoLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogc3RhdGUuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWRzOiB0aHJlYWRMaXN0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGl2ZS5pbmRleCAhPSBzdGF0ZSEuaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGl2ZS5pbmRleCA9IHN0YXRlLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICBsaXZlLnRocmVhZHMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgbGl2ZS50aHJlYWRzLnB1c2godGhyZWFkKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL21heWJlIHByZXNlbnRcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXZlLnRocmVhZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaXZlLnRocmVhZHMuZ2V0KGkpIS5lcXVhbHModGhyZWFkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdmUudGhyZWFkcy5nZXQoaSkhLm1lcmdlVGhyZWFkKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJvcCB0aGUgbWVyZ2VkLWluIHRocmVhZCwgbm8gbW9yZSB3b3JrIHRvIGRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL25vdCBwcmVzZW50OiBhZGQgc3R1Y2sgdGhyZWFkIHRvIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHN0YXRlLm5leHRRdWV1ZS5wdXNoKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy90b2RvOiBjYXNlIGZvcmssIGpvaW4sIGpvaW5lZC1sZWZ0LCBqb2luZWQtcmlnaHRcbiAgICAgICAgICAgIC8vIGpvaW5lZC1sZWZ0IGFuZCBqb2luZWQtcmlnaHQgd2lsbCBuZWVkIHRvIGhhbmRsZSBtZXJnaW5nIVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgaW5zdHJ1Y3Rpb24gdHlwZSAke2luc3RyLnR5cGV9XCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJldHRpZnlNYXRjaChtOiBNYXRjaCk6IFBsYXlzcGVjTWF0Y2hSZXN1bHQ8U3RhdGU+IHtcbiAgICAgICAgbGV0IGdyb3VwcyA9IFtdO1xuICAgICAgICBsZXQgbGl2ZUdyb3Vwczoge1xuICAgICAgICAgICAgW2tleTogc3RyaW5nXTogR3JvdXBEYXRhPFN0YXRlPixcbiAgICAgICAgICAgIFtpbmRleDogbnVtYmVyXTogR3JvdXBEYXRhPFN0YXRlPlxuICAgICAgICB9ID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbS5pbnN0cnVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RyID0gbS5pbnN0cnVjdGlvbnNbaV07XG4gICAgICAgICAgICBzd2l0Y2ggKGluc3RyLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0c6IEdyb3VwRGF0YTxTdGF0ZT4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cDogaW5zdHIuZ3JvdXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cEluZGV4OiBpbnN0ci5ncm91cEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGluc3RyLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBJbmZpbml0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlczogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5wcmVzZXJ2ZVN0YXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Ry5zdGF0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBncm91cHMucHVzaChuZXdHKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpdmVHcm91cHNbbmV3Ry5ncm91cF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZSBjYXB0dXJlIGdyb3VwXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxpdmVHcm91cHNbbmV3Ry5ncm91cF0gPSBuZXdHO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvL1RPRE86IGhhbmRsZSBhdG9taWMgZm9ybXVsYSBjYXB0dXJlcyBhcyBhIG5ldyBjYXNlPyBvciBhcyBzdGF0ZT9cbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhdGVcIjpcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wZW5Hcm91cHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhsaXZlR3JvdXBzKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZ2kgPSAwOyBnaSA8IG9wZW5Hcm91cHMubGVuZ3RoOyBnaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGludWVkRyA9IGxpdmVHcm91cHNbb3Blbkdyb3Vwc1tnaV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9XZSdsbCBvbmx5IGdldCBoZXJlIGlmIHdlJ3JlIHByZXNlcnZpbmcgc3RhdGVzOyB1bmxlc3Mgd2UgcmV1c2UgXCJzdGF0ZVwiIGZvciBhdG9taWMgZWxlbWVudCBjYXB0dXJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVkRy5zdGF0ZXMhLnB1c2goaW5zdHIuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmlzaGVkRyA9IGxpdmVHcm91cHNbaW5zdHIuZ3JvdXBdO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hlZEcuZW5kID0gaW5zdHIuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBsaXZlR3JvdXBzW2luc3RyLmdyb3VwXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9wZW5Hcm91cHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhsaXZlR3JvdXBzKTtcbiAgICAgICAgaWYgKG9wZW5Hcm91cHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW4gY2FwdHVyZSBncm91cHM6ICR7b3Blbkdyb3Vwcy5qb2luKFwiLFwiKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcm9vdEdyb3VwID0gZ3JvdXBzLnNoaWZ0KCkhO1xuICAgICAgICBsZXQgcm9vdE1hdGNoOiBQbGF5c3BlY01hdGNoUmVzdWx0PFN0YXRlPiA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiByb290R3JvdXAuc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IHJvb3RHcm91cC5lbmQsXG4gICAgICAgICAgICAvL1RPRE86IE91Z2h0IGVtcHR5IGNhcHR1cmVzIHRvIGJlIGRyb3BwZWQ/XG4gICAgICAgICAgICBzdWJncm91cHM6IGdyb3Vwcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGdyb3VwKSA9PiBncm91cC5zdGFydCAhPSBncm91cC5lbmRcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBzdGF0ZXM6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5jb25maWcucHJlc2VydmVTdGF0ZXMpIHtcbiAgICAgICAgICAgIHJvb3RNYXRjaC5zdGF0ZXMgPSByb290R3JvdXAuc3RhdGVzITtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm9vdE1hdGNoO1xuICAgIH1cblxuICAgIG5leHQoKTogUGxheXNwZWNSZXN1bHQ8VHJhY2UsIFN0YXRlPiB8IG51bGwge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRvbid0IGNhbGwgbmV4dCgpIG9uIHRoZSBzYW1lIFBsYXlzcGVjUmVzdWx0IHR3aWNlIVwiKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoIXRoaXMuaGFzUmVhZHlNYXRjaCgpICYmIHRoaXMuc3RhdGUucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuY3VycmVudFN0YXRlKHRoaXMuc3RhdGUudHJhY2UpO1xuICAgICAgICAgICAgbGV0IGNvcGllZFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgbGltaXQgPSB0aGlzLnN0YXRlLnF1ZXVlLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBsYXN0UHJpb3JpdHkgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnN0YXRlLnF1ZXVlLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHRocmVhZCBxdWV1ZSBzaG91bGQgbmV2ZXIgZ3JvdyBkdXJpbmcgYSBzaW5nbGUgdHJhY2Ugc3RhdGUhXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdGhyZWFkID0gdGhpcy5zdGF0ZS5xdWV1ZS5nZXQodCkhO1xuICAgICAgICAgICAgICAgIGlmICh0aHJlYWQucHJpb3JpdHkgPCBsYXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGVjcmVhc2luZyBwcmlvcml0eSFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RyID0gdGhpcy5jb25maWcuc3BlYy5wcm9ncmFtW3RocmVhZC5wY107XG4gICAgICAgICAgICAgICAgc3dpdGNoIChpbnN0ci50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjaGVja1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tSZXN1bHQgPSB0aGlzLmNvbmZpZy5zcGVjLmNoZWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudHJhY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0ci5mb3JtdWxhXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkLnBjKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRocmVhZC5oYXNPcGVuTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLnByZXNlcnZlU3RhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvcGllZFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29waWVkU3RhdGUgPSB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmNvcHlDdXJyZW50U3RhdGUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmNvcHlDdXJyZW50U3RhdGUodGhpcy5zdGF0ZS50cmFjZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZC5wdXNoTWF0Y2hJbnN0cnVjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnN0YXRlLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBjb3BpZWRTdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UT0RPOiBhdG9taWMgY2FwdHVyZXMgZ28gaGVyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVucXVldWVUaHJlYWQodGhyZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vb3RoZXJ3aXNlIGRyb3AgdGhlIHRocmVhZCBvbiB0aGUgZmxvb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWQudGVybWluYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRocmVhZCBzaG91bGQgYmUgcGFya2VkIG9uIGEgY2hlY2suXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vc3dhcCBxdWV1ZXMgYW5kIGNsZWFyIG9sZCBxdWV1ZVxuICAgICAgICAgICAgbGV0IHRlbXAgPSB0aGlzLnN0YXRlLnF1ZXVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5xdWV1ZSA9IHRoaXMuc3RhdGUubmV4dFF1ZXVlO1xuICAgICAgICAgICAgdGVtcC5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5uZXh0UXVldWUgPSB0ZW1wO1xuICAgICAgICAgICAgLy9tYXliZSBjbGVhciBsaXZlc2V0IChkb24ndCB3YW50IHRvIGRvIGl0IGV2ZXJ5IHRpbWUsIHNvIHNob3J0IHNwZWNzL3N0cmluZ3MgY2FuIGF2b2lkIG1lbW9yeSBjaHVybilcbiAgICAgICAgICAgIGlmICgodGhpcy5zdGF0ZS5pbmRleCAlIExJVkVTRVRfQ0xFQVJfSU5URVJWQUwpID09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmxpdmVTZXQuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vZGVmaW5pdGVseSBjbGVhciBtYXRjaHNldCAobGF0ZXIgbWF0Y2hlcyB3b24ndCBldmVyIGJlIGVxdWl2YWxlbnQgdG8gbWF0Y2hlcyBmcm9tIHRoaXMgdGltZSlcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubWF0Y2hTZXQuY2xlYXIoKTtcbiAgICAgICAgICAgIC8vYWR2YW5jZSwgdW5sZXNzIGFscmVhZHkgYXQgZW5kXG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc0F0RW5kKHRoaXMuc3RhdGUudHJhY2UpKSB7XG4gICAgICAgICAgICAgICAgLy93aXBlIG91dCBxdWV1ZSwgbm8gbW9yZSB0cmFjZSB0byBtYXRjaCFcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuaXNTdHJlYW1pbmcgfHxcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuaXNTdHJlYW1pbmcodGhpcy5zdGF0ZS50cmFjZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5xdWV1ZS5jbGVhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuYWR2YW5jZVN0YXRlKHRoaXMuc3RhdGUudHJhY2UpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc1JlYWR5TWF0Y2goKSkge1xuICAgICAgICAgICAgLy8gQWxzbyByZW1vdmVzIGZpcnN0IG1hdGNoIGZyb20gcXVldWUhXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuc3RhdGUubWF0Y2hRdWV1ZS5zaGlmdCgpITtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmxhc3RNYXRjaFByaW9yaXR5ID4gbWF0Y2gucHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXRjaGVzIHBvcHBlZCBvdXQgb2Ygb3JkZXIhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5sYXN0TWF0Y2hQcmlvcml0eSA9IG1hdGNoLnByaW9yaXR5O1xuICAgICAgICAgICAgY29uc3QgcHJldHR5TWF0Y2ggPSB0aGlzLnByZXR0aWZ5TWF0Y2gobWF0Y2gpO1xuICAgICAgICAgICAgY29uc3QgbmV4dFN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBsYXlzcGVjUmVzdWx0KFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgICAgIG5leHRTdGF0ZSxcbiAgICAgICAgICAgICAgICBwcmV0dHlNYXRjaFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc1N0cmVhbWluZyAmJlxuICAgICAgICAgICAgdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc1N0cmVhbWluZyh0aGlzLnN0YXRlLnRyYWNlKSkge1xuICAgICAgICAgICAgY29uc3QgbmV4dFN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBsYXlzcGVjUmVzdWx0KFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgICAgIG5leHRTdGF0ZSxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIHdlJ3JlIG91dCBvZiBxdWV1ZSBvciB0cmFjZSBhbmQgaGF2ZSBub3doZXJlIHRvIGdvXG4gICAgICAgIHRoaXMuc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=