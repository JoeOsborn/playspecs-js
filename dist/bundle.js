var Playspecs=function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const n={WHITESPACE:" ",CONCATENATION:",",DOTS_GREEDY:"...",DOTS_RELUCTANT:"..",DOTS_OMEGA:"***",LEFT_PAREN:"(",RIGHT_PAREN:")",CAPTURING_LEFT_PAREN:"$(",ALTERNATION:";",INTERSECTION:"^",AND:"&",OR:"|",NOT:"not",START:"start",END:"end",TRUE:"true",FALSE:"false",ERROR:"error"},s={OMEGA:n.DOTS_OMEGA,REPETITION:n.DOTS_GREEDY,CONCATENATION:n.CONCATENATION,CAPTURE:"$(",GROUP:n.LEFT_PAREN,ALTERNATION:n.ALTERNATION,INTERSECTION:n.INTERSECTION,AND:n.AND,OR:n.OR,NOT:n.NOT,START:n.START,END:n.END,TRUE:n.TRUE,FALSE:n.FALSE,ERROR:n.ERROR};function i(t){return{type:t.type,value:t.value,children:t.children.slice(),range:{start:t.range.start,end:t.range.end}}}const a=function(t){return function(e){return t}},o=function(t,e){return t.node(e.type,e.value)},c=function(t,e,r){let n=[e];return n.push(t.parseExpression(r.tightness-1)),t.node(r.type,r.value,n)},h=function(t,e,r){if(!f(e))return t.error("Left hand side of token must be propositional",r,e);let n=[e];const s=t.parseExpression(r.tightness-1);return f(s)?(n.push(s),t.node(r.type,r.value,n)):t.error("Right hand side of token must be propositional",r,s)},u="$END",l=[{type:n.WHITESPACE,match:/^\s+/},{type:n.CONCATENATION,match:[n.CONCATENATION],tightness:100,extendParse:c},{type:n.DOTS_GREEDY,match:/^([0-9]*)\s*\.\.\.\s*([0-9]*)/,value:function(t){return{greedy:!0,lowerBound:t[1]?parseInt(t[1]):0,upperBound:t[2]?parseInt(t[2]):u}},tightness:110,startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.start,t.node(s.REPETITION,e.value,[r])},extendParse:function(t,e,r){return t.node(s.REPETITION,r.value,[e])}},{type:n.DOTS_RELUCTANT,match:/^([0-9]*)\s*\.\.\s*([0-9]*)/,tightness:110,value:function(t){return{greedy:!1,lowerBound:t[1]?parseInt(t[1]):0,upperBound:t[2]?parseInt(t[2]):u}},startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.start,t.node(s.REPETITION,e.value,[r])},extendParse:function(t,e,r){return t.node(s.REPETITION,r.value,[e])}},{type:n.DOTS_OMEGA,match:[n.DOTS_OMEGA],tightness:110,startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.end,t.node(s.OMEGA,e.value,[r])},extendParse:function(t,e,r){return t.node(s.OMEGA,r.value,[e])}},{type:n.LEFT_PAREN,match:[n.LEFT_PAREN],startParse:function(t,e){const r=t.parseExpression(0);return t.currentToken().type!=n.RIGHT_PAREN?t.error("Missing right parenthesis",e,r):(t.advance(),t.node(s.GROUP,e.value,[r]))}},{type:n.RIGHT_PAREN,match:[n.RIGHT_PAREN]},{type:n.CAPTURING_LEFT_PAREN,match:/^\$([A-z_][A-z_0-9]*)?\(/,value:function(t){return{group:t[1]||"$implicit"}},startParse:function(t,e){const r=t.parseExpression(0);return t.currentToken().type!=n.RIGHT_PAREN?t.error("Missing right parenthesis",e,r):(t.advance(),t.node(s.CAPTURE,e.value,[r]))}},{type:n.ALTERNATION,match:[n.ALTERNATION],tightness:60,extendParse:c},{type:n.INTERSECTION,match:[n.INTERSECTION],tightness:50,extendParse:c},{type:n.AND,match:[n.AND],tightness:200,extendParse:h},{type:n.OR,match:[n.OR],tightness:210,extendParse:h},{type:n.NOT,match:[n.NOT],tightness:220,startParse:function(t,e){const r=t.parseExpression(e.tightness);return f(r)?t.node(e.type,e.value,[r]):t.error("NOT may only negate propositional state formulae",e,r)}},{type:n.START,match:[n.START],startParse:o},{type:n.END,match:[n.END],startParse:o},{type:n.TRUE,match:[n.TRUE],value:a(!0),startParse:o},{type:n.FALSE,match:[n.FALSE],value:a(!1),startParse:o},{type:n.ERROR,match:/^\S+/,startParse:o}],p=300,d="ERROR";function g(t){for(var e in s)if(s[e]==t.type)return!1;return!0}function f(t){return g(t)||t.type==s.AND||t.type==s.OR||t.type==s.NOT||t.type==s.TRUE||t.type==s.FALSE||t.type==s.START||t.type==s.END||(t.type==s.GROUP||t.type==s.CAPTURE)&&t.children.every(function(t){return f(t)})}class y{constructor(t){this.tokenDefinitions=[],this.tokensByType={},this.parseErrors=[];const e=t||[],r=e.concat(l);for(let t=0;t<r.length;t++){const n=r[t],s=n.tightness||0,i={type:n.type,match:n.match instanceof RegExp?n.match:"string"==typeof n.match?[n.match]:n.match,value:n.value||function(t){return t[0]},tightness:t<e.length?s+p:s,startParse:n.startParse||function(t,e){return t.error("Can't start a parse tree with this token",e)},extendParse:n.extendParse||function(t,e,r){return t.error("Can't extend a parse tree with this token",r,e)}};this.tokenDefinitions.push(i),this.tokensByType[i.type]=i}this.resetStream()}node(t,e,r=[]){return{type:t,value:e,children:r,range:{start:-1,end:-1}}}error(t,e,r){const n=this.node(d,{message:t,token:e,tree:r});return this.parseErrors.push(n),n}tokenize(t){let e=[],r=[],s=t,i=0;for(;s.length;)for(let t=0;t<this.tokenDefinitions.length;t++){const a=this.tokenDefinitions[t],o=a.match;let c={match:null,index:-1};if(o instanceof RegExp){let t=o.exec(s);t&&(c.match=t,c.index=t.index)}else if(Array.isArray(o))for(let t=0;t<o.length;t++){const e=o[t];s.substr(0,e.length)==e&&(c.match=[e],c.index=0)}if(c.match&&0==c.index){const t=c.match[0].length;s=s.substr(c.match[0].length);const o=i;i+=t,a.type!==n.WHITESPACE&&(a.type===n.ERROR&&r.push(e.length),e.push({type:a.type,value:a.value(c.match),tightness:a.tightness||0,range:{start:o,end:i}}));break}}return{string:t,tokens:e,position:0,errors:r}}resetStream(){this.stream={string:"",tokens:[],position:0,errors:[]}}charPosition(){return this.currentToken()?this.currentToken().range.start:this.stream.string.length}remainder(){const t=this.charPosition();return this.stream.string.substr(t)}currentToken(){return this.stream.tokens[this.stream.position]}advance(){this.stream.position++}parse(t){this.stream=this.tokenize(t),this.parseErrors=[];var e={tree:this.parseExpression(0),errors:this.parseErrors,remainder:this.remainder()};return this.parseErrors=[],this.resetStream(),e}parseExpression(t){let e=this.currentToken(),r=this.tokensByType[e.type];const n=e.range.start;this.advance();let s=r.startParse(this,e);if(s.range.start=n,s.range.end=this.charPosition(),s.type==d)return s;for(e=this.currentToken();e&&t<e.tightness;){r=this.tokensByType[e.type],this.advance();let t=r.extendParse(this,s,e);if(t.range.start=s.range.start,t.range.end=this.charPosition(),t.type==d)return t;s=t,e=this.currentToken()}return s}}let m=0;function T(){m=0}class E{constructor(){this.startStates=[new A],this.acceptingStates=[]}newState(t){return new A(t)}markAccepting(t){-1==this.acceptingStates.indexOf(t)&&this.acceptingStates.push(t),t.addEdge(new P(t,null,[])),t.isAccepting=!0}markNonAccepting(t){t.isAccepting=!1,-1!=this.acceptingStates.indexOf(t)&&this.acceptingStates.splice(this.acceptingStates.indexOf(t),1)}getStates(){let t={},e=this.startStates.slice();for(;e.length;){const r=e.pop();t[r.id]=r;for(let n in r.edges){let s=r.edges[n];!s.target||s.target.id in t||e.push(s.target)}}return Object.keys(t).map(e=>t[e])}toDot(){return"digraph g {\n  rankdir=LR;\n"+this.getStates().map(function(t){return["  "+t.id+` [shape=${t.isAccepting?"doublecircle":"circle"}];`].concat(t.edges.map(function(e,r){return"  "+t.id+"->"+e.target.id+` [label="${r}:${e.formula?S(e.formula):"&#949;"}:${e.label.map(t=>t.type+"."+t.group).join(",")}"];`})).join("\n")}).join("\n")+"\n}"}eelim(){let t=this.startStates.slice(),e={};for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(;t.length;){const r=t.pop();let n={[r.id]:r};for(let t=0;t<r.edges.length;t++){const e=r.edges[t];if(!(e.formula||r.isAccepting&&e.target==r)){if(e.target.id in n){r.edges.splice(t,1),t--;continue}{const n=e.target.edges.map(t=>new P(t.target==e.target&&null==t.formula?r:t.target,t.formula,e.label.concat(t.label)));e.target.isAccepting&&!r.isAccepting&&(this.acceptingStates.push(r),r.isAccepting=!0),r.edges.splice(t,1,...n)}}n[e.target.id]=e.target}for(let r in n)r in e||(t.push(n[r]),e[r]=n[r])}return this}intersect(t){this.eelim();const e=this;t.eelim();let r=new E;r.startStates=[];let n=[],i={};for(let s=0;s<e.startStates.length;s++){const a=e.startStates[s];for(let e=0;e<t.startStates.length;e++){const s=t.startStates[e];n.push([a,s]),a.id in i||(i[a.id]={});let o=r.newState(`a${a.id}x${s.id}b`);r.startStates.push(o),i[a.id][s.id]=o,a.isAccepting&&s.isAccepting&&r.markAccepting(o)}}for(;n.length;){const[t,e]=n.pop(),c=i[t.id][e.id];for(let h=0;h<t.edges.length;h++){const u=t.edges[h],l=u.target,p=t.isAccepting&&l==t&&!u.formula;for(let t=0;t<e.edges.length;t++){const h=e.edges[t],d=h.target;let g=null;if(p!=(e.isAccepting&&d==e&&!h.formula))continue;if(!(p||(u.formula&&h.formula||console.error("Uneliminated non ASE epsilon transition"),a=u.formula,o=h.formula,g={type:s.AND,value:"&",children:[a,o],range:{start:-1,end:-1}})))continue;let f=null;l.id in i&&d.id in i[l.id]?f=i[l.id][d.id]:(f=r.newState(`a${l.id}x${d.id}b`),l.id in i||(i[l.id]={}),i[l.id][d.id]=f,n.push([l,d]),l.isAccepting&&d.isAccepting&&(f.isAccepting=!0,r.acceptingStates.push(f))),c.addEdge(new P(f,g,u.label.concat(h.label)))}}}var a,o;return r}}class A{constructor(t){this.id=t||(m++).toString(10),this.edges=[],this.isAccepting=!1}addEdge(t){this.edges.push(t)}removeEdge(t){this.edges.splice(this.edges.indexOf(t),1)}}class P{constructor(t,e,r){this.target=t,this.formula=e,this.label=r}}function v(t){const e=new E,r=function t(e,r,n){if(f(n)&&n.type!=s.CAPTURE){const t=new P(null,n,[]);return r.addEdge(t),[t]}if(n.type==s.CONCATENATION){const s=t(e,r,n.children[0]),i=e.newState();for(let t=0;t<s.length;t++){let e=s[t];e.target=i}return t(e,i,n.children[1])}if(n.type==s.REPETITION){const a=n.value.greedy,o=n.value.lowerBound,c=n.value.upperBound,h=n.children[0];if(o>0){let a=i(n);a.value.lowerBound--,"$END"!=a.value.upperBound&&a.value.upperBound--;let o={type:s.CONCATENATION,value:",",children:[i(h),a],range:{start:a.range.start,end:a.range.end}};return t(e,r,o)}if("$END"!=c){let o=i(n);o.value.upperBound--;let u={type:s.CONCATENATION,value:",",children:[i(h),o],range:{start:o.range.start,end:o.range.end}};if(a){let n=[];n=0==c?n.concat([new P(null,h,[])]):n.concat(t(e,r,u));const s=new P(null,null,[]);return r.addEdge(s),n.push(s),n}{let n=[];const s=new P(null,null,[]);return r.addEdge(s),n.push(s),n=1==c?n.concat([new P(null,h,[])]):n.concat(t(e,r,u))}}if(a){let n=t(e,r,h);for(let t=0;t<n.length;t++){let e=n[t];e.target=r}const s=new P(null,null,[]);return r.addEdge(s),[s]}{const n=new P(null,null,[]);r.addEdge(n);let s=t(e,r,h);for(let t=0;t<s.length;t++){let e=s[t];e.target=r}return[n]}}if(n.type==s.GROUP){let s=e.newState();r.addEdge(new P(s,null,[]));const i=t(e,s,n.children[0]);return i}if(n.type==s.CAPTURE){let s=e.newState(),i={type:"start-capture",group:"$implicit"==n.value.group?s.id:n.value.group};r.addEdge(new P(s,null,[i]));const a=t(e,s,n.children[0]);for(let t=0;t<a.length;t++){let e=a[t];e.label.push({type:"end-capture",group:"$implicit"==n.value.group?s.id:n.value.group,start:i})}return a}if(n.type==s.ALTERNATION){const s=e.newState(),i=e.newState();r.addEdge(new P(s,null,[])),r.addEdge(new P(i,null,[]));const a=t(e,s,n.children[0]),o=t(e,i,n.children[1]);return a.concat(o)}if(n.type==s.INTERSECTION){const t=v(n.children[0]),s=v(n.children[1]),i=t.intersect(s),a=i.acceptingStates.slice();for(let t=0;t<i.startStates.length;t++)r.addEdge(new P(i.startStates[t],null,[]));let o=[];for(let t=0;t<a.length;t++){const r=a[t];e.markNonAccepting(r);for(let t=0;t<r.edges.length;t++)r.edges[t].target!=r||r.edges[t].formula||(r.edges[t].target=null,o.push(r.edges[t]))}return o}throw"Not yet implemented"}(e,e.startStates[0],t),n=e.newState();for(let t=0;t<r.length;t++){r[t].target=n}return e.markAccepting(n),e}const N=!1;class R{constructor(t){this.captureIdx=0}compileTree(t,e){if(t.type==s.GROUP)return this.compileTree(t.children[0],e);if(t.type==s.CAPTURE){const r=this.captureIdx,n="$implicit"==t.value.group?r:t.value.group,s={type:"start",group:n,captureID:r,index:e,source:t};this.captureIdx++;const i=this.compileTree(t.children[0],e+1),a={type:"end",group:n,captureID:r,index:e+1+i.length,source:t};return[s].concat(i).concat([a])}if(f(t))return[{type:"check",formula:t,index:e,source:t}];if(t.type==s.CONCATENATION){const r=e,n=this.compileTree(t.children[0],r),s=e+n.length,i=this.compileTree(t.children[1],s);return n.concat(i)}if(t.type==s.ALTERNATION){const r=e+1,n=this.compileTree(t.children[0],r),s=r+n.length+1,i=[{type:"split",left:r,right:s,index:e,source:t}],a=this.compileTree(t.children[1],s),o=[{type:"jump",target:s+a.length,index:r+n.length,source:t}];return i.concat(n).concat(o).concat(a)}if(t.type==s.INTERSECTION){const r=v(t.children[0]),n=v(t.children[1]),s=r.intersect(n);return this.compileSFA(s,e)}if(t.type==s.REPETITION){const r=t.value.greedy,n=t.value.lowerBound,s=t.children[0];let i=[];for(let t=0;t<n;t++){const t=this.compileTree(s,e);e+=t.length,i.push(...t)}if(t.value.upperBound!=u){const a=t.value.upperBound;let o=[],c=[];for(let t=n;t<a;t++){e+=1,c.push(e);const t=this.compileTree(s,e);e+=t.length,o.push(t)}let h=[];for(let n=0;n<o.length;n++)h.push({type:"split",left:r?c[n]:e,right:r?e:c[n],index:c[n]-1,source:t}),h.push(...o[n]);return i.concat(h)}{const n=e,a=n+1,o=this.compileTree(s,a),c=[{type:"jump",target:n,index:a+o.length,source:t}],h=a+o.length+1,u=[{type:"split",left:r?a:h,right:r?h:a,index:e,source:t}];return i.concat(u).concat(o).concat(c)}}throw new Error("Can't compile "+JSON.stringify(t))}compileSFA(t,e){let r={},n=[],s=[];for(let i=0;i<t.startStates.length;i++){const a=t.startStates[i],o=this.compileSFA_(a,e,r,n);s=s.concat(o),e+=o.length}for(let t=0;t<n.length;t++)n[t].target=e;return s}compileSFA_(t,e,r,n){if(t.id in r)return[{type:"jump",target:r[t.id],index:e,source:{type:"state",value:t.id}}];if(r[t.id]=e,0==t.edges.length){if(t.isAccepting){const r={type:"jump",target:null,index:e,source:{type:"state",value:t.id,children:[],range:{start:-1,end:-1}}};return n.push(r),[r]}throw new Error("Compiling an SFA state with no outgoing edges")}{let s=[];for(let i=0;i<t.edges.length-1;i++){const a=t.edges[i],o={type:"split",left:e+1,right:null,index:e,source:{type:"state",value:`${t.id}.${i}`,children:[],range:{start:-1,end:-1}}},c=[o].concat(this.compileSFA_edge(t,a,e+1,r,n));s=s.concat(c),e+=c.length,o.right=e}const i=t.edges[t.edges.length-1],a=this.compileSFA_edge(t,i,e,r,n);return s.concat(a)}}compileSFA_edge(t,e,r,n,s){const i=this.compileSFA_edgeLabel(t,e,r);if(r+=i.length,t.isAccepting&&e.target==t&&!e.formula){const n={type:"jump",target:null,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};return s.push(n),i.concat([n])}return e.formula?i.concat([{type:"check",formula:e.formula,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`}}]).concat(this.compileSFA_(e.target,r+1,n,s)):i.concat(this.compileSFA_(e.target,r,n,s))}compileSFA_edgeLabel(t,e,r){let n=[];for(let s=0;s<e.label.length;s++){const i=e.label[s];if("start-capture"==i.type){const s=this.captureIdx,a=i.group;i.captureID=s;const o={type:"start",group:a,captureID:s,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};this.captureIdx++,n.push(o),r++}else if("end-capture"==i.type){const s=i.start.captureID,a={type:"end",group:i.group,captureID:s,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};n.push(a),r++}}return n}compile(t,e=!1){if(!this.validateParseTree(t))throw new Error("Parse tree did not represent a valid program");T(),this.captureIdx=0;const r=[{type:"split",left:3,right:1,index:0,source:"root"},{type:"check",formula:{type:s.TRUE,value:!0,children:[],range:{start:0,end:0}},index:1,source:"root"},{type:"jump",target:0,index:2,source:"root"},{type:"start",group:"$root",captureID:-1,index:3,source:"root"}],n=this.compileTree(t,r.length),i=r.concat(n).concat([{type:"end",group:"$root",captureID:-1,index:r.length+n.length,source:"root"},{type:"match",index:r.length+n.length+1,source:"root"}]);if(!this.validateProgram(i))throw new Error("Error compiling tree "+JSON.stringify(t)+" into result "+JSON.stringify(i));if(!e)for(let t=0;t<i.length;t++)delete i[t].source,delete i[t].index;return i}validateParseTree(t){return!N||!this.anyCapturesInsidePropositions(t)}anyCapturesInsidePropositions(t){const e=f(t);for(let r=0;r<t.children.length;r++){const n=t.children[r];if(e&&n.type==s.CAPTURE)return console.log(`Can't put a capturing group inside of a propositional term: ${S(t)}!`),!0;if(this.anyCapturesInsidePropositions(n))return!0}return!1}validateProgram(t){if(!N)return!0;for(let e=0;e<t.length;e++){const r=t[e];if(r.index!==e)throw new Error(`Bad code generation:${r.index} != ${e} for ${x([r])} in ${x(t)}`)}const e=this.reachableInstructions(t,0,{});for(let r=0;r<t.length;r++)if(!e[r])throw new Error(`Bad code generation:${r} not reachable for ${x([t[r]])} in ${x(t)}`);return!0}reachableInstructions(t,e,r){if(e in r||e>=t.length)return r;r[e]=!0;const n=t[e];if("split"==n.type){let e=this.reachableInstructions(t,n.left,r);return this.reachableInstructions(t,n.right,e)}return"jump"==n.type?this.reachableInstructions(t,n.target,r):this.reachableInstructions(t,e+1,r)}}function I(t){const e=void 0===t.value?"":t.value.toString(),r=t.children&&t.children.length?t.children.map(t=>S(t)).join(","):"";return`${t.type}(${e},${r})`}function S(t){switch(t.type){case s.TRUE:return"true";case s.FALSE:return"false";case s.START:return"start";case s.END:return"end";case s.AND:return`${S(t.children[0])} & ${S(t.children[1])}`;case s.OR:return`${S(t.children[0])} | ${S(t.children[1])}`;case s.NOT:return`not ${S(t.children[0])}`;case s.GROUP:return`(${S(t.children[0])})`;case s.CAPTURE:return`$${t.value.captureID}:${t.value.group}(${S(t.children[0])})`;default:return I(t)}}function x(t){let e=[];for(let n=0;n<t.length;n++){const s=t[n];let i=`${n}:${s.type}`;switch(s.type){case"split":i+=` ${s.left} ${s.right}`;break;case"jump":i+=` ${s.target}`;break;case"check":i+=" "+S(s.formula);break;case"start":case"end":i+=` ${s.group} (${s.captureID})`;break;case"match":break;default:throw new Error("Unrecognized instruction "+s)}if(s.source){var r=s.source;"root"==r?i+="  \t\t(root)":"check"==s.type&&"range"in r?i+=`\t(ch. ${r.range.start}-${r.range.end})`:i+=`\t\t(${r.type} ${JSON.stringify(r.value)})`}e.push(i)}return e.join("\n")}class w{constructor(t,e,r=!1){this.context=e,this.spec=t;const n=new y(e.tokens),s=new R(e.tokens);if(this.parseResult=n.parse(t),this.parseResult.errors.length)throw new Error("Parsed with errors:"+JSON.stringify(this.parseResult.errors));this.program=s.compile(this.parseResult.tree,r)}get traceAPI(){return this.context.trace}get checkAPI(){return this.context.checks}check(t,e,r,n){var i,a;switch(n.type){case s.TRUE:return!0;case s.FALSE:return!1;case s.START:return 0==r;case s.END:return this.traceAPI.isAtEnd(t);case s.AND:return i=this.check(t,e,r,n.children[0]),a=this.check(t,e,r,n.children[1]),!(!i||!a)&&{node:n,left:i,right:a};case s.OR:return i=this.check(t,e,r,n.children[0]),a=this.check(t,e,r,n.children[1]),!(!i&&!a)&&{node:n,left:i,right:a};case s.NOT:return!this.check(t,e,r,n.children[0]);case s.GROUP:return this.check(t,e,r,n.children[0]);default:if(this.checkAPI[n.type])return this.checkAPI[n.type](t,e,r,n);throw new Error("Unrecognized propositional formula")}}match(t,e=!1){return new F({spec:this,preserveStates:e},function(t){return{queue:new _,nextQueue:new _,threads:[],liveSet:new k((t,e)=>t==e,t=>t),maxThreadID:0,index:-1,pastEnd:!1,trace:t,matchQueue:new U(t=>t.priority),matchSet:new k(b,D),lastMatchPriority:0}}(t),void 0).next()}}class O{constructor(t,e,r,n){this.id=t,this.pc=e,this.priority=r,this.matches=n.map(function(t){let e=C(t);return e.priority=Math.max(r,t.priority),e})}equals(t){return this.pc==t.pc}hash(){return this.pc}mergeThread(t){for(let e=0;e<t.matches.length;e++){let r=!1;for(let n=0;n<this.matches.length;n++)if(b(this.matches[n],t.matches[e])){r=!0;break}if(!r){let r=C(t.matches[e]);r.priority=Math.max(this.priority,this.matches[e].priority),this.matches.push(r)}}}hasOpenMatch(){for(let t=0;t<this.matches.length;t++)if(this.matches[t].instructions.length>0)return!0;return!1}pushMatchInstruction(t){for(let e=0;e<this.matches.length;e++)this.matches[e].instructions.push(t)}terminate(){this.matches=[]}}class k{constructor(t,e,r=1e3){this.equiv=t,this.hash=e,this.coll=new Array(r),this.length=0}bucketFind(t,e){for(let r=0;r<t.length;r++)if(this.equiv?this.equiv(t[r].key,e):t[r].key==e)return t[r].val}push(t,e){const r=this.hash(t)%this.coll.length;let n=this.coll[r];if(n){if(void 0!==this.bucketFind(n,t))return!1;n.push({key:t,val:e})}else this.coll[r]=[{key:t,val:e}];return this.length++,!0}get(t){if(0==this.length)return;const e=this.hash(t)%this.coll.length;let r=this.coll[e];return r?this.bucketFind(r,t):void 0}clear(){for(let t=0;t<this.coll.length;t++)this.coll[t]=[];this.length=0}contains(t){if(0==this.length)return!1;const e=this.hash(t)%this.coll.length;let r=this.coll[e];return!!r&&void 0!==this.bucketFind(r,t)}}function $(t,e){return t+=0|e,t+=t<<10|0,t^=t>>6|0,t+=e>>8|0,t+=t<<10|0,t^=t>>6|0,t+=e>>16|0,t+=t<<10|0,t^=t>>6|0,t+=e>>24|0,t+=t<<10|0,t^=t>>6|0}const b=function(t,e){if(t.instructions.length!=e.instructions.length)return!1;for(let r=0;r<t.instructions.length;r++){const n=t.instructions[r],s=e.instructions[r];if(n.type!=s.type||n.index!=s.index||n.group!=s.group)return!1}return!0},D=function(t){return function(...t){let e=0;for(let r=0;r<t.length;r++)e=$(e,t[r]);return function(t){return t+=t<<3|0,t^=t>>11|0,t+=t<<15|0}(e)}(t.instructions.length)};function C(t){return{priority:t.priority,instructions:t.instructions.slice()}}class _{constructor(){this.array=[],this.length=0}push(t){this.array[this.length]=t,this.length++}clear(){this.length=0}get first(){if(0!=this.length)return this.array[0]}get(t){if(!(t<0||t>=this.length))return this.array[t]}}class U{constructor(t,e,r){this.queues=[],this.priorityFunction=t,this.length=0,this.lowestPriority=1/0,this.highestPriority=-1/0,this.members=e&&r?new k(e,r):void 0,this.clear()}push(t){const e=this.priorityFunction(t);if(this.members){if(this.members.contains(t))return!1;this.members.push(t,!0)}return e in this.queues?this.queues[e].push(t):this.queues[e]=[t],e<this.lowestPriority&&(this.lowestPriority=e),e>this.highestPriority&&(this.highestPriority=e),this.length++,!0}shift(){if(this.lowestPriority>=1/0||0==this.length)return;const t=this.queues[this.lowestPriority],e=t.pop();if(0==t.length)if(delete this.queues[this.lowestPriority],this.highestPriority<=this.lowestPriority)this.lowestPriority=1/0,this.highestPriority=-1/0;else for(;!this.queues[this.lowestPriority]&&this.lowestPriority<this.highestPriority;)this.lowestPriority++;return this.length--,e}get first(){if(0!=this.length)return this.queues[this.lowestPriority][0]}clear(){this.queues=[],this.lowestPriority=1/0,this.highestPriority=-1/0,this.length=0,this.members&&this.members.clear()}}const q=100;class F{constructor(t,e,r){if(this.config=t,this.state=e,-1==this.state.index){this.state.trace=this.config.spec.traceAPI.start(this.state.trace);let t=new O(0,0,0,[{priority:0,instructions:[]}]);this.enqueueThread(t);const e=this.state.queue;this.state.queue=this.state.nextQueue,this.state.nextQueue=e,this.state.liveSet.clear(),this.state.matchSet.clear(),this.state.index=0}this.match=r}get start(){return this.match?this.match.start:-1}get end(){return this.match?this.match.end:-1}get states(){return this.match?this.match.states:void 0}get subgroups(){return this.match?this.match.subgroups:void 0}hasReadyMatch(){return!!this.state.matchQueue.length&&(!this.state.queue.length||this.state.matchQueue.first.priority<=this.state.queue.first.priority)}enqueueThread(t){const e=this.config.spec.program[t.pc];switch(e.type){case"jump":return t.pc=e.target,void this.enqueueThread(t);case"split":this.state.maxThreadID++,t.pc=e.left;const r=new O(this.state.maxThreadID,e.right,t.priority+1,t.matches);return this.enqueueThread(t),void this.enqueueThread(r);case"start":return t.pushMatchInstruction({type:"start",index:this.state.index+1,group:e.group,groupIndex:e.captureID}),t.pc++,void this.enqueueThread(t);case"end":return t.pushMatchInstruction({type:"end",index:this.state.index+1,group:e.group,groupIndex:e.captureID}),t.pc++,void this.enqueueThread(t);case"match":for(let e=0;e<t.matches.length;e++)t.matches[e].priority>=t.priority&&this.state.matchSet.push(t.matches[e],!0)&&this.state.matchQueue.push(t.matches[e]);return void t.terminate();case"check":const n=t.hash();let s=this.state,i=s.liveSet.get(n);if(i){if(i.index!=s.index)i.index=s.index,i.threads.clear(),i.threads.push(t);else for(let e=0;e<i.threads.length;e++)if(i.threads.get(e).equals(t))return i.threads.get(e).mergeThread(t),void t.terminate()}else{let e=new _;e.push(t),s.liveSet.push(n,{index:s.index,threads:e})}return void s.nextQueue.push(t);default:throw new Error("Unrecognized instruction type ${instr.type}")}}prettifyMatch(t){let e=[],r={};for(let n=0;n<t.instructions.length;n++){const s=t.instructions[n];switch(s.type){case"start":let t={group:s.group,groupIndex:s.groupIndex,start:s.index,end:1/0,states:void 0,results:void 0};if(this.config.preserveStates&&(t.states=[],t.results=[]),e.push(t),r[t.group])throw new Error("Duplicate capture group");r[t.group]=t;break;case"state":let n=Object.getOwnPropertyNames(r);for(let t=0;t<n.length;t++){let e=r[n[t]];e.states.push(s.state),e.results.push(s.result)}break;case"end":r[s.group].end=s.index,delete r[s.group]}}let n=Object.getOwnPropertyNames(r);if(n.length)throw new Error(`Open capture groups: ${n.join(",")}`);let s=e.shift(),i={start:s.start,end:s.end,subgroups:e.filter(t=>t.start!=t.end),states:void 0,results:void 0};return this.config.preserveStates&&(i.states=s.states,i.results=s.results),i}next(){if(!this.state)throw new Error("Don't call next() on the same PlayspecResult twice!");for(;!this.hasReadyMatch()&&this.state.queue.length;){const t=this.config.spec.traceAPI.currentState(this.state.trace);let e=void 0;const r=this.state.queue.length;let n=0;for(let s=0;s<this.state.queue.length;s++){if(s>=r)throw new Error("The thread queue should never grow during a single trace state!");let i=this.state.queue.get(s);if(i.priority<n)throw new Error("Decreasing priority!");const a=this.config.spec.program[i.pc];switch(a.type){case"check":const r=this.config.spec.check(this.state.trace,t,this.state.index,a.formula);r?(i.pc++,i.hasOpenMatch&&this.config.preserveStates&&(e||(e=this.config.spec.traceAPI.copyCurrentState?this.config.spec.traceAPI.copyCurrentState(this.state.trace):t),i.pushMatchInstruction({type:"state",index:this.state.index,state:e,result:r})),this.enqueueThread(i)):i.terminate();break;default:throw new Error("Thread should be parked on a check.")}}let s=this.state.queue;if(this.state.queue=this.state.nextQueue,s.clear(),this.state.nextQueue=s,this.state.index%q==0&&this.state.liveSet.clear(),this.state.matchSet.clear(),this.config.spec.traceAPI.isAtEnd(this.state.trace)){this.config.spec.traceAPI.isStreaming&&this.config.spec.traceAPI.isStreaming(this.state.trace)||this.state.queue.clear();break}this.config.spec.traceAPI.advanceState(this.state.trace),this.state.index++}if(this.hasReadyMatch()){const t=this.state.matchQueue.shift();if(this.state.lastMatchPriority>t.priority)throw new Error("Matches popped out of order!");this.state.lastMatchPriority=t.priority;const e=this.prettifyMatch(t),r=this.state;return this.state=void 0,new F(this.config,r,e)}if(this.config.spec.traceAPI.isStreaming&&this.config.spec.traceAPI.isStreaming(this.state.trace)){const t=this.state;return this.state=void 0,new F(this.config,t,void 0)}return this.state=void 0,null}}r.d(e,"tokenTypes",function(){return n}),r.d(e,"parseTypes",function(){return s}),r.d(e,"cloneTree",function(){return i}),r.d(e,"constantValue",function(){return a}),r.d(e,"parseValue",function(){return o}),r.d(e,"parseInfixR",function(){return c}),r.d(e,"parseInfixRPropositional",function(){return h}),r.d(e,"BOUND_INFINITE",function(){return u}),r.d(e,"standardTokens",function(){return l}),r.d(e,"isCustom",function(){return g}),r.d(e,"isPropositional",function(){return f}),r.d(e,"Parser",function(){return y}),r.d(e,"Compiler",function(){return R}),r.d(e,"stringifyCustom",function(){return I}),r.d(e,"stringifyFormula",function(){return S}),r.d(e,"stringify",function(){return x}),r.d(e,"Playspec",function(){return w}),r.d(e,"SFA",function(){return E}),r.d(e,"fromParseTree",function(){return v}),r.d(e,"resetStateID",function(){return T})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QbGF5c3BlY3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vUGxheXNwZWNzLy4vc3JjL3BhcnNlci50cyIsIndlYnBhY2s6Ly9QbGF5c3BlY3MvLi9zcmMvc2ZhLnRzIiwid2VicGFjazovL1BsYXlzcGVjcy8uL3NyYy9jb21waWxlci50cyIsIndlYnBhY2s6Ly9QbGF5c3BlY3MvLi9zcmMvcGxheXNwZWMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRva2VuVHlwZXMiLCJXSElURVNQQUNFIiwiQ09OQ0FURU5BVElPTiIsIkRPVFNfR1JFRURZIiwiRE9UU19SRUxVQ1RBTlQiLCJET1RTX09NRUdBIiwiTEVGVF9QQVJFTiIsIlJJR0hUX1BBUkVOIiwiQ0FQVFVSSU5HX0xFRlRfUEFSRU4iLCJBTFRFUk5BVElPTiIsIklOVEVSU0VDVElPTiIsIkFORCIsIk9SIiwiTk9UIiwiU1RBUlQiLCJFTkQiLCJUUlVFIiwiRkFMU0UiLCJFUlJPUiIsInBhcnNlVHlwZXMiLCJPTUVHQSIsIlJFUEVUSVRJT04iLCJDQVBUVVJFIiwiR1JPVVAiLCJjbG9uZVRyZWUiLCJ0eXBlIiwiY2hpbGRyZW4iLCJzbGljZSIsInJhbmdlIiwic3RhcnQiLCJlbmQiLCJjb25zdGFudFZhbHVlIiwiX21yIiwicGFyc2VWYWx1ZSIsInBhcnNlciIsInRva2VuIiwibm9kZSIsInBhcnNlSW5maXhSIiwibGVmdCIsInB1c2giLCJwYXJzZUV4cHJlc3Npb24iLCJ0aWdodG5lc3MiLCJwYXJzZUluZml4UlByb3Bvc2l0aW9uYWwiLCJpc1Byb3Bvc2l0aW9uYWwiLCJlcnJvciIsInJpZ2h0IiwiQk9VTkRfSU5GSU5JVEUiLCJzdGFuZGFyZFRva2VucyIsIm1hdGNoIiwiZXh0ZW5kUGFyc2UiLCJtYXRjaFJlc3VsdCIsImdyZWVkeSIsImxvd2VyQm91bmQiLCJwYXJzZUludCIsInVwcGVyQm91bmQiLCJzdGFydFBhcnNlIiwidHJ1ZVBoaSIsImV4cHIiLCJjdXJyZW50VG9rZW4iLCJhZHZhbmNlIiwiZ3JvdXAiLCJwaGkiLCJjdXN0b21UaWdodG5lc3NPZmZzZXQiLCJpc0N1c3RvbSIsImsiLCJldmVyeSIsIlBhcnNlciIsIltvYmplY3QgT2JqZWN0XSIsImNvbnRleHRUb2tlbnMiLCJ0aGlzIiwidG9rZW5EZWZpbml0aW9ucyIsInRva2Vuc0J5VHlwZSIsInBhcnNlRXJyb3JzIiwiY3VzdG9tVG9rZW5zIiwidG9rZW5zIiwiY29uY2F0IiwidGkiLCJsZW5ndGgiLCJpbnB1dCIsImRlZm4iLCJSZWdFeHAiLCJtciIsInBhcnNlVHJlZSIsInJlc2V0U3RyZWFtIiwibXNnIiwidHJlZSIsImVyciIsIm1lc3NhZ2UiLCJzdHIiLCJyZXN1bHQiLCJlcnJvcnMiLCJzdWJzdHJpbmciLCJpbmRleCIsInRva2VuRGVmaW5pdGlvbiIsImV4ZWNSZXN1bHQiLCJleGVjIiwiQXJyYXkiLCJpc0FycmF5IiwibWkiLCJjYW5kaWRhdGUiLCJzdWJzdHIiLCJtYXRjaExlbmd0aCIsIm9sZEluZGV4Iiwic3RyaW5nIiwicG9zaXRpb24iLCJzdHJlYW0iLCJjaGFyUG9zaXRpb24iLCJ0b2tlbml6ZSIsInJlbWFpbmRlciIsInRva2VuRGVmIiwibmV3VHJlZSIsInN0YXRlSUQiLCJyZXNldFN0YXRlSUQiLCJzZmFfU0ZBIiwic3RhcnRTdGF0ZXMiLCJTdGF0ZSIsImFjY2VwdGluZ1N0YXRlcyIsIm9wdElEIiwiaW5kZXhPZiIsImFkZEVkZ2UiLCJFZGdlIiwiaXNBY2NlcHRpbmciLCJzcGxpY2UiLCJmb3VuZCIsInN0YWNrIiwiaGVyZSIsInBvcCIsImlkIiwiZWsiLCJlZGdlcyIsImUiLCJ0YXJnZXQiLCJrZXlzIiwibWFwIiwiZ2V0U3RhdGVzIiwiZm9ybXVsYSIsInN0cmluZ2lmeUZvcm11bGEiLCJsYWJlbCIsImpvaW4iLCJzZWVuIiwic2siLCJyZWFjaGFibGUiLCJuZXdFcyIsInRlIiwicmsiLCJiIiwiZWVsaW0iLCJhIiwiYXhiIiwic3RhdGVzIiwic2EiLCJqIiwic2IiLCJzYXNiIiwibmV3U3RhdGUiLCJtYXJrQWNjZXB0aW5nIiwic2FiIiwiYWUiLCJhZXQiLCJhZUlzQWNjZXB0aW5nU2VsZkVkZ2UiLCJiZSIsImJldCIsImNvbnNvbGUiLCJwMSIsInAyIiwiY29tYmluZWQiLCJ0b1N0cmluZyIsImZyb21QYXJzZVRyZWUiLCJzZmEiLCJvdXRFZGdlcyIsImJ1aWxkIiwic2VlZFN0YXRlIiwiYWVzIiwibWluIiwibWF4IiwiY2xvbmVkIiwibmV4dCIsIm91dCIsImVzIiwiY2FwdHVyZVN0YXJ0IiwiYmVzIiwiaW50ZXJzZWN0Iiwib2xkQWNjZXB0aW5nIiwic3RhcnRrIiwiYWNjayIsImFjYyIsIm1hcmtOb25BY2NlcHRpbmciLCJlaSIsInRlcm1pbnVzIiwiREVCVUdfTU9ERSIsImNvbXBpbGVyX0NvbXBpbGVyIiwiX3Rva2VuRGVmcyIsImNhcHR1cmVJZHgiLCJpZHgiLCJjb21waWxlVHJlZSIsImNhcHR1cmVJRCIsInNvdXJjZSIsImFJZHgiLCJiSWR4IiwiYnJhbmNoIiwianVtcCIsImNvbXBpbGVTRkEiLCJwcmVmYWNlIiwicGhpUGdtIiwib3B0aW9uYWxzIiwidGFyZ2V0cyIsInJlcGV0aXRpb24iLCJjSWR4IiwiRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdGVTdGFydHMiLCJlbmRKdW1wcyIsInBnbSIsInN0YXJ0UGdtIiwiY29tcGlsZVNGQV8iLCJzdGF0ZSIsImVkZ2UiLCJlZGdlU3BsaXQiLCJlZGdlUGdtIiwiY29tcGlsZVNGQV9lZGdlIiwiY29tcGlsZVNGQV9lZGdlTGFiZWwiLCJkZWJ1ZyIsInZhbGlkYXRlUGFyc2VUcmVlIiwiYm9keSIsInZhbGlkYXRlUHJvZ3JhbSIsImFueUNhcHR1cmVzSW5zaWRlUHJvcG9zaXRpb25zIiwicGFyZW50IiwicHJvcCIsImNpIiwiY2hpbGQiLCJsb2ciLCJpbnN0ciIsInJlYWNoYWJsZUluc3RydWN0aW9ucyIsImkwIiwib3RoZXIiLCJzZWVuTGVmdCIsInN0cmluZ2lmeUN1c3RvbSIsInVuZGVmaW5lZCIsImNvZGUiLCJpbnN0clN0ciIsInNyYyIsInBsYXlzcGVjX1BsYXlzcGVjIiwic3BlYyIsImNvbnRleHQiLCJjb21waWxlciIsInBhcnNlUmVzdWx0IiwicGFyc2UiLCJwcm9ncmFtIiwiY29tcGlsZSIsInRyYWNlQVBJIiwidHJhY2UiLCJjaGVja0FQSSIsImNoZWNrcyIsImlzQXRFbmQiLCJjaGVjayIsInByZXNlcnZlU3RhdGVzIiwiUGxheXNwZWNSZXN1bHQiLCJxdWV1ZSIsIk5vblNocmlua2luZ0FycmF5IiwibmV4dFF1ZXVlIiwidGhyZWFkcyIsImxpdmVTZXQiLCJOb25SZXBsYWNpbmdIYXNoTWFwIiwibWF4VGhyZWFkSUQiLCJwYXN0RW5kIiwibWF0Y2hRdWV1ZSIsIlByaW9yaXR5UXVldWUiLCJwcmlvcml0eSIsIm1hdGNoU2V0IiwibWF0Y2hFcXVpdkZuIiwibWF0Y2hIYXNoRm4iLCJsYXN0TWF0Y2hQcmlvcml0eSIsInBsYXlzcGVjUmVzdWx0U3RhdGVJbml0IiwiVGhyZWFkIiwicGMiLCJtYXRjaGVzIiwibTIiLCJjbG9uZU1hdGNoIiwiTWF0aCIsInQyIiwiaW5zdHJ1Y3Rpb25zIiwiZXF1aXZGbiIsImhhc2hGbiIsImJ1Y2tldENvdW50IiwiZXF1aXYiLCJoYXNoIiwiY29sbCIsImJ1Y2tldCIsIm9iaiIsImtleSIsInZhbCIsImhhc2hDb2RlIiwiYnVja2V0RmluZCIsImhhc2hJbnQiLCJoIiwiaW50MzIiLCJpbnNBIiwiaW5zQiIsIm51bWJlcnMiLCJmaW5hbGl6ZUhhc2giLCJoYXNoTnVtYmVycyIsImFycmF5IiwiZmlyc3QiLCJwZm4iLCJxdWV1ZXMiLCJwcmlvcml0eUZ1bmN0aW9uIiwibG93ZXN0UHJpb3JpdHkiLCJJbmZpbml0eSIsImhpZ2hlc3RQcmlvcml0eSIsIm1lbWJlcnMiLCJjbGVhciIsImNvbnRhaW5zIiwicSIsIkxJVkVTRVRfQ0xFQVJfSU5URVJWQUwiLCJjb25maWciLCJpbml0VGhyZWFkIiwiZW5xdWV1ZVRocmVhZCIsInRlbXAiLCJzdWJncm91cHMiLCJ0aHJlYWQiLCJ0aHJlYWQyIiwicHVzaE1hdGNoSW5zdHJ1Y3Rpb24iLCJncm91cEluZGV4IiwidGVybWluYXRlIiwibGl2ZSIsImVxdWFscyIsIm1lcmdlVGhyZWFkIiwidGhyZWFkTGlzdCIsImdyb3VwcyIsImxpdmVHcm91cHMiLCJuZXdHIiwicmVzdWx0cyIsIm9wZW5Hcm91cHMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZ2kiLCJjb250aW51ZWRHIiwicm9vdEdyb3VwIiwic2hpZnQiLCJyb290TWF0Y2giLCJmaWx0ZXIiLCJoYXNSZWFkeU1hdGNoIiwiY3VycmVudFN0YXRlIiwiY29waWVkU3RhdGUiLCJsaW1pdCIsImxhc3RQcmlvcml0eSIsInQiLCJjaGVja1Jlc3VsdCIsImhhc09wZW5NYXRjaCIsImNvcHlDdXJyZW50U3RhdGUiLCJpc1N0cmVhbWluZyIsImFkdmFuY2VTdGF0ZSIsInByZXR0eU1hdGNoIiwicHJldHRpZnlNYXRjaCIsIm5leHRTdGF0ZSJdLCJtYXBwaW5ncyI6IjBCQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUEyQ0EsT0F0Q0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFaLEVBQUFtQixFQUFBLFNBQUFqQixHQUNBWSxPQUFBQyxlQUFBYixFQUFBLGNBQWlEa0IsT0FBQSxLQUlqRHBCLEVBQUFxQixFQUFBLFNBQUFsQixHQUNBLElBQUFTLEVBQUFULEtBQUFtQixXQUNBLFdBQTJCLE9BQUFuQixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFILEVBQUFVLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVosRUFBQWEsRUFBQSxTQUFBVSxFQUFBQyxHQUFzRCxPQUFBVixPQUFBVyxVQUFBQyxlQUFBbkIsS0FBQWdCLEVBQUFDLElBR3REeEIsRUFBQTJCLEVBQUEsR0FJQTNCLElBQUE0QixFQUFBLHlDQ2pFTyxNQUFNQyxHQUNUQyxXQUFZLElBQ1pDLGNBQWUsSUFFZkMsWUFBYSxNQUNiQyxlQUFnQixLQUNoQkMsV0FBWSxNQUNaQyxXQUFZLElBQ1pDLFlBQWEsSUFDYkMscUJBQXNCLEtBQ3RCQyxZQUFhLElBQ2JDLGFBQWMsSUFDZEMsSUFBSyxJQUNMQyxHQUFJLElBQ0pDLElBQUssTUFDTEMsTUFBTyxRQUNQQyxJQUFLLE1BQ0xDLEtBQU0sT0FDTkMsTUFBTyxRQUNQQyxNQUFPLFNBR0VDLEdBQ1RDLE1BQU9wQixFQUFXSyxXQUNsQmdCLFdBQVlyQixFQUFXRyxZQUN2QkQsY0FBZUYsRUFBV0UsY0FDMUJvQixRQUFTLEtBQ1RDLE1BQU92QixFQUFXTSxXQUNsQkcsWUFBYVQsRUFBV1MsWUFDeEJDLGFBQWNWLEVBQVdVLGFBQ3pCQyxJQUFLWCxFQUFXVyxJQUNoQkMsR0FBSVosRUFBV1ksR0FDZkMsSUFBS2IsRUFBV2EsSUFDaEJDLE1BQU9kLEVBQVdjLE1BQ2xCQyxJQUFLZixFQUFXZSxJQUNoQkMsS0FBTWhCLEVBQVdnQixLQUNqQkMsTUFBT2pCLEVBQVdpQixNQUNsQkMsTUFBT2xCLEVBQVdrQixPQVdoQixTQUFBTSxFQUFvQjFCLEdBQ3RCLE9BQ0kyQixLQUFNM0IsRUFBRTJCLEtBQ1JsQyxNQUFPTyxFQUFFUCxNQUNUbUMsU0FBVTVCLEVBQUU0QixTQUFTQyxRQUNyQkMsT0FDSUMsTUFBTy9CLEVBQUU4QixNQUFNQyxNQUNmQyxJQUFLaEMsRUFBRThCLE1BQU1FLE1BS2xCLE1BQU1DLEVBQWdCLFNBQVVuRCxHQUNuQyxPQUFPLFNBQVVvRCxHQUNiLE9BQU9wRCxJQUlGcUQsRUFBYSxTQUFVQyxFQUFpQkMsR0FDakQsT0FBT0QsRUFBT0UsS0FBS0QsRUFBTVYsS0FBTVUsRUFBTTVDLFFBRzVCOEMsRUFBYyxTQUFVSCxFQUFpQkksRUFBaUJILEdBQ25FLElBQUlULEdBQVlZLEdBRWhCLE9BREFaLEVBQVNhLEtBQUtMLEVBQU9NLGdCQUFnQkwsRUFBTU0sVUFBWSxJQUNoRFAsRUFBT0UsS0FBS0QsRUFBTVYsS0FBTVUsRUFBTTVDLE1BQU9tQyxJQUduQ2dCLEVBQTJCLFNBQVVSLEVBQWlCSSxFQUFpQkgsR0FDaEYsSUFBS1EsRUFBZ0JMLEdBQ2pCLE9BQU9KLEVBQU9VLE1BQU0sZ0RBQWlEVCxFQUFPRyxHQUVoRixJQUFJWixHQUFZWSxHQUNoQixNQUFNTyxFQUFRWCxFQUFPTSxnQkFBZ0JMLEVBQU1NLFVBQVksR0FDdkQsT0FBS0UsRUFBZ0JFLElBR3JCbkIsRUFBU2EsS0FBS00sR0FDUFgsRUFBT0UsS0FBS0QsRUFBTVYsS0FBTVUsRUFBTTVDLE1BQU9tQyxJQUhqQ1EsRUFBT1UsTUFBTSxpREFBa0RULEVBQU9VLElBTXhFQyxFQUFpQixPQUVqQkMsSUFFTHRCLEtBQVF6QixFQUFXQyxXQUNuQitDLE1BQU8sU0FHUHZCLEtBQU16QixFQUFXRSxjQUNqQjhDLE9BQVFoRCxFQUFXRSxlQUNuQnVDLFVBQVcsSUFDWFEsWUFBYVosSUFHYlosS0FBTXpCLEVBQVdHLFlBQ2pCNkMsTUFBTyxnQ0FDUHpELE1BQU8sU0FBVTJELEdBQ2IsT0FDSUMsUUFBUSxFQUNSQyxXQUFZRixFQUFZLEdBQUtHLFNBQVNILEVBQVksSUFBTSxFQUN4REksV0FBWUosRUFBWSxHQUFLRyxTQUFTSCxFQUFZLElBQU1KLElBR2hFTCxVQUFXLElBQ1hjLFdBQVksU0FBVXJCLEVBQWlCQyxHQUNuQyxNQUFNcUIsRUFBVXRCLEVBQU9FLEtBQUtqQixFQUFXSCxNQUFNLEdBRzdDLE9BRkF3QyxFQUFRNUIsTUFBTUMsTUFBUU0sRUFBTVAsTUFBTUMsTUFDbEMyQixFQUFRNUIsTUFBTUUsSUFBTUssRUFBTVAsTUFBTUMsTUFDekJLLEVBQU9FLEtBQUtqQixFQUFXRSxXQUFZYyxFQUFNNUMsT0FBUWlFLEtBRTVEUCxZQUFhLFNBQVVmLEVBQWlCSSxFQUFpQkgsR0FDckQsT0FBT0QsRUFBT0UsS0FBS2pCLEVBQVdFLFdBQVljLEVBQU01QyxPQUFRK0MsT0FJNURiLEtBQU16QixFQUFXSSxlQUNqQjRDLE1BQU8sOEJBQ1BQLFVBQVcsSUFDWGxELE1BQU8sU0FBVTJELEdBQ2IsT0FDSUMsUUFBUSxFQUNSQyxXQUFZRixFQUFZLEdBQUtHLFNBQVNILEVBQVksSUFBTSxFQUN4REksV0FBWUosRUFBWSxHQUFLRyxTQUFTSCxFQUFZLElBQU1KLElBR2hFUyxXQUFZLFNBQVVyQixFQUFpQkMsR0FDbkMsTUFBTXFCLEVBQVV0QixFQUFPRSxLQUFLakIsRUFBV0gsTUFBTSxHQUc3QyxPQUZBd0MsRUFBUTVCLE1BQU1DLE1BQVFNLEVBQU1QLE1BQU1DLE1BQ2xDMkIsRUFBUTVCLE1BQU1FLElBQU1LLEVBQU1QLE1BQU1DLE1BQ3pCSyxFQUFPRSxLQUFLakIsRUFBV0UsV0FBWWMsRUFBTTVDLE9BQVFpRSxLQUU1RFAsWUFBYSxTQUFVZixFQUFpQkksRUFBaUJILEdBQ3JELE9BQU9ELEVBQU9FLEtBQUtqQixFQUFXRSxXQUFZYyxFQUFNNUMsT0FBUStDLE9BSTVEYixLQUFNekIsRUFBV0ssV0FDakIyQyxPQUFRaEQsRUFBV0ssWUFDbkJvQyxVQUFXLElBQ1hjLFdBQVksU0FBVXJCLEVBQWlCQyxHQUNuQyxNQUFNcUIsRUFBVXRCLEVBQU9FLEtBQUtqQixFQUFXSCxNQUFNLEdBRzdDLE9BRkF3QyxFQUFRNUIsTUFBTUMsTUFBUU0sRUFBTVAsTUFBTUMsTUFDbEMyQixFQUFRNUIsTUFBTUUsSUFBTUssRUFBTVAsTUFBTUUsSUFDekJJLEVBQU9FLEtBQUtqQixFQUFXQyxNQUFPZSxFQUFNNUMsT0FBUWlFLEtBRXZEUCxZQUFhLFNBQVVmLEVBQWlCSSxFQUFpQkgsR0FDckQsT0FBT0QsRUFBT0UsS0FBS2pCLEVBQVdDLE1BQU9lLEVBQU01QyxPQUFRK0MsT0FJdkRiLEtBQU16QixFQUFXTSxXQUNqQjBDLE9BQVFoRCxFQUFXTSxZQUNuQmlELFdBQVksU0FBVXJCLEVBQWlCQyxHQUVuQyxNQUFNc0IsRUFBT3ZCLEVBQU9NLGdCQUFnQixHQUNwQyxPQUFJTixFQUFPd0IsZUFBZWpDLE1BQVF6QixFQUFXTyxZQUNsQzJCLEVBQU9VLE1BQU0sNEJBQTZCVCxFQUFPc0IsSUFFNUR2QixFQUFPeUIsVUFDQXpCLEVBQU9FLEtBQUtqQixFQUFXSSxNQUFPWSxFQUFNNUMsT0FBUWtFLFFBSXZEaEMsS0FBTXpCLEVBQVdPLFlBQ2pCeUMsT0FBUWhELEVBQVdPLGVBR25Ca0IsS0FBTXpCLEVBQVdRLHFCQUNqQndDLE1BQU8sMkJBQ1B6RCxNQUFPLFNBQVUyRCxHQUNiLE9BQ0lVLE1BQU9WLEVBQVksSUFBTSxjQUdqQ0ssV0FBWSxTQUFVckIsRUFBaUJDLEdBRW5DLE1BQU1zQixFQUFPdkIsRUFBT00sZ0JBQWdCLEdBQ3BDLE9BQUlOLEVBQU93QixlQUFlakMsTUFBUXpCLEVBQVdPLFlBQ2xDMkIsRUFBT1UsTUFBTSw0QkFBNkJULEVBQU9zQixJQUU1RHZCLEVBQU95QixVQUNBekIsRUFBT0UsS0FBS2pCLEVBQVdHLFFBQVNhLEVBQU01QyxPQUFRa0UsUUFJekRoQyxLQUFNekIsRUFBV1MsWUFDakJ1QyxPQUFRaEQsRUFBV1MsYUFDbkJnQyxVQUFXLEdBQ1hRLFlBQWFaLElBR2JaLEtBQU16QixFQUFXVSxhQUNqQnNDLE9BQVFoRCxFQUFXVSxjQUNuQitCLFVBQVcsR0FDWFEsWUFBYVosSUFHYlosS0FBTXpCLEVBQVdXLElBQ2pCcUMsT0FBUWhELEVBQVdXLEtBQ25COEIsVUFBVyxJQUNYUSxZQUFhUCxJQUdiakIsS0FBTXpCLEVBQVdZLEdBQ2pCb0MsT0FBUWhELEVBQVdZLElBQ25CNkIsVUFBVyxJQUNYUSxZQUFhUCxJQUdiakIsS0FBTXpCLEVBQVdhLElBQ2pCbUMsT0FBUWhELEVBQVdhLEtBQ25CNEIsVUFBVyxJQUNYYyxXQUFZLFNBQVVyQixFQUFpQkMsR0FDbkMsTUFBTTBCLEVBQU0zQixFQUFPTSxnQkFBZ0JMLEVBQU1NLFdBQ3pDLE9BQUtFLEVBQWdCa0IsR0FHZDNCLEVBQU9FLEtBQUtELEVBQU1WLEtBQU1VLEVBQU01QyxPQUFRc0UsSUFGbEMzQixFQUFPVSxNQUFNLG1EQUFvRFQsRUFBTzBCLE1BTXZGcEMsS0FBTXpCLEVBQVdjLE1BQ2pCa0MsT0FBUWhELEVBQVdjLE9BQ25CeUMsV0FBWXRCLElBR1pSLEtBQU16QixFQUFXZSxJQUNqQmlDLE9BQVFoRCxFQUFXZSxLQUNuQndDLFdBQVl0QixJQUdaUixLQUFNekIsRUFBV2dCLEtBQ2pCZ0MsT0FBUWhELEVBQVdnQixNQUNuQnpCLE1BQU93QyxHQUFjLEdBQ3JCd0IsV0FBWXRCLElBR1pSLEtBQU16QixFQUFXaUIsTUFDakIrQixPQUFRaEQsRUFBV2lCLE9BQ25CMUIsTUFBT3dDLEdBQWMsR0FDckJ3QixXQUFZdEIsSUFHWlIsS0FBTXpCLEVBQVdrQixNQUNqQjhCLE1BQU8sT0FDUE8sV0FBWXRCLElBSWQ2QixFQUF3QixJQUV4QjVDLEVBQVEsUUFFUixTQUFBNkMsRUFBbUJqRSxHQUNyQixJQUFLLElBQUlrRSxLQUFLN0MsRUFDVixHQUFJQSxFQUFXNkMsSUFBTWxFLEVBQUUyQixLQUNuQixPQUFPLEVBR2YsT0FBTyxFQUdMLFNBQUFrQixFQUEwQjdDLEdBQzVCLE9BQU9pRSxFQUFTakUsSUFDWkEsRUFBRTJCLE1BQVFOLEVBQVdSLEtBQ3JCYixFQUFFMkIsTUFBUU4sRUFBV1AsSUFDckJkLEVBQUUyQixNQUFRTixFQUFXTixLQUNyQmYsRUFBRTJCLE1BQVFOLEVBQVdILE1BQ3JCbEIsRUFBRTJCLE1BQVFOLEVBQVdGLE9BQ3JCbkIsRUFBRTJCLE1BQVFOLEVBQVdMLE9BQ3JCaEIsRUFBRTJCLE1BQVFOLEVBQVdKLE1BQ25CakIsRUFBRTJCLE1BQVFOLEVBQVdJLE9BQVN6QixFQUFFMkIsTUFBUU4sRUFBV0csVUFDakR4QixFQUFFNEIsU0FBU3VDLE1BQU0sU0FBVXJGLEdBQ3ZCLE9BQU8rRCxFQUFnQi9ELFdBUWpDc0YsRUFLRkMsWUFBWUMsR0FDUkMsS0FBS0Msb0JBQ0xELEtBQUtFLGdCQUNMRixLQUFLRyxlQUNMLE1BQU1DLEVBQWVMLE1BQ2ZNLEVBQVNELEVBQWFFLE9BQU81QixHQUNuQyxJQUFLLElBQUk2QixFQUFLLEVBQUdBLEVBQUtGLEVBQU9HLE9BQVFELElBQU0sQ0FDdkMsTUFBTUUsRUFBeUJKLEVBQU9FLEdBQ2hDbkMsRUFBb0JxQyxFQUFNckMsV0FBYSxFQUN2Q3NDLEdBQ0Z0RCxLQUFNcUQsRUFBTXJELEtBQ1p1QixNQUFPOEIsRUFBTTlCLGlCQUFpQmdDLE9BQVNGLEVBQU05QixNQUNoQixpQkFBaEI4QixFQUFXLE9BQWtCQSxFQUFNOUIsT0FDeEM4QixFQUFNOUIsTUFDZHpELE1BQU91RixFQUFNdkYsT0FBUyxTQUFVMEYsR0FDNUIsT0FBT0EsRUFBRyxJQUVkeEMsVUFBV21DLEVBQUtILEVBQWFJLE9BQVNwQyxFQUFZcUIsRUFBd0JyQixFQUMxRWMsV0FBWXVCLEVBQU12QixZQUFjLFNBQVVyQixFQUFpQkMsR0FDdkQsT0FBT0QsRUFBT1UsTUFBTSwyQ0FBNENULElBRXBFYyxZQUFhNkIsRUFBTTdCLGFBQWUsU0FBVWYsRUFBaUJnRCxFQUFzQi9DLEdBQy9FLE9BQU9ELEVBQU9VLE1BQU0sNENBQTZDVCxFQUFPK0MsS0FHaEZiLEtBQUtDLGlCQUFpQi9CLEtBQUt3QyxHQUMzQlYsS0FBS0UsYUFBYVEsRUFBS3RELE1BQVFzRCxFQUVuQ1YsS0FBS2MsY0FHVGhCLEtBQUsxQyxFQUFjbEMsRUFBd0JtQyxNQUN2QyxPQUFTRCxPQUFNbEMsUUFBT21DLFdBQVVFLE9BQVNDLE9BQVEsRUFBR0MsS0FBTSxJQUc5RHFDLE1BQU1pQixFQUFhakQsRUFBY2tELEdBQzdCLE1BQU1DLEVBQU1qQixLQUFLakMsS0FBS2xCLEdBQVNxRSxRQUFTSCxFQUFLakQsUUFBT2tELFNBRXBELE9BREFoQixLQUFLRyxZQUFZakMsS0FBSytDLEdBQ2ZBLEVBR1huQixTQUFTcUIsR0FDTCxJQUFJQyxLQUNBQyxLQUNBQyxFQUFvQkgsRUFDcEJJLEVBQWdCLEVBQ3BCLEtBQU9ELEVBQVVkLFFBQ2IsSUFBSyxJQUFJRCxFQUFLLEVBQUdBLEVBQUtQLEtBQUtDLGlCQUFpQk8sT0FBUUQsSUFBTSxDQUN0RCxNQUFNaUIsRUFBbUN4QixLQUFLQyxpQkFBaUJNLEdBQ3pENUIsRUFBUTZDLEVBQWdCN0MsTUFDOUIsSUFBSUUsR0FJSUYsTUFBTyxLQUNQNEMsT0FBUSxHQUVoQixHQUFJNUMsYUFBaUJnQyxPQUFRLENBQ3pCLElBQUljLEVBQWE5QyxFQUFNK0MsS0FBS0osR0FDeEJHLElBQ0E1QyxFQUFZRixNQUFROEMsRUFDcEI1QyxFQUFZMEMsTUFBUUUsRUFBV0YsWUFFaEMsR0FBSUksTUFBTUMsUUFBUWpELEdBQ3JCLElBQUssSUFBSWtELEVBQUssRUFBR0EsRUFBS2xELEVBQU02QixPQUFRcUIsSUFBTSxDQUN0QyxNQUFNQyxFQUFZbkQsRUFBTWtELEdBQ3BCUCxFQUFVUyxPQUFPLEVBQUdELEVBQVV0QixTQUFXc0IsSUFDekNqRCxFQUFZRixPQUFTbUQsR0FDckJqRCxFQUFZMEMsTUFBUSxHQUloQyxHQUFJMUMsRUFBWUYsT0FBOEIsR0FBckJFLEVBQVkwQyxNQUFZLENBQzdDLE1BQU1TLEVBQWNuRCxFQUFZRixNQUFNLEdBQUc2QixPQUN6Q2MsRUFBWUEsRUFBVVMsT0FBT2xELEVBQVlGLE1BQU0sR0FBRzZCLFFBQ2xELE1BQU15QixFQUFXVixFQUNqQkEsR0FBU1MsRUFDTFIsRUFBZ0JwRSxPQUFTekIsRUFBV0MsYUFDaEM0RixFQUFnQnBFLE9BQVN6QixFQUFXa0IsT0FDcEN3RSxFQUFPbkQsS0FBS2tELEVBQU9aLFFBRXZCWSxFQUFPbEQsTUFDSGQsS0FBTW9FLEVBQWdCcEUsS0FDdEJsQyxNQUFPc0csRUFBZ0J0RyxNQUFPMkQsRUFBWUYsT0FDMUNQLFVBQVdvRCxFQUFnQnBELFdBQWEsRUFDeENiLE9BQVNDLE1BQU95RSxFQUFVeEUsSUFBSzhELE1BR3ZDLE9BSVosT0FBU1csT0FBUWYsRUFBS2QsT0FBUWUsRUFBUWUsU0FBVSxFQUFHZCxPQUFRQSxHQUcvRHZCLGNBQ0lFLEtBQUtvQyxRQUFXRixPQUFRLEdBQUk3QixVQUFZOEIsU0FBVSxFQUFHZCxXQUd6RHZCLGVBQ0ksT0FBT0UsS0FBS1gsZUFBaUJXLEtBQUtYLGVBQWU5QixNQUFNQyxNQUFRd0MsS0FBS29DLE9BQVFGLE9BQU8xQixPQUd2RlYsWUFDSSxNQUFNckMsRUFBTXVDLEtBQUtxQyxlQUNqQixPQUFPckMsS0FBS29DLE9BQVFGLE9BQU9ILE9BQU90RSxHQUd0Q3FDLGVBQ0ksT0FBT0UsS0FBS29DLE9BQVEvQixPQUFPTCxLQUFLb0MsT0FBUUQsVUFHNUNyQyxVQUNJRSxLQUFLb0MsT0FBUUQsV0FHakJyQyxNQUFNcUIsR0FDRm5CLEtBQUtvQyxPQUFTcEMsS0FBS3NDLFNBQVNuQixHQUM1Qm5CLEtBQUtHLGVBRUwsSUFBSWlCLEdBQVdKLEtBREZoQixLQUFLN0IsZ0JBQWdCLEdBQ2JrRCxPQUFRckIsS0FBS0csWUFBYW9DLFVBQVd2QyxLQUFLdUMsYUFHL0QsT0FGQXZDLEtBQUtHLGVBQ0xILEtBQUtjLGNBQ0VNLEVBR1h0QixnQkFBZ0IxQixHQUNaLElBQUlOLEVBQVFrQyxLQUFLWCxlQUNibUQsRUFBV3hDLEtBQUtFLGFBQWFwQyxFQUFNVixNQUN2QyxNQUFNSSxFQUFRTSxFQUFNUCxNQUFNQyxNQUMxQndDLEtBQUtWLFVBQ0wsSUFBSTBCLEVBQU93QixFQUFTdEQsV0FBWWMsS0FBTWxDLEdBR3RDLEdBRkFrRCxFQUFLekQsTUFBTUMsTUFBUUEsRUFDbkJ3RCxFQUFLekQsTUFBTUUsSUFBTXVDLEtBQUtxQyxlQUNsQnJCLEVBQUs1RCxNQUFRUCxFQUNiLE9BQU9tRSxFQUdYLElBREFsRCxFQUFRa0MsS0FBS1gsZUFDTnZCLEdBQVNNLEVBQVlOLEVBQU1NLFdBQVcsQ0FDekNvRSxFQUFXeEMsS0FBS0UsYUFBYXBDLEVBQU1WLE1BQ25DNEMsS0FBS1YsVUFDTCxJQUFJbUQsRUFBVUQsRUFBUzVELFlBQWFvQixLQUFNZ0IsRUFBTWxELEdBR2hELEdBRkEyRSxFQUFRbEYsTUFBTUMsTUFBUXdELEVBQUt6RCxNQUFNQyxNQUNqQ2lGLEVBQVFsRixNQUFNRSxJQUFNdUMsS0FBS3FDLGVBQ3JCSSxFQUFRckYsTUFBUVAsRUFDaEIsT0FBTzRGLEVBRVh6QixFQUFPeUIsRUFDUDNFLEVBQVFrQyxLQUFLWCxlQUVqQixPQUFPMkIsR0M1YmYsSUFBSTBCLEVBQVUsRUFFUixTQUFBQyxJQUNGRCxFQUFVLFFBR1JFLEVBR0Y5QyxjQUNJRSxLQUFLNkMsYUFBZSxJQUFJQyxHQUN4QjlDLEtBQUsrQyxtQkFHVGpELFNBQVNrRCxHQUNMLE9BQU8sSUFBSUYsRUFBTUUsR0FHckJsRCxjQUFjcEUsSUFFOEIsR0FBcENzRSxLQUFLK0MsZ0JBQWdCRSxRQUFRdkgsSUFDN0JzRSxLQUFLK0MsZ0JBQWdCN0UsS0FBS3hDLEdBRzlCQSxFQUFFd0gsUUFBUSxJQUFJQyxFQUFLekgsRUFBRyxVQUV0QkEsRUFBRTBILGFBQWMsRUFHcEJ0RCxpQkFBaUJwRSxHQUViQSxFQUFFMEgsYUFBYyxHQUN3QixHQUFwQ3BELEtBQUsrQyxnQkFBZ0JFLFFBQVF2SCxJQUU3QnNFLEtBQUsrQyxnQkFBZ0JNLE9BQU9yRCxLQUFLK0MsZ0JBQWdCRSxRQUFRdkgsR0FBSSxHQUlyRW9FLFlBQ0ksSUFBSXdELEtBQ0FDLEVBQVF2RCxLQUFLNkMsWUFBWXZGLFFBQzdCLEtBQU9pRyxFQUFNL0MsUUFBUSxDQUNqQixNQUFNZ0QsRUFBY0QsRUFBTUUsTUFDMUJILEVBQU1FLEVBQUtFLElBQU1GLEVBQ2pCLElBQUssSUFBSUcsS0FBTUgsRUFBS0ksTUFBTyxDQUN2QixJQUFJQyxFQUFJTCxFQUFLSSxNQUFNRCxJQUNmRSxFQUFFQyxRQUFZRCxFQUFFQyxPQUFPSixNQUFNSixHQUM3QkMsRUFBTXJGLEtBQUsyRixFQUFFQyxTQUl6QixPQUFPbEosT0FBT21KLEtBQUtULEdBQU9VLElBQUtyRSxHQUFNMkQsRUFBTTNELElBRy9DRyxRQVlJLE1BWGMsK0JBRUNFLEtBQUtpRSxZQUFZRCxJQUFJLFNBQVV0SSxHQUMxQyxPQUFRLEtBQU9BLEVBQUVnSSxjQUFnQmhJLEVBQUUwSCxZQUFjLGVBQWlCLGNBQWM5QyxPQUM1RTVFLEVBQUVrSSxNQUFNSSxJQUFJLFNBQVVILEVBQUczSixHQUNyQixNQUFPLEtBQU93QixFQUFFZ0ksR0FBSyxLQUFPRyxFQUFFQyxPQUFRSixlQUN0QnhKLEtBQUsySixFQUFFSyxRQUFVQyxFQUFpQk4sRUFBRUssU0FBVyxZQUFZTCxFQUFFTyxNQUFNSixJQUFLN0osR0FBTUEsRUFBRWlELEtBQU8sSUFBTWpELEVBQUVvRixPQUFPOEUsS0FBSyxhQUVqSUEsS0FBSyxRQUNSQSxLQUFLLE1BQ0ksTUFJaEJ2RSxRQUNJLElBQUl5RCxFQUFRdkQsS0FBSzZDLFlBQVl2RixRQUN6QmdILEtBQ0osSUFBSyxJQUFJQyxFQUFLLEVBQUdBLEVBQUtoQixFQUFNL0MsT0FBUStELElBQ2hDRCxFQUFLZixFQUFNZ0IsR0FBSWIsSUFBTUgsRUFBTWdCLEdBRS9CLEtBQU9oQixFQUFNL0MsUUFBUSxDQUNqQixNQUFNOUUsRUFBSTZILEVBQU1FLE1BQ2hCLElBQUllLEdBQWMxRSxDQUFDcEUsRUFBRWdJLElBQUtoSSxHQUMxQixJQUFLLElBQUl4QixFQUFJLEVBQUdBLEVBQUl3QixFQUFFa0ksTUFBTXBELE9BQVF0RyxJQUFLLENBQ3JDLE1BQU0ySixFQUFJbkksRUFBRWtJLE1BQU0xSixHQUVsQixLQUFLMkosRUFBRUssU0FBYXhJLEVBQUUwSCxhQUFlUyxFQUFFQyxRQUFVcEksR0FBSSxDQUNqRCxHQUFJbUksRUFBRUMsT0FBUUosTUFBTWMsRUFBVyxDQUMzQjlJLEVBQUVrSSxNQUFNUCxPQUFPbkosRUFBRyxHQUNsQkEsSUFDQSxTQUNHLENBQ0gsTUFDTXVLLEVBRFdaLEVBQUVDLE9BQVFGLE1BQ0pJLElBQUtVLEdBQU8sSUFBSXZCLEVBQUt1QixFQUFHWixRQUFVRCxFQUFFQyxRQUF3QixNQUFkWSxFQUFHUixRQUFrQnhJLEVBQUlnSixFQUFHWixPQUFRWSxFQUFHUixRQUFTTCxFQUFFTyxNQUFNOUQsT0FBT29FLEVBQUdOLFNBQ25JUCxFQUFFQyxPQUFRVixjQUFnQjFILEVBQUUwSCxjQUM1QnBELEtBQUsrQyxnQkFBZ0I3RSxLQUFLeEMsR0FDMUJBLEVBQUUwSCxhQUFjLEdBRXBCMUgsRUFBRWtJLE1BQU1QLE9BQU9uSixFQUFHLEtBQU11SyxJQUdoQ0QsRUFBVVgsRUFBRUMsT0FBUUosSUFBTUcsRUFBRUMsT0FFaEMsSUFBSyxJQUFJYSxLQUFNSCxFQUNMRyxLQUFNTCxJQUNSZixFQUFNckYsS0FBS3NHLEVBQVVHLElBQ3JCTCxFQUFLSyxHQUFNSCxFQUFVRyxJQUlqQyxPQUFPM0UsS0FHWEYsVUFBVThFLEdBQ041RSxLQUFLNkUsUUFDTCxNQUFNQyxFQUFJOUUsS0FDVjRFLEVBQUVDLFFBQ0YsSUFBSUUsRUFBTSxJQUFJbkMsRUFDZG1DLEVBQUlsQyxlQUNKLElBQUlVLEtBQXVCeUIsS0FDM0IsSUFBSyxJQUFJOUssRUFBSSxFQUFHQSxFQUFJNEssRUFBRWpDLFlBQVlyQyxPQUFRdEcsSUFBSyxDQUMzQyxNQUFNK0ssRUFBS0gsRUFBRWpDLFlBQVkzSSxHQUN6QixJQUFLLElBQUlnTCxFQUFJLEVBQUdBLEVBQUlOLEVBQUUvQixZQUFZckMsT0FBUTBFLElBQUssQ0FDM0MsTUFBTUMsRUFBS1AsRUFBRS9CLFlBQVlxQyxHQUN6QjNCLEVBQU1yRixNQUFNK0csRUFBSUUsSUFDVkYsRUFBR3ZCLE1BQU1zQixJQUNYQSxFQUFPQyxFQUFHdkIsUUFFZCxJQUFJMEIsRUFBT0wsRUFBSU0sYUFBYUosRUFBR3ZCLE1BQU15QixFQUFHekIsT0FDeENxQixFQUFJbEMsWUFBWTNFLEtBQUtrSCxHQUNyQkosRUFBT0MsRUFBR3ZCLElBQUl5QixFQUFHekIsSUFBTTBCLEVBQ25CSCxFQUFHN0IsYUFBZStCLEVBQUcvQixhQUNyQjJCLEVBQUlPLGNBQWNGLElBSTlCLEtBQU83QixFQUFNL0MsUUFBUSxDQUNqQixNQUFPeUUsRUFBSUUsR0FBTTVCLEVBQU1FLE1BQ2pCOEIsRUFBTVAsRUFBT0MsRUFBR3ZCLElBQUl5QixFQUFHekIsSUFDN0IsSUFBSyxJQUFJeEosRUFBSSxFQUFHQSxFQUFJK0ssRUFBR3JCLE1BQU1wRCxPQUFRdEcsSUFBSyxDQUN0QyxNQUFNc0wsRUFBS1AsRUFBR3JCLE1BQU0xSixHQUNkdUwsRUFBTUQsRUFBRzFCLE9BQ1Q0QixFQUF3QlQsRUFBRzdCLGFBQWVxQyxHQUFPUixJQUFPTyxFQUFHdEIsUUFDakUsSUFBSyxJQUFJZ0IsRUFBSSxFQUFHQSxFQUFJQyxFQUFHdkIsTUFBTXBELE9BQVEwRSxJQUFLLENBQ3RDLE1BQU1TLEVBQUtSLEVBQUd2QixNQUFNc0IsR0FDZFUsRUFBTUQsRUFBRzdCLE9BRWYsSUFBSXRFLEVBQU0sS0FDVixHQUFJa0csSUFGMEJQLEVBQUcvQixhQUFld0MsR0FBT1QsSUFBT1EsRUFBR3pCLFNBRzdELFNBQ0csS0FBS3dCLElBQ0hGLEVBQUd0QixTQUFZeUIsRUFBR3pCLFNBQ25CMkIsUUFBUXRILE1BQU0sMkNBaUNmdUgsRUEvQnFCTixFQUFHdEIsUUErQlQ2QixFQS9CbUJKLEVBQUd6QixRQUF4QzFFLEdBaUNYcEMsS0FBTU4sRUFBV1IsSUFBS3BCLE1BQU8sSUFBS21DLFVBQVd5SSxFQUFJQyxHQUFLeEksT0FBU0MsT0FBUSxFQUFHQyxLQUFNLE1BL0JqRSxTQUdSLElBQUl1SSxFQUFXLEtBQ1hQLEVBQUkvQixNQUFNc0IsR0FBVVksRUFBSWxDLE1BQU1zQixFQUFPUyxFQUFJL0IsSUFDekNzQyxFQUFXaEIsRUFBT1MsRUFBSS9CLElBQUlrQyxFQUFJbEMsS0FFOUJzQyxFQUFXakIsRUFBSU0sYUFBYUksRUFBSS9CLE1BQU1rQyxFQUFJbEMsT0FDcEMrQixFQUFJL0IsTUFBTXNCLElBQ1pBLEVBQU9TLEVBQUkvQixRQUVmc0IsRUFBT1MsRUFBSS9CLElBQUlrQyxFQUFJbEMsSUFBTXNDLEVBQ3pCekMsRUFBTXJGLE1BQU11SCxFQUFLRyxJQUNiSCxFQUFJckMsYUFBZXdDLEVBQUl4QyxjQUl2QjRDLEVBQVM1QyxhQUFjLEVBQ3ZCMkIsRUFBSWhDLGdCQUFnQjdFLEtBQUs4SCxLQUdqQ1QsRUFBSXJDLFFBQVEsSUFBSUMsRUFBSzZDLEVBQVV4RyxFQUFLZ0csRUFBR3BCLE1BQU05RCxPQUFPcUYsRUFBR3ZCLFdBUTNFLElBQTJCMEIsRUFBZUMsRUFKbEMsT0FBT2hCLFNBU1RqQyxFQUlGaEQsWUFBWTRELEdBQ1IxRCxLQUFLMEQsR0FBS0EsSUFBT2hCLEtBQVd1RCxTQUFTLElBQ3JDakcsS0FBSzRELFNBQ0w1RCxLQUFLb0QsYUFBYyxFQUd2QnRELFFBQVErRCxHQUNKN0QsS0FBSzRELE1BQU0xRixLQUFLMkYsR0FHcEIvRCxXQUFXK0QsR0FDUDdELEtBQUs0RCxNQUFNUCxPQUFPckQsS0FBSzRELE1BQU1YLFFBQVFZLEdBQUksVUFJM0NWLEVBSUZyRCxZQUFZZ0UsRUFBc0JJLEVBQTJCRSxHQUN6RHBFLEtBQUs4RCxPQUFTQSxFQUNkOUQsS0FBS2tFLFFBQVVBLEVBQ2ZsRSxLQUFLb0UsTUFBUUEsR0FJZixTQUFBOEIsRUFBd0JsRixHQUMxQixNQUFNbUYsRUFBTSxJQUFJdkQsRUFFVndELEVBVVYsU0FBQUMsRUFBZUYsRUFBVUcsRUFBa0J0RixHQUN2QyxHQUFJMUMsRUFBZ0IwQyxJQUFTQSxFQUFLNUQsTUFBUU4sRUFBV0csUUFBUyxDQUMxRCxNQUFNNEcsRUFBSSxJQUFJVixFQUFLLEtBQU1uQyxNQUV6QixPQURBc0YsRUFBVXBELFFBQVFXLElBQ1ZBLEdBQ0wsR0FBSTdDLEVBQUs1RCxNQUFRTixFQUFXakIsY0FBZSxDQUM5QyxNQUFNMEssRUFBTUYsRUFBTUYsRUFBS0csRUFBV3RGLEVBQUszRCxTQUFTLElBQzFDM0IsRUFBSXlLLEVBQUlkLFdBQ2QsSUFBSyxJQUFJMUIsRUFBSyxFQUFHQSxFQUFLNEMsRUFBSS9GLE9BQVFtRCxJQUFNLENBQ3BDLElBQUlFLEVBQUkwQyxFQUFJNUMsR0FDWkUsRUFBRUMsT0FBU3BJLEVBRWYsT0FBTzJLLEVBQU1GLEVBQUt6SyxFQUFHc0YsRUFBSzNELFNBQVMsSUFDaEMsR0FBSTJELEVBQUs1RCxNQUFRTixFQUFXRSxXQUFZLENBQzNDLE1BQU04QixFQUFTa0MsRUFBSzlGLE1BQU00RCxPQUNwQjBILEVBQU14RixFQUFLOUYsTUFBTTZELFdBQ2pCMEgsRUFBTXpGLEVBQUs5RixNQUFNK0QsV0FDakJPLEVBQU13QixFQUFLM0QsU0FBUyxHQUMxQixHQUFJbUosRUFBTSxFQUFHLENBQ1QsSUFBSUUsRUFBU3ZKLEVBQVU2RCxHQUN2QjBGLEVBQU94TCxNQUFNNkQsYUFDa0IsUUFBM0IySCxFQUFPeEwsTUFBTStELFlBQ2J5SCxFQUFPeEwsTUFBTStELGFBRWpCLElBQUkwSCxHQUNBdkosS0FBTU4sRUFBV2pCLGNBQ2pCWCxNQUFPLElBQ1BtQyxVQUFXRixFQUFVcUMsR0FBTWtILEdBQzNCbkosT0FBU0MsTUFBT2tKLEVBQU9uSixNQUFNQyxNQUFPQyxJQUFLaUosRUFBT25KLE1BQU1FLE1BRTFELE9BQU80SSxFQUFNRixFQUFLRyxFQUFXSyxHQUMxQixHQUFXLFFBQVBGLEVBQWUsQ0FDdEIsSUFBSUMsRUFBU3ZKLEVBQVU2RCxHQUN2QjBGLEVBQU94TCxNQUFNK0QsYUFDYixJQUFJMEgsR0FDQXZKLEtBQU1OLEVBQVdqQixjQUNqQlgsTUFBTyxJQUNQbUMsVUFBV0YsRUFBVXFDLEdBQU1rSCxHQUMzQm5KLE9BQVNDLE1BQU9rSixFQUFPbkosTUFBTUMsTUFBT0MsSUFBS2lKLEVBQU9uSixNQUFNRSxNQUkxRCxHQUFJcUIsRUFBUSxDQUNSLElBQUk4RSxLQUVBQSxFQURPLEdBQVA2QyxFQUNRN0MsRUFBTXRELFFBQVEsSUFBSTZDLEVBQUssS0FBTTNELFFBRTdCb0UsRUFBTXRELE9BQU8rRixFQUFNRixFQUFLRyxFQUFXSyxJQUUvQyxNQUFNQyxFQUFNLElBQUl6RCxFQUFLLEtBQU0sU0FHM0IsT0FGQW1ELEVBQVVwRCxRQUFRMEQsR0FDbEJoRCxFQUFNMUYsS0FBSzBJLEdBQ0poRCxFQUNKLENBQ0gsSUFBSUEsS0FDSixNQUFNZ0QsRUFBTSxJQUFJekQsRUFBSyxLQUFNLFNBUTNCLE9BUEFtRCxFQUFVcEQsUUFBUTBELEdBQ2xCaEQsRUFBTTFGLEtBQUswSSxHQUVQaEQsRUFETyxHQUFQNkMsRUFDUTdDLEVBQU10RCxRQUFRLElBQUk2QyxFQUFLLEtBQU0zRCxRQUU3Qm9FLEVBQU10RCxPQUFPK0YsRUFBTUYsRUFBS0csRUFBV0ssS0FLbkQsR0FBSTdILEVBQVEsQ0FDUixJQUFJOEUsRUFBUXlDLEVBQU1GLEVBQUtHLEVBQVc5RyxHQUNsQyxJQUFLLElBQUltRSxFQUFLLEVBQUdBLEVBQUtDLEVBQU1wRCxPQUFRbUQsSUFBTSxDQUN0QyxJQUFJRSxFQUFJRCxFQUFNRCxHQUNkRSxFQUFFQyxPQUFTd0MsRUFFZixNQUFNekMsRUFBSSxJQUFJVixFQUFLLEtBQU0sU0FFekIsT0FEQW1ELEVBQVVwRCxRQUFRVyxJQUNWQSxHQUNMLENBQ0gsTUFBTUEsRUFBSSxJQUFJVixFQUFLLEtBQU0sU0FDekJtRCxFQUFVcEQsUUFBUVcsR0FDbEIsSUFBSUQsRUFBUXlDLEVBQU1GLEVBQUtHLEVBQVc5RyxHQUNsQyxJQUFLLElBQUltRSxFQUFLLEVBQUdBLEVBQUtDLEVBQU1wRCxPQUFRbUQsSUFBTSxDQUN0QyxJQUFJRSxFQUFJRCxFQUFNRCxHQUNkRSxFQUFFQyxPQUFTd0MsRUFFZixPQUFRekMsSUFHYixHQUFJN0MsRUFBSzVELE1BQVFOLEVBQVdJLE1BQU8sQ0FDdEMsSUFBSXhCLEVBQUl5SyxFQUFJZCxXQUNaaUIsRUFBVXBELFFBQVEsSUFBSUMsRUFBS3pILEVBQUcsVUFDOUIsTUFBTW1MLEVBQUtSLEVBQU1GLEVBQUt6SyxFQUFHc0YsRUFBSzNELFNBQVMsSUFDdkMsT0FBT3dKLEVBQ0osR0FBSTdGLEVBQUs1RCxNQUFRTixFQUFXRyxRQUFTLENBQ3hDLElBQUl2QixFQUFJeUssRUFBSWQsV0FJUnlCLEdBQWlCMUosS0FBTSxnQkFBaUJtQyxNQUE0QixhQUFwQnlCLEVBQUs5RixNQUFNcUUsTUFBdUI3RCxFQUFFZ0ksR0FBSzFDLEVBQUs5RixNQUFNcUUsT0FDeEcrRyxFQUFVcEQsUUFBUSxJQUFJQyxFQUFLekgsRUFBRyxNQUFPb0wsS0FDckMsTUFBTUQsRUFBS1IsRUFBTUYsRUFBS3pLLEVBQUdzRixFQUFLM0QsU0FBUyxJQUN2QyxJQUFLLElBQUlzRyxFQUFLLEVBQUdBLEVBQUtrRCxFQUFHckcsT0FBUW1ELElBQU0sQ0FDbkMsSUFBSUUsRUFBSWdELEVBQUdsRCxHQUNYRSxFQUFFTyxNQUFNbEcsTUFDSmQsS0FBTSxjQUNObUMsTUFBNEIsYUFBcEJ5QixFQUFLOUYsTUFBTXFFLE1BQXVCN0QsRUFBRWdJLEdBQUsxQyxFQUFLOUYsTUFBTXFFLE1BQzVEL0IsTUFBT3NKLElBR2YsT0FBT0QsRUFDSixHQUFJN0YsRUFBSzVELE1BQVFOLEVBQVdWLFlBQWEsQ0FDNUMsTUFBTTBJLEVBQUlxQixFQUFJZCxXQUNSVCxFQUFJdUIsRUFBSWQsV0FDZGlCLEVBQVVwRCxRQUFRLElBQUlDLEVBQUsyQixFQUFHLFVBQzlCd0IsRUFBVXBELFFBQVEsSUFBSUMsRUFBS3lCLEVBQUcsVUFDOUIsTUFBTTJCLEVBQU1GLEVBQU1GLEVBQUtyQixFQUFHOUQsRUFBSzNELFNBQVMsSUFDbEMwSixFQUFNVixFQUFNRixFQUFLdkIsRUFBRzVELEVBQUszRCxTQUFTLElBQ3hDLE9BQU9rSixFQUFJakcsT0FBT3lHLEdBQ2YsR0FBSS9GLEVBQUs1RCxNQUFRTixFQUFXVCxhQUFjLENBQzdDLE1BQU15SSxFQUFJb0IsRUFBY2xGLEVBQUszRCxTQUFTLElBQ2hDdUgsRUFBSXNCLEVBQWNsRixFQUFLM0QsU0FBUyxJQUNoQzBILEVBQU1ELEVBQUVrQyxVQUFVcEMsR0FDbEJxQyxFQUFlbEMsRUFBSWhDLGdCQUFnQnpGLFFBSXpDLElBQUssSUFBSTRKLEVBQVMsRUFBR0EsRUFBU25DLEVBQUlsQyxZQUFZckMsT0FBUTBHLElBQ2xEWixFQUFVcEQsUUFBUSxJQUFJQyxFQUFLNEIsRUFBSWxDLFlBQVlxRSxHQUFTLFVBRXhELElBQUlkLEtBQ0osSUFBSyxJQUFJZSxFQUFPLEVBQUdBLEVBQU9GLEVBQWF6RyxPQUFRMkcsSUFBUSxDQUNuRCxNQUFNQyxFQUFNSCxFQUFhRSxHQUN6QmhCLEVBQUlrQixpQkFBaUJELEdBRXJCLElBQUssSUFBSUUsRUFBSyxFQUFHQSxFQUFLRixFQUFJeEQsTUFBTXBELE9BQVE4RyxJQUNoQ0YsRUFBSXhELE1BQU0wRCxHQUFJeEQsUUFBVXNELEdBQVFBLEVBQUl4RCxNQUFNMEQsR0FBSXBELFVBQzlDa0QsRUFBSXhELE1BQU0wRCxHQUFJeEQsT0FBUyxLQUN2QnNDLEVBQVNsSSxLQUFLa0osRUFBSXhELE1BQU0wRCxLQVNwQyxPQUFPbEIsRUFFUCxLQUFNLHNCQTVKT0MsQ0FBTUYsRUFEYkEsRUFBSXRELFlBQVksR0FDSzdCLEdBQ3pCdUcsRUFBV3BCLEVBQUlkLFdBQ3JCLElBQUssSUFBSTFCLEVBQUssRUFBR0EsRUFBS3lDLEVBQVM1RixPQUFRbUQsSUFBTSxDQUMvQnlDLEVBQVN6QyxHQUNqQkcsT0FBU3lELEVBR2YsT0FEQXBCLEVBQUliLGNBQWNpQyxHQUNYcEIsRUNsTlgsTUFBTXFCLEdBQWEsUUFFYkMsRUFFRjNILFlBQVk0SCxHQUNSMUgsS0FBSzJILFdBQWEsRUFHdEI3SCxZQUFZa0IsRUFBaUI0RyxHQUV6QixHQUFJNUcsRUFBSzVELE1BQVFOLEVBQVdJLE1BQ3hCLE9BQU84QyxLQUFLNkgsWUFBWTdHLEVBQUszRCxTQUFTLEdBQUl1SyxHQUU5QyxHQUFJNUcsRUFBSzVELE1BQVFOLEVBQVdHLFFBQVMsQ0FDakMsTUFBTTZLLEVBQVk5SCxLQUFLMkgsV0FDakJwSSxFQUE0QixhQUFwQnlCLEVBQUs5RixNQUFNcUUsTUFBdUJ1SSxFQUFZOUcsRUFBSzlGLE1BQU1xRSxNQUNqRS9CLEdBQVVKLEtBQU0sUUFBU21DLE1BQU9BLEVBQU91SSxVQUFXQSxFQUFXdkcsTUFBT3FHLEVBQUtHLE9BQVEvRyxHQUN2RmhCLEtBQUsySCxhQUNMLE1BQU10SyxFQUErQjJDLEtBQUs2SCxZQUFZN0csRUFBSzNELFNBQVMsR0FBSXVLLEVBQU0sR0FDeEVuSyxHQUNGTCxLQUFNLE1BQ05tQyxNQUFPQSxFQUNQdUksVUFBV0EsRUFDWHZHLE1BQU9xRyxFQUFNLEVBQUl2SyxFQUFTbUQsT0FDMUJ1SCxPQUFRL0csR0FFWixPQUFTeEQsR0FBbUI4QyxPQUFPakQsR0FBVWlELFFBQVE3QyxJQUV6RCxHQUFJYSxFQUFnQjBDLEdBRWhCLFFBQVU1RCxLQUFNLFFBQVM4RyxRQUFTbEQsRUFBTU8sTUFBT3FHLEVBQUtHLE9BQVEvRyxJQUVoRSxHQUFJQSxFQUFLNUQsTUFBUU4sRUFBV2pCLGNBQWUsQ0FDdkMsTUFBTW1NLEVBQU9KLEVBQ1A5QyxFQUFJOUUsS0FBSzZILFlBQVk3RyxFQUFLM0QsU0FBUyxHQUFJMkssR0FDdkNDLEVBQU9MLEVBQU05QyxFQUFFdEUsT0FDZm9FLEVBQUk1RSxLQUFLNkgsWUFBWTdHLEVBQUszRCxTQUFTLEdBQUk0SyxHQUM3QyxPQUFPbkQsRUFBRXhFLE9BQU9zRSxHQUVwQixHQUFJNUQsRUFBSzVELE1BQVFOLEVBQVdWLFlBQWEsQ0FHckMsTUFBTTRMLEVBQU9KLEVBQU0sRUFDYjNKLEVBQU8rQixLQUFLNkgsWUFBWTdHLEVBQUszRCxTQUFTLEdBQUkySyxHQUMxQ0MsRUFBT0QsRUFBTy9KLEVBQUt1QyxPQUFTLEVBRTVCMEgsSUFBcUI5SyxLQUFNLFFBQVNhLEtBQU0rSixFQUFNeEosTUFBT3lKLEVBQU0xRyxNQUFPcUcsRUFBS0csT0FBUS9HLElBRWpGeEMsRUFBUXdCLEtBQUs2SCxZQUFZN0csRUFBSzNELFNBQVMsR0FBSTRLLEdBRTNDRSxJQUFtQi9LLEtBQU0sT0FBUTBHLE9BRDFCbUUsRUFBT3pKLEVBQU1nQyxPQUMyQmUsTUFBT3lHLEVBQU8vSixFQUFLdUMsT0FBUXVILE9BQVEvRyxJQUN4RixPQUFPa0gsRUFBTzVILE9BQU9yQyxHQUFNcUMsT0FBTzZILEdBQU03SCxPQUFPOUIsR0FFbkQsR0FBSXdDLEVBQUs1RCxNQUFRTixFQUFXVCxhQUFjLENBQ3RDLE1BQU15SSxFQUFJb0IsRUFBY2xGLEVBQUszRCxTQUFTLElBQ2hDdUgsRUFBSXNCLEVBQWNsRixFQUFLM0QsU0FBUyxJQUNoQzBILEVBQU1ELEVBQUVrQyxVQUFVcEMsR0FDeEIsT0FBTzVFLEtBQUtvSSxXQUFXckQsRUFBSzZDLEdBRWhDLEdBQUk1RyxFQUFLNUQsTUFBUU4sRUFBV0UsV0FBWSxDQUNwQyxNQUFNOEIsRUFBU2tDLEVBQUs5RixNQUFNNEQsT0FDcEIwSCxFQUFNeEYsRUFBSzlGLE1BQU02RCxXQUNqQlMsRUFBTXdCLEVBQUszRCxTQUFTLEdBRTFCLElBQUlnTCxLQUNKLElBQUssSUFBSW5PLEVBQUksRUFBR0EsRUFBSXNNLEVBQUt0TSxJQUFLLENBQzFCLE1BQU1vTyxFQUFTdEksS0FBSzZILFlBQVlySSxFQUFLb0ksR0FDckNBLEdBQU9VLEVBQU85SCxPQUNkNkgsRUFBUW5LLFFBQVFvSyxHQUVwQixHQUFJdEgsRUFBSzlGLE1BQU0rRCxZQUFjUixFQUFnQixDQUV6QyxNQUFNZ0ksRUFBTXpGLEVBQUs5RixNQUFNK0QsV0FDdkIsSUFBSXNKLEtBQ0FDLEtBQ0osSUFBSyxJQUFJdE8sRUFBSXNNLEVBQUt0TSxFQUFJdU0sRUFBS3ZNLElBQUssQ0FFNUIwTixHQUFZLEVBRVpZLEVBQVF0SyxLQUFLMEosR0FDYixNQUFNVSxFQUFTdEksS0FBSzZILFlBQVlySSxFQUFLb0ksR0FFckNBLEdBQU9VLEVBQU85SCxPQUNkK0gsRUFBVXJLLEtBQUtvSyxHQUduQixJQUFJRyxLQUNKLElBQUssSUFBSXZPLEVBQUksRUFBR0EsRUFBSXFPLEVBQVUvSCxPQUFRdEcsSUFDbEN1TyxFQUFXdkssTUFDUGQsS0FBTSxRQUNOYSxLQUFPYSxFQUFTMEosRUFBUXRPLEdBQUswTixFQUM3QnBKLE1BQVFNLEVBQVM4SSxFQUFNWSxFQUFRdE8sR0FDL0JxSCxNQUFPaUgsRUFBUXRPLEdBQUssRUFDcEI2TixPQUFRL0csSUFFWnlILEVBQVd2SyxRQUFTcUssRUFBVXJPLElBRWxDLE9BQU9tTyxFQUFRL0gsT0FBT21JLEdBQ25CLENBRUgsTUFBTVQsRUFBT0osRUFFUEssRUFBT0QsRUFBTyxFQUVkcEQsRUFBSTVFLEtBQUs2SCxZQUFZckksRUFBS3lJLEdBQzFCRSxJQUFtQi9LLEtBQU0sT0FBUTBHLE9BQVFrRSxFQUFNekcsTUFBTzBHLEVBQU9yRCxFQUFFcEUsT0FBUXVILE9BQVEvRyxJQUUvRTBILEVBQU9ULEVBQU9yRCxFQUFFcEUsT0FBUyxFQUN6QjBILElBQ0Y5SyxLQUFNLFFBQ05hLEtBQU9hLEVBQVNtSixFQUFPUyxFQUN2QmxLLE1BQVFNLEVBQVM0SixFQUFPVCxFQUN4QjFHLE1BQU9xRyxFQUNQRyxPQUFRL0csSUFFWixPQUFPcUgsRUFBUS9ILE9BQU80SCxHQUFRNUgsT0FBT3NFLEdBQUd0RSxPQUFPNkgsSUFHdkQsTUFBTSxJQUFJUSxNQUFNLGlCQUFtQkMsS0FBS0MsVUFBVTdILElBR3REbEIsV0FBV3FHLEVBQVV5QixHQUNqQixJQUFJa0IsS0FBa0JDLEtBQ2xCQyxLQUNKLElBQUssSUFBSTlPLEVBQUksRUFBR0EsRUFBSWlNLEVBQUl0RCxZQUFZckMsT0FBUXRHLElBQUssQ0FDN0MsTUFBTXNELEVBQVEySSxFQUFJdEQsWUFBWTNJLEdBQ3hCK08sRUFBV2pKLEtBQUtrSixZQUFZMUwsRUFBT29LLEVBQUtrQixFQUFhQyxHQUMzREMsRUFBTUEsRUFBSTFJLE9BQU8ySSxHQUNqQnJCLEdBQU9xQixFQUFTekksT0FFcEIsSUFBSyxJQUFJdEcsRUFBSSxFQUFHQSxFQUFJNk8sRUFBU3ZJLE9BQVF0RyxJQUNqQzZPLEVBQVM3TyxHQUFHNEosT0FBUzhELEVBRXpCLE9BQU9vQixFQUdYbEosWUFBWXFKLEVBQWN2QixFQUFha0IsRUFBd0NDLEdBQzNFLEdBQUlJLEVBQU16RixNQUFNb0YsRUFDWixRQUNJMUwsS0FBTSxPQUNOMEcsT0FBUWdGLEVBQVlLLEVBQU16RixJQUMxQm5DLE1BQU9xRyxFQUNQRyxRQUFVM0ssS0FBTSxRQUFTbEMsTUFBT2lPLEVBQU16RixNQUk5QyxHQURBb0YsRUFBWUssRUFBTXpGLElBQU1rRSxFQUNFLEdBQXRCdUIsRUFBTXZGLE1BQU1wRCxPQUFhLENBQ3pCLEdBQUkySSxFQUFNL0YsWUFBYSxDQUNuQixNQUFNK0UsR0FDRi9LLEtBQU0sT0FDTjBHLE9BQVEsS0FDUnZDLE1BQU9xRyxFQUNQRyxRQUFVM0ssS0FBTSxRQUFTbEMsTUFBT2lPLEVBQU16RixHQUFJckcsWUFBY0UsT0FBU0MsT0FBUSxFQUFHQyxLQUFNLEtBR3RGLE9BREFzTCxFQUFTN0ssS0FBS2lLLElBQ05BLEdBRVIsTUFBTSxJQUFJUSxNQUFNLGlEQUVqQixDQUNILElBQUlLLEtBQ0osSUFBSyxJQUFJOU8sRUFBSSxFQUFHQSxFQUFJaVAsRUFBTXZGLE1BQU1wRCxPQUFTLEVBQUd0RyxJQUFLLENBQzdDLE1BQU1rUCxFQUFPRCxFQUFNdkYsTUFBTTFKLEdBQ25CbVAsR0FDRmpNLEtBQU0sUUFDTmEsS0FBTTJKLEVBQU0sRUFDWnBKLE1BQU8sS0FDUCtDLE1BQU9xRyxFQUNQRyxRQUNJM0ssS0FBTSxRQUFTbEMsU0FBVWlPLEVBQU16RixNQUFNeEosSUFDckNtRCxZQUFjRSxPQUFTQyxPQUFRLEVBQUdDLEtBQU0sS0FHMUM2TCxHQUFxQkQsR0FBdUIvSSxPQUM5Q04sS0FBS3VKLGdCQUFnQkosRUFBT0MsRUFBTXhCLEVBQU0sRUFBR2tCLEVBQWFDLElBRTVEQyxFQUFNQSxFQUFJMUksT0FBT2dKLEdBQ2pCMUIsR0FBTzBCLEVBQVE5SSxPQUNmNkksRUFBVTdLLE1BQVFvSixFQUV0QixNQUFNd0IsRUFBT0QsRUFBTXZGLE1BQU11RixFQUFNdkYsTUFBTXBELE9BQVMsR0FDeEM4SSxFQUFVdEosS0FBS3VKLGdCQUFnQkosRUFBT0MsRUFBTXhCLEVBQUtrQixFQUFhQyxHQUNwRSxPQUFPQyxFQUFJMUksT0FBT2dKLElBSTFCeEosZ0JBQWdCcUosRUFBY0MsRUFBWXhCLEVBQWFrQixFQUF1Q0MsR0FHMUYsTUFBTU8sRUFBbUJ0SixLQUFLd0oscUJBQXFCTCxFQUFPQyxFQUFNeEIsR0FFaEUsR0FEQUEsR0FBTzBCLEVBQVE5SSxPQUNYMkksRUFBTS9GLGFBQWVnRyxFQUFLdEYsUUFBVXFGLElBQVVDLEVBQUtsRixRQUFTLENBQzVELE1BQU1pRSxHQUNGL0ssS0FBTSxPQUNOMEcsT0FBUSxLQUNSdkMsTUFBT3FHLEVBQ1BHLFFBQ0kzSyxLQUFNLE9BQVFsQyxTQUFVaU8sRUFBTXpGLE9BQU8wRixFQUFLdEYsT0FBT0osS0FDakRyRyxZQUFjRSxPQUFTQyxPQUFRLEVBQUdDLEtBQU0sS0FJaEQsT0FEQXNMLEVBQVM3SyxLQUFLaUssR0FDUG1CLEVBQVFoSixRQUFRNkgsSUFDcEIsT0FBSWlCLEVBQUtsRixRQUNMb0YsRUFBUWhKLFNBQ1hsRCxLQUFNLFFBQ044RyxRQUFTa0YsRUFBS2xGLFFBQ2QzQyxNQUFPcUcsRUFDUEcsUUFBVTNLLEtBQU0sT0FBUWxDLFNBQVVpTyxFQUFNekYsT0FBTzBGLEVBQUt0RixPQUFRSixTQUNqRHBELE9BQ1hOLEtBQUtrSixZQUFZRSxFQUFLdEYsT0FBUzhELEVBQU0sRUFBR2tCLEVBQWFDLElBR2xETyxFQUFRaEosT0FDWE4sS0FBS2tKLFlBQVlFLEVBQUt0RixPQUFTOEQsRUFBS2tCLEVBQWFDLElBSzdEakoscUJBQXFCcUosRUFBY0MsRUFBWXhCLEdBQzNDLElBQUlvQixLQUNKLElBQUssSUFBSTlPLEVBQUksRUFBR0EsRUFBSWtQLEVBQUtoRixNQUFNNUQsT0FBUXRHLElBQUssQ0FDeEMsTUFBTUMsRUFBSWlQLEVBQUtoRixNQUFNbEssR0FDckIsR0FBYyxpQkFBVkMsRUFBRWlELEtBQXlCLENBQzNCLE1BQU0wSyxFQUFZOUgsS0FBSzJILFdBQ2pCcEksRUFBUXBGLEVBQUVvRixNQUNoQnBGLEVBQUUyTixVQUFZQSxFQUNkLE1BQU10SyxHQUNGSixLQUFNLFFBQ05tQyxNQUFPQSxFQUNQdUksVUFBV0EsRUFDWHZHLE1BQU9xRyxFQUNQRyxRQUNJM0ssS0FBTSxPQUFRbEMsU0FBVWlPLEVBQU16RixPQUFPMEYsRUFBS3RGLE9BQVFKLEtBQ2xEckcsWUFBY0UsT0FBU0MsT0FBUSxFQUFHQyxLQUFNLEtBR2hEdUMsS0FBSzJILGFBQ0xxQixFQUFJOUssS0FBS1YsR0FDVG9LLFNBQ0csR0FBYyxlQUFWek4sRUFBRWlELEtBQXVCLENBQ2hDLE1BQU0wSyxFQUFZM04sRUFBRXFELE1BQU1zSyxVQUVwQnJLLEdBQ0ZMLEtBQU0sTUFDTm1DLE1BSFVwRixFQUFFb0YsTUFJWnVJLFVBQVdBLEVBQ1h2RyxNQUFPcUcsRUFDUEcsUUFDSTNLLEtBQU0sT0FBUWxDLFNBQVVpTyxFQUFNekYsT0FBTzBGLEVBQUt0RixPQUFRSixLQUNsRHJHLFlBQWNFLE9BQVNDLE9BQVEsRUFBR0MsS0FBTSxLQUdoRHVMLEVBQUk5SyxLQUFLVCxHQUNUbUssS0FHUixPQUFPb0IsRUFHWGxKLFFBQVFrQixFQUFpQnlJLEdBQWlCLEdBT3RDLElBQUt6SixLQUFLMEosa0JBQWtCMUksR0FDeEIsTUFBTSxJQUFJMkgsTUFBTSxnREFFcEJoRyxJQUNBM0MsS0FBSzJILFdBQWEsRUFHbEIsTUFBTVUsSUFDQWpMLEtBQU0sUUFBU2EsS0FBTSxFQUFHTyxNQUFPLEVBQUcrQyxNQUFPLEVBQUd3RyxPQUFRLFNBRWxEM0ssS0FBTSxRQUNOOEcsU0FDSTlHLEtBQU1OLEVBQVdILEtBQ2pCekIsT0FBTyxFQUNQbUMsWUFDQUUsT0FBU0MsTUFBTyxFQUFHQyxJQUFLLElBRTVCOEQsTUFBTyxFQUNQd0csT0FBUSxTQUVWM0ssS0FBTSxPQUFRMEcsT0FBUSxFQUFHdkMsTUFBTyxFQUFHd0csT0FBUSxTQUMzQzNLLEtBQU0sUUFBU21DLE1BQU8sUUFBU3VJLFdBQVksRUFBR3ZHLE1BQU8sRUFBR3dHLE9BQVEsU0FFaEU0QixFQUFPM0osS0FBSzZILFlBQVk3RyxFQUFNcUgsRUFBUTdILFFBQ3RDWSxFQUFTaUgsRUFBUS9ILE9BQU9xSixHQUFNckosU0FFNUJsRCxLQUFNLE1BQ05tQyxNQUFPLFFBQ1B1SSxXQUFZLEVBQ1p2RyxNQUFPOEcsRUFBUTdILE9BQVNtSixFQUFLbkosT0FDN0J1SCxPQUFRLFNBR1IzSyxLQUFNLFFBQ05tRSxNQUFPOEcsRUFBUTdILE9BQVNtSixFQUFLbkosT0FBUyxFQUN0Q3VILE9BQVEsVUFHaEIsSUFBSy9ILEtBQUs0SixnQkFBZ0J4SSxHQUN0QixNQUFNLElBQUl1SCxNQUNOLHdCQUEwQkMsS0FBS0MsVUFBVTdILEdBQVEsZ0JBQWtCNEgsS0FBS0MsVUFBVXpILElBRzFGLElBQUtxSSxFQUNELElBQUssSUFBSXZQLEVBQUksRUFBR0EsRUFBSWtILEVBQU9aLE9BQVF0RyxXQUN4QmtILEVBQU9sSCxHQUFHNk4sY0FDVjNHLEVBQU9sSCxHQUFHcUgsTUFHekIsT0FBT0gsRUFHWHRCLGtCQUFrQmUsR0FDZCxPQUFLMkcsSUFJRHhILEtBQUs2Siw4QkFBOEJoSixHQU8zQ2YsOEJBQThCZ0ssR0FDMUIsTUFBTUMsRUFBT3pMLEVBQWdCd0wsR0FDN0IsSUFBSyxJQUFJRSxFQUFLLEVBQUdBLEVBQUtGLEVBQU96TSxTQUFTbUQsT0FBUXdKLElBQU0sQ0FDaEQsTUFBTUMsRUFBUUgsRUFBT3pNLFNBQVMyTSxHQUM5QixHQUFJRCxHQUFRRSxFQUFNN00sTUFBUU4sRUFBV0csUUFFakMsT0FEQTRJLFFBQVFxRSxtRUFBbUUvRixFQUFpQjJGLFFBQ3JGLEVBRVgsR0FBSTlKLEtBQUs2Siw4QkFBOEJJLEdBQ25DLE9BQU8sRUFHZixPQUFPLEVBR1huSyxnQkFBZ0JrSixHQUtaLElBQUt4QixFQUNELE9BQU8sRUFFWCxJQUFLLElBQUl0TixFQUFJLEVBQUdBLEVBQUk4TyxFQUFJeEksT0FBUXRHLElBQUssQ0FDakMsTUFBTWlRLEVBQVFuQixFQUFJOU8sR0FFbEIsR0FBSWlRLEVBQU01SSxRQUFVckgsRUFDaEIsTUFBTSxJQUFJeU8sNkJBQTZCd0IsRUFBTTVJLFlBQVlySCxTQUFTMk8sR0FBV3NCLFVBQWN0QixFQUFVRyxNQUc3RyxNQUFNeEUsRUFBWXhFLEtBQUtvSyxzQkFBc0JwQixFQUFLLE1BQ2xELElBQUssSUFBSTlPLEVBQUksRUFBR0EsRUFBSThPLEVBQUl4SSxPQUFRdEcsSUFDNUIsSUFBS3NLLEVBQVV0SyxHQUNYLE1BQU0sSUFBSXlPLDZCQUE2QnpPLHVCQUF1QjJPLEdBQVdHLEVBQUk5TyxXQUFXMk8sRUFBVUcsTUFHMUcsT0FBTyxFQUdYbEosc0JBQXNCa0osRUFBY3FCLEVBQVkvRixHQUU1QyxHQUFLK0YsS0FBTS9GLEdBQVMrRixHQUFNckIsRUFBSXhJLE9BQzFCLE9BQU84RCxFQUdYQSxFQUFLK0YsSUFBTSxFQUNYLE1BQU1DLEVBQVF0QixFQUFJcUIsR0FFbEIsR0FBa0IsU0FBZEMsRUFBTWxOLEtBQWlCLENBQ3ZCLElBQUltTixFQUFXdkssS0FBS29LLHNCQUFzQnBCLEVBQUtzQixFQUFNck0sS0FBTXFHLEdBQzNELE9BQU90RSxLQUFLb0ssc0JBQXNCcEIsRUFBS3NCLEVBQU05TCxNQUFRK0wsR0FDbEQsTUFBa0IsUUFBZEQsRUFBTWxOLEtBQ040QyxLQUFLb0ssc0JBQXNCcEIsRUFBS3NCLEVBQU14RyxPQUFTUSxHQUcvQ3RFLEtBQUtvSyxzQkFBc0JwQixFQUFLcUIsRUFBSyxFQUFHL0YsSUFLckQsU0FBQWtHLEVBQTBCdEcsR0FDNUIsTUFBTWhKLE9BQTBCdVAsSUFBbEJ2RyxFQUFRaEosTUFBc0IsR0FBS2dKLEVBQVFoSixNQUFNK0ssV0FDekQ1SSxFQUFXNkcsRUFBUTdHLFVBQVk2RyxFQUFRN0csU0FBU21ELE9BQ2pEMEQsRUFBUTdHLFNBQVMyRyxJQUFLekosR0FBTTRKLEVBQWlCNUosSUFBSzhKLEtBQUssS0FDeEQsR0FDSixTQUFVSCxFQUFROUcsUUFBUWxDLEtBQVNtQyxLQUdqQyxTQUFBOEcsRUFBMkJELEdBQzdCLE9BQVFBLEVBQVE5RyxNQUNaLEtBQUtOLEVBQVdILEtBQ1osTUFBTyxPQUNYLEtBQUtHLEVBQVdGLE1BQ1osTUFBTyxRQUNYLEtBQUtFLEVBQVdMLE1BQ1osTUFBTyxRQUNYLEtBQUtLLEVBQVdKLElBQ1osTUFBTyxNQUNYLEtBQUtJLEVBQVdSLElBQ1osU0FBVTZILEVBQWlCRCxFQUFRN0csU0FBUyxTQUFTOEcsRUFBaUJELEVBQVE3RyxTQUFTLE1BQzNGLEtBQUtQLEVBQVdQLEdBQ1osU0FBVTRILEVBQWlCRCxFQUFRN0csU0FBUyxTQUFTOEcsRUFBaUJELEVBQVE3RyxTQUFTLE1BQzNGLEtBQUtQLEVBQVdOLElBQ1osYUFBYzJILEVBQWlCRCxFQUFRN0csU0FBUyxNQUNwRCxLQUFLUCxFQUFXSSxNQUNaLFVBQVdpSCxFQUFpQkQsRUFBUTdHLFNBQVMsT0FDakQsS0FBS1AsRUFBV0csUUFDWixVQUFXaUgsRUFBUWhKLE1BQU00TSxhQUFhNUQsRUFBUWhKLE1BQU1xRSxTQUFTNEUsRUFBaUJELEVBQVE3RyxTQUFTLE9BQ25HLFFBQ0ksT0FBT21OLEVBQWdCdEcsSUFJN0IsU0FBQTJFLEVBQW9CNkIsR0FDdEIsSUFBSXRKLEtBQ0osSUFBSyxJQUFJbEgsRUFBSSxFQUFHQSxFQUFJd1EsRUFBS2xLLE9BQVF0RyxJQUFLLENBQ2xDLE1BQU1pUSxFQUFRTyxFQUFLeFEsR0FDbkIsSUFBSXlRLEtBQWN6USxLQUFLaVEsRUFBTS9NLE9BQzdCLE9BQVErTSxFQUFNL00sTUFDVixJQUFLLFFBQ0R1TixPQUFnQlIsRUFBTWxNLFFBQVFrTSxFQUFNM0wsUUFDcEMsTUFDSixJQUFLLE9BQ0RtTSxPQUFnQlIsRUFBTXJHLFNBQ3RCLE1BQ0osSUFBSyxRQUNENkcsR0FBWSxJQUFNeEcsRUFBaUJnRyxFQUFNakcsU0FDekMsTUFDSixJQUFLLFFBQ0wsSUFBSyxNQUNEeUcsT0FBZ0JSLEVBQU01SyxVQUFVNEssRUFBTXJDLGFBQ3RDLE1BQ0osSUFBSyxRQUNELE1BQ0osUUFDSSxNQUFNLElBQUlhLE1BQU0sNEJBQThCd0IsR0FFdEQsR0FBSUEsRUFBTXBDLE9BQVEsQ0FDZCxJQUFJNkMsRUFBTVQsRUFBTXBDLE9BQ0wsUUFBUDZDLEVBQ0FELEdBQVksZUFFTSxTQUFkUixFQUFNL00sTUFBbUIsVUFBV3dOLEVBQ3BDRCxhQUFzQkMsRUFBSXJOLE1BQU1DLFNBQVNvTixFQUFJck4sTUFBTUUsT0FFbkRrTixXQUFvQkMsRUFBSXhOLFFBQVF3TCxLQUFLQyxVQUFVK0IsRUFBSTFQLFVBSS9Ea0csRUFBT2xELEtBQUt5TSxHQUVoQixPQUFPdkosRUFBT2lELEtBQUssWUM1ZGpCd0csRUFLRi9LLFlBQVlnTCxFQUFjQyxFQUF5Q3RCLEdBQWlCLEdBQ2hGekosS0FBSytLLFFBQVVBLEVBQ2YvSyxLQUFLOEssS0FBT0EsRUFDWixNQUFNak4sRUFBUyxJQUFJZ0MsRUFBT2tMLEVBQVExSyxRQUM1QjJLLEVBQVcsSUFBSXZELEVBQVNzRCxFQUFRMUssUUFFdEMsR0FEQUwsS0FBS2lMLFlBQWNwTixFQUFPcU4sTUFBTUosR0FDNUI5SyxLQUFLaUwsWUFBWTVKLE9BQU9iLE9BQ3hCLE1BQU0sSUFBSW1JLE1BQU0sc0JBQXdCQyxLQUFLQyxVQUFVN0ksS0FBS2lMLFlBQVk1SixTQUU1RXJCLEtBQUttTCxRQUFVSCxFQUFTSSxRQUFRcEwsS0FBS2lMLFlBQVlqSyxLQUFNeUksR0FFM0Q0QixlQUNJLE9BQU9yTCxLQUFLK0ssUUFBUU8sTUFFeEJDLGVBQ0ksT0FBT3ZMLEtBQUsrSyxRQUFRUyxPQUV4QjFMLE1BQU13TCxFQUFjbkMsRUFBY3ZCLEVBQWExRCxHQUMzQyxJQUFJakcsRUFBTU8sRUFDVixPQUFRMEYsRUFBUTlHLE1BQ1osS0FBS04sRUFBV0gsS0FDWixPQUFPLEVBQ1gsS0FBS0csRUFBV0YsTUFDWixPQUFPLEVBQ1gsS0FBS0UsRUFBV0wsTUFDWixPQUFjLEdBQVBtTCxFQUNYLEtBQUs5SyxFQUFXSixJQUNaLE9BQU9zRCxLQUFLcUwsU0FBU0ksUUFBUUgsR0FDakMsS0FBS3hPLEVBQVdSLElBR1osT0FGQTJCLEVBQU8rQixLQUFLMEwsTUFBTUosRUFBT25DLEVBQU92QixFQUFLMUQsRUFBUTdHLFNBQVMsSUFDdERtQixFQUFRd0IsS0FBSzBMLE1BQU1KLEVBQU9uQyxFQUFPdkIsRUFBSzFELEVBQVE3RyxTQUFTLE9BQ25EWSxJQUFRTyxLQUNDVCxLQUFNbUcsRUFBU2pHLEtBQU1BLEVBQU1PLE1BQU9BLEdBR25ELEtBQUsxQixFQUFXUCxHQUdaLE9BRkEwQixFQUFPK0IsS0FBSzBMLE1BQU1KLEVBQU9uQyxFQUFPdkIsRUFBSzFELEVBQVE3RyxTQUFTLElBQ3REbUIsRUFBUXdCLEtBQUswTCxNQUFNSixFQUFPbkMsRUFBT3ZCLEVBQUsxRCxFQUFRN0csU0FBUyxPQUNuRFksSUFBUU8sS0FDQ1QsS0FBTW1HLEVBQVNqRyxLQUFNQSxFQUFNTyxNQUFPQSxHQUduRCxLQUFLMUIsRUFBV04sSUFDWixPQUFRd0QsS0FBSzBMLE1BQU1KLEVBQU9uQyxFQUFPdkIsRUFBSzFELEVBQVE3RyxTQUFTLElBQzNELEtBQUtQLEVBQVdJLE1BQ1osT0FBTzhDLEtBQUswTCxNQUFNSixFQUFPbkMsRUFBT3ZCLEVBQUsxRCxFQUFRN0csU0FBUyxJQUMxRCxRQUNJLEdBQUkyQyxLQUFLdUwsU0FBU3JILEVBQVE5RyxNQUN0QixPQUFPNEMsS0FBS3VMLFNBQVNySCxFQUFROUcsTUFBTWtPLEVBQU9uQyxFQUFPdkIsRUFBSzFELEdBRXRELE1BQU0sSUFBSXlFLE1BQU0sdUNBS2hDN0ksTUFBTXdMLEVBQWNLLEdBQTBCLEdBQzFDLE9BQU8sSUFBS0MsR0FDUmQsS0FBTTlLLEtBQ04yTCxrQkFLWixTQUFvQ0wsR0FDaEMsT0FHSU8sTUFBTyxJQUFJQyxFQUNYQyxVQUFXLElBQUlELEVBQ2ZFLFdBRUFDLFFBQVMsSUFBSUMsRUFDVCxDQUFFcEgsRUFBR0YsSUFBTUUsR0FBS0YsRUFDZEUsR0FBTUEsR0FFWnFILFlBQWEsRUFJYjVLLE9BQVEsRUFDUjZLLFNBQVMsRUFDVGQsTUFBT0EsRUFFUGUsV0FBWSxJQUFJQyxFQUNYaFMsR0FBYUEsRUFBRWlTLFVBRXBCQyxTQUFVLElBQUlOLEVBQW9CTyxFQUFjQyxHQUNoREMsa0JBQW1CLEdBNUJoQkMsQ0FBd0J0QixRQUFRYixHQUFZOUQsY0FnQ3ZEa0csRUFLSS9NLFlBQVk0RCxFQUFZb0osRUFBWVAsRUFBa0JRLEdBQ2xEL00sS0FBSzBELEdBQUtBLEVBQ1YxRCxLQUFLOE0sR0FBS0EsRUFDVjlNLEtBQUt1TSxTQUFXQSxFQUVoQnZNLEtBQUsrTSxRQUFVQSxFQUFRL0ksSUFBSSxTQUFVMUosR0FDakMsSUFBSTBTLEVBQUtDLEVBQVczUyxHQUVwQixPQURBMFMsRUFBR1QsU0FBV1csS0FBS3pHLElBQUk4RixFQUFValMsRUFBRWlTLFVBQzVCUyxJQUlmbE4sT0FBT3FOLEdBQ0gsT0FBT25OLEtBQUs4TSxJQUFNSyxFQUFHTCxHQUd6QmhOLE9BQ0ksT0FBT0UsS0FBSzhNLEdBR2hCaE4sWUFBWXdLLEdBSVIsSUFBSyxJQUFJcFEsRUFBSSxFQUFHQSxFQUFJb1EsRUFBTXlDLFFBQVF2TSxPQUFRdEcsSUFBSyxDQUMzQyxJQUFJb0osR0FBUSxFQUNaLElBQUssSUFBSTRCLEVBQUksRUFBR0EsRUFBSWxGLEtBQUsrTSxRQUFRdk0sT0FBUTBFLElBQ3JDLEdBQUl1SCxFQUFhek0sS0FBSytNLFFBQVE3SCxHQUFJb0YsRUFBTXlDLFFBQVE3UyxJQUFLLENBQ2pEb0osR0FBUSxFQUNSLE1BR1IsSUFBS0EsRUFBTyxDQUNSLElBQUkzRSxFQUFRc08sRUFBVzNDLEVBQU15QyxRQUFRN1MsSUFDckN5RSxFQUFNNE4sU0FBV1csS0FBS3pHLElBQUl6RyxLQUFLdU0sU0FBVXZNLEtBQUsrTSxRQUFRN1MsR0FBR3FTLFVBQ3pEdk0sS0FBSytNLFFBQVE3TyxLQUFLUyxLQU05Qm1CLGVBQ0ksSUFBSyxJQUFJNUYsRUFBSSxFQUFHQSxFQUFJOEYsS0FBSytNLFFBQVF2TSxPQUFRdEcsSUFDckMsR0FBSThGLEtBQUsrTSxRQUFRN1MsR0FBR2tULGFBQWE1TSxPQUFTLEVBQ3RDLE9BQU8sRUFHZixPQUFPLEVBR1hWLHFCQUFxQnFLLEdBSWpCLElBQUssSUFBSWpRLEVBQUksRUFBR0EsRUFBSThGLEtBQUsrTSxRQUFRdk0sT0FBUXRHLElBQ3JDOEYsS0FBSytNLFFBQVE3UyxHQUFHa1QsYUFBYWxQLEtBQUtpTSxHQUkxQ3JLLFlBRUlFLEtBQUsrTSxrQkFhYmIsRUFLSXBNLFlBQ0l1TixFQUNBQyxFQUNBQyxFQUFzQixLQUN0QnZOLEtBQUt3TixNQUFRSCxFQUNick4sS0FBS3lOLEtBQU9ILEVBQ1p0TixLQUFLME4sS0FBTyxJQUFJL0wsTUFBTTRMLEdBQ3RCdk4sS0FBS1EsT0FBUyxFQUdsQlYsV0FBVzZOLEVBQXNCQyxHQUM3QixJQUFLLElBQUkxVCxFQUFJLEVBQUdBLEVBQUl5VCxFQUFPbk4sT0FBUXRHLElBQy9CLEdBQUk4RixLQUFLd04sTUFBUXhOLEtBQUt3TixNQUFNRyxFQUFPelQsR0FBRzJULElBQUtELEdBQU9ELEVBQU96VCxHQUFHMlQsS0FBT0QsRUFDL0QsT0FBT0QsRUFBT3pULEdBQUc0VCxJQVE3QmhPLEtBQUs4TixFQUFRRSxHQUNULE1BQU1DLEVBQVcvTixLQUFLeU4sS0FBS0csR0FBTzVOLEtBQUswTixLQUFLbE4sT0FDNUMsSUFBSW1OLEVBQVMzTixLQUFLME4sS0FBS0ssR0FDdkIsR0FBS0osRUFFRSxDQUNILFFBQXFDbEQsSUFBakN6SyxLQUFLZ08sV0FBV0wsRUFBUUMsR0FDeEIsT0FBTyxFQUVQRCxFQUFPelAsTUFBTzJQLElBQUtELEVBQUtFLElBQUtBLFNBTGpDOU4sS0FBSzBOLEtBQUtLLEtBQWVGLElBQUtELEVBQUtFLElBQUtBLElBUzVDLE9BREE5TixLQUFLUSxVQUNFLEVBR1hWLElBQUk4TixHQUNBLEdBQW1CLEdBQWY1TixLQUFLUSxPQUNMLE9BRUosTUFBTXVOLEVBQVcvTixLQUFLeU4sS0FBS0csR0FBTzVOLEtBQUswTixLQUFLbE4sT0FDNUMsSUFBSW1OLEVBQVMzTixLQUFLME4sS0FBS0ssR0FDdkIsT0FBS0osRUFHRTNOLEtBQUtnTyxXQUFXTCxFQUFRQyxRQUgvQixFQU1KOU4sUUFDSSxJQUFLLElBQUk1RixFQUFJLEVBQUdBLEVBQUk4RixLQUFLME4sS0FBS2xOLE9BQVF0RyxJQUVsQzhGLEtBQUswTixLQUFLeFQsTUFFZDhGLEtBQUtRLE9BQVMsRUFHbEJWLFNBQVM4TixHQUNMLEdBQW1CLEdBQWY1TixLQUFLUSxPQUNMLE9BQU8sRUFFWCxNQUFNdU4sRUFBVy9OLEtBQUt5TixLQUFLRyxHQUFPNU4sS0FBSzBOLEtBQUtsTixPQUM1QyxJQUFJbU4sRUFBUzNOLEtBQUswTixLQUFLSyxHQUN2QixRQUFLSixRQUdtQ2xELElBQWpDekssS0FBS2dPLFdBQVdMLEVBQVFDLElBSXZDLFNBQUFLLEVBQWlCQyxFQUFXQyxHQWF4QixPQVpBRCxHQUFlLEVBQVYsRUFDTEEsR0FBTUEsR0FBSyxHQUFNLEVBQ2pCQSxHQUFNQSxHQUFLLEVBQUssRUFDaEJBLEdBQU9DLEdBQVMsRUFBTSxFQUN0QkQsR0FBTUEsR0FBSyxHQUFNLEVBQ2pCQSxHQUFNQSxHQUFLLEVBQUssRUFDaEJBLEdBQU9DLEdBQVMsR0FBTyxFQUN2QkQsR0FBTUEsR0FBSyxHQUFNLEVBQ2pCQSxHQUFNQSxHQUFLLEVBQUssRUFDaEJBLEdBQU9DLEdBQVMsR0FBTyxFQUN2QkQsR0FBTUEsR0FBSyxHQUFNLEVBQ2pCQSxHQUFNQSxHQUFLLEVBQUssRUEwQnBCLE1BQU16QixFQUFlLFNBQVUzSCxFQUFVRixHQUNyQyxHQUFJRSxFQUFFc0ksYUFBYTVNLFFBQVVvRSxFQUFFd0ksYUFBYTVNLE9BQ3hDLE9BQU8sRUFFWCxJQUFLLElBQUl0RyxFQUFJLEVBQUdBLEVBQUk0SyxFQUFFc0ksYUFBYTVNLE9BQVF0RyxJQUFLLENBQzVDLE1BQU1rVSxFQUFPdEosRUFBRXNJLGFBQWFsVCxHQUN0Qm1VLEVBQU96SixFQUFFd0ksYUFBYWxULEdBQzVCLEdBQUlrVSxFQUFLaFIsTUFBUWlSLEVBQUtqUixNQUNsQmdSLEVBQUs3TSxPQUFTOE0sRUFBSzlNLE9BQ2pCNk0sRUFBdUI3TyxPQUFVOE8sRUFBdUI5TyxNQUMxRCxPQUFPLEVBR2YsT0FBTyxHQUVMbU4sRUFBYyxTQUFVNUgsR0FDMUIsT0FqQ0osWUFBd0J3SixHQUNwQixJQUFJSixFQUFJLEVBQ1IsSUFBSyxJQUFJaFUsRUFBSSxFQUFHQSxFQUFJb1UsRUFBUTlOLE9BQVF0RyxJQUNoQ2dVLEVBQUlELEVBQVFDLEVBQUdJLEVBQVFwVSxJQUUzQixPQVhKLFNBQXNCZ1UsR0FJbEIsT0FIQUEsR0FBTUEsR0FBSyxFQUFLLEVBQ2hCQSxHQUFNQSxHQUFLLEdBQU0sRUFDakJBLEdBQU1BLEdBQUssR0FBTSxFQVFWSyxDQUFhTCxHQTRCYk0sQ0FBWTFKLEVBQUVzSSxhQUFhNU0sU0FHdEMsU0FBQXlNLEVBQW9CM1MsR0FDaEIsT0FDSWlTLFNBQVVqUyxFQUFFaVMsU0FDWmEsYUFBYzlTLEVBQUU4UyxhQUFhOVAsZUFJckN3TyxFQUdJaE0sY0FDSUUsS0FBS3lPLFNBQ0x6TyxLQUFLUSxPQUFTLEVBR2xCVixLQUFLOE4sR0FDRDVOLEtBQUt5TyxNQUFNek8sS0FBS1EsUUFBVW9OLEVBQzFCNU4sS0FBS1EsU0FHVFYsUUFDSUUsS0FBS1EsT0FBUyxFQUdsQmtPLFlBQ0ksR0FBbUIsR0FBZjFPLEtBQUtRLE9BR1QsT0FBT1IsS0FBS3lPLE1BQU0sR0FHdEIzTyxJQUFJNUYsR0FDQSxLQUFJQSxFQUFJLEdBQUtBLEdBQUs4RixLQUFLUSxRQUd2QixPQUFPUixLQUFLeU8sTUFBTXZVLFVBSzFCb1MsRUFPSXhNLFlBQ0k2TyxFQUNBdEIsRUFDQUMsR0FDQXROLEtBQUs0TyxVQUNMNU8sS0FBSzZPLGlCQUFtQkYsRUFDeEIzTyxLQUFLUSxPQUFTLEVBQ2RSLEtBQUs4TyxlQUFpQkMsSUFDdEIvTyxLQUFLZ1AsaUJBQW1CRCxJQUVwQi9PLEtBQUtpUCxRQURMNUIsR0FBV0MsRUFDSSxJQUFJcEIsRUFBb0JtQixFQUFTQyxRQUVqQzdDLEVBRW5CekssS0FBS2tQLFFBSVRwUCxLQUFLOE4sR0FDRCxNQUFNaEcsRUFBTTVILEtBQUs2TyxpQkFBaUJqQixHQUNsQyxHQUFJNU4sS0FBS2lQLFFBQVMsQ0FDZCxHQUFJalAsS0FBS2lQLFFBQVFFLFNBQVN2QixHQUN0QixPQUFPLEVBRVg1TixLQUFLaVAsUUFBUS9RLEtBQUswUCxHQUFLLEdBYzNCLE9BWk1oRyxLQUFPNUgsS0FBSzRPLE9BR2Q1TyxLQUFLNE8sT0FBT2hILEdBQUsxSixLQUFLMFAsR0FGdEI1TixLQUFLNE8sT0FBT2hILElBQVFnRyxHQUlwQmhHLEVBQU01SCxLQUFLOE8saUJBQ1g5TyxLQUFLOE8sZUFBaUJsSCxHQUV0QkEsRUFBTTVILEtBQUtnUCxrQkFDWGhQLEtBQUtnUCxnQkFBa0JwSCxHQUUzQjVILEtBQUtRLFVBQ0UsRUFHWFYsUUFDSSxHQUFJRSxLQUFLOE8sZ0JBQWtCQyxLQUEyQixHQUFmL08sS0FBS1EsT0FDeEMsT0FFSixNQUFNNE8sRUFBSXBQLEtBQUs0TyxPQUFPNU8sS0FBSzhPLGdCQUVyQjFOLEVBQVNnTyxFQUFFM0wsTUFDakIsR0FBZ0IsR0FBWjJMLEVBQUU1TyxPQUVGLFVBRE9SLEtBQUs0TyxPQUFPNU8sS0FBSzhPLGdCQUNwQjlPLEtBQUtnUCxpQkFBbUJoUCxLQUFLOE8sZUFDN0I5TyxLQUFLOE8sZUFBaUJDLElBQ3RCL08sS0FBS2dQLGlCQUFtQkQsU0FFeEIsTUFBUy9PLEtBQUs0TyxPQUFPNU8sS0FBSzhPLGlCQUFvQjlPLEtBQUs4TyxlQUFpQjlPLEtBQUtnUCxpQkFDckVoUCxLQUFLOE8saUJBS2pCLE9BREE5TyxLQUFLUSxTQUNFWSxFQUdYc04sWUFDSSxHQUFtQixHQUFmMU8sS0FBS1EsT0FHVCxPQUFPUixLQUFLNE8sT0FBTzVPLEtBQUs4TyxnQkFBZ0IsR0FHNUNoUCxRQUVJRSxLQUFLNE8sVUFDTDVPLEtBQUs4TyxlQUFpQkMsSUFDdEIvTyxLQUFLZ1AsaUJBQW1CRCxJQUN4Qi9PLEtBQUtRLE9BQVMsRUFDVlIsS0FBS2lQLFNBQ0xqUCxLQUFLaVAsUUFBUUMsU0FLekIsTUFBTUcsRUFBeUIsVUFzQy9CekQsRUFJSTlMLFlBQ0l3UCxFQUNBbkcsRUFDQXhLLEdBR0EsR0FGQXFCLEtBQUtzUCxPQUFTQSxFQUNkdFAsS0FBS21KLE1BQVFBLEdBQ1ksR0FBckJuSixLQUFLbUosTUFBTTVILE1BQWEsQ0FDeEJ2QixLQUFLbUosTUFBTW1DLE1BQVF0TCxLQUFLc1AsT0FBT3hFLEtBQUtPLFNBQVM3TixNQUFNd0MsS0FBS21KLE1BQU1tQyxPQUM5RCxJQUFJaUUsRUFBYSxJQUFJMUMsRUFBTyxFQUFHLEVBQUcsSUFBTU4sU0FBVSxFQUFHYSxtQkFDckRwTixLQUFLd1AsY0FBY0QsR0FFbkIsTUFBTUUsRUFBT3pQLEtBQUttSixNQUFNMEMsTUFDeEI3TCxLQUFLbUosTUFBTTBDLE1BQVE3TCxLQUFLbUosTUFBTTRDLFVBQzlCL0wsS0FBS21KLE1BQU00QyxVQUFZMEQsRUFFdkJ6UCxLQUFLbUosTUFBTThDLFFBQVFpRCxRQUNuQmxQLEtBQUttSixNQUFNcUQsU0FBUzBDLFFBRXBCbFAsS0FBS21KLE1BQU01SCxNQUFRLEVBRXZCdkIsS0FBS3JCLE1BQVFBLEVBR2pCbkIsWUFDSSxPQUFPd0MsS0FBS3JCLE1BQVFxQixLQUFLckIsTUFBTW5CLE9BQVMsRUFHNUNDLFVBQ0ksT0FBT3VDLEtBQUtyQixNQUFRcUIsS0FBS3JCLE1BQU1sQixLQUFPLEVBRzFDdUgsYUFDSSxPQUFPaEYsS0FBS3JCLE1BQVFxQixLQUFLckIsTUFBTXFHLFlBQVN5RixFQUc1Q2lGLGdCQUNJLE9BQU8xUCxLQUFLckIsTUFBUXFCLEtBQUtyQixNQUFNK1EsZUFBWWpGLEVBRy9DM0ssZ0JBQ0ksUUFBS0UsS0FBS21KLE1BQU9rRCxXQUFXN0wsVUFHdkJSLEtBQUttSixNQUFPMEMsTUFBTXJMLFFBR2hCUixLQUFLbUosTUFBT2tELFdBQVdxQyxNQUFPbkMsVUFBWXZNLEtBQUttSixNQUFPMEMsTUFBTTZDLE1BQU9uQyxVQUc5RXpNLGNBQWM2UCxHQUlWLE1BQU14RixFQUFRbkssS0FBS3NQLE9BQU94RSxLQUFLSyxRQUFRd0UsRUFBTzdDLElBQzlDLE9BQVEzQyxFQUFNL00sTUFDVixJQUFLLE9BR0QsT0FGQXVTLEVBQU83QyxHQUFLM0MsRUFBTXJHLFlBQ2xCOUQsS0FBS3dQLGNBQWNHLEdBRXZCLElBQUssUUFDRDNQLEtBQUttSixNQUFPZ0QsY0FDWndELEVBQU83QyxHQUFLM0MsRUFBTWxNLEtBR2xCLE1BQU0yUixFQUFVLElBQUkvQyxFQUFPN00sS0FBS21KLE1BQU9nRCxZQUFhaEMsRUFBTTNMLE1BQVFtUixFQUFPcEQsU0FBVyxFQUFHb0QsRUFBTzVDLFNBRzlGLE9BRkEvTSxLQUFLd1AsY0FBY0csUUFDbkIzUCxLQUFLd1AsY0FBY0ksR0FFdkIsSUFBSyxRQVdELE9BVkFELEVBQU9FLHNCQUNIelMsS0FBTSxRQUdObUUsTUFBT3ZCLEtBQUttSixNQUFPNUgsTUFBUSxFQUMzQmhDLE1BQU80SyxFQUFNNUssTUFDYnVRLFdBQVkzRixFQUFNckMsWUFFdEI2SCxFQUFPN0MsVUFDUDlNLEtBQUt3UCxjQUFjRyxHQUV2QixJQUFLLE1BVUQsT0FUQUEsRUFBT0Usc0JBQ0h6UyxLQUFNLE1BRU5tRSxNQUFPdkIsS0FBS21KLE1BQU81SCxNQUFRLEVBQzNCaEMsTUFBTzRLLEVBQU01SyxNQUNidVEsV0FBWTNGLEVBQU1yQyxZQUV0QjZILEVBQU83QyxVQUNQOU0sS0FBS3dQLGNBQWNHLEdBRXZCLElBQUssUUFFRCxJQUFLLElBQUl6VixFQUFJLEVBQUdBLEVBQUl5VixFQUFPNUMsUUFBUXZNLE9BQVF0RyxJQUNuQ3lWLEVBQU81QyxRQUFRN1MsR0FBR3FTLFVBQVlvRCxFQUFPcEQsVUFFakN2TSxLQUFLbUosTUFBT3FELFNBQVN0TyxLQUFLeVIsRUFBTzVDLFFBQVE3UyxJQUFJLElBRTdDOEYsS0FBS21KLE1BQU9rRCxXQUFXbk8sS0FBS3lSLEVBQU81QyxRQUFRN1MsSUFNdkQsWUFEQXlWLEVBQU9JLFlBRVgsSUFBSyxRQUVELE1BQU10QyxFQUFPa0MsRUFBT2xDLE9BQ3BCLElBQUl0RSxFQUFRbkosS0FBS21KLE1BQ2I2RyxFQUFnQzdHLEVBQU04QyxRQUFRalIsSUFBSXlTLEdBQ3RELEdBQUt1QyxHQU9FLEdBQUlBLEVBQUt6TyxPQUFTNEgsRUFBTzVILE1BQzVCeU8sRUFBS3pPLE1BQVE0SCxFQUFNNUgsTUFDbkJ5TyxFQUFLaEUsUUFBUWtELFFBQ2JjLEVBQUtoRSxRQUFROU4sS0FBS3lSLFFBR2xCLElBQUssSUFBSXpWLEVBQUksRUFBR0EsRUFBSThWLEVBQUtoRSxRQUFReEwsT0FBUXRHLElBQ3JDLEdBQUk4VixFQUFLaEUsUUFBUWhSLElBQUlkLEdBQUkrVixPQUFPTixHQUk1QixPQUhBSyxFQUFLaEUsUUFBUWhSLElBQUlkLEdBQUlnVyxZQUFZUCxRQUVqQ0EsRUFBT0ksZ0JBakJSLENBQ1AsSUFBSUksRUFBYSxJQUFJckUsRUFDckJxRSxFQUFXalMsS0FBS3lSLEdBQ2hCeEcsRUFBTThDLFFBQVEvTixLQUFLdVAsR0FDZmxNLE1BQU80SCxFQUFNNUgsTUFDYnlLLFFBQVNtRSxJQW1CakIsWUFEQWhILEVBQU00QyxVQUFVN04sS0FBS3lSLEdBSXpCLFFBQ0ksTUFBTSxJQUFJaEgsTUFBTSxnREFJNUI3SSxjQUFjeEYsR0FDVixJQUFJOFYsS0FDQUMsS0FJSixJQUFLLElBQUluVyxFQUFJLEVBQUdBLEVBQUlJLEVBQUU4UyxhQUFhNU0sT0FBUXRHLElBQUssQ0FDNUMsTUFBTWlRLEVBQVE3UCxFQUFFOFMsYUFBYWxULEdBQzdCLE9BQVFpUSxFQUFNL00sTUFDVixJQUFLLFFBQ0QsSUFBSWtULEdBQ0EvUSxNQUFPNEssRUFBTTVLLE1BQ2J1USxXQUFZM0YsRUFBTTJGLFdBQ2xCdFMsTUFBTzJNLEVBQU01SSxNQUNiOUQsSUFBS3NSLElBQ0wvSixZQUFReUYsRUFDUjhGLGFBQVM5RixHQU9iLEdBTEl6SyxLQUFLc1AsT0FBTzNELGlCQUNaMkUsRUFBS3RMLFVBQ0xzTCxFQUFLQyxZQUVUSCxFQUFPbFMsS0FBS29TLEdBQ1JELEVBQVdDLEVBQUsvUSxPQUNoQixNQUFNLElBQUlvSixNQUFNLDJCQUVwQjBILEVBQVdDLEVBQUsvUSxPQUFTK1EsRUFDekIsTUFFSixJQUFLLFFBQ0QsSUFBSUUsRUFBYTVWLE9BQU82VixvQkFBb0JKLEdBQzVDLElBQUssSUFBSUssRUFBSyxFQUFHQSxFQUFLRixFQUFXaFEsT0FBUWtRLElBQU0sQ0FDM0MsSUFBSUMsRUFBYU4sRUFBV0csRUFBV0UsSUFFdkNDLEVBQVczTCxPQUFROUcsS0FBS2lNLEVBQU1oQixPQUM5QndILEVBQVdKLFFBQVNyUyxLQUFLaU0sRUFBTS9JLFFBRW5DLE1BQ0osSUFBSyxNQUNlaVAsRUFBV2xHLEVBQU01SyxPQUN2QjlCLElBQU0wTSxFQUFNNUksYUFDZjhPLEVBQVdsRyxFQUFNNUssUUFJcEMsSUFBSWlSLEVBQWE1VixPQUFPNlYsb0JBQW9CSixHQUM1QyxHQUFJRyxFQUFXaFEsT0FDWCxNQUFNLElBQUltSSw4QkFBOEI2SCxFQUFXbk0sS0FBSyxRQUU1RCxJQUFJdU0sRUFBWVIsRUFBT1MsUUFDbkJDLEdBQ0F0VCxNQUFPb1QsRUFBVXBULE1BQ2pCQyxJQUFLbVQsRUFBVW5ULElBRWZpUyxVQUFXVSxFQUFPVyxPQUNieFIsR0FBVUEsRUFBTS9CLE9BQVMrQixFQUFNOUIsS0FFcEN1SCxZQUFReUYsRUFDUjhGLGFBQVM5RixHQU1iLE9BSkl6SyxLQUFLc1AsT0FBTzNELGlCQUNabUYsRUFBVTlMLE9BQVM0TCxFQUFVNUwsT0FDN0I4TCxFQUFVUCxRQUFVSyxFQUFVTCxTQUUzQk8sRUFHWGhSLE9BQ0ksSUFBS0UsS0FBS21KLE1BQ04sTUFBTSxJQUFJUixNQUFNLHVEQUVwQixNQUFRM0ksS0FBS2dSLGlCQUFtQmhSLEtBQUttSixNQUFNMEMsTUFBTXJMLFFBQVEsQ0FDckQsTUFBTTJJLEVBQVFuSixLQUFLc1AsT0FBT3hFLEtBQUtPLFNBQVM0RixhQUFhalIsS0FBS21KLE1BQU1tQyxPQUNoRSxJQUFJNEYsT0FBY3pHLEVBQ2xCLE1BQU0wRyxFQUFRblIsS0FBS21KLE1BQU0wQyxNQUFNckwsT0FDL0IsSUFBSTRRLEVBQWUsRUFDbkIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlyUixLQUFLbUosTUFBTTBDLE1BQU1yTCxPQUFRNlEsSUFBSyxDQUM5QyxHQUFJQSxHQUFLRixFQUNMLE1BQU0sSUFBSXhJLE1BQU0sbUVBRXBCLElBQUlnSCxFQUFTM1AsS0FBS21KLE1BQU0wQyxNQUFNN1EsSUFBSXFXLEdBQ2xDLEdBQUkxQixFQUFPcEQsU0FBVzZFLEVBQ2xCLE1BQU0sSUFBSXpJLE1BQU0sd0JBRXBCLE1BQU13QixFQUFRbkssS0FBS3NQLE9BQU94RSxLQUFLSyxRQUFRd0UsRUFBTzdDLElBQzlDLE9BQVEzQyxFQUFNL00sTUFDVixJQUFLLFFBQ0QsTUFBTWtVLEVBQWN0UixLQUFLc1AsT0FBT3hFLEtBQUtZLE1BQ2pDMUwsS0FBS21KLE1BQU1tQyxNQUNYbkMsRUFDQW5KLEtBQUttSixNQUFNNUgsTUFDWDRJLEVBQU1qRyxTQUVOb04sR0FDQTNCLEVBQU83QyxLQUNINkMsRUFBTzRCLGNBQ0h2UixLQUFLc1AsT0FBTzNELGlCQUNQdUYsSUFDREEsRUFBY2xSLEtBQUtzUCxPQUFPeEUsS0FBS08sU0FBU21HLGlCQUNwQ3hSLEtBQUtzUCxPQUFPeEUsS0FBS08sU0FBU21HLGlCQUFpQnhSLEtBQUttSixNQUFNbUMsT0FDdERuQyxHQUVSd0csRUFBT0Usc0JBQ0h6UyxLQUFNLFFBQ05tRSxNQUFPdkIsS0FBS21KLE1BQU01SCxNQUNsQjRILE1BQU8rSCxFQUNQOVAsT0FBUWtRLEtBS3BCdFIsS0FBS3dQLGNBQWNHLElBRW5CQSxFQUFPSSxZQUVYLE1BQ0osUUFDSSxNQUFNLElBQUlwSCxNQUFNLHdDQUk1QixJQUFJOEcsRUFBT3pQLEtBQUttSixNQUFNMEMsTUFXdEIsR0FWQTdMLEtBQUttSixNQUFNMEMsTUFBUTdMLEtBQUttSixNQUFNNEMsVUFDOUIwRCxFQUFLUCxRQUNMbFAsS0FBS21KLE1BQU00QyxVQUFZMEQsRUFFbEJ6UCxLQUFLbUosTUFBTTVILE1BQVE4TixHQUEyQixHQUMvQ3JQLEtBQUttSixNQUFNOEMsUUFBUWlELFFBR3ZCbFAsS0FBS21KLE1BQU1xRCxTQUFTMEMsUUFFaEJsUCxLQUFLc1AsT0FBT3hFLEtBQUtPLFNBQVNJLFFBQVF6TCxLQUFLbUosTUFBTW1DLE9BQVEsQ0FFaER0TCxLQUFLc1AsT0FBT3hFLEtBQUtPLFNBQVNvRyxhQUMxQnpSLEtBQUtzUCxPQUFPeEUsS0FBS08sU0FBU29HLFlBQVl6UixLQUFLbUosTUFBTW1DLFFBQ2xEdEwsS0FBS21KLE1BQU0wQyxNQUFNcUQsUUFFckIsTUFFSmxQLEtBQUtzUCxPQUFPeEUsS0FBS08sU0FBU3FHLGFBQWExUixLQUFLbUosTUFBTW1DLE9BQ2xEdEwsS0FBS21KLE1BQU01SCxRQUVmLEdBQUl2QixLQUFLZ1IsZ0JBQWlCLENBRXRCLE1BQU1yUyxFQUFRcUIsS0FBS21KLE1BQU1rRCxXQUFXd0UsUUFDcEMsR0FBSTdRLEtBQUttSixNQUFNd0Qsa0JBQW9CaE8sRUFBTTROLFNBQ3JDLE1BQU0sSUFBSTVELE1BQU0sZ0NBRXBCM0ksS0FBS21KLE1BQU13RCxrQkFBb0JoTyxFQUFNNE4sU0FDckMsTUFBTW9GLEVBQWMzUixLQUFLNFIsY0FBY2pULEdBQ2pDa1QsRUFBWTdSLEtBQUttSixNQUV2QixPQURBbkosS0FBS21KLFdBQVFzQixFQUNOLElBQUltQixFQUNQNUwsS0FBS3NQLE9BQ0x1QyxFQUNBRixHQUdSLEdBQUkzUixLQUFLc1AsT0FBT3hFLEtBQUtPLFNBQVNvRyxhQUMxQnpSLEtBQUtzUCxPQUFPeEUsS0FBS08sU0FBU29HLFlBQVl6UixLQUFLbUosTUFBTW1DLE9BQVEsQ0FDekQsTUFBTXVHLEVBQVk3UixLQUFLbUosTUFFdkIsT0FEQW5KLEtBQUttSixXQUFRc0IsRUFDTixJQUFJbUIsRUFDUDVMLEtBQUtzUCxPQUNMdUMsT0FDQXBILEdBS1IsT0FEQXpLLEtBQUttSixXQUFRc0IsRUFDTiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgVG9rZW5EZWZpbml0aW9uLCBUb2tlbiwgUGFyc2VUcmVlLCBNYXRjaFJlc3VsdCwgSVBhcnNlciB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCB0b2tlblR5cGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgIFdISVRFU1BBQ0U6IFwiIFwiLFxuICAgIENPTkNBVEVOQVRJT046IFwiLFwiLFxuICAgIC8vIEJvdW5kaW5nIGludGVnZXJzIGFyZSB0b2tlbml6ZWQgYXMgcGFydCBvZiB0aGUgZG90cyB0byBtaW5pbWl6ZSBwb3RlbnRpYWwgY29uZmxpY3RzIHdpdGggdXNlci1wcm92aWRlZCBzeW50YXguXG4gICAgRE9UU19HUkVFRFk6IFwiLi4uXCIsXG4gICAgRE9UU19SRUxVQ1RBTlQ6IFwiLi5cIixcbiAgICBET1RTX09NRUdBOiBcIioqKlwiLFxuICAgIExFRlRfUEFSRU46IFwiKFwiLFxuICAgIFJJR0hUX1BBUkVOOiBcIilcIixcbiAgICBDQVBUVVJJTkdfTEVGVF9QQVJFTjogXCIkKFwiLFxuICAgIEFMVEVSTkFUSU9OOiBcIjtcIixcbiAgICBJTlRFUlNFQ1RJT046IFwiXlwiLFxuICAgIEFORDogXCImXCIsXG4gICAgT1I6IFwifFwiLFxuICAgIE5PVDogXCJub3RcIixcbiAgICBTVEFSVDogXCJzdGFydFwiLFxuICAgIEVORDogXCJlbmRcIixcbiAgICBUUlVFOiBcInRydWVcIixcbiAgICBGQUxTRTogXCJmYWxzZVwiLFxuICAgIEVSUk9SOiBcImVycm9yXCJcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZVR5cGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgIE9NRUdBOiB0b2tlblR5cGVzLkRPVFNfT01FR0EsXG4gICAgUkVQRVRJVElPTjogdG9rZW5UeXBlcy5ET1RTX0dSRUVEWSxcbiAgICBDT05DQVRFTkFUSU9OOiB0b2tlblR5cGVzLkNPTkNBVEVOQVRJT04sXG4gICAgQ0FQVFVSRTogXCIkKFwiLFxuICAgIEdST1VQOiB0b2tlblR5cGVzLkxFRlRfUEFSRU4sXG4gICAgQUxURVJOQVRJT046IHRva2VuVHlwZXMuQUxURVJOQVRJT04sXG4gICAgSU5URVJTRUNUSU9OOiB0b2tlblR5cGVzLklOVEVSU0VDVElPTixcbiAgICBBTkQ6IHRva2VuVHlwZXMuQU5ELFxuICAgIE9SOiB0b2tlblR5cGVzLk9SLFxuICAgIE5PVDogdG9rZW5UeXBlcy5OT1QsXG4gICAgU1RBUlQ6IHRva2VuVHlwZXMuU1RBUlQsXG4gICAgRU5EOiB0b2tlblR5cGVzLkVORCxcbiAgICBUUlVFOiB0b2tlblR5cGVzLlRSVUUsXG4gICAgRkFMU0U6IHRva2VuVHlwZXMuRkFMU0UsXG4gICAgRVJST1I6IHRva2VuVHlwZXMuRVJST1Jcbn07XG5cblxuZXhwb3J0IHR5cGUgVG9rZW5TdHJlYW0gPSB7XG4gICAgc3RyaW5nOiBzdHJpbmcsXG4gICAgdG9rZW5zOiBBcnJheTxUb2tlbj4sXG4gICAgcG9zaXRpb246IG51bWJlcixcbiAgICBlcnJvcnM6IEFycmF5PG51bWJlcj5cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZVRyZWUocDogUGFyc2VUcmVlKTogUGFyc2VUcmVlIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBwLnR5cGUsXG4gICAgICAgIHZhbHVlOiBwLnZhbHVlLFxuICAgICAgICBjaGlsZHJlbjogcC5jaGlsZHJlbi5zbGljZSgpLFxuICAgICAgICByYW5nZToge1xuICAgICAgICAgICAgc3RhcnQ6IHAucmFuZ2Uuc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IHAucmFuZ2UuZW5kXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgY29uc3QgY29uc3RhbnRWYWx1ZSA9IGZ1bmN0aW9uIChjOiBhbnkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF9tcjogTWF0Y2hSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlVmFsdWUgPSBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pIHtcbiAgICByZXR1cm4gcGFyc2VyLm5vZGUodG9rZW4udHlwZSwgdG9rZW4udmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlSW5maXhSID0gZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgbGVmdDogUGFyc2VUcmVlLCB0b2tlbjogVG9rZW4pIHtcbiAgICBsZXQgY2hpbGRyZW4gPSBbbGVmdF07XG4gICAgY2hpbGRyZW4ucHVzaChwYXJzZXIucGFyc2VFeHByZXNzaW9uKHRva2VuLnRpZ2h0bmVzcyAtIDEpKTtcbiAgICByZXR1cm4gcGFyc2VyLm5vZGUodG9rZW4udHlwZSwgdG9rZW4udmFsdWUsIGNoaWxkcmVuKTtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZUluZml4UlByb3Bvc2l0aW9uYWwgPSBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCBsZWZ0OiBQYXJzZVRyZWUsIHRva2VuOiBUb2tlbikge1xuICAgIGlmICghaXNQcm9wb3NpdGlvbmFsKGxlZnQpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJMZWZ0IGhhbmQgc2lkZSBvZiB0b2tlbiBtdXN0IGJlIHByb3Bvc2l0aW9uYWxcIiwgdG9rZW4sIGxlZnQpO1xuICAgIH1cbiAgICBsZXQgY2hpbGRyZW4gPSBbbGVmdF07XG4gICAgY29uc3QgcmlnaHQgPSBwYXJzZXIucGFyc2VFeHByZXNzaW9uKHRva2VuLnRpZ2h0bmVzcyAtIDEpO1xuICAgIGlmICghaXNQcm9wb3NpdGlvbmFsKHJpZ2h0KSkge1xuICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiUmlnaHQgaGFuZCBzaWRlIG9mIHRva2VuIG11c3QgYmUgcHJvcG9zaXRpb25hbFwiLCB0b2tlbiwgcmlnaHQpO1xuICAgIH1cbiAgICBjaGlsZHJlbi5wdXNoKHJpZ2h0KTtcbiAgICByZXR1cm4gcGFyc2VyLm5vZGUodG9rZW4udHlwZSwgdG9rZW4udmFsdWUsIGNoaWxkcmVuKTtcbn07XG5cbmV4cG9ydCBjb25zdCBCT1VORF9JTkZJTklURSA9IFwiJEVORFwiO1xuXG5leHBvcnQgY29uc3Qgc3RhbmRhcmRUb2tlbnM6IEFycmF5PFRva2VuRGVmaW5pdGlvbj4gPSBbXG4gICAge1xuICAgICAgICBcInR5cGVcIjogdG9rZW5UeXBlcy5XSElURVNQQUNFLFxuICAgICAgICBtYXRjaDogL15cXHMrL1xuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkNPTkNBVEVOQVRJT04sXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5DT05DQVRFTkFUSU9OXSxcbiAgICAgICAgdGlnaHRuZXNzOiAxMDAsXG4gICAgICAgIGV4dGVuZFBhcnNlOiBwYXJzZUluZml4UlxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkRPVFNfR1JFRURZLFxuICAgICAgICBtYXRjaDogL14oWzAtOV0qKVxccypcXC5cXC5cXC5cXHMqKFswLTldKikvLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKG1hdGNoUmVzdWx0OiBNYXRjaFJlc3VsdCk6IGFueSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsb3dlckJvdW5kOiBtYXRjaFJlc3VsdFsxXSA/IHBhcnNlSW50KG1hdGNoUmVzdWx0WzFdKSA6IDAsXG4gICAgICAgICAgICAgICAgdXBwZXJCb3VuZDogbWF0Y2hSZXN1bHRbMl0gPyBwYXJzZUludChtYXRjaFJlc3VsdFsyXSkgOiBCT1VORF9JTkZJTklURVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgdGlnaHRuZXNzOiAxMTAsXG4gICAgICAgIHN0YXJ0UGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICBjb25zdCB0cnVlUGhpID0gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5UUlVFLCB0cnVlKTtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2Uuc3RhcnQgPSB0b2tlbi5yYW5nZS5zdGFydDtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2UuZW5kID0gdG9rZW4ucmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5SRVBFVElUSU9OLCB0b2tlbi52YWx1ZSwgW3RydWVQaGldKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIGxlZnQ6IFBhcnNlVHJlZSwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZShwYXJzZVR5cGVzLlJFUEVUSVRJT04sIHRva2VuLnZhbHVlLCBbbGVmdF0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuRE9UU19SRUxVQ1RBTlQsXG4gICAgICAgIG1hdGNoOiAvXihbMC05XSopXFxzKlxcLlxcLlxccyooWzAtOV0qKS8sXG4gICAgICAgIHRpZ2h0bmVzczogMTEwLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKG1hdGNoUmVzdWx0OiBNYXRjaFJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBncmVlZHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvd2VyQm91bmQ6IG1hdGNoUmVzdWx0WzFdID8gcGFyc2VJbnQobWF0Y2hSZXN1bHRbMV0pIDogMCxcbiAgICAgICAgICAgICAgICB1cHBlckJvdW5kOiBtYXRjaFJlc3VsdFsyXSA/IHBhcnNlSW50KG1hdGNoUmVzdWx0WzJdKSA6IEJPVU5EX0lORklOSVRFXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBzdGFydFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgY29uc3QgdHJ1ZVBoaSA9IHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuVFJVRSwgdHJ1ZSk7XG4gICAgICAgICAgICB0cnVlUGhpLnJhbmdlLnN0YXJ0ID0gdG9rZW4ucmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICB0cnVlUGhpLnJhbmdlLmVuZCA9IHRva2VuLnJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuUkVQRVRJVElPTiwgdG9rZW4udmFsdWUsIFt0cnVlUGhpXSk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4dGVuZFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCBsZWZ0OiBQYXJzZVRyZWUsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5SRVBFVElUSU9OLCB0b2tlbi52YWx1ZSwgW2xlZnRdKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkRPVFNfT01FR0EsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5ET1RTX09NRUdBXSxcbiAgICAgICAgdGlnaHRuZXNzOiAxMTAsXG4gICAgICAgIHN0YXJ0UGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICBjb25zdCB0cnVlUGhpID0gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5UUlVFLCB0cnVlKTtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2Uuc3RhcnQgPSB0b2tlbi5yYW5nZS5zdGFydDtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2UuZW5kID0gdG9rZW4ucmFuZ2UuZW5kO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuT01FR0EsIHRva2VuLnZhbHVlLCBbdHJ1ZVBoaV0pO1xuICAgICAgICB9LFxuICAgICAgICBleHRlbmRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgbGVmdDogUGFyc2VUcmVlLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuT01FR0EsIHRva2VuLnZhbHVlLCBbbGVmdF0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuTEVGVF9QQVJFTixcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkxFRlRfUEFSRU5dLFxuICAgICAgICBzdGFydFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgLy9wYXJzZSBhbiBleHByZXNzaW9uIGF0IFJCUCAwLCB0aGVuIGVhdCBhIClcbiAgICAgICAgICAgIGNvbnN0IGV4cHIgPSBwYXJzZXIucGFyc2VFeHByZXNzaW9uKDApO1xuICAgICAgICAgICAgaWYgKHBhcnNlci5jdXJyZW50VG9rZW4oKS50eXBlICE9IHRva2VuVHlwZXMuUklHSFRfUEFSRU4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiTWlzc2luZyByaWdodCBwYXJlbnRoZXNpc1wiLCB0b2tlbiwgZXhwcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIuYWR2YW5jZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuR1JPVVAsIHRva2VuLnZhbHVlLCBbZXhwcl0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuUklHSFRfUEFSRU4sXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5SSUdIVF9QQVJFTl1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5DQVBUVVJJTkdfTEVGVF9QQVJFTixcbiAgICAgICAgbWF0Y2g6IC9eXFwkKFtBLXpfXVtBLXpfMC05XSopP1xcKC8sXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiAobWF0Y2hSZXN1bHQ6IE1hdGNoUmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGdyb3VwOiBtYXRjaFJlc3VsdFsxXSB8fCBcIiRpbXBsaWNpdFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBzdGFydFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgLy9wYXJzZSBhbiBleHByZXNzaW9uIGF0IFJCUCAwLCB0aGVuIGVhdCBhIClcbiAgICAgICAgICAgIGNvbnN0IGV4cHIgPSBwYXJzZXIucGFyc2VFeHByZXNzaW9uKDApO1xuICAgICAgICAgICAgaWYgKHBhcnNlci5jdXJyZW50VG9rZW4oKS50eXBlICE9IHRva2VuVHlwZXMuUklHSFRfUEFSRU4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiTWlzc2luZyByaWdodCBwYXJlbnRoZXNpc1wiLCB0b2tlbiwgZXhwcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIuYWR2YW5jZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuQ0FQVFVSRSwgdG9rZW4udmFsdWUsIFtleHByXSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5BTFRFUk5BVElPTixcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkFMVEVSTkFUSU9OXSxcbiAgICAgICAgdGlnaHRuZXNzOiA2MCxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IHBhcnNlSW5maXhSXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuSU5URVJTRUNUSU9OLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuSU5URVJTRUNUSU9OXSxcbiAgICAgICAgdGlnaHRuZXNzOiA1MCxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IHBhcnNlSW5maXhSXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuQU5ELFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuQU5EXSxcbiAgICAgICAgdGlnaHRuZXNzOiAyMDAsXG4gICAgICAgIGV4dGVuZFBhcnNlOiBwYXJzZUluZml4UlByb3Bvc2l0aW9uYWxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5PUixcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLk9SXSxcbiAgICAgICAgdGlnaHRuZXNzOiAyMTAsXG4gICAgICAgIGV4dGVuZFBhcnNlOiBwYXJzZUluZml4UlByb3Bvc2l0aW9uYWxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5OT1QsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5OT1RdLFxuICAgICAgICB0aWdodG5lc3M6IDIyMCxcbiAgICAgICAgc3RhcnRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIGNvbnN0IHBoaSA9IHBhcnNlci5wYXJzZUV4cHJlc3Npb24odG9rZW4udGlnaHRuZXNzKTtcbiAgICAgICAgICAgIGlmICghaXNQcm9wb3NpdGlvbmFsKHBoaSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiTk9UIG1heSBvbmx5IG5lZ2F0ZSBwcm9wb3NpdGlvbmFsIHN0YXRlIGZvcm11bGFlXCIsIHRva2VuLCBwaGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHRva2VuLnR5cGUsIHRva2VuLnZhbHVlLCBbcGhpXSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5TVEFSVCxcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLlNUQVJUXSxcbiAgICAgICAgc3RhcnRQYXJzZTogcGFyc2VWYWx1ZVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkVORCxcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkVORF0sXG4gICAgICAgIHN0YXJ0UGFyc2U6IHBhcnNlVmFsdWVcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5UUlVFLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuVFJVRV0sXG4gICAgICAgIHZhbHVlOiBjb25zdGFudFZhbHVlKHRydWUpLFxuICAgICAgICBzdGFydFBhcnNlOiBwYXJzZVZhbHVlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuRkFMU0UsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5GQUxTRV0sXG4gICAgICAgIHZhbHVlOiBjb25zdGFudFZhbHVlKGZhbHNlKSxcbiAgICAgICAgc3RhcnRQYXJzZTogcGFyc2VWYWx1ZVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkVSUk9SLFxuICAgICAgICBtYXRjaDogL15cXFMrLyxcbiAgICAgICAgc3RhcnRQYXJzZTogcGFyc2VWYWx1ZVxuICAgIH1cbl07XG5cbmNvbnN0IGN1c3RvbVRpZ2h0bmVzc09mZnNldCA9IDMwMDtcblxuY29uc3QgRVJST1IgPSBcIkVSUk9SXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0N1c3RvbShwOiBQYXJzZVRyZWUpOiBib29sZWFuIHtcbiAgICBmb3IgKHZhciBrIGluIHBhcnNlVHlwZXMpIHtcbiAgICAgICAgaWYgKHBhcnNlVHlwZXNba10gPT0gcC50eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3Bvc2l0aW9uYWwocDogUGFyc2VUcmVlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzQ3VzdG9tKHApIHx8XG4gICAgICAgIHAudHlwZSA9PSBwYXJzZVR5cGVzLkFORCB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5PUiB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5OT1QgfHxcbiAgICAgICAgcC50eXBlID09IHBhcnNlVHlwZXMuVFJVRSB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5GQUxTRSB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5TVEFSVCB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5FTkQgfHxcbiAgICAgICAgKChwLnR5cGUgPT0gcGFyc2VUeXBlcy5HUk9VUCB8fCBwLnR5cGUgPT0gcGFyc2VUeXBlcy5DQVBUVVJFKSAmJlxuICAgICAgICAgICAgcC5jaGlsZHJlbi5ldmVyeShmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1Byb3Bvc2l0aW9uYWwoYyk7XG4gICAgICAgICAgICB9KSk7XG59XG5leHBvcnQgdHlwZSBQYXJzZVJlc3VsdCA9IHtcbiAgICB0cmVlOiBQYXJzZVRyZWUsXG4gICAgZXJyb3JzOiBBcnJheTxQYXJzZVRyZWU+LFxuICAgIHJlbWFpbmRlcjogc3RyaW5nXG59O1xuZXhwb3J0IGNsYXNzIFBhcnNlciBpbXBsZW1lbnRzIElQYXJzZXIge1xuICAgIHB1YmxpYyB0b2tlbkRlZmluaXRpb25zOiBBcnJheTxUb2tlbkRlZmluaXRpb24+O1xuICAgIHB1YmxpYyB0b2tlbnNCeVR5cGU6IHsgW2tleTogc3RyaW5nXTogVG9rZW5EZWZpbml0aW9uIH07XG4gICAgcHVibGljIHBhcnNlRXJyb3JzOiBBcnJheTxQYXJzZVRyZWU+O1xuICAgIHB1YmxpYyBzdHJlYW0/OiBUb2tlblN0cmVhbTtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0VG9rZW5zOiBBcnJheTxUb2tlbkRlZmluaXRpb24+KSB7XG4gICAgICAgIHRoaXMudG9rZW5EZWZpbml0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnRva2Vuc0J5VHlwZSA9IHt9O1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3JzID0gW107XG4gICAgICAgIGNvbnN0IGN1c3RvbVRva2VucyA9IGNvbnRleHRUb2tlbnMgfHwgW107XG4gICAgICAgIGNvbnN0IHRva2VucyA9IGN1c3RvbVRva2Vucy5jb25jYXQoc3RhbmRhcmRUb2tlbnMpO1xuICAgICAgICBmb3IgKGxldCB0aSA9IDA7IHRpIDwgdG9rZW5zLmxlbmd0aDsgdGkrKykge1xuICAgICAgICAgICAgY29uc3QgaW5wdXQ6IFRva2VuRGVmaW5pdGlvbiA9IHRva2Vuc1t0aV07XG4gICAgICAgICAgICBjb25zdCB0aWdodG5lc3M6IG51bWJlciA9IGlucHV0LnRpZ2h0bmVzcyB8fCAwO1xuICAgICAgICAgICAgY29uc3QgZGVmbjogVG9rZW5EZWZpbml0aW9uID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IGlucHV0LnR5cGUsXG4gICAgICAgICAgICAgICAgbWF0Y2g6IGlucHV0Lm1hdGNoIGluc3RhbmNlb2YgUmVnRXhwID8gaW5wdXQubWF0Y2ggOlxuICAgICAgICAgICAgICAgICAgICAodHlwZW9mIChpbnB1dC5tYXRjaCkgPT0gJ3N0cmluZycpID8gW2lucHV0Lm1hdGNoXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5tYXRjaCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaW5wdXQudmFsdWUgfHwgZnVuY3Rpb24gKG1yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtclswXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRpZ2h0bmVzczogdGkgPCBjdXN0b21Ub2tlbnMubGVuZ3RoID8gdGlnaHRuZXNzICsgY3VzdG9tVGlnaHRuZXNzT2Zmc2V0IDogdGlnaHRuZXNzLFxuICAgICAgICAgICAgICAgIHN0YXJ0UGFyc2U6IGlucHV0LnN0YXJ0UGFyc2UgfHwgZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJDYW4ndCBzdGFydCBhIHBhcnNlIHRyZWUgd2l0aCB0aGlzIHRva2VuXCIsIHRva2VuKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGV4dGVuZFBhcnNlOiBpbnB1dC5leHRlbmRQYXJzZSB8fCBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCBwYXJzZVRyZWU6IFBhcnNlVHJlZSwgdG9rZW46IFRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJDYW4ndCBleHRlbmQgYSBwYXJzZSB0cmVlIHdpdGggdGhpcyB0b2tlblwiLCB0b2tlbiwgcGFyc2VUcmVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50b2tlbkRlZmluaXRpb25zLnB1c2goZGVmbik7XG4gICAgICAgICAgICB0aGlzLnRva2Vuc0J5VHlwZVtkZWZuLnR5cGVdID0gZGVmbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2V0U3RyZWFtKCk7XG4gICAgfVxuXG4gICAgbm9kZSh0eXBlOiBzdHJpbmcsIHZhbHVlOiBhbnkgPSB1bmRlZmluZWQsIGNoaWxkcmVuOiBBcnJheTxQYXJzZVRyZWU+ID0gW10pOiBQYXJzZVRyZWUge1xuICAgICAgICByZXR1cm4geyB0eXBlLCB2YWx1ZSwgY2hpbGRyZW4sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9IH07XG4gICAgfVxuXG4gICAgZXJyb3IobXNnOiBzdHJpbmcsIHRva2VuOiBUb2tlbiwgdHJlZT86IFBhcnNlVHJlZSk6IFBhcnNlVHJlZSB7XG4gICAgICAgIGNvbnN0IGVyciA9IHRoaXMubm9kZShFUlJPUiwgeyBtZXNzYWdlOiBtc2csIHRva2VuLCB0cmVlIH0pO1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3JzLnB1c2goZXJyKTtcbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICB9XG5cbiAgICB0b2tlbml6ZShzdHI6IHN0cmluZyk6IFRva2VuU3RyZWFtIHtcbiAgICAgICAgbGV0IHJlc3VsdDogQXJyYXk8VG9rZW4+ID0gW107XG4gICAgICAgIGxldCBlcnJvcnM6IEFycmF5PG51bWJlcj4gPSBbXTtcbiAgICAgICAgbGV0IHN1YnN0cmluZzogc3RyaW5nID0gc3RyO1xuICAgICAgICBsZXQgaW5kZXg6IG51bWJlciA9IDA7XG4gICAgICAgIHdoaWxlIChzdWJzdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB0aSA9IDA7IHRpIDwgdGhpcy50b2tlbkRlZmluaXRpb25zLmxlbmd0aDsgdGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGVmaW5pdGlvbjogVG9rZW5EZWZpbml0aW9uID0gdGhpcy50b2tlbkRlZmluaXRpb25zW3RpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRva2VuRGVmaW5pdGlvbi5tYXRjaDtcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2hSZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IEFycmF5PHN0cmluZz4gfCBSZWdFeHBFeGVjQXJyYXkgfCBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogbnVtYmVyXG4gICAgICAgICAgICAgICAgfSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IC0xXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBleGVjUmVzdWx0ID0gbWF0Y2guZXhlYyhzdWJzdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhlY1Jlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQubWF0Y2ggPSBleGVjUmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuaW5kZXggPSBleGVjUmVzdWx0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1hdGNoKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBtaSA9IDA7IG1pIDwgbWF0Y2gubGVuZ3RoOyBtaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBtYXRjaFttaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic3RyaW5nLnN1YnN0cigwLCBjYW5kaWRhdGUubGVuZ3RoKSA9PSBjYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5tYXRjaCA9IFtjYW5kaWRhdGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hSZXN1bHQubWF0Y2ggJiYgbWF0Y2hSZXN1bHQuaW5kZXggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaExlbmd0aCA9IG1hdGNoUmVzdWx0Lm1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgc3Vic3RyaW5nID0gc3Vic3RyaW5nLnN1YnN0cihtYXRjaFJlc3VsdC5tYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSBtYXRjaExlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuRGVmaW5pdGlvbi50eXBlICE9PSB0b2tlblR5cGVzLldISVRFU1BBQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbkRlZmluaXRpb24udHlwZSA9PT0gdG9rZW5UeXBlcy5FUlJPUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHJlc3VsdC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHRva2VuRGVmaW5pdGlvbi50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0b2tlbkRlZmluaXRpb24udmFsdWUhKG1hdGNoUmVzdWx0Lm1hdGNoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWdodG5lc3M6IHRva2VuRGVmaW5pdGlvbi50aWdodG5lc3MgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogeyBzdGFydDogb2xkSW5kZXgsIGVuZDogaW5kZXggfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0cmluZzogc3RyLCB0b2tlbnM6IHJlc3VsdCwgcG9zaXRpb246IDAsIGVycm9yczogZXJyb3JzIH07XG4gICAgfVxuXG4gICAgcmVzZXRTdHJlYW0oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RyZWFtID0geyBzdHJpbmc6IFwiXCIsIHRva2VuczogW10sIHBvc2l0aW9uOiAwLCBlcnJvcnM6IFtdIH07XG4gICAgfVxuXG4gICAgY2hhclBvc2l0aW9uKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRUb2tlbigpID8gdGhpcy5jdXJyZW50VG9rZW4oKS5yYW5nZS5zdGFydCA6IHRoaXMuc3RyZWFtIS5zdHJpbmcubGVuZ3RoO1xuICAgIH1cblxuICAgIHJlbWFpbmRlcigpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBlbmQgPSB0aGlzLmNoYXJQb3NpdGlvbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW0hLnN0cmluZy5zdWJzdHIoZW5kKTtcbiAgICB9XG5cbiAgICBjdXJyZW50VG9rZW4oKTogVG9rZW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW0hLnRva2Vuc1t0aGlzLnN0cmVhbSEucG9zaXRpb25dO1xuICAgIH1cblxuICAgIGFkdmFuY2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RyZWFtIS5wb3NpdGlvbisrO1xuICAgIH1cblxuICAgIHBhcnNlKHN0cjogc3RyaW5nKTogUGFyc2VSZXN1bHQge1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHRoaXMudG9rZW5pemUoc3RyKTtcbiAgICAgICAgdGhpcy5wYXJzZUVycm9ycyA9IFtdO1xuICAgICAgICBjb25zdCB0cmVlID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oMCk7XG4gICAgICAgIHZhciByZXN1bHQgPSB7IHRyZWUsIGVycm9yczogdGhpcy5wYXJzZUVycm9ycywgcmVtYWluZGVyOiB0aGlzLnJlbWFpbmRlcigpIH07XG4gICAgICAgIHRoaXMucGFyc2VFcnJvcnMgPSBbXTtcbiAgICAgICAgdGhpcy5yZXNldFN0cmVhbSgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHBhcnNlRXhwcmVzc2lvbih0aWdodG5lc3M6IG51bWJlcik6IFBhcnNlVHJlZSB7XG4gICAgICAgIGxldCB0b2tlbiA9IHRoaXMuY3VycmVudFRva2VuKCk7XG4gICAgICAgIGxldCB0b2tlbkRlZiA9IHRoaXMudG9rZW5zQnlUeXBlW3Rva2VuLnR5cGVdO1xuICAgICAgICBjb25zdCBzdGFydCA9IHRva2VuLnJhbmdlLnN0YXJ0O1xuICAgICAgICB0aGlzLmFkdmFuY2UoKTtcbiAgICAgICAgbGV0IHRyZWUgPSB0b2tlbkRlZi5zdGFydFBhcnNlISh0aGlzLCB0b2tlbik7XG4gICAgICAgIHRyZWUucmFuZ2Uuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdHJlZS5yYW5nZS5lbmQgPSB0aGlzLmNoYXJQb3NpdGlvbigpO1xuICAgICAgICBpZiAodHJlZS50eXBlID09IEVSUk9SKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJlZTtcbiAgICAgICAgfVxuICAgICAgICB0b2tlbiA9IHRoaXMuY3VycmVudFRva2VuKCk7XG4gICAgICAgIHdoaWxlICh0b2tlbiAmJiB0aWdodG5lc3MgPCB0b2tlbi50aWdodG5lc3MpIHtcbiAgICAgICAgICAgIHRva2VuRGVmID0gdGhpcy50b2tlbnNCeVR5cGVbdG9rZW4udHlwZV07XG4gICAgICAgICAgICB0aGlzLmFkdmFuY2UoKTtcbiAgICAgICAgICAgIGxldCBuZXdUcmVlID0gdG9rZW5EZWYuZXh0ZW5kUGFyc2UhKHRoaXMsIHRyZWUsIHRva2VuKTtcbiAgICAgICAgICAgIG5ld1RyZWUucmFuZ2Uuc3RhcnQgPSB0cmVlLnJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgbmV3VHJlZS5yYW5nZS5lbmQgPSB0aGlzLmNoYXJQb3NpdGlvbigpO1xuICAgICAgICAgICAgaWYgKG5ld1RyZWUudHlwZSA9PSBFUlJPUikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdUcmVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJlZSA9IG5ld1RyZWU7XG4gICAgICAgICAgICB0b2tlbiA9IHRoaXMuY3VycmVudFRva2VuKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQgeyBwYXJzZVR5cGVzLCBpc1Byb3Bvc2l0aW9uYWwsIGNsb25lVHJlZSB9IGZyb20gXCIuL3BhcnNlclwiO1xuaW1wb3J0IHsgUGFyc2VUcmVlIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHN0cmluZ2lmeUZvcm11bGEgfSBmcm9tIFwiLi9jb21waWxlclwiO1xubGV0IHN0YXRlSUQgPSAwO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRTdGF0ZUlEKCkge1xuICAgIHN0YXRlSUQgPSAwO1xufVxuXG5leHBvcnQgY2xhc3MgU0ZBIHtcbiAgICBzdGFydFN0YXRlczogU3RhdGVbXTtcbiAgICBhY2NlcHRpbmdTdGF0ZXM6IFN0YXRlW107XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3RhcnRTdGF0ZXMgPSBbbmV3IFN0YXRlKCldO1xuICAgICAgICB0aGlzLmFjY2VwdGluZ1N0YXRlcyA9IFtdO1xuICAgIH1cblxuICAgIG5ld1N0YXRlKG9wdElEPzogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhdGUob3B0SUQpO1xuICAgIH1cblxuICAgIG1hcmtBY2NlcHRpbmcoczogU3RhdGUpIHtcbiAgICAgICAgLy9hZGQgdG8gYWNjZXB0aW5nU3RhdGVzXG4gICAgICAgIGlmICh0aGlzLmFjY2VwdGluZ1N0YXRlcy5pbmRleE9mKHMpID09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmFjY2VwdGluZ1N0YXRlcy5wdXNoKHMpO1xuICAgICAgICB9XG4gICAgICAgIC8vYWRkIGFjY2VwdGluZyBzZWxmLWVkZ2VcbiAgICAgICAgcy5hZGRFZGdlKG5ldyBFZGdlKHMsIG51bGwsIFtdKSk7XG4gICAgICAgIC8vbWFyayBhY2NlcHRpbmdcbiAgICAgICAgcy5pc0FjY2VwdGluZyA9IHRydWU7XG4gICAgfVxuXG4gICAgbWFya05vbkFjY2VwdGluZyhzOiBTdGF0ZSkge1xuICAgICAgICAvL21hcmsgbm9uLWFjY2VwdGluZ1xuICAgICAgICBzLmlzQWNjZXB0aW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmFjY2VwdGluZ1N0YXRlcy5pbmRleE9mKHMpICE9IC0xKSB7XG4gICAgICAgICAgICAvL3JlbW92ZSBmcm9tIGFjY2VwdGluZ1N0YXRlc1xuICAgICAgICAgICAgdGhpcy5hY2NlcHRpbmdTdGF0ZXMuc3BsaWNlKHRoaXMuYWNjZXB0aW5nU3RhdGVzLmluZGV4T2YocyksIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0U3RhdGVzKCkge1xuICAgICAgICBsZXQgZm91bmQ6IHsgW2lkOiBzdHJpbmddOiBTdGF0ZSB9ID0ge307XG4gICAgICAgIGxldCBzdGFjayA9IHRoaXMuc3RhcnRTdGF0ZXMuc2xpY2UoKTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgaGVyZTogU3RhdGUgPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgICBmb3VuZFtoZXJlLmlkXSA9IGhlcmU7XG4gICAgICAgICAgICBmb3IgKGxldCBlayBpbiBoZXJlLmVkZ2VzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSBoZXJlLmVkZ2VzW2VrXTtcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgIShlLnRhcmdldC5pZCBpbiBmb3VuZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhmb3VuZCkubWFwKChrKSA9PiBmb3VuZFtrXSk7XG4gICAgfVxuXG4gICAgdG9Eb3QoKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gXCJkaWdyYXBoIGcge1xcblwiICtcbiAgICAgICAgICAgIFwiICByYW5rZGlyPUxSO1xcblwiO1xuICAgICAgICBjb25zdCBtaWRkbGUgPSB0aGlzLmdldFN0YXRlcygpLm1hcChmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgcmV0dXJuIFtcIiAgXCIgKyBzLmlkICsgYCBbc2hhcGU9JHtzLmlzQWNjZXB0aW5nID8gXCJkb3VibGVjaXJjbGVcIiA6IFwiY2lyY2xlXCJ9XTtgXS5jb25jYXQoXG4gICAgICAgICAgICAgICAgcy5lZGdlcy5tYXAoZnVuY3Rpb24gKGUsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiICBcIiArIHMuaWQgKyBcIi0+XCIgKyBlLnRhcmdldCEuaWQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCBbbGFiZWw9XCIke2l9OiR7ZS5mb3JtdWxhID8gc3RyaW5naWZ5Rm9ybXVsYShlLmZvcm11bGEpIDogXCImIzk0OTtcIn06JHtlLmxhYmVsLm1hcCgobCkgPT4gbC50eXBlICsgXCIuXCIgKyBsLmdyb3VwKS5qb2luKFwiLFwiKX1cIl07YDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICB9KS5qb2luKFwiXFxuXCIpO1xuICAgICAgICBjb25zdCBlbmQgPSBcIlxcbn1cIjtcbiAgICAgICAgcmV0dXJuIHN0YXJ0ICsgbWlkZGxlICsgZW5kO1xuICAgIH1cblxuICAgIGVlbGltKCkge1xuICAgICAgICBsZXQgc3RhY2sgPSB0aGlzLnN0YXJ0U3RhdGVzLnNsaWNlKCksXG4gICAgICAgICAgICBzZWVuOiB7IFtpZDogc3RyaW5nXTogU3RhdGUgfSA9IHt9O1xuICAgICAgICBmb3IgKGxldCBzayA9IDA7IHNrIDwgc3RhY2subGVuZ3RoOyBzaysrKSB7XG4gICAgICAgICAgICBzZWVuW3N0YWNrW3NrXS5pZF0gPSBzdGFja1tza107XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHN0YWNrLnBvcCgpITtcbiAgICAgICAgICAgIGxldCByZWFjaGFibGUgPSB7IFtzLmlkXTogcyB9O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmVkZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHMuZWRnZXNbaV07XG4gICAgICAgICAgICAgICAgLy9lIGlzIGEgbnVsbCB0cmFuc2l0aW9uIGJ1dCBub3QgYW4gYWNjZXB0aW5nIG51bGwgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGlmICghZS5mb3JtdWxhICYmICEocy5pc0FjY2VwdGluZyAmJiBlLnRhcmdldCA9PSBzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQhLmlkIGluIHJlYWNoYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcy5lZGdlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEVzID0gZS50YXJnZXQhLmVkZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RXMgPSB0YXJnZXRFcy5tYXAoKHRlKSA9PiBuZXcgRWRnZSh0ZS50YXJnZXQgPT0gZS50YXJnZXQgJiYgdGUuZm9ybXVsYSA9PSBudWxsID8gcyA6IHRlLnRhcmdldCwgdGUuZm9ybXVsYSwgZS5sYWJlbC5jb25jYXQodGUubGFiZWwpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQhLmlzQWNjZXB0aW5nICYmICFzLmlzQWNjZXB0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2NlcHRpbmdTdGF0ZXMucHVzaChzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmlzQWNjZXB0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHMuZWRnZXMuc3BsaWNlKGksIDEsIC4uLm5ld0VzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWFjaGFibGVbZS50YXJnZXQhLmlkXSA9IGUudGFyZ2V0ITtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IHJrIGluIHJlYWNoYWJsZSkge1xuICAgICAgICAgICAgICAgIGlmICghKHJrIGluIHNlZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gocmVhY2hhYmxlW3JrXSk7XG4gICAgICAgICAgICAgICAgICAgIHNlZW5bcmtdID0gcmVhY2hhYmxlW3JrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaW50ZXJzZWN0KGI6IFNGQSk6IFNGQSB7XG4gICAgICAgIHRoaXMuZWVsaW0oKTtcbiAgICAgICAgY29uc3QgYSA9IHRoaXM7XG4gICAgICAgIGIuZWVsaW0oKTtcbiAgICAgICAgbGV0IGF4YiA9IG5ldyBTRkEoKTtcbiAgICAgICAgYXhiLnN0YXJ0U3RhdGVzID0gW107XG4gICAgICAgIGxldCBzdGFjazogU3RhdGVbXVtdID0gW10sIHN0YXRlczogeyBbaWQ6IHN0cmluZ106IHsgW2lkOiBzdHJpbmddOiBTdGF0ZSB9IH0gPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLnN0YXJ0U3RhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzYSA9IGEuc3RhcnRTdGF0ZXNbaV07XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGIuc3RhcnRTdGF0ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzYiA9IGIuc3RhcnRTdGF0ZXNbal07XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChbc2EsIHNiXSk7XG4gICAgICAgICAgICAgICAgaWYgKCEoc2EuaWQgaW4gc3RhdGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXNbc2EuaWRdID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBzYXNiID0gYXhiLm5ld1N0YXRlKGBhJHtzYS5pZH14JHtzYi5pZH1iYCk7XG4gICAgICAgICAgICAgICAgYXhiLnN0YXJ0U3RhdGVzLnB1c2goc2FzYik7XG4gICAgICAgICAgICAgICAgc3RhdGVzW3NhLmlkXVtzYi5pZF0gPSBzYXNiO1xuICAgICAgICAgICAgICAgIGlmIChzYS5pc0FjY2VwdGluZyAmJiBzYi5pc0FjY2VwdGluZykge1xuICAgICAgICAgICAgICAgICAgICBheGIubWFya0FjY2VwdGluZyhzYXNiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgW3NhLCBzYl0gPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgICBjb25zdCBzYWIgPSBzdGF0ZXNbc2EuaWRdW3NiLmlkXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2EuZWRnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhZSA9IHNhLmVkZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFldCA9IGFlLnRhcmdldCE7XG4gICAgICAgICAgICAgICAgY29uc3QgYWVJc0FjY2VwdGluZ1NlbGZFZGdlID0gc2EuaXNBY2NlcHRpbmcgJiYgYWV0ID09IHNhICYmICFhZS5mb3JtdWxhO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2IuZWRnZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmUgPSBzYi5lZGdlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmV0ID0gYmUudGFyZ2V0ITtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmVJc0FjY2VwdGluZ1NlbGZFZGdlID0gc2IuaXNBY2NlcHRpbmcgJiYgYmV0ID09IHNiICYmICFiZS5mb3JtdWxhO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGhpID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFlSXNBY2NlcHRpbmdTZWxmRWRnZSAhPSBiZUlzQWNjZXB0aW5nU2VsZkVkZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFhZUlzQWNjZXB0aW5nU2VsZkVkZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWUuZm9ybXVsYSB8fCAhYmUuZm9ybXVsYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmVsaW1pbmF0ZWQgbm9uIEFTRSBlcHNpbG9uIHRyYW5zaXRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwaGkgPSBpbnRlcnNlY3RGb3JtdWxhZShhZS5mb3JtdWxhISwgYmUuZm9ybXVsYSEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwaGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgY29tYmluZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWV0LmlkIGluIHN0YXRlcyAmJiBiZXQuaWQgaW4gc3RhdGVzW2FldC5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkID0gc3RhdGVzW2FldC5pZF1bYmV0LmlkXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkID0gYXhiLm5ld1N0YXRlKGBhJHthZXQuaWR9eCR7YmV0LmlkfWJgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGFldC5pZCBpbiBzdGF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzW2FldC5pZF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlc1thZXQuaWRdW2JldC5pZF0gPSBjb21iaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goW2FldCwgYmV0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWV0LmlzQWNjZXB0aW5nICYmIGJldC5pc0FjY2VwdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbm8gbmVlZCBmb3IgbWFya2FjY2VwdGluZyBvciB0byBjaGVjayBtZW1iZXJzaGlwIG9mIGNvbWJpbmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZm9ybWVyIGJlY2F1c2Ugd2UnbGwgZ2V0IHRoZSBhY2NlcHRpbmcgc2VsZiBlZGdlcyBmb3IgZnJlZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbGF0dGVyIGJlY2F1c2UgdGhpcyBzdGF0ZSBpcyBieSBkZWZpbml0aW9uIG5ld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkLmlzQWNjZXB0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGIuYWNjZXB0aW5nU3RhdGVzLnB1c2goY29tYmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNhYi5hZGRFZGdlKG5ldyBFZGdlKGNvbWJpbmVkLCBwaGksIGFlLmxhYmVsLmNvbmNhdChiZS5sYWJlbCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF4YjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGludGVyc2VjdEZvcm11bGFlKHAxOiBQYXJzZVRyZWUsIHAyOiBQYXJzZVRyZWUpIHtcbiAgICAvL3RvZG86IGZpeG1lOiBpbXBsZW1lbnQgZm9yIHJlYWxcbiAgICByZXR1cm4geyB0eXBlOiBwYXJzZVR5cGVzLkFORCwgdmFsdWU6IFwiJlwiLCBjaGlsZHJlbjogW3AxLCBwMl0sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9IH07XG59XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBlZGdlczogRWRnZVtdO1xuICAgIGlzQWNjZXB0aW5nOiBib29sZWFuO1xuICAgIGNvbnN0cnVjdG9yKGlkPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZCB8fCAoc3RhdGVJRCsrKS50b1N0cmluZygxMCk7XG4gICAgICAgIHRoaXMuZWRnZXMgPSBbXTtcbiAgICAgICAgdGhpcy5pc0FjY2VwdGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGFkZEVkZ2UoZTogRWRnZSkge1xuICAgICAgICB0aGlzLmVkZ2VzLnB1c2goZSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlRWRnZShlOiBFZGdlKSB7XG4gICAgICAgIHRoaXMuZWRnZXMuc3BsaWNlKHRoaXMuZWRnZXMuaW5kZXhPZihlKSwgMSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRWRnZSB7XG4gICAgdGFyZ2V0OiBTdGF0ZSB8IG51bGw7XG4gICAgZm9ybXVsYTogUGFyc2VUcmVlIHwgbnVsbDtcbiAgICBsYWJlbDogYW55W107XG4gICAgY29uc3RydWN0b3IodGFyZ2V0OiBTdGF0ZSB8IG51bGwsIGZvcm11bGE6IFBhcnNlVHJlZSB8IG51bGwsIGxhYmVsOiBhbnlbXSkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5mb3JtdWxhID0gZm9ybXVsYTtcbiAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21QYXJzZVRyZWUodHJlZTogUGFyc2VUcmVlKSB7XG4gICAgY29uc3Qgc2ZhID0gbmV3IFNGQSgpO1xuICAgIGNvbnN0IHMgPSBzZmEuc3RhcnRTdGF0ZXNbMF07XG4gICAgY29uc3Qgb3V0RWRnZXMgPSBidWlsZChzZmEsIHMsIHRyZWUpO1xuICAgIGNvbnN0IHRlcm1pbnVzID0gc2ZhLm5ld1N0YXRlKCk7XG4gICAgZm9yIChsZXQgZWsgPSAwOyBlayA8IG91dEVkZ2VzLmxlbmd0aDsgZWsrKykge1xuICAgICAgICBjb25zdCBlID0gb3V0RWRnZXNbZWtdO1xuICAgICAgICBlLnRhcmdldCA9IHRlcm1pbnVzO1xuICAgIH1cbiAgICBzZmEubWFya0FjY2VwdGluZyh0ZXJtaW51cyk7XG4gICAgcmV0dXJuIHNmYTtcbn1cblxuZnVuY3Rpb24gYnVpbGQoc2ZhOiBTRkEsIHNlZWRTdGF0ZTogU3RhdGUsIHRyZWU6IFBhcnNlVHJlZSk6IEVkZ2VbXSB7XG4gICAgaWYgKGlzUHJvcG9zaXRpb25hbCh0cmVlKSAmJiB0cmVlLnR5cGUgIT0gcGFyc2VUeXBlcy5DQVBUVVJFKSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRWRnZShudWxsLCB0cmVlLCBbXSk7XG4gICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKGUpO1xuICAgICAgICByZXR1cm4gW2VdO1xuICAgIH0gZWxzZSBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuQ09OQ0FURU5BVElPTikge1xuICAgICAgICBjb25zdCBhZXMgPSBidWlsZChzZmEsIHNlZWRTdGF0ZSwgdHJlZS5jaGlsZHJlblswXSk7XG4gICAgICAgIGNvbnN0IHMgPSBzZmEubmV3U3RhdGUoKTtcbiAgICAgICAgZm9yIChsZXQgZWsgPSAwOyBlayA8IGFlcy5sZW5ndGg7IGVrKyspIHtcbiAgICAgICAgICAgIGxldCBlID0gYWVzW2VrXTtcbiAgICAgICAgICAgIGUudGFyZ2V0ID0gcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVpbGQoc2ZhLCBzLCB0cmVlLmNoaWxkcmVuWzFdKTtcbiAgICB9IGVsc2UgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLlJFUEVUSVRJT04pIHtcbiAgICAgICAgY29uc3QgZ3JlZWR5ID0gdHJlZS52YWx1ZS5ncmVlZHk7XG4gICAgICAgIGNvbnN0IG1pbiA9IHRyZWUudmFsdWUubG93ZXJCb3VuZDtcbiAgICAgICAgY29uc3QgbWF4ID0gdHJlZS52YWx1ZS51cHBlckJvdW5kO1xuICAgICAgICBjb25zdCBwaGkgPSB0cmVlLmNoaWxkcmVuWzBdO1xuICAgICAgICBpZiAobWluID4gMCkge1xuICAgICAgICAgICAgbGV0IGNsb25lZCA9IGNsb25lVHJlZSh0cmVlKTtcbiAgICAgICAgICAgIGNsb25lZC52YWx1ZS5sb3dlckJvdW5kLS07XG4gICAgICAgICAgICBpZiAoY2xvbmVkLnZhbHVlLnVwcGVyQm91bmQgIT0gXCIkRU5EXCIpIHtcbiAgICAgICAgICAgICAgICBjbG9uZWQudmFsdWUudXBwZXJCb3VuZC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5leHQgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcGFyc2VUeXBlcy5DT05DQVRFTkFUSU9OLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBcIixcIixcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW2Nsb25lVHJlZShwaGkpLCBjbG9uZWRdLFxuICAgICAgICAgICAgICAgIHJhbmdlOiB7IHN0YXJ0OiBjbG9uZWQucmFuZ2Uuc3RhcnQsIGVuZDogY2xvbmVkLnJhbmdlLmVuZCB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkKHNmYSwgc2VlZFN0YXRlLCBuZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChtYXggIT0gXCIkRU5EXCIpIHtcbiAgICAgICAgICAgIGxldCBjbG9uZWQgPSBjbG9uZVRyZWUodHJlZSk7XG4gICAgICAgICAgICBjbG9uZWQudmFsdWUudXBwZXJCb3VuZC0tO1xuICAgICAgICAgICAgbGV0IG5leHQgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcGFyc2VUeXBlcy5DT05DQVRFTkFUSU9OLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBcIixcIixcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW2Nsb25lVHJlZShwaGkpLCBjbG9uZWRdLFxuICAgICAgICAgICAgICAgIHJhbmdlOiB7IHN0YXJ0OiBjbG9uZWQucmFuZ2Uuc3RhcnQsIGVuZDogY2xvbmVkLnJhbmdlLmVuZCB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy9Mb3RzIG9mIGR1cGxpY2F0aW9uIGhlcmUgd2hlbiBvbmx5IG9yZGVyaW5ncyBhcmUgY2hhbmdlZC4gTm90IHNvIHByb3VkIG9mIGl0XG4gICAgICAgICAgICAvL2J1dCBsZXQncyBqdXN0IG1ha2Ugc3VyZSBpdCdzIHdvcmtpbmcgZmlyc3QuXG4gICAgICAgICAgICBpZiAoZ3JlZWR5KSB7XG4gICAgICAgICAgICAgICAgbGV0IGVkZ2VzOiBFZGdlW10gPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZWRnZXMgPSBlZGdlcy5jb25jYXQoW25ldyBFZGdlKG51bGwsIHBoaSwgW10pXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWRnZXMgPSBlZGdlcy5jb25jYXQoYnVpbGQoc2ZhLCBzZWVkU3RhdGUsIG5leHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0ID0gbmV3IEVkZ2UobnVsbCwgbnVsbCwgW10pO1xuICAgICAgICAgICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKG91dCk7XG4gICAgICAgICAgICAgICAgZWRnZXMucHVzaChvdXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlZGdlcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGVkZ2VzID0gW107XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0ID0gbmV3IEVkZ2UobnVsbCwgbnVsbCwgW10pO1xuICAgICAgICAgICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKG91dCk7XG4gICAgICAgICAgICAgICAgZWRnZXMucHVzaChvdXQpO1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBlZGdlcyA9IGVkZ2VzLmNvbmNhdChbbmV3IEVkZ2UobnVsbCwgcGhpLCBbXSldKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlZGdlcyA9IGVkZ2VzLmNvbmNhdChidWlsZChzZmEsIHNlZWRTdGF0ZSwgbmV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZWRnZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoZ3JlZWR5KSB7XG4gICAgICAgICAgICAgICAgbGV0IGVkZ2VzID0gYnVpbGQoc2ZhLCBzZWVkU3RhdGUsIHBoaSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZWsgPSAwOyBlayA8IGVkZ2VzLmxlbmd0aDsgZWsrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IGVkZ2VzW2VrXTtcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQgPSBzZWVkU3RhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRWRnZShudWxsLCBudWxsLCBbXSk7XG4gICAgICAgICAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtlXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFZGdlKG51bGwsIG51bGwsIFtdKTtcbiAgICAgICAgICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShlKTtcbiAgICAgICAgICAgICAgICBsZXQgZWRnZXMgPSBidWlsZChzZmEsIHNlZWRTdGF0ZSwgcGhpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlayA9IDA7IGVrIDwgZWRnZXMubGVuZ3RoOyBlaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlID0gZWRnZXNbZWtdO1xuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldCA9IHNlZWRTdGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuR1JPVVApIHtcbiAgICAgICAgbGV0IHMgPSBzZmEubmV3U3RhdGUoKTtcbiAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UobmV3IEVkZ2UocywgbnVsbCwgW10pKTtcbiAgICAgICAgY29uc3QgZXMgPSBidWlsZChzZmEsIHMsIHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICByZXR1cm4gZXM7XG4gICAgfSBlbHNlIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5DQVBUVVJFKSB7XG4gICAgICAgIGxldCBzID0gc2ZhLm5ld1N0YXRlKCk7XG4gICAgICAgIC8vaGFjazogd2Ugc3RvcmUgYSBsaW5rIGZyb20gdGhlIGVuZCB0byBpdHMgY29ycmVzcG9uZGluZyBzdGFydFxuICAgICAgICAvL3NvIHRoYXQgdGhlIGNvcnJlY3QgY2FwdHVyZUlEIGNhbiBiZSBwcm9wYWdhdGVkIHRvIHRoZSBcImVuZFwiXG4gICAgICAgIC8vZnJvbSB0aGUgXCJzdGFydFwiIGR1cmluZyBjb21waWxhdGlvblxuICAgICAgICBsZXQgY2FwdHVyZVN0YXJ0ID0geyB0eXBlOiBcInN0YXJ0LWNhcHR1cmVcIiwgZ3JvdXA6ICh0cmVlLnZhbHVlLmdyb3VwID09IFwiJGltcGxpY2l0XCIgPyBzLmlkIDogdHJlZS52YWx1ZS5ncm91cCkgfTtcbiAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UobmV3IEVkZ2UocywgbnVsbCwgW2NhcHR1cmVTdGFydF0pKTtcbiAgICAgICAgY29uc3QgZXMgPSBidWlsZChzZmEsIHMsIHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICBmb3IgKGxldCBlayA9IDA7IGVrIDwgZXMubGVuZ3RoOyBlaysrKSB7XG4gICAgICAgICAgICBsZXQgZSA9IGVzW2VrXTtcbiAgICAgICAgICAgIGUubGFiZWwucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJlbmQtY2FwdHVyZVwiLFxuICAgICAgICAgICAgICAgIGdyb3VwOiAodHJlZS52YWx1ZS5ncm91cCA9PSBcIiRpbXBsaWNpdFwiID8gcy5pZCA6IHRyZWUudmFsdWUuZ3JvdXApLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiBjYXB0dXJlU3RhcnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcztcbiAgICB9IGVsc2UgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkFMVEVSTkFUSU9OKSB7XG4gICAgICAgIGNvbnN0IGEgPSBzZmEubmV3U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYiA9IHNmYS5uZXdTdGF0ZSgpO1xuICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShuZXcgRWRnZShhLCBudWxsLCBbXSkpO1xuICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShuZXcgRWRnZShiLCBudWxsLCBbXSkpO1xuICAgICAgICBjb25zdCBhZXMgPSBidWlsZChzZmEsIGEsIHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICBjb25zdCBiZXMgPSBidWlsZChzZmEsIGIsIHRyZWUuY2hpbGRyZW5bMV0pO1xuICAgICAgICByZXR1cm4gYWVzLmNvbmNhdChiZXMpO1xuICAgIH0gZWxzZSBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuSU5URVJTRUNUSU9OKSB7XG4gICAgICAgIGNvbnN0IGEgPSBmcm9tUGFyc2VUcmVlKHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICBjb25zdCBiID0gZnJvbVBhcnNlVHJlZSh0cmVlLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgY29uc3QgYXhiID0gYS5pbnRlcnNlY3QoYik7XG4gICAgICAgIGNvbnN0IG9sZEFjY2VwdGluZyA9IGF4Yi5hY2NlcHRpbmdTdGF0ZXMuc2xpY2UoKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIlN1cHBvc2VkIGFjY2VwdGluZzpcIiwgb2xkQWNjZXB0aW5nLCBcImFjdHVhbFwiLFxuICAgICAgICAvLyAgICBheGIuZ2V0U3RhdGVzKCkuZmlsdGVyKChzKSA9PiBzLmlzQWNjZXB0aW5nKVxuICAgICAgICAvLyk7XG4gICAgICAgIGZvciAobGV0IHN0YXJ0ayA9IDA7IHN0YXJ0ayA8IGF4Yi5zdGFydFN0YXRlcy5sZW5ndGg7IHN0YXJ0aysrKSB7XG4gICAgICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShuZXcgRWRnZShheGIuc3RhcnRTdGF0ZXNbc3RhcnRrXSwgbnVsbCwgW10pKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3V0RWRnZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgYWNjayA9IDA7IGFjY2sgPCBvbGRBY2NlcHRpbmcubGVuZ3RoOyBhY2NrKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGFjYyA9IG9sZEFjY2VwdGluZ1thY2NrXTtcbiAgICAgICAgICAgIHNmYS5tYXJrTm9uQWNjZXB0aW5nKGFjYyk7XG4gICAgICAgICAgICAvL2ZpbmQgdGhlIHNlbGYtZWRnZSBhbmQgcmVwb2ludCBpdCB0b3dhcmRzIG5vdGhpbmcsIGluY2x1ZGluZyBpdCBpbiBvdXRFZGdlc1xuICAgICAgICAgICAgZm9yIChsZXQgZWkgPSAwOyBlaSA8IGFjYy5lZGdlcy5sZW5ndGg7IGVpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYWNjLmVkZ2VzW2VpXS50YXJnZXQgPT0gYWNjICYmICFhY2MuZWRnZXNbZWldLmZvcm11bGEpIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjLmVkZ2VzW2VpXS50YXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBvdXRFZGdlcy5wdXNoKGFjYy5lZGdlc1tlaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJQT1NUIHN1cHBvc2VkIGFjY2VwdGluZzpcIiwgc2ZhLmFjY2VwdGluZ1N0YXRlcywgXCJhY3R1YWxcIixcbiAgICAgICAgLy8gICAgc2ZhLmdldFN0YXRlcygpLmZpbHRlcigocykgPT4gcy5pc0FjY2VwdGluZylcbiAgICAgICAgLy8pO1xuXG4gICAgICAgIHJldHVybiBvdXRFZGdlcztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBcIk5vdCB5ZXQgaW1wbGVtZW50ZWRcIjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBwYXJzZVR5cGVzLCBpc1Byb3Bvc2l0aW9uYWwsIEJPVU5EX0lORklOSVRFIH0gZnJvbSBcIi4vcGFyc2VyXCI7XG5pbXBvcnQgeyBmcm9tUGFyc2VUcmVlLCByZXNldFN0YXRlSUQsIFNGQSwgU3RhdGUsIEVkZ2UgfSBmcm9tIFwiLi9zZmFcIjtcbmltcG9ydCB7IFRva2VuRGVmaW5pdGlvbiwgUGFyc2VUcmVlIH0gZnJvbSBcIi4vdHlwZXNcIjtcbnR5cGUgSnVtcCA9IHsgdHlwZTogXCJqdW1wXCIsIHRhcmdldDogbnVtYmVyIHwgbnVsbCwgaW5kZXg/OiBudW1iZXIsIHNvdXJjZT86IFwicm9vdFwiIHwgUGFyc2VUcmVlIH07XG50eXBlIFNwbGl0ID0geyB0eXBlOiBcInNwbGl0XCIsIGxlZnQ6IG51bWJlciwgcmlnaHQ6IG51bWJlciB8IG51bGwsIGluZGV4PzogbnVtYmVyLCBzb3VyY2U/OiBcInJvb3RcIiB8IFBhcnNlVHJlZSB9O1xudHlwZSBTdGFydCA9IHsgdHlwZTogXCJzdGFydFwiLCBncm91cDogc3RyaW5nIHwgbnVtYmVyLCBjYXB0dXJlSUQ6IG51bWJlciwgaW5kZXg/OiBudW1iZXIsIHNvdXJjZT86IFwicm9vdFwiIHwgUGFyc2VUcmVlIH07XG50eXBlIE1hdGNoID0geyB0eXBlOiBcIm1hdGNoXCIsIGluZGV4PzogbnVtYmVyLCBzb3VyY2U/OiBcInJvb3RcIiB8IFBhcnNlVHJlZSB9O1xudHlwZSBFbmQgPSB7IHR5cGU6IFwiZW5kXCIsIGdyb3VwOiBzdHJpbmcgfCBudW1iZXIsIGNhcHR1cmVJRDogbnVtYmVyLCBpbmRleD86IG51bWJlciwgc291cmNlPzogXCJyb290XCIgfCBQYXJzZVRyZWUgfTtcbnR5cGUgQ2hlY2sgPSB7IHR5cGU6IFwiY2hlY2tcIiwgZm9ybXVsYTogUGFyc2VUcmVlLCBpbmRleD86IG51bWJlciwgc291cmNlPzogXCJyb290XCIgfCBQYXJzZVRyZWUgfTtcbnR5cGUgSW5zdHJ1Y3Rpb24gPVxuICAgIENoZWNrIHxcbiAgICBKdW1wIHxcbiAgICBTcGxpdCB8XG4gICAgTWF0Y2ggfFxuICAgIFN0YXJ0IHxcbiAgICBFbmQ7XG5leHBvcnQgdHlwZSBQcm9ncmFtID0gQXJyYXk8SW5zdHJ1Y3Rpb24+O1xuXG5jb25zdCBERUJVR19NT0RFID0gZmFsc2U7XG5cbmV4cG9ydCBjbGFzcyBDb21waWxlciB7XG4gICAgY2FwdHVyZUlkeDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKF90b2tlbkRlZnM6IEFycmF5PFRva2VuRGVmaW5pdGlvbj4pIHtcbiAgICAgICAgdGhpcy5jYXB0dXJlSWR4ID0gMDtcbiAgICB9XG5cbiAgICBjb21waWxlVHJlZSh0cmVlOiBQYXJzZVRyZWUsIGlkeDogbnVtYmVyKTogUHJvZ3JhbSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coYGNvbXBpbGUgJHt0cmVlLnR5cGV9IGF0IGluZGV4ICR7aWR4fWApO1xuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuR1JPVVApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVUcmVlKHRyZWUuY2hpbGRyZW5bMF0sIGlkeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkNBUFRVUkUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVJRCA9IHRoaXMuY2FwdHVyZUlkeDtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gdHJlZS52YWx1ZS5ncm91cCA9PSBcIiRpbXBsaWNpdFwiID8gY2FwdHVyZUlEIDogdHJlZS52YWx1ZS5ncm91cDtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0geyB0eXBlOiBcInN0YXJ0XCIsIGdyb3VwOiBncm91cCwgY2FwdHVyZUlEOiBjYXB0dXJlSUQsIGluZGV4OiBpZHgsIHNvdXJjZTogdHJlZSB9O1xuICAgICAgICAgICAgdGhpcy5jYXB0dXJlSWR4Kys7XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbjogQXJyYXk8SW5zdHJ1Y3Rpb24+ID0gdGhpcy5jb21waWxlVHJlZSh0cmVlLmNoaWxkcmVuWzBdLCBpZHggKyAxKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImVuZFwiLFxuICAgICAgICAgICAgICAgIGdyb3VwOiBncm91cCxcbiAgICAgICAgICAgICAgICBjYXB0dXJlSUQ6IGNhcHR1cmVJRCxcbiAgICAgICAgICAgICAgICBpbmRleDogaWR4ICsgMSArIGNoaWxkcmVuLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHRyZWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gKFtzdGFydF0gYXMgUHJvZ3JhbSkuY29uY2F0KGNoaWxkcmVuKS5jb25jYXQoW2VuZF0gYXMgUHJvZ3JhbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJvcG9zaXRpb25hbCh0cmVlKSkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInRyZWUgXCIgKyBKU09OLnN0cmluZ2lmeSh0cmVlKSArIFwiOlwiICsgdHJlZS50eXBlICsgXCIgaXMgcHJvcG9zaXRpb25hbFwiKTtcbiAgICAgICAgICAgIHJldHVybiBbeyB0eXBlOiBcImNoZWNrXCIsIGZvcm11bGE6IHRyZWUsIGluZGV4OiBpZHgsIHNvdXJjZTogdHJlZSB9XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuQ09OQ0FURU5BVElPTikge1xuICAgICAgICAgICAgY29uc3QgYUlkeCA9IGlkeDtcbiAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLmNvbXBpbGVUcmVlKHRyZWUuY2hpbGRyZW5bMF0sIGFJZHgpO1xuICAgICAgICAgICAgY29uc3QgYklkeCA9IGlkeCArIGEubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMuY29tcGlsZVRyZWUodHJlZS5jaGlsZHJlblsxXSwgYklkeCk7XG4gICAgICAgICAgICByZXR1cm4gYS5jb25jYXQoYik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkFMVEVSTkFUSU9OKSB7XG4gICAgICAgICAgICAvLyBicmFuY2g7IGJ1dCBuZWVkIHRvIGNvbXBpbGUgbGVmdCBmaXJzdC5cbiAgICAgICAgICAgIC8vIGxlZnQ6XG4gICAgICAgICAgICBjb25zdCBhSWR4ID0gaWR4ICsgMTtcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSB0aGlzLmNvbXBpbGVUcmVlKHRyZWUuY2hpbGRyZW5bMF0sIGFJZHgpO1xuICAgICAgICAgICAgY29uc3QgYklkeCA9IGFJZHggKyBsZWZ0Lmxlbmd0aCArIDE7IC8vIExlYXZlIHJvb20gZm9yIGp1bXAgYWZ0ZXIgbGVmdFxuICAgICAgICAgICAgLy8gbm93IHdlIGNhbiBkZWZpbmUgYnJhbmNoLCB3aGljaCBnb2VzIGJlZm9yZSBsZWZ0OlxuICAgICAgICAgICAgY29uc3QgYnJhbmNoOiBQcm9ncmFtID0gW3sgdHlwZTogXCJzcGxpdFwiLCBsZWZ0OiBhSWR4LCByaWdodDogYklkeCwgaW5kZXg6IGlkeCwgc291cmNlOiB0cmVlIH1dO1xuICAgICAgICAgICAgLy8gcmlnaHQ6XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IHRoaXMuY29tcGlsZVRyZWUodHJlZS5jaGlsZHJlblsxXSwgYklkeCk7XG4gICAgICAgICAgICBjb25zdCBjSWR4ID0gYklkeCArIHJpZ2h0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGp1bXA6IFByb2dyYW0gPSBbeyB0eXBlOiBcImp1bXBcIiwgdGFyZ2V0OiBjSWR4LCBpbmRleDogYUlkeCArIGxlZnQubGVuZ3RoLCBzb3VyY2U6IHRyZWUgfV07XG4gICAgICAgICAgICByZXR1cm4gYnJhbmNoLmNvbmNhdChsZWZ0KS5jb25jYXQoanVtcCkuY29uY2F0KHJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuSU5URVJTRUNUSU9OKSB7XG4gICAgICAgICAgICBjb25zdCBhID0gZnJvbVBhcnNlVHJlZSh0cmVlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgIGNvbnN0IGIgPSBmcm9tUGFyc2VUcmVlKHRyZWUuY2hpbGRyZW5bMV0pO1xuICAgICAgICAgICAgY29uc3QgYXhiID0gYS5pbnRlcnNlY3QoYik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlU0ZBKGF4YiwgaWR4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuUkVQRVRJVElPTikge1xuICAgICAgICAgICAgY29uc3QgZ3JlZWR5ID0gdHJlZS52YWx1ZS5ncmVlZHk7XG4gICAgICAgICAgICBjb25zdCBtaW4gPSB0cmVlLnZhbHVlLmxvd2VyQm91bmQ7XG4gICAgICAgICAgICBjb25zdCBwaGkgPSB0cmVlLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgLy8gbWluIHJlcGV0aXRpb25zIG9mIHBoaVxuICAgICAgICAgICAgbGV0IHByZWZhY2UgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWluOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwaGlQZ20gPSB0aGlzLmNvbXBpbGVUcmVlKHBoaSwgaWR4KTtcbiAgICAgICAgICAgICAgICBpZHggKz0gcGhpUGdtLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBwcmVmYWNlLnB1c2goLi4ucGhpUGdtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmVlLnZhbHVlLnVwcGVyQm91bmQgIT0gQk9VTkRfSU5GSU5JVEUpIHtcbiAgICAgICAgICAgICAgICAvLyBNLU4gcmVwZXRpdGlvbnMgb2YgKHBoaT8pXG4gICAgICAgICAgICAgICAgY29uc3QgbWF4ID0gdHJlZS52YWx1ZS51cHBlckJvdW5kO1xuICAgICAgICAgICAgICAgIGxldCBvcHRpb25hbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0cyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBtaW47IGkgPCBtYXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHJvb20gZm9yIHNwbGl0IGxpLGxaXG4gICAgICAgICAgICAgICAgICAgIGlkeCA9IGlkeCArIDE7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIGp1bXAgdGFyZ2V0IGxpIGluIHRhcmdldHNcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0cy5wdXNoKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoaVBnbSA9IHRoaXMuY29tcGlsZVRyZWUocGhpLCBpZHgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHJvb20gZm9yIHBoaVBnbVxuICAgICAgICAgICAgICAgICAgICBpZHggKz0gcGhpUGdtLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxzLnB1c2gocGhpUGdtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9pZHggaXMgbm93IGp1c3QgcGFzdCB0aGUgZW5kIG9mIGFsbCB0aGUgXCJvcHRpb25hbHNcIi5cbiAgICAgICAgICAgICAgICBsZXQgcmVwZXRpdGlvbjogUHJvZ3JhbSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9uYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcGV0aXRpb24ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNwbGl0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAoZ3JlZWR5ID8gdGFyZ2V0c1tpXSA6IGlkeCksXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogKGdyZWVkeSA/IGlkeCA6IHRhcmdldHNbaV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRhcmdldHNbaV0gLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0cmVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXBldGl0aW9uLnB1c2goLi4uKG9wdGlvbmFsc1tpXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlZmFjZS5jb25jYXQocmVwZXRpdGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEE6IHNwbGl0IEIsIEM7IGJ1dCBtdXN0IGNvbXBpbGUgQiBmaXJzdCB0byBnZXQgbGFiZWwgZm9yIENcbiAgICAgICAgICAgICAgICBjb25zdCBhSWR4ID0gaWR4O1xuICAgICAgICAgICAgICAgIC8vIG1ha2Ugcm9vbSBmb3IgdGhlIHNwbGl0XG4gICAgICAgICAgICAgICAgY29uc3QgYklkeCA9IGFJZHggKyAxO1xuICAgICAgICAgICAgICAgIC8vIHRoZW4gcHV0IGluIEJcbiAgICAgICAgICAgICAgICBjb25zdCBiID0gdGhpcy5jb21waWxlVHJlZShwaGksIGJJZHgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGp1bXA6IFByb2dyYW0gPSBbeyB0eXBlOiBcImp1bXBcIiwgdGFyZ2V0OiBhSWR4LCBpbmRleDogYklkeCArIGIubGVuZ3RoLCBzb3VyY2U6IHRyZWUgfV07XG4gICAgICAgICAgICAgICAgLy8gdGhlbiBsYWJlbCBDXG4gICAgICAgICAgICAgICAgY29uc3QgY0lkeCA9IGJJZHggKyBiLmxlbmd0aCArIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgYnJhbmNoOiBQcm9ncmFtID0gW3tcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzcGxpdFwiLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAoZ3JlZWR5ID8gYklkeCA6IGNJZHgpLFxuICAgICAgICAgICAgICAgICAgICByaWdodDogKGdyZWVkeSA/IGNJZHggOiBiSWR4KSxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0cmVlXG4gICAgICAgICAgICAgICAgfV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWZhY2UuY29uY2F0KGJyYW5jaCkuY29uY2F0KGIpLmNvbmNhdChqdW1wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBjb21waWxlIFwiICsgSlNPTi5zdHJpbmdpZnkodHJlZSkpO1xuICAgIH1cblxuICAgIGNvbXBpbGVTRkEoc2ZhOiBTRkEsIGlkeDogbnVtYmVyKTogUHJvZ3JhbSB7XG4gICAgICAgIGxldCBzdGF0ZVN0YXJ0cyA9IHt9LCBlbmRKdW1wczogSnVtcFtdID0gW107XG4gICAgICAgIGxldCBwZ206IFByb2dyYW0gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZmEuc3RhcnRTdGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gc2ZhLnN0YXJ0U3RhdGVzW2ldO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRQZ20gPSB0aGlzLmNvbXBpbGVTRkFfKHN0YXJ0LCBpZHgsIHN0YXRlU3RhcnRzLCBlbmRKdW1wcyk7XG4gICAgICAgICAgICBwZ20gPSBwZ20uY29uY2F0KHN0YXJ0UGdtKTtcbiAgICAgICAgICAgIGlkeCArPSBzdGFydFBnbS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmRKdW1wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZW5kSnVtcHNbaV0udGFyZ2V0ID0gaWR4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwZ207XG4gICAgfVxuXG4gICAgY29tcGlsZVNGQV8oc3RhdGU6IFN0YXRlLCBpZHg6IG51bWJlciwgc3RhdGVTdGFydHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0sIGVuZEp1bXBzOiBKdW1wW10pOiBQcm9ncmFtIHtcbiAgICAgICAgaWYgKHN0YXRlLmlkIGluIHN0YXRlU3RhcnRzKSB7XG4gICAgICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgICAgICB0eXBlOiBcImp1bXBcIixcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHN0YXRlU3RhcnRzW3N0YXRlLmlkXSxcbiAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgIHNvdXJjZTogeyB0eXBlOiBcInN0YXRlXCIsIHZhbHVlOiBzdGF0ZS5pZCB9XG4gICAgICAgICAgICB9XSBhcyBQcm9ncmFtO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlU3RhcnRzW3N0YXRlLmlkXSA9IGlkeDtcbiAgICAgICAgaWYgKHN0YXRlLmVkZ2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUuaXNBY2NlcHRpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqdW1wOiBKdW1wID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImp1bXBcIixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHsgdHlwZTogXCJzdGF0ZVwiLCB2YWx1ZTogc3RhdGUuaWQsIGNoaWxkcmVuOiBbXSwgcmFuZ2U6IHsgc3RhcnQ6IC0xLCBlbmQ6IC0xIH0gfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZW5kSnVtcHMucHVzaChqdW1wKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2p1bXBdIGFzIFByb2dyYW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbXBpbGluZyBhbiBTRkEgc3RhdGUgd2l0aCBubyBvdXRnb2luZyBlZGdlc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwZ206IFByb2dyYW0gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUuZWRnZXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWRnZSA9IHN0YXRlLmVkZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2VTcGxpdDogU3BsaXQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3BsaXRcIixcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogaWR4ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGF0ZVwiLCB2YWx1ZTogYCR7c3RhdGUuaWR9LiR7aX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBlZGdlUGdtOiBQcm9ncmFtID0gKFtlZGdlU3BsaXRdIGFzIFByb2dyYW0pLmNvbmNhdChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21waWxlU0ZBX2VkZ2Uoc3RhdGUsIGVkZ2UsIGlkeCArIDEsIHN0YXRlU3RhcnRzLCBlbmRKdW1wcylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHBnbSA9IHBnbS5jb25jYXQoZWRnZVBnbSk7XG4gICAgICAgICAgICAgICAgaWR4ICs9IGVkZ2VQZ20ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGVkZ2VTcGxpdC5yaWdodCA9IGlkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVkZ2UgPSBzdGF0ZS5lZGdlc1tzdGF0ZS5lZGdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IGVkZ2VQZ20gPSB0aGlzLmNvbXBpbGVTRkFfZWRnZShzdGF0ZSwgZWRnZSwgaWR4LCBzdGF0ZVN0YXJ0cywgZW5kSnVtcHMpO1xuICAgICAgICAgICAgcmV0dXJuIHBnbS5jb25jYXQoZWRnZVBnbSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21waWxlU0ZBX2VkZ2Uoc3RhdGU6IFN0YXRlLCBlZGdlOiBFZGdlLCBpZHg6IG51bWJlciwgc3RhdGVTdGFydHM6IHsgW2lkOiBzdHJpbmddOiBudW1iZXIgfSwgZW5kSnVtcHM6IEp1bXBbXSk6IFByb2dyYW0ge1xuICAgICAgICAvL2FjY2VwdGluZyBzZWxmLWVkZ2VzIG5lZWQgdG8gYmUgdHJlYXRlZCBzcGVjaWFsbHkgc28gdGhleSBkb24ndCBqdW1wIHJpZ2h0IGJhY2tcbiAgICAgICAgLy90byB0aGUgcGFyZW50IHN0YXRlLlxuICAgICAgICBjb25zdCBlZGdlUGdtOiBQcm9ncmFtID0gdGhpcy5jb21waWxlU0ZBX2VkZ2VMYWJlbChzdGF0ZSwgZWRnZSwgaWR4KTtcbiAgICAgICAgaWR4ICs9IGVkZ2VQZ20ubGVuZ3RoO1xuICAgICAgICBpZiAoc3RhdGUuaXNBY2NlcHRpbmcgJiYgZWRnZS50YXJnZXQgPT0gc3RhdGUgJiYgIWVkZ2UuZm9ybXVsYSkge1xuICAgICAgICAgICAgY29uc3QganVtcDogSnVtcCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImp1bXBcIixcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlZGdlXCIsIHZhbHVlOiBgJHtzdGF0ZS5pZH0tPiR7ZWRnZS50YXJnZXQuaWR9YCxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbmRKdW1wcy5wdXNoKGp1bXApO1xuICAgICAgICAgICAgcmV0dXJuIGVkZ2VQZ20uY29uY2F0KFtqdW1wXSBhcyBQcm9ncmFtKTtcbiAgICAgICAgfSBlbHNlIGlmIChlZGdlLmZvcm11bGEpIHtcbiAgICAgICAgICAgIHJldHVybiBlZGdlUGdtLmNvbmNhdChbe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiY2hlY2tcIixcbiAgICAgICAgICAgICAgICBmb3JtdWxhOiBlZGdlLmZvcm11bGEsXG4gICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHsgdHlwZTogXCJlZGdlXCIsIHZhbHVlOiBgJHtzdGF0ZS5pZH0tPiR7ZWRnZS50YXJnZXQhLmlkfWAgfVxuICAgICAgICAgICAgfV0gYXMgUHJvZ3JhbSkuY29uY2F0KFxuICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZVNGQV8oZWRnZS50YXJnZXQhLCBpZHggKyAxLCBzdGF0ZVN0YXJ0cywgZW5kSnVtcHMpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGVkZ2VQZ20uY29uY2F0KFxuICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZVNGQV8oZWRnZS50YXJnZXQhLCBpZHgsIHN0YXRlU3RhcnRzLCBlbmRKdW1wcylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21waWxlU0ZBX2VkZ2VMYWJlbChzdGF0ZTogU3RhdGUsIGVkZ2U6IEVkZ2UsIGlkeDogbnVtYmVyKTogUHJvZ3JhbSB7XG4gICAgICAgIGxldCBwZ206IFByb2dyYW0gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlZGdlLmxhYmVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBsID0gZWRnZS5sYWJlbFtpXTtcbiAgICAgICAgICAgIGlmIChsLnR5cGUgPT0gXCJzdGFydC1jYXB0dXJlXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlSUQgPSB0aGlzLmNhcHR1cmVJZHg7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBsLmdyb3VwO1xuICAgICAgICAgICAgICAgIGwuY2FwdHVyZUlEID0gY2FwdHVyZUlEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0OiBTdGFydCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICBncm91cDogZ3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJRDogY2FwdHVyZUlELFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZWRnZVwiLCB2YWx1ZTogYCR7c3RhdGUuaWR9LT4ke2VkZ2UudGFyZ2V0IS5pZH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcHR1cmVJZHgrKztcbiAgICAgICAgICAgICAgICBwZ20ucHVzaChzdGFydCk7XG4gICAgICAgICAgICAgICAgaWR4Kys7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGwudHlwZSA9PSBcImVuZC1jYXB0dXJlXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlSUQgPSBsLnN0YXJ0LmNhcHR1cmVJRDtcbiAgICAgICAgICAgICAgICBjb25zdCBncm91cCA9IGwuZ3JvdXA7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kOiBFbmQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwOiBncm91cCxcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUlEOiBjYXB0dXJlSUQsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlZGdlXCIsIHZhbHVlOiBgJHtzdGF0ZS5pZH0tPiR7ZWRnZS50YXJnZXQhLmlkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHBnbS5wdXNoKGVuZCk7XG4gICAgICAgICAgICAgICAgaWR4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBnbTtcbiAgICB9XG5cbiAgICBjb21waWxlKHRyZWU6IFBhcnNlVHJlZSwgZGVidWc6IGJvb2xlYW4gPSBmYWxzZSk6IFByb2dyYW0ge1xuICAgICAgICAvLyBpZiAoIXRyZWUudHlwZSAmJiB0cmVlLnRyZWUgJiYgdHJlZS5lcnJvcnMgJiYgdHJlZS5yZW1haW5kZXIpIHtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAvLyBcIlJlY2VpdmVkIGEgUGFyc2VSZXN1bHQsIGJ1dCBleHBlY3RlZCBhIFBhcnNlVHJlZS5cIiArXG4gICAgICAgIC8vIFwiQ2FsbCBjb21waWxlKCkgd2l0aCB0aGUgLnRyZWUgZWxlbWVudCBvZiBcIiArIHRyZWVcbiAgICAgICAgLy8gKTtcbiAgICAgICAgLy8gfVxuICAgICAgICBpZiAoIXRoaXMudmFsaWRhdGVQYXJzZVRyZWUodHJlZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcnNlIHRyZWUgZGlkIG5vdCByZXByZXNlbnQgYSB2YWxpZCBwcm9ncmFtXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJlc2V0U3RhdGVJRCgpO1xuICAgICAgICB0aGlzLmNhcHR1cmVJZHggPSAwO1xuICAgICAgICAvLyBXZSBwcmVmYWNlIGV2ZXJ5IHByb2dyYW0gd2l0aCBcInRydWUgLi5cIiBzbyB0aGF0IGFsbCBQbGF5c3BlY3MgYXJlIGVmZmVjdGl2ZWx5IHN0YXJ0LWFuY2hvcmVkLlxuICAgICAgICAvLyBUaGlzIGlzIGFzIHBlciBodHRwczovL3N3dGNoLmNvbS9+cnNjL3JlZ2V4cC9yZWdleHAyLmh0bWxcbiAgICAgICAgY29uc3QgcHJlZmFjZTogUHJvZ3JhbSA9IFtcbiAgICAgICAgICAgIHsgdHlwZTogXCJzcGxpdFwiLCBsZWZ0OiAzLCByaWdodDogMSwgaW5kZXg6IDAsIHNvdXJjZTogXCJyb290XCIgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrXCIsXG4gICAgICAgICAgICAgICAgZm9ybXVsYToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZVR5cGVzLlRSVUUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiB7IHN0YXJ0OiAwLCBlbmQ6IDAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5kZXg6IDEsXG4gICAgICAgICAgICAgICAgc291cmNlOiBcInJvb3RcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgdHlwZTogXCJqdW1wXCIsIHRhcmdldDogMCwgaW5kZXg6IDIsIHNvdXJjZTogXCJyb290XCIgfSxcbiAgICAgICAgICAgIHsgdHlwZTogXCJzdGFydFwiLCBncm91cDogXCIkcm9vdFwiLCBjYXB0dXJlSUQ6IC0xLCBpbmRleDogMywgc291cmNlOiBcInJvb3RcIiB9XG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGJvZHkgPSB0aGlzLmNvbXBpbGVUcmVlKHRyZWUsIHByZWZhY2UubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcHJlZmFjZS5jb25jYXQoYm9keSkuY29uY2F0KFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImVuZFwiLFxuICAgICAgICAgICAgICAgIGdyb3VwOiBcIiRyb290XCIsXG4gICAgICAgICAgICAgICAgY2FwdHVyZUlEOiAtMSxcbiAgICAgICAgICAgICAgICBpbmRleDogcHJlZmFjZS5sZW5ndGggKyBib2R5Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IFwicm9vdFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibWF0Y2hcIixcbiAgICAgICAgICAgICAgICBpbmRleDogcHJlZmFjZS5sZW5ndGggKyBib2R5Lmxlbmd0aCArIDEsXG4gICAgICAgICAgICAgICAgc291cmNlOiBcInJvb3RcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdKTtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlUHJvZ3JhbShyZXN1bHQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgXCJFcnJvciBjb21waWxpbmcgdHJlZSBcIiArIEpTT04uc3RyaW5naWZ5KHRyZWUpICsgXCIgaW50byByZXN1bHQgXCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVidWcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdFtpXS5zb3VyY2U7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdFtpXS5pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHZhbGlkYXRlUGFyc2VUcmVlKHBhcnNlVHJlZTogUGFyc2VUcmVlKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghREVCVUdfTU9ERSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZW5zdXJlIG5vICR7fSB1bmRlcm5lYXRoIGEgcHJvcG9zaXRpb25cbiAgICAgICAgaWYgKHRoaXMuYW55Q2FwdHVyZXNJbnNpZGVQcm9wb3NpdGlvbnMocGFyc2VUcmVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRvZG86IG90aGVyIHNhbml0eSBjaGVja3NcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgYW55Q2FwdHVyZXNJbnNpZGVQcm9wb3NpdGlvbnMocGFyZW50OiBQYXJzZVRyZWUpIHtcbiAgICAgICAgY29uc3QgcHJvcCA9IGlzUHJvcG9zaXRpb25hbChwYXJlbnQpO1xuICAgICAgICBmb3IgKGxldCBjaSA9IDA7IGNpIDwgcGFyZW50LmNoaWxkcmVuLmxlbmd0aDsgY2krKykge1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBwYXJlbnQuY2hpbGRyZW5bY2ldO1xuICAgICAgICAgICAgaWYgKHByb3AgJiYgY2hpbGQudHlwZSA9PSBwYXJzZVR5cGVzLkNBUFRVUkUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQ2FuJ3QgcHV0IGEgY2FwdHVyaW5nIGdyb3VwIGluc2lkZSBvZiBhIHByb3Bvc2l0aW9uYWwgdGVybTogJHtzdHJpbmdpZnlGb3JtdWxhKHBhcmVudCl9IWApO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYW55Q2FwdHVyZXNJbnNpZGVQcm9wb3NpdGlvbnMoY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhbGlkYXRlUHJvZ3JhbShwZ206IFByb2dyYW0pOiBib29sZWFuIHtcbiAgICAgICAgLy8gdG9kbzogdmFsaWRhdGUgcHJvZ3JhbXMgYWdhaW5zdCBtb3JlIGJhc2ljIHNhbml0eSBjaGVja3MuXG4gICAgICAgIC8vZW5zdXJlIGVhY2ggaW5zdHJ1Y3Rpb24ncyBpbmRleCBpcyBpdHMgaW5kZXggaW4gcGdtXG4gICAgICAgIC8vZW5zdXJlIG5vIHNwbGl0IG9yIGp1bXAgZ29lcyBiZXlvbmQgZW5kIG9mIHByb2dyYW1cbiAgICAgICAgLy8uLi5cbiAgICAgICAgaWYgKCFERUJVR19NT0RFKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBnbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaW5zdHIgPSBwZ21baV07XG4gICAgICAgICAgICAvL2lzIGl0cyBpbmRleCBjb3JyZWN0P1xuICAgICAgICAgICAgaWYgKGluc3RyLmluZGV4ICE9PSBpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCYWQgY29kZSBnZW5lcmF0aW9uOiR7aW5zdHIuaW5kZXh9ICE9ICR7aX0gZm9yICR7c3RyaW5naWZ5KFtpbnN0cl0pfSBpbiAke3N0cmluZ2lmeShwZ20pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlYWNoYWJsZSA9IHRoaXMucmVhY2hhYmxlSW5zdHJ1Y3Rpb25zKHBnbSwgMCwge30pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBnbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFyZWFjaGFibGVbaV0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhZCBjb2RlIGdlbmVyYXRpb246JHtpfSBub3QgcmVhY2hhYmxlIGZvciAke3N0cmluZ2lmeShbcGdtW2ldXSl9IGluICR7c3RyaW5naWZ5KHBnbSl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmVhY2hhYmxlSW5zdHJ1Y3Rpb25zKHBnbTogUHJvZ3JhbSwgaTA6IG51bWJlciwgc2VlbjogeyBbcG9pbnQ6IG51bWJlcl06IGJvb2xlYW4gfSk6IHsgW3BvaW50OiBudW1iZXJdOiBib29sZWFuIH0ge1xuICAgICAgICAvL2EgbG9vcCwgb3IgZWxzZSBvdXQgb2YgcHJvZ3JhbSBjb2RlXG4gICAgICAgIGlmICgoaTAgaW4gc2VlbikgfHwgaTAgPj0gcGdtLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlZW47XG4gICAgICAgIH1cbiAgICAgICAgLy9tYXJrIGkwIGFzIHNlZW5cbiAgICAgICAgc2VlbltpMF0gPSB0cnVlO1xuICAgICAgICBjb25zdCBvdGhlciA9IHBnbVtpMF07XG4gICAgICAgIC8vZm9sbG93IGluZGlyZWN0aW9uIHZpYSByZWN1cnNpdmUgc2VhcmNoLCBrZWVwaW5nIHRyYWNrIG9mIHNlZW4gbG9jYXRpb25zXG4gICAgICAgIGlmIChvdGhlci50eXBlID09IFwic3BsaXRcIikge1xuICAgICAgICAgICAgbGV0IHNlZW5MZWZ0ID0gdGhpcy5yZWFjaGFibGVJbnN0cnVjdGlvbnMocGdtLCBvdGhlci5sZWZ0LCBzZWVuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWNoYWJsZUluc3RydWN0aW9ucyhwZ20sIG90aGVyLnJpZ2h0ISwgc2VlbkxlZnQpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyLnR5cGUgPT0gXCJqdW1wXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWNoYWJsZUluc3RydWN0aW9ucyhwZ20sIG90aGVyLnRhcmdldCEsIHNlZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9mb3Igbm9uLWluZGlyZWN0IGluc3RydWN0aW9ucywganVzdCBpbmNyZW1lbnQgaTAgYW5kIG1vdmUgb25cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWNoYWJsZUluc3RydWN0aW9ucyhwZ20sIGkwICsgMSwgc2Vlbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlDdXN0b20oZm9ybXVsYTogUGFyc2VUcmVlKTogc3RyaW5nIHtcbiAgICBjb25zdCB2YWx1ZSA9IGZvcm11bGEudmFsdWUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBmb3JtdWxhLnZhbHVlLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBmb3JtdWxhLmNoaWxkcmVuICYmIGZvcm11bGEuY2hpbGRyZW4ubGVuZ3RoID9cbiAgICAgICAgKGZvcm11bGEuY2hpbGRyZW4ubWFwKChjKSA9PiBzdHJpbmdpZnlGb3JtdWxhKGMpKSkuam9pbihcIixcIikgOlxuICAgICAgICBcIlwiO1xuICAgIHJldHVybiBgJHtmb3JtdWxhLnR5cGV9KCR7dmFsdWV9LCR7Y2hpbGRyZW59KWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGE6IFBhcnNlVHJlZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChmb3JtdWxhLnR5cGUpIHtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLlRSVUU6XG4gICAgICAgICAgICByZXR1cm4gXCJ0cnVlXCI7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5GQUxTRTpcbiAgICAgICAgICAgIHJldHVybiBcImZhbHNlXCI7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5TVEFSVDpcbiAgICAgICAgICAgIHJldHVybiBcInN0YXJ0XCI7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5FTkQ6XG4gICAgICAgICAgICByZXR1cm4gXCJlbmRcIjtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkFORDpcbiAgICAgICAgICAgIHJldHVybiBgJHtzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGEuY2hpbGRyZW5bMF0pfSAmICR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzFdKX1gO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuT1I6XG4gICAgICAgICAgICByZXR1cm4gYCR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzBdKX0gfCAke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblsxXSl9YDtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLk5PVDpcbiAgICAgICAgICAgIHJldHVybiBgbm90ICR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzBdKX1gO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuR1JPVVA6XG4gICAgICAgICAgICByZXR1cm4gYCgke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblswXSl9KWA7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5DQVBUVVJFOlxuICAgICAgICAgICAgcmV0dXJuIGAkJHtmb3JtdWxhLnZhbHVlLmNhcHR1cmVJRH06JHtmb3JtdWxhLnZhbHVlLmdyb3VwfSgke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblswXSl9KWA7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RyaW5naWZ5Q3VzdG9tKGZvcm11bGEpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeShjb2RlOiBQcm9ncmFtKTogc3RyaW5nIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGluc3RyID0gY29kZVtpXTtcbiAgICAgICAgbGV0IGluc3RyU3RyID0gYCR7aX06JHtpbnN0ci50eXBlfWA7XG4gICAgICAgIHN3aXRjaCAoaW5zdHIudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInNwbGl0XCI6XG4gICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gYCAke2luc3RyLmxlZnR9ICR7aW5zdHIucmlnaHR9YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJqdW1wXCI6XG4gICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gYCAke2luc3RyLnRhcmdldH1gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNoZWNrXCI6XG4gICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gXCIgXCIgKyBzdHJpbmdpZnlGb3JtdWxhKGluc3RyLmZvcm11bGEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gYCAke2luc3RyLmdyb3VwfSAoJHtpbnN0ci5jYXB0dXJlSUR9KWA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibWF0Y2hcIjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIGluc3RydWN0aW9uIFwiICsgaW5zdHIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnN0ci5zb3VyY2UpIHtcbiAgICAgICAgICAgIHZhciBzcmMgPSBpbnN0ci5zb3VyY2UhO1xuICAgICAgICAgICAgaWYgKHNyYyA9PSBcInJvb3RcIikge1xuICAgICAgICAgICAgICAgIGluc3RyU3RyICs9IFwiICBcXHRcXHQocm9vdClcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RyLnR5cGUgPT0gXCJjaGVja1wiICYmIFwicmFuZ2VcIiBpbiBzcmMpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gYFxcdChjaC4gJHtzcmMucmFuZ2Uuc3RhcnR9LSR7c3JjLnJhbmdlLmVuZH0pYDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnN0clN0ciArPSBgXFx0XFx0KCR7c3JjLnR5cGV9ICR7SlNPTi5zdHJpbmdpZnkoc3JjLnZhbHVlKX0pYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0LnB1c2goaW5zdHJTdHIpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oXCJcXG5cIik7XG59XG4iLCJpbXBvcnQgeyBQbGF5c3BlY3NDb250ZXh0IH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHBhcnNlVHlwZXMsIFBhcnNlciwgUGFyc2VSZXN1bHQgfSBmcm9tIFwiLi9wYXJzZXJcIjtcbmltcG9ydCB7IFBhcnNlVHJlZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBDb21waWxlciwgUHJvZ3JhbSB9IGZyb20gXCIuL2NvbXBpbGVyXCI7XG5leHBvcnQgY2xhc3MgUGxheXNwZWM8VHJhY2UsIFN0YXRlPiB7XG4gICAgY29udGV4dDogUGxheXNwZWNzQ29udGV4dDxUcmFjZSwgU3RhdGU+O1xuICAgIHNwZWM6IHN0cmluZztcbiAgICBwYXJzZVJlc3VsdDogUGFyc2VSZXN1bHQ7XG4gICAgcHJvZ3JhbTogUHJvZ3JhbTtcbiAgICBjb25zdHJ1Y3RvcihzcGVjOiBzdHJpbmcsIGNvbnRleHQ6IFBsYXlzcGVjc0NvbnRleHQ8VHJhY2UsIFN0YXRlPiwgZGVidWc6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnNwZWMgPSBzcGVjO1xuICAgICAgICBjb25zdCBwYXJzZXIgPSBuZXcgUGFyc2VyKGNvbnRleHQudG9rZW5zKTtcbiAgICAgICAgY29uc3QgY29tcGlsZXIgPSBuZXcgQ29tcGlsZXIoY29udGV4dC50b2tlbnMpO1xuICAgICAgICB0aGlzLnBhcnNlUmVzdWx0ID0gcGFyc2VyLnBhcnNlKHNwZWMpO1xuICAgICAgICBpZiAodGhpcy5wYXJzZVJlc3VsdC5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZWQgd2l0aCBlcnJvcnM6XCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnBhcnNlUmVzdWx0LmVycm9ycykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IGNvbXBpbGVyLmNvbXBpbGUodGhpcy5wYXJzZVJlc3VsdC50cmVlLCBkZWJ1Zyk7XG4gICAgfVxuICAgIGdldCB0cmFjZUFQSSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC50cmFjZTtcbiAgICB9XG4gICAgZ2V0IGNoZWNrQVBJKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmNoZWNrcztcbiAgICB9XG4gICAgY2hlY2sodHJhY2U6IFRyYWNlLCBzdGF0ZTogU3RhdGUsIGlkeDogbnVtYmVyLCBmb3JtdWxhOiBQYXJzZVRyZWUpOiBhbnkge1xuICAgICAgICB2YXIgbGVmdCwgcmlnaHQ7XG4gICAgICAgIHN3aXRjaCAoZm9ybXVsYS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuVFJVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5GQUxTRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuU1RBUlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkeCA9PSAwO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkVORDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFjZUFQSS5pc0F0RW5kKHRyYWNlKTtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5BTkQ6XG4gICAgICAgICAgICAgICAgbGVmdCA9IHRoaXMuY2hlY2sodHJhY2UsIHN0YXRlLCBpZHgsIGZvcm11bGEuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgICAgIHJpZ2h0ID0gdGhpcy5jaGVjayh0cmFjZSwgc3RhdGUsIGlkeCwgZm9ybXVsYS5jaGlsZHJlblsxXSk7XG4gICAgICAgICAgICAgICAgaWYgKGxlZnQgJiYgcmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbm9kZTogZm9ybXVsYSwgbGVmdDogbGVmdCwgcmlnaHQ6IHJpZ2h0IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5PUjpcbiAgICAgICAgICAgICAgICBsZWZ0ID0gdGhpcy5jaGVjayh0cmFjZSwgc3RhdGUsIGlkeCwgZm9ybXVsYS5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICAgICAgcmlnaHQgPSB0aGlzLmNoZWNrKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgICAgICAgICBpZiAobGVmdCB8fCByaWdodCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBub2RlOiBmb3JtdWxhLCBsZWZ0OiBsZWZ0LCByaWdodDogcmlnaHQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLk5PVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuY2hlY2sodHJhY2UsIHN0YXRlLCBpZHgsIGZvcm11bGEuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkdST1VQOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tBUElbZm9ybXVsYS50eXBlXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja0FQSVtmb3JtdWxhLnR5cGVdKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgcHJvcG9zaXRpb25hbCBmb3JtdWxhXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG1hdGNoKHRyYWNlOiBUcmFjZSwgcHJlc2VydmVTdGF0ZXM6IGJvb2xlYW4gPSBmYWxzZSk6IFBsYXlzcGVjUmVzdWx0PFRyYWNlLCBTdGF0ZT4gfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIChuZXcgUGxheXNwZWNSZXN1bHQoe1xuICAgICAgICAgICAgc3BlYzogdGhpcyxcbiAgICAgICAgICAgIHByZXNlcnZlU3RhdGVzXG4gICAgICAgIH0sIHBsYXlzcGVjUmVzdWx0U3RhdGVJbml0KHRyYWNlKSwgdW5kZWZpbmVkKSkubmV4dCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcGxheXNwZWNSZXN1bHRTdGF0ZUluaXQ8VD4odHJhY2U6IFQpOiBQbGF5c3BlY1Jlc3VsdFN0YXRlPFQ+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICAvLyBXZSBjYW4gdXNlIHBsYWluIGFycmF5cyBmb3IgdGhlIHByaW9yaXR5IHF1ZXVlIGZvciBub3csIHNpbmNlIHdlIGtub3cgdGhyZWFkcyB3aWxsIGJlIGFkZGVkXG4gICAgICAgIC8vIGluIHByaW9yaXR5IG9yZGVyLiBUaGlzIGFsc28gbWVhbnMgd2UgbmV2ZXIgc2hpZnQsIGJ1dCBpbmNyZW1lbnQgaSBnb2luZyB1cCB0aHJvdWdoIHRoZSBxdWV1ZS5cbiAgICAgICAgcXVldWU6IG5ldyBOb25TaHJpbmtpbmdBcnJheTxUaHJlYWQ+KCksXG4gICAgICAgIG5leHRRdWV1ZTogbmV3IE5vblNocmlua2luZ0FycmF5PFRocmVhZD4oKSxcbiAgICAgICAgdGhyZWFkczogW10sXG4gICAgICAgIC8vIFRoaXMgTm9uUmVwbGFjaW5nSGFzaE1hcCB3aWxsIGhhdmUgbnVtYmVyIGtleXMgc28gaXQgY2FuIHVzZSBkZWZhdWx0IGhhc2gvZXF1aXZcbiAgICAgICAgbGl2ZVNldDogbmV3IE5vblJlcGxhY2luZ0hhc2hNYXA8bnVtYmVyLCBUaHJlYWRTdGF0ZT4oXG4gICAgICAgICAgICAoKGEsIGIpID0+IGEgPT0gYiksXG4gICAgICAgICAgICAoKGEpID0+IGEpXG4gICAgICAgICksXG4gICAgICAgIG1heFRocmVhZElEOiAwLFxuICAgICAgICAvLyBXZSBzdGFydCBhdCAtMSBzaW5jZSB0aGUgaW5pdGlhbCBhY3Rpb25zIG9mIHRoZSBpbml0aWFsIHRocmVhZFxuICAgICAgICAvLyBzaG91bGQgaGFwcGVuIGJlZm9yZSB0aGUgdHJhY2UgcmVhY2hlcyBpbmRleCAwLiBUaGlzIG1haW5seSBlbnN1cmVzIHRoYXRcbiAgICAgICAgLy8gY2FwdHVyZSBncm91cHMgbGluZSB1cCBjb3JyZWN0bHkuXG4gICAgICAgIGluZGV4OiAtMSxcbiAgICAgICAgcGFzdEVuZDogZmFsc2UsXG4gICAgICAgIHRyYWNlOiB0cmFjZSxcbiAgICAgICAgLy8gU2FtZSBoZXJlIGZvciBtYXRjaGVzLCBhbHdheXMgYWRkZWQgaW4gcHJpb3JpdHkgb3JkZXIgLS0gYnV0IGNhbiB1c2UgYSByZWd1bGFyIGFycmF5XG4gICAgICAgIG1hdGNoUXVldWU6IG5ldyBQcmlvcml0eVF1ZXVlKFxuICAgICAgICAgICAgKG06IE1hdGNoKSA9PiBtLnByaW9yaXR5XG4gICAgICAgICksXG4gICAgICAgIG1hdGNoU2V0OiBuZXcgTm9uUmVwbGFjaW5nSGFzaE1hcChtYXRjaEVxdWl2Rm4sIG1hdGNoSGFzaEZuKSxcbiAgICAgICAgbGFzdE1hdGNoUHJpb3JpdHk6IDBcbiAgICB9O1xufVxuXG5jbGFzcyBUaHJlYWQge1xuICAgIGlkOiBudW1iZXI7XG4gICAgcGM6IG51bWJlcjtcbiAgICBwcmlvcml0eTogbnVtYmVyO1xuICAgIG1hdGNoZXM6IE1hdGNoW107XG4gICAgY29uc3RydWN0b3IoaWQ6IG51bWJlciwgcGM6IG51bWJlciwgcHJpb3JpdHk6IG51bWJlciwgbWF0Y2hlczogQXJyYXk8TWF0Y2g+KSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbiAgICAgICAgdGhpcy5wYyA9IHBjO1xuICAgICAgICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgIC8vbWF0Y2ggc2hhcmluZzogaW5zdGVhZCBzZXQgdGhpcy5tYXRjaGVzIHRvIG1hdGNoZXMgYW5kIHNldCBzaGFyZWRNYXRjaGVzIHRvIHRydWVcbiAgICAgICAgdGhpcy5tYXRjaGVzID0gbWF0Y2hlcy5tYXAoZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIGxldCBtMiA9IGNsb25lTWF0Y2gobSk7XG4gICAgICAgICAgICBtMi5wcmlvcml0eSA9IE1hdGgubWF4KHByaW9yaXR5LCBtLnByaW9yaXR5KTtcbiAgICAgICAgICAgIHJldHVybiBtMjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZXF1YWxzKHQyOiBUaHJlYWQpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGMgPT0gdDIucGM7XG4gICAgfVxuXG4gICAgaGFzaCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5wYztcbiAgICB9XG5cbiAgICBtZXJnZVRocmVhZChvdGhlcjogVGhyZWFkKSB7XG4gICAgICAgIC8vIE1hdGNoIHNoYXJpbmc6IGlmIG1hdGNoZXMgYXJlIHNoYXJlZCwgcmVwbGFjZSBtYXRjaGVzIGxpc3Qgd2l0aCBzbGljZSBvZiBtYXRjaGVzIGxpc3QsXG4gICAgICAgIC8vIGFuZCBpbnNlcnQgZWl0aGVyIGNsb25lcyBvZiBvdGhlcidzIG1hdGNoZXMgKGlmIG90aGVyIGlzIHNoYXJpbmcgbWF0Y2hlcykgb3Igb3RoZXIncyBtYXRjaGVzIGRpcmVjdGx5XG4gICAgICAgIC8vIEFsc28gdXBkYXRlIHByaW9yaXR5IG9mIG5ldyBtYXRjaGVzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3RoZXIubWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMubWF0Y2hlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaEVxdWl2Rm4odGhpcy5tYXRjaGVzW2pdLCBvdGhlci5tYXRjaGVzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2ggPSBjbG9uZU1hdGNoKG90aGVyLm1hdGNoZXNbaV0pO1xuICAgICAgICAgICAgICAgIG1hdGNoLnByaW9yaXR5ID0gTWF0aC5tYXgodGhpcy5wcmlvcml0eSwgdGhpcy5tYXRjaGVzW2ldLnByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoZXMucHVzaChtYXRjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWVyZ2UgYW55IG90aGVyIHN0YXRlXG4gICAgfVxuXG4gICAgaGFzT3Blbk1hdGNoKCk6IGJvb2xlYW4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMubWF0Y2hlc1tpXS5pbnN0cnVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdXNoTWF0Y2hJbnN0cnVjdGlvbihpbnN0cjogTWF0Y2hJbnN0cnVjdGlvbikge1xuICAgICAgICAvLyBNYXRjaCBzaGFyaW5nOiBpZiBtYXRjaGVzIGFyZSBzaGFyZWQsIHJlcGxhY2UgbWF0Y2hlcyBsaXN0IHdpdGggYSBuZXcgbGlzdCBjb250YWluaW5nIGNsb25lcyBvZiBtYXRjaGVzXG4gICAgICAgIC8vIEFsc28gdXBkYXRlIHByaW9yaXR5IG9mIG1hdGNoZXNcbiAgICAgICAgLy8gQW5kIHNldCBzaGFyZWRNYXRjaGVzIHRvIGZhbHNlXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm1hdGNoZXNbaV0uaW5zdHJ1Y3Rpb25zLnB1c2goaW5zdHIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICAvLyBMZXQgbWF0Y2hlcywgYW5kIHRodXMga2VwdCBzdGF0ZXMsIGJlIGdhcmJhZ2UgY29sbGVjdGVkXG4gICAgICAgIHRoaXMubWF0Y2hlcyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgSXRlbTxLLCBWPiB7XG4gICAga2V5OiBLO1xuICAgIHZhbDogVjtcbiAgICBjb25zdHJ1Y3RvcihrOiBLLCB2OiBWKSB7XG4gICAgICAgIHRoaXMua2V5ID0gaztcbiAgICAgICAgdGhpcy52YWwgPSB2O1xuICAgIH1cbn1cblxuY2xhc3MgTm9uUmVwbGFjaW5nSGFzaE1hcDxLLCBWPiB7XG4gICAgZXF1aXY6IChhOiBLLCBiOiBLKSA9PiBib29sZWFuO1xuICAgIGhhc2g6IChhOiBLKSA9PiBudW1iZXI7XG4gICAgY29sbDogSXRlbTxLLCBWPltdW107XG4gICAgbGVuZ3RoOiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGVxdWl2Rm46IChhOiBLLCBiOiBLKSA9PiBib29sZWFuLFxuICAgICAgICBoYXNoRm46IChhOiBLKSA9PiBudW1iZXIsXG4gICAgICAgIGJ1Y2tldENvdW50OiBudW1iZXIgPSAxMDAwKSB7XG4gICAgICAgIHRoaXMuZXF1aXYgPSBlcXVpdkZuO1xuICAgICAgICB0aGlzLmhhc2ggPSBoYXNoRm47XG4gICAgICAgIHRoaXMuY29sbCA9IG5ldyBBcnJheShidWNrZXRDb3VudCk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBidWNrZXRGaW5kKGJ1Y2tldDogSXRlbTxLLCBWPltdLCBvYmo6IEspIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWNrZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVxdWl2ID8gdGhpcy5lcXVpdihidWNrZXRbaV0ua2V5LCBvYmopIDogYnVja2V0W2ldLmtleSA9PSBvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVja2V0W2ldLnZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIElmIHZhbCBpcyBub3QgcHJvdmlkZWQsIGl0IGRlZmF1bHRzIHRvIHRydWVcbiAgICAvLyBVbmxpa2UgYSByZWd1bGFyIG1hcCwgdGhpcyB3aWxsIE5PVCByZXBsYWNlIGV4aXN0aW5nIGtleXMhXG4gICAgcHVzaChvYmo6IEssIHZhbDogVikge1xuICAgICAgICBjb25zdCBoYXNoQ29kZSA9IHRoaXMuaGFzaChvYmopICUgdGhpcy5jb2xsLmxlbmd0aDtcbiAgICAgICAgbGV0IGJ1Y2tldCA9IHRoaXMuY29sbFtoYXNoQ29kZV07XG4gICAgICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxbaGFzaENvZGVdID0gW3sga2V5OiBvYmosIHZhbDogdmFsIH1dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVja2V0RmluZChidWNrZXQsIG9iaikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnVja2V0LnB1c2goeyBrZXk6IG9iaiwgdmFsOiB2YWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZ2V0KG9iajogSyk6IFYgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYXNoQ29kZSA9IHRoaXMuaGFzaChvYmopICUgdGhpcy5jb2xsLmxlbmd0aDtcbiAgICAgICAgbGV0IGJ1Y2tldCA9IHRoaXMuY29sbFtoYXNoQ29kZV07XG4gICAgICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJ1Y2tldEZpbmQoYnVja2V0LCBvYmopO1xuICAgIH1cblxuICAgIGNsZWFyKCk6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy90b2RvOiBnZW5lcmF0ZSBsZXNzIGdhcmJhZ2U/XG4gICAgICAgICAgICB0aGlzLmNvbGxbaV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgY29udGFpbnMob2JqOiBLKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFzaENvZGUgPSB0aGlzLmhhc2gob2JqKSAlIHRoaXMuY29sbC5sZW5ndGg7XG4gICAgICAgIGxldCBidWNrZXQgPSB0aGlzLmNvbGxbaGFzaENvZGVdO1xuICAgICAgICBpZiAoIWJ1Y2tldCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJ1Y2tldEZpbmQoYnVja2V0LCBvYmopICE9PSB1bmRlZmluZWQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYXNoSW50KGg6IG51bWJlciwgaW50MzI6IG51bWJlcik6IG51bWJlciB7XG4gICAgaCArPSAoaW50MzIpIHwgMDtcbiAgICBoICs9IChoIDw8IDEwKSB8IDA7XG4gICAgaCBePSAoaCA+PiA2KSB8IDA7XG4gICAgaCArPSAoKGludDMyID4+IDgpKSB8IDA7XG4gICAgaCArPSAoaCA8PCAxMCkgfCAwO1xuICAgIGggXj0gKGggPj4gNikgfCAwO1xuICAgIGggKz0gKChpbnQzMiA+PiAxNikpIHwgMDtcbiAgICBoICs9IChoIDw8IDEwKSB8IDA7XG4gICAgaCBePSAoaCA+PiA2KSB8IDA7XG4gICAgaCArPSAoKGludDMyID4+IDI0KSkgfCAwO1xuICAgIGggKz0gKGggPDwgMTApIHwgMDtcbiAgICBoIF49IChoID4+IDYpIHwgMDtcbiAgICByZXR1cm4gaDtcbn1cbmZ1bmN0aW9uIGZpbmFsaXplSGFzaChoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGggKz0gKGggPDwgMykgfCAwO1xuICAgIGggXj0gKGggPj4gMTEpIHwgMDtcbiAgICBoICs9IChoIDw8IDE1KSB8IDA7XG4gICAgcmV0dXJuIGg7XG59XG5mdW5jdGlvbiBoYXNoTnVtYmVycyguLi5udW1iZXJzOiBudW1iZXJbXSk6IG51bWJlciB7XG4gICAgbGV0IGggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBoID0gaGFzaEludChoLCBudW1iZXJzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbmFsaXplSGFzaChoKTtcbn1cbnR5cGUgTWF0Y2hTdGFydEVuZCA9IHtcbiAgICB0eXBlOiBcInN0YXJ0XCIgfCBcImVuZFwiLFxuICAgIGdyb3VwOiBzdHJpbmcgfCBudW1iZXIsXG4gICAgZ3JvdXBJbmRleDogbnVtYmVyLFxuICAgIGluZGV4OiBudW1iZXJcbn07XG50eXBlIE1hdGNoUmVnaXN0ZXJTdGF0ZSA9IHsgdHlwZTogXCJzdGF0ZVwiLCBpbmRleDogbnVtYmVyLCBzdGF0ZTogYW55LCByZXN1bHQ6IGFueSB9O1xudHlwZSBNYXRjaEluc3RydWN0aW9uID0gTWF0Y2hTdGFydEVuZCB8IE1hdGNoUmVnaXN0ZXJTdGF0ZTtcbnR5cGUgTWF0Y2ggPSB7IHByaW9yaXR5OiBudW1iZXIsIGluc3RydWN0aW9uczogQXJyYXk8TWF0Y2hJbnN0cnVjdGlvbj4gfTtcblxuY29uc3QgbWF0Y2hFcXVpdkZuID0gZnVuY3Rpb24gKGE6IE1hdGNoLCBiOiBNYXRjaCkge1xuICAgIGlmIChhLmluc3RydWN0aW9ucy5sZW5ndGggIT0gYi5pbnN0cnVjdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmluc3RydWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBpbnNBID0gYS5pbnN0cnVjdGlvbnNbaV07XG4gICAgICAgIGNvbnN0IGluc0IgPSBiLmluc3RydWN0aW9uc1tpXTtcbiAgICAgICAgaWYgKGluc0EudHlwZSAhPSBpbnNCLnR5cGUgfHxcbiAgICAgICAgICAgIGluc0EuaW5kZXggIT0gaW5zQi5pbmRleCB8fFxuICAgICAgICAgICAgKChpbnNBIGFzIE1hdGNoU3RhcnRFbmQpLmdyb3VwICE9IChpbnNCIGFzIE1hdGNoU3RhcnRFbmQpLmdyb3VwKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuY29uc3QgbWF0Y2hIYXNoRm4gPSBmdW5jdGlvbiAoYTogTWF0Y2gpIHtcbiAgICByZXR1cm4gaGFzaE51bWJlcnMoYS5pbnN0cnVjdGlvbnMubGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gY2xvbmVNYXRjaChtOiBNYXRjaCk6IE1hdGNoIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcmlvcml0eTogbS5wcmlvcml0eSxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBtLmluc3RydWN0aW9ucy5zbGljZSgpXG4gICAgfTtcbn1cblxuY2xhc3MgTm9uU2hyaW5raW5nQXJyYXk8VD4ge1xuICAgIGFycmF5OiBUW107XG4gICAgbGVuZ3RoOiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBbXTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIHB1c2gob2JqOiBUKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYXJyYXlbdGhpcy5sZW5ndGhdID0gb2JqO1xuICAgICAgICB0aGlzLmxlbmd0aCsrO1xuICAgIH1cblxuICAgIGNsZWFyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgZ2V0IGZpcnN0KCk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hcnJheVswXTtcbiAgICB9XG5cbiAgICBnZXQoaTogbnVtYmVyKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChpIDwgMCB8fCBpID49IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5W2ldO1xuICAgIH1cbn1cblxuLy8gV2Uga25vdyBhIHByaW9yaSB0aGF0IHRoZSBudW1iZXIgb2YgcHJpb3JpdHkgbGV2ZWxzIGlzIHJlbGF0aXZlbHkgc21hbGxcbmNsYXNzIFByaW9yaXR5UXVldWU8VD4ge1xuICAgIHF1ZXVlczogVFtdW107XG4gICAgbWVtYmVyczogTm9uUmVwbGFjaW5nSGFzaE1hcDxULCBib29sZWFuPiB8IHVuZGVmaW5lZDtcbiAgICBwcmlvcml0eUZ1bmN0aW9uOiAodDogVCkgPT4gbnVtYmVyO1xuICAgIGxlbmd0aDogbnVtYmVyO1xuICAgIGxvd2VzdFByaW9yaXR5OiBudW1iZXI7XG4gICAgaGlnaGVzdFByaW9yaXR5OiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHBmbjogKHQ6IFQpID0+IG51bWJlcixcbiAgICAgICAgZXF1aXZGbj86ICh0MTogVCwgdDI6IFQpID0+IGJvb2xlYW4sXG4gICAgICAgIGhhc2hGbj86ICh0OiBUKSA9PiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5xdWV1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcmlvcml0eUZ1bmN0aW9uID0gcGZuO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubG93ZXN0UHJpb3JpdHkgPSBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5oaWdoZXN0UHJpb3JpdHkgPSAtSW5maW5pdHk7XG4gICAgICAgIGlmIChlcXVpdkZuICYmIGhhc2hGbikge1xuICAgICAgICAgICAgdGhpcy5tZW1iZXJzID0gbmV3IE5vblJlcGxhY2luZ0hhc2hNYXAoZXF1aXZGbiwgaGFzaEZuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWVtYmVycyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgLy8gV2UgYWxzbyBrbm93IGEgcHJpb3JpIHRoYXQgZHVwbGljYXRlcyB3aWxsIGJlIGRldGVjdGVkIGV4dGVybmFsbHkgaWYgdGhlcmUgaXMgbm8gZXF1aXZGbi9oYXNoRm5cbiAgICBwdXNoKG9iajogVCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLnByaW9yaXR5RnVuY3Rpb24ob2JqKTtcbiAgICAgICAgaWYgKHRoaXMubWVtYmVycykge1xuICAgICAgICAgICAgaWYgKHRoaXMubWVtYmVycy5jb250YWlucyhvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZW1iZXJzLnB1c2gob2JqLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShpZHggaW4gdGhpcy5xdWV1ZXMpKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlc1tpZHhdID0gW29ial07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlc1tpZHhdLnB1c2gob2JqKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWR4IDwgdGhpcy5sb3dlc3RQcmlvcml0eSkge1xuICAgICAgICAgICAgdGhpcy5sb3dlc3RQcmlvcml0eSA9IGlkeDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWR4ID4gdGhpcy5oaWdoZXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5ID0gaWR4O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGVuZ3RoKys7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHNoaWZ0KCk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodGhpcy5sb3dlc3RQcmlvcml0eSA+PSBJbmZpbml0eSB8fCB0aGlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHEgPSB0aGlzLnF1ZXVlc1t0aGlzLmxvd2VzdFByaW9yaXR5XTtcbiAgICAgICAgLy8gV2l0aGluIGEgcHJpb3JpdHkgbGV2ZWwsIHdlIHdhbnQgdGhlIF9yZXZlcnNlXyBvcmRlciBvZiBhZGRpdGlvblxuICAgICAgICBjb25zdCByZXN1bHQgPSBxLnBvcCgpO1xuICAgICAgICBpZiAocS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucXVldWVzW3RoaXMubG93ZXN0UHJpb3JpdHldO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGlnaGVzdFByaW9yaXR5IDw9IHRoaXMubG93ZXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvd2VzdFByaW9yaXR5ID0gSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWdoZXN0UHJpb3JpdHkgPSAtSW5maW5pdHk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlICghKHRoaXMucXVldWVzW3RoaXMubG93ZXN0UHJpb3JpdHldKSAmJiB0aGlzLmxvd2VzdFByaW9yaXR5IDwgdGhpcy5oaWdoZXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb3dlc3RQcmlvcml0eSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlbmd0aC0tO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldCBmaXJzdCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWVzW3RoaXMubG93ZXN0UHJpb3JpdHldWzBdO1xuICAgIH1cblxuICAgIGNsZWFyKCk6IHZvaWQge1xuICAgICAgICAvL3RvZG86IGdlbmVyYXRlIGxlc3MgZ2FyYmFnZVxuICAgICAgICB0aGlzLnF1ZXVlcyA9IFtdO1xuICAgICAgICB0aGlzLmxvd2VzdFByaW9yaXR5ID0gSW5maW5pdHk7XG4gICAgICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5ID0gLUluZmluaXR5O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIGlmICh0aGlzLm1lbWJlcnMpIHtcbiAgICAgICAgICAgIHRoaXMubWVtYmVycy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBMSVZFU0VUX0NMRUFSX0lOVEVSVkFMID0gMTAwO1xuXG50eXBlIFRocmVhZFN0YXRlID0ge1xuICAgIGluZGV4OiBudW1iZXIsXG4gICAgdGhyZWFkczogTm9uU2hyaW5raW5nQXJyYXk8VGhyZWFkPlxufTtcblxudHlwZSBQbGF5c3BlY1Jlc3VsdFN0YXRlPFRyYWNlPiA9IHtcbiAgICB0cmFjZTogVHJhY2UsXG4gICAgdGhyZWFkczogVGhyZWFkW10sXG4gICAgbWF4VGhyZWFkSUQ6IG51bWJlcixcbiAgICBxdWV1ZTogTm9uU2hyaW5raW5nQXJyYXk8VGhyZWFkPixcbiAgICBuZXh0UXVldWU6IE5vblNocmlua2luZ0FycmF5PFRocmVhZD4sXG4gICAgbGl2ZVNldDogTm9uUmVwbGFjaW5nSGFzaE1hcDxudW1iZXIsIFRocmVhZFN0YXRlPixcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIHBhc3RFbmQ6IGJvb2xlYW4sXG4gICAgbWF0Y2hRdWV1ZTogUHJpb3JpdHlRdWV1ZTxNYXRjaD4sXG4gICAgbWF0Y2hTZXQ6IE5vblJlcGxhY2luZ0hhc2hNYXA8TWF0Y2gsIGJvb2xlYW4+LFxuICAgIGxhc3RNYXRjaFByaW9yaXR5OiBudW1iZXJcbn07XG5cbnR5cGUgR3JvdXBEYXRhPFN0YXRlPiA9IHtcbiAgICBncm91cDogc3RyaW5nIHwgbnVtYmVyLFxuICAgIGdyb3VwSW5kZXg6IG51bWJlcixcbiAgICBzdGFydDogbnVtYmVyLFxuICAgIGVuZDogbnVtYmVyLFxuICAgIHN0YXRlczogU3RhdGVbXSB8IHVuZGVmaW5lZCxcbiAgICByZXN1bHRzOiBhbnlbXSB8IHVuZGVmaW5lZFxufTtcblxudHlwZSBQbGF5c3BlY01hdGNoUmVzdWx0PFN0YXRlPiA9IHtcbiAgICBzdGFydDogbnVtYmVyLFxuICAgIGVuZDogbnVtYmVyLFxuICAgIHN0YXRlcz86IFN0YXRlW10sXG4gICAgcmVzdWx0cz86IGFueVtdLFxuICAgIHN1Ymdyb3VwczogR3JvdXBEYXRhPFN0YXRlPltdXG59O1xuXG5jbGFzcyBQbGF5c3BlY1Jlc3VsdDxUcmFjZSwgU3RhdGU+IHtcbiAgICBjb25maWc6IHsgc3BlYzogUGxheXNwZWM8VHJhY2UsIFN0YXRlPiwgcHJlc2VydmVTdGF0ZXM6IGJvb2xlYW4gfTtcbiAgICBzdGF0ZTogUGxheXNwZWNSZXN1bHRTdGF0ZTxUcmFjZT4gfCB1bmRlZmluZWQ7XG4gICAgbWF0Y2g6IFBsYXlzcGVjTWF0Y2hSZXN1bHQ8U3RhdGU+IHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBjb25maWc6IHsgc3BlYzogUGxheXNwZWM8VHJhY2UsIFN0YXRlPiwgcHJlc2VydmVTdGF0ZXM6IGJvb2xlYW4gfSxcbiAgICAgICAgc3RhdGU6IFBsYXlzcGVjUmVzdWx0U3RhdGU8VHJhY2U+LFxuICAgICAgICBtYXRjaDogUGxheXNwZWNNYXRjaFJlc3VsdDxTdGF0ZT4gfCB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW5kZXggPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudHJhY2UgPSB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLnN0YXJ0KHRoaXMuc3RhdGUudHJhY2UpO1xuICAgICAgICAgICAgbGV0IGluaXRUaHJlYWQgPSBuZXcgVGhyZWFkKDAsIDAsIDAsIFt7IHByaW9yaXR5OiAwLCBpbnN0cnVjdGlvbnM6IFtdIH1dKTtcbiAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZChpbml0VGhyZWFkKTtcbiAgICAgICAgICAgIC8vc3dhcCBxdWV1ZXNcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLnN0YXRlLnF1ZXVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5xdWV1ZSA9IHRoaXMuc3RhdGUubmV4dFF1ZXVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5uZXh0UXVldWUgPSB0ZW1wO1xuICAgICAgICAgICAgLy9jbGVhciBsaXZlIGFuZCBtYXRjaCBzZXRzXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmxpdmVTZXQuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubWF0Y2hTZXQuY2xlYXIoKTtcbiAgICAgICAgICAgIC8vbW92ZSBpbmRleCB0byBzdGFydFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tYXRjaCA9IG1hdGNoO1xuICAgIH1cblxuICAgIGdldCBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2ggPyB0aGlzLm1hdGNoLnN0YXJ0IDogLTE7XG4gICAgfVxuXG4gICAgZ2V0IGVuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2ggPyB0aGlzLm1hdGNoLmVuZCA6IC0xO1xuICAgIH1cblxuICAgIGdldCBzdGF0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoID8gdGhpcy5tYXRjaC5zdGF0ZXMgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZ2V0IHN1Ymdyb3VwcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2ggPyB0aGlzLm1hdGNoLnN1Ymdyb3VwcyA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBoYXNSZWFkeU1hdGNoKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUhLm1hdGNoUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlIS5xdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlIS5tYXRjaFF1ZXVlLmZpcnN0IS5wcmlvcml0eSA8PSB0aGlzLnN0YXRlIS5xdWV1ZS5maXJzdCEucHJpb3JpdHlcbiAgICB9XG5cbiAgICBlbnF1ZXVlVGhyZWFkKHRocmVhZDogVGhyZWFkKSB7XG4gICAgICAgIC8vIFVubGlrZSBDb3gncyBpbXBsZW1lbnRhdGlvbiwgd2UgY2FuIG9ubHkgZG8gZHVwbGljYXRlIGNoZWNraW5nIGZvciB0aHJlYWRzIHRoYXQgYXJlIGFib3V0IHRvIHBhcmsuXG4gICAgICAgIC8vIFNvIHdlJ2xsIGRvIHNvbWUgcmVkdW5kYW50IGp1bXBpbmcvc3BsaXR0aW5nL21hdGNoaW5nLCBidXQgc2luY2Ugd2UgbmVlZCB0byBtZXJnZSB0aHJlYWRzIGl0IGNhbid0XG4gICAgICAgIC8vIHJlYWxseSBiZSBhdm9pZGVkLlxuICAgICAgICBjb25zdCBpbnN0ciA9IHRoaXMuY29uZmlnLnNwZWMucHJvZ3JhbVt0aHJlYWQucGNdO1xuICAgICAgICBzd2l0Y2ggKGluc3RyLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJqdW1wXCI6XG4gICAgICAgICAgICAgICAgdGhyZWFkLnBjID0gaW5zdHIudGFyZ2V0ITtcbiAgICAgICAgICAgICAgICB0aGlzLmVucXVldWVUaHJlYWQodGhyZWFkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlIFwic3BsaXRcIjpcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlIS5tYXhUaHJlYWRJRCErKztcbiAgICAgICAgICAgICAgICB0aHJlYWQucGMgPSBpbnN0ci5sZWZ0O1xuICAgICAgICAgICAgICAgIC8vbWF0Y2ggc2hhcmluZzogQmUgc3VyZSB0aHJlYWQxIGtub3dzIHRocmVhZDIgaXMgdXNpbmcgaXRzIG1hdGNoZXMuXG4gICAgICAgICAgICAgICAgLy90aHJlYWQuc2hhcmVkTWF0Y2hlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgdGhyZWFkMiA9IG5ldyBUaHJlYWQodGhpcy5zdGF0ZSEubWF4VGhyZWFkSUQsIGluc3RyLnJpZ2h0ISwgdGhyZWFkLnByaW9yaXR5ICsgMSwgdGhyZWFkLm1hdGNoZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZCh0aHJlYWQyKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgICAgICAgICAgICB0aHJlYWQucHVzaE1hdGNoSW5zdHJ1Y3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIC8vICsxIGJlY2F1c2UgdGhlIF9jdXJyZW50XyB0cmFjZSBpbmRleCBqdXN0IG1hdGNoZWQgcHJldmlvdXNseSwgc28gd2UgZG9uJ3Qgd2FudCB0byBpbmNsdWRlIGl0IGluXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBtYXRjaCB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBfbmV4dF8gY2hhcmFjdGVyLlxuICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5zdGF0ZSEuaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgICAgICBncm91cDogaW5zdHIuZ3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSW5kZXg6IGluc3RyLmNhcHR1cmVJRFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocmVhZC5wYysrO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICB0aHJlYWQucHVzaE1hdGNoSW5zdHJ1Y3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImVuZFwiLFxuICAgICAgICAgICAgICAgICAgICAvLyArMSBmb3Igc2FtZSByZWFzb24gYXMgYWJvdmUuXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnN0YXRlIS5pbmRleCArIDEsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwOiBpbnN0ci5ncm91cCxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJbmRleDogaW5zdHIuY2FwdHVyZUlEXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyZWFkLnBjKys7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnF1ZXVlVGhyZWFkKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBcIm1hdGNoXCI6XG4gICAgICAgICAgICAgICAgLy8gQWRkIG1hdGNoZXMgdG8gcXVldWVcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRocmVhZC5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aHJlYWQubWF0Y2hlc1tpXS5wcmlvcml0eSA+PSB0aHJlYWQucHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBub3ZlbCBtYXRjaC4uLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUhLm1hdGNoU2V0LnB1c2godGhyZWFkLm1hdGNoZXNbaV0sIHRydWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBxdWV1ZSFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlIS5tYXRjaFF1ZXVlLnB1c2godGhyZWFkLm1hdGNoZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vZHJvcCB0aHJlYWQsIGl0cyB3b3JrIGlzIGRvbmVcbiAgICAgICAgICAgICAgICB0aHJlYWQudGVybWluYXRlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBcImNoZWNrXCI6XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgbGl2ZSBzZXQsIHRoZW4gYWRkIHRvIHF1ZXVlXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzaCA9IHRocmVhZC5oYXNoKCk7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5zdGF0ZSE7XG4gICAgICAgICAgICAgICAgbGV0IGxpdmU6IFRocmVhZFN0YXRlIHwgdW5kZWZpbmVkID0gc3RhdGUubGl2ZVNldC5nZXQoaGFzaCk7XG4gICAgICAgICAgICAgICAgaWYgKCFsaXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aHJlYWRMaXN0ID0gbmV3IE5vblNocmlua2luZ0FycmF5PFRocmVhZD4oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyZWFkTGlzdC5wdXNoKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlLmxpdmVTZXQucHVzaChoYXNoLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogc3RhdGUuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWRzOiB0aHJlYWRMaXN0XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGl2ZS5pbmRleCAhPSBzdGF0ZSEuaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGl2ZS5pbmRleCA9IHN0YXRlLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICBsaXZlLnRocmVhZHMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgbGl2ZS50aHJlYWRzLnB1c2godGhyZWFkKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL21heWJlIHByZXNlbnRcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXZlLnRocmVhZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsaXZlLnRocmVhZHMuZ2V0KGkpIS5lcXVhbHModGhyZWFkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpdmUudGhyZWFkcy5nZXQoaSkhLm1lcmdlVGhyZWFkKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRHJvcCB0aGUgbWVyZ2VkLWluIHRocmVhZCwgbm8gbW9yZSB3b3JrIHRvIGRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL25vdCBwcmVzZW50OiBhZGQgc3R1Y2sgdGhyZWFkIHRvIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHN0YXRlLm5leHRRdWV1ZS5wdXNoKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy90b2RvOiBjYXNlIGZvcmssIGpvaW4sIGpvaW5lZC1sZWZ0LCBqb2luZWQtcmlnaHRcbiAgICAgICAgICAgIC8vIGpvaW5lZC1sZWZ0IGFuZCBqb2luZWQtcmlnaHQgd2lsbCBuZWVkIHRvIGhhbmRsZSBtZXJnaW5nIVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgaW5zdHJ1Y3Rpb24gdHlwZSAke2luc3RyLnR5cGV9XCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJldHRpZnlNYXRjaChtOiBNYXRjaCk6IFBsYXlzcGVjTWF0Y2hSZXN1bHQ8U3RhdGU+IHtcbiAgICAgICAgbGV0IGdyb3VwcyA9IFtdO1xuICAgICAgICBsZXQgbGl2ZUdyb3Vwczoge1xuICAgICAgICAgICAgW2tleTogc3RyaW5nXTogR3JvdXBEYXRhPFN0YXRlPixcbiAgICAgICAgICAgIFtpbmRleDogbnVtYmVyXTogR3JvdXBEYXRhPFN0YXRlPlxuICAgICAgICB9ID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbS5pbnN0cnVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RyID0gbS5pbnN0cnVjdGlvbnNbaV07XG4gICAgICAgICAgICBzd2l0Y2ggKGluc3RyLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhcnRcIjpcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0c6IEdyb3VwRGF0YTxTdGF0ZT4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cDogaW5zdHIuZ3JvdXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cEluZGV4OiBpbnN0ci5ncm91cEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGluc3RyLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBJbmZpbml0eSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0czogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5wcmVzZXJ2ZVN0YXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Ry5zdGF0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0cucmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGdyb3Vwcy5wdXNoKG5ld0cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGl2ZUdyb3Vwc1tuZXdHLmdyb3VwXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRHVwbGljYXRlIGNhcHR1cmUgZ3JvdXBcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGl2ZUdyb3Vwc1tuZXdHLmdyb3VwXSA9IG5ld0c7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vVE9ETzogaGFuZGxlIGF0b21pYyBmb3JtdWxhIGNhcHR1cmVzIGFzIGEgbmV3IGNhc2U/IG9yIGFzIHN0YXRlP1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGF0ZVwiOlxuICAgICAgICAgICAgICAgICAgICBsZXQgb3Blbkdyb3VwcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGxpdmVHcm91cHMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBnaSA9IDA7IGdpIDwgb3Blbkdyb3Vwcy5sZW5ndGg7IGdpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250aW51ZWRHID0gbGl2ZUdyb3Vwc1tvcGVuR3JvdXBzW2dpXV07XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1dlJ2xsIG9ubHkgZ2V0IGhlcmUgaWYgd2UncmUgcHJlc2VydmluZyBzdGF0ZXM7IHVubGVzcyB3ZSByZXVzZSBcInN0YXRlXCIgZm9yIGF0b21pYyBlbGVtZW50IGNhcHR1cmVzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZWRHLnN0YXRlcyEucHVzaChpbnN0ci5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZWRHLnJlc3VsdHMhLnB1c2goaW5zdHIucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaW5pc2hlZEcgPSBsaXZlR3JvdXBzW2luc3RyLmdyb3VwXTtcbiAgICAgICAgICAgICAgICAgICAgZmluaXNoZWRHLmVuZCA9IGluc3RyLmluZGV4O1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbGl2ZUdyb3Vwc1tpbnN0ci5ncm91cF07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBvcGVuR3JvdXBzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobGl2ZUdyb3Vwcyk7XG4gICAgICAgIGlmIChvcGVuR3JvdXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBPcGVuIGNhcHR1cmUgZ3JvdXBzOiAke29wZW5Hcm91cHMuam9pbihcIixcIil9YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJvb3RHcm91cCA9IGdyb3Vwcy5zaGlmdCgpITtcbiAgICAgICAgbGV0IHJvb3RNYXRjaDogUGxheXNwZWNNYXRjaFJlc3VsdDxTdGF0ZT4gPSB7XG4gICAgICAgICAgICBzdGFydDogcm9vdEdyb3VwLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiByb290R3JvdXAuZW5kLFxuICAgICAgICAgICAgLy9UT0RPOiBPdWdodCBlbXB0eSBjYXB0dXJlcyB0byBiZSBkcm9wcGVkP1xuICAgICAgICAgICAgc3ViZ3JvdXBzOiBncm91cHMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIChncm91cCkgPT4gZ3JvdXAuc3RhcnQgIT0gZ3JvdXAuZW5kXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgc3RhdGVzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICByZXN1bHRzOiB1bmRlZmluZWRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnByZXNlcnZlU3RhdGVzKSB7XG4gICAgICAgICAgICByb290TWF0Y2guc3RhdGVzID0gcm9vdEdyb3VwLnN0YXRlcyE7XG4gICAgICAgICAgICByb290TWF0Y2gucmVzdWx0cyA9IHJvb3RHcm91cC5yZXN1bHRzITtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm9vdE1hdGNoO1xuICAgIH1cblxuICAgIG5leHQoKTogUGxheXNwZWNSZXN1bHQ8VHJhY2UsIFN0YXRlPiB8IG51bGwge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRvbid0IGNhbGwgbmV4dCgpIG9uIHRoZSBzYW1lIFBsYXlzcGVjUmVzdWx0IHR3aWNlIVwiKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoIXRoaXMuaGFzUmVhZHlNYXRjaCgpICYmIHRoaXMuc3RhdGUucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuY3VycmVudFN0YXRlKHRoaXMuc3RhdGUudHJhY2UpO1xuICAgICAgICAgICAgbGV0IGNvcGllZFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgbGltaXQgPSB0aGlzLnN0YXRlLnF1ZXVlLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBsYXN0UHJpb3JpdHkgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnN0YXRlLnF1ZXVlLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHRocmVhZCBxdWV1ZSBzaG91bGQgbmV2ZXIgZ3JvdyBkdXJpbmcgYSBzaW5nbGUgdHJhY2Ugc3RhdGUhXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdGhyZWFkID0gdGhpcy5zdGF0ZS5xdWV1ZS5nZXQodCkhO1xuICAgICAgICAgICAgICAgIGlmICh0aHJlYWQucHJpb3JpdHkgPCBsYXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGVjcmVhc2luZyBwcmlvcml0eSFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RyID0gdGhpcy5jb25maWcuc3BlYy5wcm9ncmFtW3RocmVhZC5wY107XG4gICAgICAgICAgICAgICAgc3dpdGNoIChpbnN0ci50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjaGVja1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tSZXN1bHQgPSB0aGlzLmNvbmZpZy5zcGVjLmNoZWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudHJhY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0ci5mb3JtdWxhXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkLnBjKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRocmVhZC5oYXNPcGVuTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLnByZXNlcnZlU3RhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvcGllZFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29waWVkU3RhdGUgPSB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmNvcHlDdXJyZW50U3RhdGUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmNvcHlDdXJyZW50U3RhdGUodGhpcy5zdGF0ZS50cmFjZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZC5wdXNoTWF0Y2hJbnN0cnVjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnN0YXRlLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBjb3BpZWRTdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGNoZWNrUmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1RPRE86IGF0b21pYyBjYXB0dXJlcyBnbyBoZXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgLy9vdGhlcndpc2UgZHJvcCB0aGUgdGhyZWFkIG9uIHRoZSBmbG9vclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZC50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhyZWFkIHNob3VsZCBiZSBwYXJrZWQgb24gYSBjaGVjay5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9zd2FwIHF1ZXVlcyBhbmQgY2xlYXIgb2xkIHF1ZXVlXG4gICAgICAgICAgICBsZXQgdGVtcCA9IHRoaXMuc3RhdGUucXVldWU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnF1ZXVlID0gdGhpcy5zdGF0ZS5uZXh0UXVldWU7XG4gICAgICAgICAgICB0ZW1wLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLm5leHRRdWV1ZSA9IHRlbXA7XG4gICAgICAgICAgICAvL21heWJlIGNsZWFyIGxpdmVzZXQgKGRvbid0IHdhbnQgdG8gZG8gaXQgZXZlcnkgdGltZSwgc28gc2hvcnQgc3BlY3Mvc3RyaW5ncyBjYW4gYXZvaWQgbWVtb3J5IGNodXJuKVxuICAgICAgICAgICAgaWYgKCh0aGlzLnN0YXRlLmluZGV4ICUgTElWRVNFVF9DTEVBUl9JTlRFUlZBTCkgPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUubGl2ZVNldC5jbGVhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9kZWZpbml0ZWx5IGNsZWFyIG1hdGNoc2V0IChsYXRlciBtYXRjaGVzIHdvbid0IGV2ZXIgYmUgZXF1aXZhbGVudCB0byBtYXRjaGVzIGZyb20gdGhpcyB0aW1lKVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5tYXRjaFNldC5jbGVhcigpO1xuICAgICAgICAgICAgLy9hZHZhbmNlLCB1bmxlc3MgYWxyZWFkeSBhdCBlbmRcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmlzQXRFbmQodGhpcy5zdGF0ZS50cmFjZSkpIHtcbiAgICAgICAgICAgICAgICAvL3dpcGUgb3V0IHF1ZXVlLCBubyBtb3JlIHRyYWNlIHRvIG1hdGNoIVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc1N0cmVhbWluZyB8fFxuICAgICAgICAgICAgICAgICAgICAhdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc1N0cmVhbWluZyh0aGlzLnN0YXRlLnRyYWNlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLnF1ZXVlLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5hZHZhbmNlU3RhdGUodGhpcy5zdGF0ZS50cmFjZSk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFzUmVhZHlNYXRjaCgpKSB7XG4gICAgICAgICAgICAvLyBBbHNvIHJlbW92ZXMgZmlyc3QgbWF0Y2ggZnJvbSBxdWV1ZSFcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5zdGF0ZS5tYXRjaFF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUubGFzdE1hdGNoUHJpb3JpdHkgPiBtYXRjaC5wcmlvcml0eSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1hdGNoZXMgcG9wcGVkIG91dCBvZiBvcmRlciFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmxhc3RNYXRjaFByaW9yaXR5ID0gbWF0Y2gucHJpb3JpdHk7XG4gICAgICAgICAgICBjb25zdCBwcmV0dHlNYXRjaCA9IHRoaXMucHJldHRpZnlNYXRjaChtYXRjaCk7XG4gICAgICAgICAgICBjb25zdCBuZXh0U3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGxheXNwZWNSZXN1bHQoXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcsXG4gICAgICAgICAgICAgICAgbmV4dFN0YXRlLFxuICAgICAgICAgICAgICAgIHByZXR0eU1hdGNoXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmlzU3RyZWFtaW5nICYmXG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmlzU3RyZWFtaW5nKHRoaXMuc3RhdGUudHJhY2UpKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0U3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGxheXNwZWNSZXN1bHQoXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcsXG4gICAgICAgICAgICAgICAgbmV4dFN0YXRlLFxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZFxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIC8vIE90aGVyd2lzZSwgd2UncmUgb3V0IG9mIHF1ZXVlIG9yIHRyYWNlIGFuZCBoYXZlIG5vd2hlcmUgdG8gZ29cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==