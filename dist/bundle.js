var Playspecs=function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const n={WHITESPACE:" ",CONCATENATION:",",DOTS_GREEDY:"...",DOTS_RELUCTANT:"..",DOTS_OMEGA:"***",LEFT_PAREN:"(",RIGHT_PAREN:")",CAPTURING_LEFT_PAREN:"$(",ALTERNATION:";",INTERSECTION:"^",AND:"&",OR:"|",NOT:"not",START:"start",END:"end",TRUE:"true",FALSE:"false",ERROR:"error"},s={OMEGA:n.DOTS_OMEGA,REPETITION:n.DOTS_GREEDY,CONCATENATION:n.CONCATENATION,CAPTURE:"$(",GROUP:n.LEFT_PAREN,ALTERNATION:n.ALTERNATION,INTERSECTION:n.INTERSECTION,AND:n.AND,OR:n.OR,NOT:n.NOT,START:n.START,END:n.END,TRUE:n.TRUE,FALSE:n.FALSE,ERROR:n.ERROR};function i(t){return{type:t.type,value:t.value,children:t.children.slice(),range:{start:t.range.start,end:t.range.end}}}const a=function(t){return function(e){return t}},c=function(t,e){return t.node(e.type,e.value)},o=function(t,e,r){let n=[e];return n.push(t.parseExpression(r.tightness-1)),t.node(r.type,r.value,n)},h=function(t,e,r){if(!f(e))return t.error("Left hand side of token must be propositional",r,e);let n=[e];const s=t.parseExpression(r.tightness-1);return f(s)?(n.push(s),t.node(r.type,r.value,n)):t.error("Right hand side of token must be propositional",r,s)},u="$END",l=[{type:n.WHITESPACE,match:/^\s+/},{type:n.CONCATENATION,match:[n.CONCATENATION],tightness:100,extendParse:o},{type:n.DOTS_GREEDY,match:/^([0-9]*)\s*\.\.\.\s*([0-9]*)/,value:function(t){return{greedy:!0,lowerBound:t[1]?parseInt(t[1]):0,upperBound:t[2]?parseInt(t[2]):u}},tightness:110,startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.start,t.node(s.REPETITION,e.value,[r])},extendParse:function(t,e,r){return t.node(s.REPETITION,r.value,[e])}},{type:n.DOTS_RELUCTANT,match:/^([0-9]*)\s*\.\.\s*([0-9]*)/,tightness:110,value:function(t){return{greedy:!1,lowerBound:t[1]?parseInt(t[1]):0,upperBound:t[2]?parseInt(t[2]):u}},startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.start,t.node(s.REPETITION,e.value,[r])},extendParse:function(t,e,r){return t.node(s.REPETITION,r.value,[e])}},{type:n.DOTS_OMEGA,match:[n.DOTS_OMEGA],tightness:110,startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.end,t.node(s.OMEGA,e.value,[r])},extendParse:function(t,e,r){return t.node(s.OMEGA,r.value,[e])}},{type:n.LEFT_PAREN,match:[n.LEFT_PAREN],startParse:function(t,e){const r=t.parseExpression(0);return t.currentToken().type!=n.RIGHT_PAREN?t.error("Missing right parenthesis",e,r):(t.advance(),t.node(s.GROUP,e.value,[r]))}},{type:n.RIGHT_PAREN,match:[n.RIGHT_PAREN]},{type:n.CAPTURING_LEFT_PAREN,match:/^\$([A-z_][A-z_0-9]*)?\(/,value:function(t){return{group:t[1]||"$implicit"}},startParse:function(t,e){const r=t.parseExpression(0);return t.currentToken().type!=n.RIGHT_PAREN?t.error("Missing right parenthesis",e,r):(t.advance(),t.node(s.CAPTURE,e.value,[r]))}},{type:n.ALTERNATION,match:[n.ALTERNATION],tightness:60,extendParse:o},{type:n.INTERSECTION,match:[n.INTERSECTION],tightness:50,extendParse:o},{type:n.AND,match:[n.AND],tightness:200,extendParse:h},{type:n.OR,match:[n.OR],tightness:210,extendParse:h},{type:n.NOT,match:[n.NOT],tightness:220,startParse:function(t,e){const r=t.parseExpression(e.tightness);return f(r)?t.node(e.type,e.value,[r]):t.error("NOT may only negate propositional state formulae",e,r)}},{type:n.START,match:[n.START],startParse:c},{type:n.END,match:[n.END],startParse:c},{type:n.TRUE,match:[n.TRUE],value:a(!0),startParse:c},{type:n.FALSE,match:[n.FALSE],value:a(!1),startParse:c},{type:n.ERROR,match:/^\S+/,startParse:c}],p=300,d="ERROR";function g(t){for(var e in s)if(s[e]==t.type)return!1;return!0}function f(t){return g(t)||t.type==s.AND||t.type==s.OR||t.type==s.NOT||t.type==s.TRUE||t.type==s.FALSE||t.type==s.START||t.type==s.END||(t.type==s.GROUP||t.type==s.CAPTURE)&&t.children.every(function(t){return f(t)})}class y{constructor(t){this.tokenDefinitions=[],this.tokensByType={},this.parseErrors=[];const e=t||[],r=e.concat(l);for(let t=0;t<r.length;t++){const n=r[t],s=n.tightness||0,i={type:n.type,match:n.match instanceof RegExp?n.match:"string"==typeof n.match?[n.match]:n.match,value:n.value||function(t){return t[0]},tightness:t<e.length?s+p:s,startParse:n.startParse||function(t,e){return t.error("Can't start a parse tree with this token",e)},extendParse:n.extendParse||function(t,e,r){return t.error("Can't extend a parse tree with this token",r,e)}};this.tokenDefinitions.push(i),this.tokensByType[i.type]=i}this.resetStream()}node(t,e,r=[]){return{type:t,value:e,children:r,range:{start:-1,end:-1}}}error(t,e,r){const n=this.node(d,{message:t,token:e,tree:r});return this.parseErrors.push(n),n}tokenize(t){let e=[],r=[],s=t,i=0;for(;s.length;)for(let t=0;t<this.tokenDefinitions.length;t++){const a=this.tokenDefinitions[t],c=a.match;let o={match:null,index:-1};if(c instanceof RegExp){let t=c.exec(s);t&&(o.match=t,o.index=t.index)}else if(Array.isArray(c))for(let t=0;t<c.length;t++){const e=c[t];s.substr(0,e.length)==e&&(o.match=[e],o.index=0)}if(o.match&&0==o.index){const t=o.match[0].length;s=s.substr(o.match[0].length);const c=i;i+=t,a.type!==n.WHITESPACE&&(a.type===n.ERROR&&r.push(e.length),e.push({type:a.type,value:a.value(o.match),tightness:a.tightness||0,range:{start:c,end:i}}));break}}return{string:t,tokens:e,position:0,errors:r}}resetStream(){this.stream={string:"",tokens:[],position:0,errors:[]}}charPosition(){return this.currentToken()?this.currentToken().range.start:this.stream.string.length}remainder(){const t=this.charPosition();return this.stream.string.substr(t)}currentToken(){return this.stream.tokens[this.stream.position]}advance(){this.stream.position++}parse(t){this.stream=this.tokenize(t),this.parseErrors=[];var e={tree:this.parseExpression(0),errors:this.parseErrors,remainder:this.remainder()};return this.parseErrors=[],this.resetStream(),e}parseExpression(t){let e=this.currentToken(),r=this.tokensByType[e.type];const n=e.range.start;this.advance();let s=r.startParse(this,e);if(s.range.start=n,s.range.end=this.charPosition(),s.type==d)return s;for(e=this.currentToken();e&&t<e.tightness;){r=this.tokensByType[e.type],this.advance();let t=r.extendParse(this,s,e);if(t.range.start=s.range.start,t.range.end=this.charPosition(),t.type==d)return t;s=t,e=this.currentToken()}return s}}let m=0;function E(){m=0}class T{constructor(){this.startStates=[new A],this.acceptingStates=[]}newState(t){return new A(t)}markAccepting(t){-1==this.acceptingStates.indexOf(t)&&this.acceptingStates.push(t),t.addEdge(new P(t,null,[])),t.isAccepting=!0}markNonAccepting(t){t.isAccepting=!1,-1!=this.acceptingStates.indexOf(t)&&this.acceptingStates.splice(this.acceptingStates.indexOf(t),1)}getStates(){let t={},e=this.startStates.slice();for(;e.length;){const r=e.pop();t[r.id]=r;for(let n in r.edges){let s=r.edges[n];!s.target||s.target.id in t||e.push(s.target)}}return Object.keys(t).map(e=>t[e])}toDot(){return"digraph g {\n  rankdir=LR;\n"+this.getStates().map(function(t){return["  "+t.id+` [shape=${t.isAccepting?"doublecircle":"circle"}];`].concat(t.edges.map(function(e,r){return"  "+t.id+"->"+e.target.id+` [label="${r}:${e.formula?x(e.formula):"&#949;"}:${e.label.map(t=>t.type+"."+t.group).join(",")}"];`})).join("\n")}).join("\n")+"\n}"}eelim(){let t=this.startStates.slice(),e={};for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(;t.length;){const r=t.pop();let n={[r.id]:r};for(let t=0;t<r.edges.length;t++){const e=r.edges[t];if(!(e.formula||r.isAccepting&&e.target==r)){if(e.target.id in n){r.edges.splice(t,1),t--;continue}{const n=e.target.edges.map(t=>new P(t.target==e.target&&null==t.formula?r:t.target,t.formula,e.label.concat(t.label)));e.target.isAccepting&&!r.isAccepting&&(this.acceptingStates.push(r),r.isAccepting=!0),r.edges.splice(t,1,...n)}}n[e.target.id]=e.target}for(let r in n)r in e||(t.push(n[r]),e[r]=n[r])}return this}intersect(t){this.eelim();const e=this;t.eelim();let r=new T;r.startStates=[];let n=[],i={};for(let s=0;s<e.startStates.length;s++){const a=e.startStates[s];for(let e=0;e<t.startStates.length;e++){const s=t.startStates[e];n.push([a,s]),a.id in i||(i[a.id]={});let c=r.newState(`a${a.id}x${s.id}b`);r.startStates.push(c),i[a.id][s.id]=c,a.isAccepting&&s.isAccepting&&r.markAccepting(c)}}for(;n.length;){const[t,e]=n.pop(),o=i[t.id][e.id];for(let h=0;h<t.edges.length;h++){const u=t.edges[h],l=u.target,p=t.isAccepting&&l==t&&!u.formula;for(let t=0;t<e.edges.length;t++){const h=e.edges[t],d=h.target;let g=null;if(p!=(e.isAccepting&&d==e&&!h.formula))continue;if(!(p||(u.formula&&h.formula||console.error("Uneliminated non ASE epsilon transition"),a=u.formula,c=h.formula,g={type:s.AND,value:"&",children:[a,c],range:{start:-1,end:-1}})))continue;let f=null;l.id in i&&d.id in i[l.id]?f=i[l.id][d.id]:(f=r.newState(`a${l.id}x${d.id}b`),l.id in i||(i[l.id]={}),i[l.id][d.id]=f,n.push([l,d]),l.isAccepting&&d.isAccepting&&(f.isAccepting=!0,r.acceptingStates.push(f))),o.addEdge(new P(f,g,u.label.concat(h.label)))}}}var a,c;return r}}class A{constructor(t){this.id=t||(m++).toString(10),this.edges=[],this.isAccepting=!1}addEdge(t){this.edges.push(t)}removeEdge(t){this.edges.splice(this.edges.indexOf(t),1)}}class P{constructor(t,e,r){this.target=t,this.formula=e,this.label=r}}function v(t){const e=new T,r=function t(e,r,n){if(f(n)&&n.type!=s.CAPTURE){const t=new P(null,n,[]);return r.addEdge(t),[t]}if(n.type==s.CONCATENATION){const s=t(e,r,n.children[0]),i=e.newState();for(let t=0;t<s.length;t++){let e=s[t];e.target=i}return t(e,i,n.children[1])}if(n.type==s.REPETITION){const a=n.value.greedy,c=n.value.lowerBound,o=n.value.upperBound,h=n.children[0];if(c>0){let a=i(n);a.value.lowerBound--,"$END"!=a.value.upperBound&&a.value.upperBound--;let c={type:s.CONCATENATION,value:",",children:[i(h),a],range:{start:a.range.start,end:a.range.end}};return t(e,r,c)}if("$END"!=o){let c=i(n);c.value.upperBound--;let u={type:s.CONCATENATION,value:",",children:[i(h),c],range:{start:c.range.start,end:c.range.end}};if(a){let n=[];n=0==o?n.concat([new P(null,h,[])]):n.concat(t(e,r,u));const s=new P(null,null,[]);return r.addEdge(s),n.push(s),n}{let n=[];const s=new P(null,null,[]);return r.addEdge(s),n.push(s),n=1==o?n.concat([new P(null,h,[])]):n.concat(t(e,r,u))}}if(a){let n=t(e,r,h);for(let t=0;t<n.length;t++){let e=n[t];e.target=r}const s=new P(null,null,[]);return r.addEdge(s),[s]}{const n=new P(null,null,[]);r.addEdge(n);let s=t(e,r,h);for(let t=0;t<s.length;t++){let e=s[t];e.target=r}return[n]}}if(n.type==s.GROUP){let s=e.newState();r.addEdge(new P(s,null,[]));const i=t(e,s,n.children[0]);return i}if(n.type==s.CAPTURE){let s=e.newState(),i={type:"start-capture",group:"$implicit"==n.value.group?s.id:n.value.group};r.addEdge(new P(s,null,[i]));const a=t(e,s,n.children[0]);for(let t=0;t<a.length;t++){let e=a[t];e.label.push({type:"end-capture",group:"$implicit"==n.value.group?s.id:n.value.group,start:i})}return a}if(n.type==s.ALTERNATION){const s=e.newState(),i=e.newState();r.addEdge(new P(s,null,[])),r.addEdge(new P(i,null,[]));const a=t(e,s,n.children[0]),c=t(e,i,n.children[1]);return a.concat(c)}if(n.type==s.INTERSECTION){const t=v(n.children[0]),s=v(n.children[1]),i=t.intersect(s),a=i.acceptingStates.slice();for(let t=0;t<i.startStates.length;t++)r.addEdge(new P(i.startStates[t],null,[]));let c=[];for(let t=0;t<a.length;t++){const r=a[t];e.markNonAccepting(r);for(let t=0;t<r.edges.length;t++)r.edges[t].target!=r||r.edges[t].formula||(r.edges[t].target=null,c.push(r.edges[t]))}return c}throw"Not yet implemented"}(e,e.startStates[0],t),n=e.newState();for(let t=0;t<r.length;t++){r[t].target=n}return e.markAccepting(n),e}const R=!1;class I{constructor(t){this.captureIdx=0}compileTree(t,e){if(t.type==s.GROUP)return this.compileTree(t.children[0],e);if(t.type==s.CAPTURE){const r=this.captureIdx,n="$implicit"==t.value.group?r:t.value.group,s={type:"start",group:n,captureID:r,index:e,source:t};this.captureIdx++;const i=this.compileTree(t.children[0],e+1),a={type:"end",group:n,captureID:r,index:e+1+i.length,source:t};return[s].concat(i).concat([a])}if(f(t))return[{type:"check",formula:t,index:e,source:t}];if(t.type==s.CONCATENATION){const r=e,n=this.compileTree(t.children[0],r),s=e+n.length,i=this.compileTree(t.children[1],s);return n.concat(i)}if(t.type==s.ALTERNATION){const r=e+1,n=this.compileTree(t.children[0],r),s=r+n.length+1,i=[{type:"split",left:r,right:s,index:e,source:t}],a=this.compileTree(t.children[1],s),c=[{type:"jump",target:s+a.length,index:r+n.length,source:t}];return i.concat(n).concat(c).concat(a)}if(t.type==s.INTERSECTION){const r=v(t.children[0]),n=v(t.children[1]),s=r.intersect(n);return this.compileSFA(s,e)}if(t.type==s.REPETITION){const r=t.value.greedy,n=t.value.lowerBound,s=t.children[0];let i=[];for(let t=0;t<n;t++){const t=this.compileTree(s,e);e+=t.length,i.push(...t)}if(t.value.upperBound!=u){const a=t.value.upperBound;let c=[],o=[];for(let t=n;t<a;t++){e+=1,o.push(e);const t=this.compileTree(s,e);e+=t.length,c.push(t)}let h=[];for(let n=0;n<c.length;n++)h.push({type:"split",left:r?o[n]:e,right:r?e:o[n],index:o[n]-1,source:t}),h.push(...c[n]);return i.concat(h)}{const n=e,a=n+1,c=this.compileTree(s,a),o=[{type:"jump",target:n,index:a+c.length,source:t}],h=a+c.length+1,u=[{type:"split",left:r?a:h,right:r?h:a,index:e,source:t}];return i.concat(u).concat(c).concat(o)}}throw new Error("Can't compile "+JSON.stringify(t))}compileSFA(t,e){let r={},n=[],s=[];for(let i=0;i<t.startStates.length;i++){const a=t.startStates[i],c=this.compileSFA_(a,e,r,n);s=s.concat(c),e+=c.length}for(let t=0;t<n.length;t++)n[t].target=e;return s}compileSFA_(t,e,r,n){if(t.id in r)return[{type:"jump",target:r[t.id],index:e,source:{type:"state",value:t.id}}];if(r[t.id]=e,0==t.edges.length){if(t.isAccepting){const r={type:"jump",target:null,index:e,source:{type:"state",value:t.id,children:[],range:{start:-1,end:-1}}};return n.push(r),[r]}throw new Error("Compiling an SFA state with no outgoing edges")}{let s=[];for(let i=0;i<t.edges.length-1;i++){const a=t.edges[i],c={type:"split",left:e+1,right:null,index:e,source:{type:"state",value:`${t.id}.${i}`,children:[],range:{start:-1,end:-1}}},o=[c].concat(this.compileSFA_edge(t,a,e+1,r,n));s=s.concat(o),e+=o.length,c.right=e}const i=t.edges[t.edges.length-1],a=this.compileSFA_edge(t,i,e,r,n);return s.concat(a)}}compileSFA_edge(t,e,r,n,s){const i=this.compileSFA_edgeLabel(t,e,r);if(r+=i.length,t.isAccepting&&e.target==t&&!e.formula){const n={type:"jump",target:null,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};return s.push(n),i.concat([n])}return e.formula?i.concat([{type:"check",formula:e.formula,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`}}]).concat(this.compileSFA_(e.target,r+1,n,s)):i.concat(this.compileSFA_(e.target,r,n,s))}compileSFA_edgeLabel(t,e,r){let n=[];for(let s=0;s<e.label.length;s++){const i=e.label[s];if("start-capture"==i.type){const s=this.captureIdx,a=i.group;i.captureID=s;const c={type:"start",group:a,captureID:s,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};this.captureIdx++,n.push(c),r++}else if("end-capture"==i.type){const s=i.start.captureID,a={type:"end",group:i.group,captureID:s,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};n.push(a),r++}}return n}compile(t,e=!1){if(!this.validateParseTree(t))throw new Error("Parse tree did not represent a valid program");E(),this.captureIdx=0;const r=[{type:"split",left:3,right:1,index:0,source:"root"},{type:"check",formula:{type:s.TRUE,value:!0,children:[],range:{start:0,end:0}},index:1,source:"root"},{type:"jump",target:0,index:2,source:"root"},{type:"start",group:"$root",captureID:-1,index:3,source:"root"}],n=this.compileTree(t,r.length),i=r.concat(n).concat([{type:"end",group:"$root",captureID:-1,index:r.length+n.length,source:"root"},{type:"match",index:r.length+n.length+1,source:"root"}]);if(!this.validateProgram(i))throw new Error("Error compiling tree "+JSON.stringify(t)+" into result "+JSON.stringify(i));if(!e)for(let t=0;t<i.length;t++)delete i[t].source,delete i[t].index;return i}validateParseTree(t){return!R||!this.anyCapturesInsidePropositions(t)}anyCapturesInsidePropositions(t){const e=f(t);for(let r=0;r<t.children.length;r++){const n=t.children[r];if(e&&n.type==s.CAPTURE)return console.log(`Can't put a capturing group inside of a propositional term: ${x(t)}!`),!0;if(this.anyCapturesInsidePropositions(n))return!0}return!1}validateProgram(t){if(!R)return!0;for(let e=0;e<t.length;e++){const r=t[e];if(r.index!==e)throw new Error(`Bad code generation:${r.index} != ${e} for ${S([r])} in ${S(t)}`)}const e=this.reachableInstructions(t,0,{});for(let r=0;r<t.length;r++)if(!e[r])throw new Error(`Bad code generation:${r} not reachable for ${S([t[r]])} in ${S(t)}`);return!0}reachableInstructions(t,e,r){if(e in r||e>=t.length)return r;r[e]=!0;const n=t[e];if("split"==n.type){let e=this.reachableInstructions(t,n.left,r);return this.reachableInstructions(t,n.right,e)}return"jump"==n.type?this.reachableInstructions(t,n.target,r):this.reachableInstructions(t,e+1,r)}}function N(t){const e=void 0===t.value?"":t.value.toString(),r=t.children&&t.children.length?t.children.map(t=>x(t)).join(","):"";return`${t.type}(${e},${r})`}function x(t){switch(t.type){case s.TRUE:return"true";case s.FALSE:return"false";case s.START:return"start";case s.END:return"end";case s.AND:return`${x(t.children[0])} & ${x(t.children[1])}`;case s.OR:return`${x(t.children[0])} | ${x(t.children[1])}`;case s.NOT:return`not ${x(t.children[0])}`;case s.GROUP:return`(${x(t.children[0])})`;case s.CAPTURE:return`$${t.value.captureID}:${t.value.group}(${x(t.children[0])})`;default:return N(t)}}function S(t){let e=[];for(let n=0;n<t.length;n++){const s=t[n];let i=`${n}:${s.type}`;switch(s.type){case"split":i+=` ${s.left} ${s.right}`;break;case"jump":i+=` ${s.target}`;break;case"check":i+=" "+x(s.formula);break;case"start":case"end":i+=` ${s.group} (${s.captureID})`;break;case"match":break;default:throw new Error("Unrecognized instruction "+s)}if(s.source){var r=s.source;"root"==r?i+="  \t\t(root)":"check"==s.type&&"range"in r?i+=`\t(ch. ${r.range.start}-${r.range.end})`:i+=`\t\t(${r.type} ${JSON.stringify(r.value)})`}e.push(i)}return e.join("\n")}class w{constructor(t,e,r=!1){this.context=e,this.spec=t;const n=new y(e.tokens),s=new I(e.tokens);if(this.parseResult=n.parse(t),this.parseResult.errors.length)throw new Error("Parsed with errors:"+JSON.stringify(this.parseResult.errors));this.program=s.compile(this.parseResult.tree,r)}get traceAPI(){return this.context.trace}get checkAPI(){return this.context.checks}check(t,e,r,n){var i,a;switch(n.type){case s.TRUE:return!0;case s.FALSE:return!1;case s.START:return 0==r;case s.END:return this.traceAPI.isAtEnd(t);case s.AND:return i=this.check(t,e,r,n.children[0]),a=this.check(t,e,r,n.children[1]),!(!i||!a)&&{node:n,left:i,right:a};case s.OR:return i=this.check(t,e,r,n.children[0]),a=this.check(t,e,r,n.children[1]),!(!i&&!a)&&{node:n,left:i,right:a};case s.NOT:return!this.check(t,e,r,n.children[0]);case s.GROUP:return this.check(t,e,r,n.children[0]);default:if(this.checkAPI[n.type])return this.checkAPI[n.type](t,e,r,n);throw new Error("Unrecognized propositional formula")}}match(t,e=!1){return new F({spec:this,preserveStates:e},function(t){return{queue:new _,nextQueue:new _,threads:[],liveSet:new k((t,e)=>t==e,t=>t),maxThreadID:0,index:-1,pastEnd:!1,trace:t,matchQueue:new U(t=>t.priority),matchSet:new k(b,D),lastMatchPriority:0}}(t),void 0).next()}}class O{constructor(t,e,r,n){this.id=t,this.pc=e,this.priority=r,this.matches=n.map(function(t){let e=C(t);return e.priority=Math.max(r,t.priority),e})}equals(t){return this.pc==t.pc}hash(){return this.pc}mergeThread(t){for(let e=0;e<t.matches.length;e++){let r=!1;for(let n=0;n<this.matches.length;n++)if(b(this.matches[n],t.matches[e])){r=!0;break}if(!r){let r=C(t.matches[e]);r.priority=Math.max(this.priority,r.priority),this.matches.push(r)}}}hasOpenMatch(){for(let t=0;t<this.matches.length;t++)if(this.matches[t].instructions.length>0)return!0;return!1}hasExplicitMatch(){for(let t=0;t<this.matches.length;t++)if(this.matches[t].instructions.length>0&&-1!=this.matches[t].instructions[0].groupIndex)return!0;return!1}pushMatchInstruction(t){for(let e=0;e<this.matches.length;e++)this.matches[e].instructions.push(t)}terminate(){this.matches=[]}}class k{constructor(t,e,r=1e3){this.equiv=t,this.hash=e,this.coll=new Array(r),this.length=0}bucketFind(t,e){for(let r=0;r<t.length;r++)if(this.equiv?this.equiv(t[r].key,e):t[r].key==e)return t[r].val}push(t,e){const r=this.hash(t)%this.coll.length;let n=this.coll[r];if(n){if(void 0!==this.bucketFind(n,t))return!1;n.push({key:t,val:e})}else this.coll[r]=[{key:t,val:e}];return this.length++,!0}get(t){if(0==this.length)return;const e=this.hash(t)%this.coll.length;let r=this.coll[e];return r?this.bucketFind(r,t):void 0}clear(){for(let t=0;t<this.coll.length;t++)this.coll[t]=[];this.length=0}contains(t){if(0==this.length)return!1;const e=this.hash(t)%this.coll.length;let r=this.coll[e];return!!r&&void 0!==this.bucketFind(r,t)}}function $(t,e){return t+=0|e,t+=t<<10|0,t^=t>>6|0,t+=e>>8|0,t+=t<<10|0,t^=t>>6|0,t+=e>>16|0,t+=t<<10|0,t^=t>>6|0,t+=e>>24|0,t+=t<<10|0,t^=t>>6|0}const b=function(t,e){if(t.instructions.length!=e.instructions.length)return!1;for(let r=0;r<t.instructions.length;r++){const n=t.instructions[r],s=e.instructions[r];if(n.type!=s.type||n.index!=s.index||n.group!=s.group)return!1}return!0},D=function(t){return function(...t){let e=0;for(let r=0;r<t.length;r++)e=$(e,t[r]);return function(t){return t+=t<<3|0,t^=t>>11|0,t+=t<<15|0}(e)}(t.instructions.length)};function C(t){return{priority:t.priority,instructions:t.instructions.slice()}}class _{constructor(){this.array=[],this.length=0}push(t){this.array[this.length]=t,this.length++}clear(){this.length=0}get first(){if(0!=this.length)return this.array[0]}get(t){if(!(t<0||t>=this.length))return this.array[t]}}class U{constructor(t,e,r){this.queues=[],this.priorityFunction=t,this.length=0,this.lowestPriority=1/0,this.highestPriority=-1/0,this.members=e&&r?new k(e,r):void 0,this.clear()}push(t){const e=this.priorityFunction(t);if(this.members){if(this.members.contains(t))return!1;this.members.push(t,!0)}return e in this.queues?this.queues[e].push(t):this.queues[e]=[t],e<this.lowestPriority&&(this.lowestPriority=e),e>this.highestPriority&&(this.highestPriority=e),this.length++,!0}shift(){if(this.lowestPriority>=1/0||0==this.length)return;const t=this.queues[this.lowestPriority],e=t.pop();if(0==t.length)if(delete this.queues[this.lowestPriority],this.highestPriority<=this.lowestPriority)this.lowestPriority=1/0,this.highestPriority=-1/0;else for(;!this.queues[this.lowestPriority]&&this.lowestPriority<this.highestPriority;)this.lowestPriority++;return this.length--,e}get first(){if(0!=this.length)return this.queues[this.lowestPriority][0]}clear(){this.queues=[],this.lowestPriority=1/0,this.highestPriority=-1/0,this.length=0,this.members&&this.members.clear()}}const q=100;class F{constructor(t,e,r){if(this.config=t,this.state=e,-1==this.state.index){this.state.trace=this.config.spec.traceAPI.start(this.state.trace);let t=new O(0,0,0,[{priority:0,instructions:[]}]);this.enqueueThread(t);const e=this.state.queue;this.state.queue=this.state.nextQueue,this.state.nextQueue=e,this.state.liveSet.clear(),this.state.matchSet.clear(),this.state.index=0}this.match=r}get start(){return this.match?this.match.start:-1}get end(){return this.match?this.match.end:-1}get states(){return this.match?this.match.states:void 0}get subgroups(){return this.match?this.match.subgroups:void 0}hasReadyMatch(){return!!this.state.matchQueue.length&&(!this.state.queue.length||this.state.matchQueue.first.priority<=this.state.queue.first.priority)}enqueueThread(t){const e=this.config.spec.program[t.pc];switch(e.type){case"jump":return t.pc=e.target,void this.enqueueThread(t);case"split":this.state.maxThreadID++,t.pc=e.left;const r=new O(this.state.maxThreadID,e.right,t.priority+1,t.matches);return this.enqueueThread(t),void this.enqueueThread(r);case"start":return t.pushMatchInstruction({type:"start",index:this.state.index+1,group:e.group,groupIndex:e.captureID}),t.pc++,void this.enqueueThread(t);case"end":return t.pushMatchInstruction({type:"end",index:this.state.index+1,group:e.group,groupIndex:e.captureID}),t.pc++,void this.enqueueThread(t);case"match":for(let e=0;e<t.matches.length;e++)t.matches[e].priority>=t.priority&&this.state.matchSet.push(t.matches[e],!0)&&this.state.matchQueue.push(t.matches[e]);return void t.terminate();case"check":const n=t.hash();let s=this.state,i=s.liveSet.get(n);if(i){if(i.index!=s.index)i.index=s.index,i.threads.clear(),i.threads.push(t);else for(let e=0;e<i.threads.length;e++)if(i.threads.get(e).equals(t))return i.threads.get(e).mergeThread(t),void t.terminate()}else{let e=new _;e.push(t),s.liveSet.push(n,{index:s.index,threads:e})}return void s.nextQueue.push(t);default:throw new Error("Unrecognized instruction type ${instr.type}")}}prettifyMatch(t){let e=[],r={};for(let n=0;n<t.instructions.length;n++){const s=t.instructions[n];switch(s.type){case"start":let t={group:s.group,groupIndex:s.groupIndex,start:s.index,end:1/0,states:void 0,results:void 0};if(this.config.preserveStates&&(t.states=[],t.results=[]),e.push(t),r[t.group])throw new Error("Duplicate capture group");r[t.group]=t;break;case"state":let n=Object.getOwnPropertyNames(r);for(let t=0;t<n.length;t++){let e=r[n[t]];e.states.push(s.state),e.results.push(s.result)}break;case"end":r[s.group].end=s.index,delete r[s.group]}}let n=Object.getOwnPropertyNames(r);if(n.length)throw new Error(`Open capture groups: ${n.join(",")}`);let s=e.shift(),i={start:s.start,end:s.end,subgroups:e.filter(t=>t.start!=t.end),states:void 0,results:void 0};return this.config.preserveStates&&(i.states=s.states,i.results=s.results),i}next(){if(!this.state)throw new Error("Don't call next() on the same PlayspecResult twice!");if(this.config.spec.traceAPI.isReady&&!this.config.spec.traceAPI.isReady(this.state.trace)){const t=this.state;return this.state=void 0,new F(this.config,t,void 0)}for(;!this.hasReadyMatch()&&this.state.queue.length;){const t=this.config.spec.traceAPI.currentState(this.state.trace);let e=void 0;const r=this.state.queue.length;let n=0;for(let s=0;s<this.state.queue.length;s++){if(s>=r)throw new Error("The thread queue should never grow during a single trace state!");let i=this.state.queue.get(s);if(i.priority<n)throw new Error("Decreasing priority!");const a=this.config.spec.program[i.pc];switch(a.type){case"check":const r=this.config.spec.check(this.state.trace,t,this.state.index,a.formula);r?(i.pc++,i.hasOpenMatch()&&this.config.preserveStates&&(i.hasExplicitMatch()||"explicit"!=this.config.preserveStates)&&(e||(e=this.config.spec.traceAPI.copyCurrentState?this.config.spec.traceAPI.copyCurrentState(this.state.trace):t),i.pushMatchInstruction({type:"state",index:this.state.index,state:e,result:r})),this.enqueueThread(i)):i.terminate();break;default:throw new Error("Thread should be parked on a check.")}}let s=this.state.queue;if(this.state.queue=this.state.nextQueue,s.clear(),this.state.nextQueue=s,this.state.index%q==0&&this.state.liveSet.clear(),this.state.matchSet.clear(),this.config.spec.traceAPI.isAtEnd(this.state.trace)){this.config.spec.traceAPI.isStreaming&&this.config.spec.traceAPI.isStreaming(this.state.trace)||this.state.queue.clear();break}this.config.spec.traceAPI.advanceState(this.state.trace),this.state.index++}if(this.hasReadyMatch()){const t=this.state.matchQueue.shift();if(this.state.lastMatchPriority>t.priority)throw new Error("Matches popped out of order!");this.state.lastMatchPriority=t.priority;const e=this.prettifyMatch(t),r=this.state;return this.state=void 0,new F(this.config,r,e)}if(this.config.spec.traceAPI.isStreaming&&this.config.spec.traceAPI.isStreaming(this.state.trace)){const t=this.state;return this.state=void 0,new F(this.config,t,void 0)}return this.state=void 0,null}}r.d(e,"tokenTypes",function(){return n}),r.d(e,"parseTypes",function(){return s}),r.d(e,"cloneTree",function(){return i}),r.d(e,"constantValue",function(){return a}),r.d(e,"parseValue",function(){return c}),r.d(e,"parseInfixR",function(){return o}),r.d(e,"parseInfixRPropositional",function(){return h}),r.d(e,"BOUND_INFINITE",function(){return u}),r.d(e,"standardTokens",function(){return l}),r.d(e,"isCustom",function(){return g}),r.d(e,"isPropositional",function(){return f}),r.d(e,"Parser",function(){return y}),r.d(e,"Compiler",function(){return I}),r.d(e,"stringifyCustom",function(){return N}),r.d(e,"stringifyFormula",function(){return x}),r.d(e,"stringify",function(){return S}),r.d(e,"Playspec",function(){return w}),r.d(e,"SFA",function(){return T}),r.d(e,"fromParseTree",function(){return v}),r.d(e,"resetStateID",function(){return E})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QbGF5c3BlY3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vUGxheXNwZWNzLy4vc3JjL3BhcnNlci50cyIsIndlYnBhY2s6Ly9QbGF5c3BlY3MvLi9zcmMvc2ZhLnRzIiwid2VicGFjazovL1BsYXlzcGVjcy8uL3NyYy9jb21waWxlci50cyIsIndlYnBhY2s6Ly9QbGF5c3BlY3MvLi9zcmMvcGxheXNwZWMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRva2VuVHlwZXMiLCJXSElURVNQQUNFIiwiQ09OQ0FURU5BVElPTiIsIkRPVFNfR1JFRURZIiwiRE9UU19SRUxVQ1RBTlQiLCJET1RTX09NRUdBIiwiTEVGVF9QQVJFTiIsIlJJR0hUX1BBUkVOIiwiQ0FQVFVSSU5HX0xFRlRfUEFSRU4iLCJBTFRFUk5BVElPTiIsIklOVEVSU0VDVElPTiIsIkFORCIsIk9SIiwiTk9UIiwiU1RBUlQiLCJFTkQiLCJUUlVFIiwiRkFMU0UiLCJFUlJPUiIsInBhcnNlVHlwZXMiLCJPTUVHQSIsIlJFUEVUSVRJT04iLCJDQVBUVVJFIiwiR1JPVVAiLCJjbG9uZVRyZWUiLCJ0eXBlIiwiY2hpbGRyZW4iLCJzbGljZSIsInJhbmdlIiwic3RhcnQiLCJlbmQiLCJjb25zdGFudFZhbHVlIiwiX21yIiwicGFyc2VWYWx1ZSIsInBhcnNlciIsInRva2VuIiwibm9kZSIsInBhcnNlSW5maXhSIiwibGVmdCIsInB1c2giLCJwYXJzZUV4cHJlc3Npb24iLCJ0aWdodG5lc3MiLCJwYXJzZUluZml4UlByb3Bvc2l0aW9uYWwiLCJpc1Byb3Bvc2l0aW9uYWwiLCJlcnJvciIsInJpZ2h0IiwiQk9VTkRfSU5GSU5JVEUiLCJzdGFuZGFyZFRva2VucyIsIm1hdGNoIiwiZXh0ZW5kUGFyc2UiLCJtYXRjaFJlc3VsdCIsImdyZWVkeSIsImxvd2VyQm91bmQiLCJwYXJzZUludCIsInVwcGVyQm91bmQiLCJzdGFydFBhcnNlIiwidHJ1ZVBoaSIsImV4cHIiLCJjdXJyZW50VG9rZW4iLCJhZHZhbmNlIiwiZ3JvdXAiLCJwaGkiLCJjdXN0b21UaWdodG5lc3NPZmZzZXQiLCJpc0N1c3RvbSIsImsiLCJldmVyeSIsIlBhcnNlciIsIltvYmplY3QgT2JqZWN0XSIsImNvbnRleHRUb2tlbnMiLCJ0aGlzIiwidG9rZW5EZWZpbml0aW9ucyIsInRva2Vuc0J5VHlwZSIsInBhcnNlRXJyb3JzIiwiY3VzdG9tVG9rZW5zIiwidG9rZW5zIiwiY29uY2F0IiwidGkiLCJsZW5ndGgiLCJpbnB1dCIsImRlZm4iLCJSZWdFeHAiLCJtciIsInBhcnNlVHJlZSIsInJlc2V0U3RyZWFtIiwibXNnIiwidHJlZSIsImVyciIsIm1lc3NhZ2UiLCJzdHIiLCJyZXN1bHQiLCJlcnJvcnMiLCJzdWJzdHJpbmciLCJpbmRleCIsInRva2VuRGVmaW5pdGlvbiIsImV4ZWNSZXN1bHQiLCJleGVjIiwiQXJyYXkiLCJpc0FycmF5IiwibWkiLCJjYW5kaWRhdGUiLCJzdWJzdHIiLCJtYXRjaExlbmd0aCIsIm9sZEluZGV4Iiwic3RyaW5nIiwicG9zaXRpb24iLCJzdHJlYW0iLCJjaGFyUG9zaXRpb24iLCJ0b2tlbml6ZSIsInJlbWFpbmRlciIsInRva2VuRGVmIiwibmV3VHJlZSIsInN0YXRlSUQiLCJyZXNldFN0YXRlSUQiLCJzZmFfU0ZBIiwic3RhcnRTdGF0ZXMiLCJTdGF0ZSIsImFjY2VwdGluZ1N0YXRlcyIsIm9wdElEIiwiaW5kZXhPZiIsImFkZEVkZ2UiLCJFZGdlIiwiaXNBY2NlcHRpbmciLCJzcGxpY2UiLCJmb3VuZCIsInN0YWNrIiwiaGVyZSIsInBvcCIsImlkIiwiZWsiLCJlZGdlcyIsImUiLCJ0YXJnZXQiLCJrZXlzIiwibWFwIiwiZ2V0U3RhdGVzIiwiZm9ybXVsYSIsInN0cmluZ2lmeUZvcm11bGEiLCJsYWJlbCIsImpvaW4iLCJzZWVuIiwic2siLCJyZWFjaGFibGUiLCJuZXdFcyIsInRlIiwicmsiLCJiIiwiZWVsaW0iLCJhIiwiYXhiIiwic3RhdGVzIiwic2EiLCJqIiwic2IiLCJzYXNiIiwibmV3U3RhdGUiLCJtYXJrQWNjZXB0aW5nIiwic2FiIiwiYWUiLCJhZXQiLCJhZUlzQWNjZXB0aW5nU2VsZkVkZ2UiLCJiZSIsImJldCIsImNvbnNvbGUiLCJwMSIsInAyIiwiY29tYmluZWQiLCJ0b1N0cmluZyIsImZyb21QYXJzZVRyZWUiLCJzZmEiLCJvdXRFZGdlcyIsImJ1aWxkIiwic2VlZFN0YXRlIiwiYWVzIiwibWluIiwibWF4IiwiY2xvbmVkIiwibmV4dCIsIm91dCIsImVzIiwiY2FwdHVyZVN0YXJ0IiwiYmVzIiwiaW50ZXJzZWN0Iiwib2xkQWNjZXB0aW5nIiwic3RhcnRrIiwiYWNjayIsImFjYyIsIm1hcmtOb25BY2NlcHRpbmciLCJlaSIsInRlcm1pbnVzIiwiREVCVUdfTU9ERSIsImNvbXBpbGVyX0NvbXBpbGVyIiwiX3Rva2VuRGVmcyIsImNhcHR1cmVJZHgiLCJpZHgiLCJjb21waWxlVHJlZSIsImNhcHR1cmVJRCIsInNvdXJjZSIsImFJZHgiLCJiSWR4IiwiYnJhbmNoIiwianVtcCIsImNvbXBpbGVTRkEiLCJwcmVmYWNlIiwicGhpUGdtIiwib3B0aW9uYWxzIiwidGFyZ2V0cyIsInJlcGV0aXRpb24iLCJjSWR4IiwiRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdGVTdGFydHMiLCJlbmRKdW1wcyIsInBnbSIsInN0YXJ0UGdtIiwiY29tcGlsZVNGQV8iLCJzdGF0ZSIsImVkZ2UiLCJlZGdlU3BsaXQiLCJlZGdlUGdtIiwiY29tcGlsZVNGQV9lZGdlIiwiY29tcGlsZVNGQV9lZGdlTGFiZWwiLCJkZWJ1ZyIsInZhbGlkYXRlUGFyc2VUcmVlIiwiYm9keSIsInZhbGlkYXRlUHJvZ3JhbSIsImFueUNhcHR1cmVzSW5zaWRlUHJvcG9zaXRpb25zIiwicGFyZW50IiwicHJvcCIsImNpIiwiY2hpbGQiLCJsb2ciLCJpbnN0ciIsInJlYWNoYWJsZUluc3RydWN0aW9ucyIsImkwIiwib3RoZXIiLCJzZWVuTGVmdCIsInN0cmluZ2lmeUN1c3RvbSIsInVuZGVmaW5lZCIsImNvZGUiLCJpbnN0clN0ciIsInNyYyIsInBsYXlzcGVjX1BsYXlzcGVjIiwic3BlYyIsImNvbnRleHQiLCJjb21waWxlciIsInBhcnNlUmVzdWx0IiwicGFyc2UiLCJwcm9ncmFtIiwiY29tcGlsZSIsInRyYWNlQVBJIiwidHJhY2UiLCJjaGVja0FQSSIsImNoZWNrcyIsImlzQXRFbmQiLCJjaGVjayIsInByZXNlcnZlU3RhdGVzIiwiUGxheXNwZWNSZXN1bHQiLCJxdWV1ZSIsIk5vblNocmlua2luZ0FycmF5IiwibmV4dFF1ZXVlIiwidGhyZWFkcyIsImxpdmVTZXQiLCJOb25SZXBsYWNpbmdIYXNoTWFwIiwibWF4VGhyZWFkSUQiLCJwYXN0RW5kIiwibWF0Y2hRdWV1ZSIsIlByaW9yaXR5UXVldWUiLCJwcmlvcml0eSIsIm1hdGNoU2V0IiwibWF0Y2hFcXVpdkZuIiwibWF0Y2hIYXNoRm4iLCJsYXN0TWF0Y2hQcmlvcml0eSIsInBsYXlzcGVjUmVzdWx0U3RhdGVJbml0IiwiVGhyZWFkIiwicGMiLCJtYXRjaGVzIiwibTIiLCJjbG9uZU1hdGNoIiwiTWF0aCIsInQyIiwiaW5zdHJ1Y3Rpb25zIiwiZ3JvdXBJbmRleCIsImVxdWl2Rm4iLCJoYXNoRm4iLCJidWNrZXRDb3VudCIsImVxdWl2IiwiaGFzaCIsImNvbGwiLCJidWNrZXQiLCJvYmoiLCJrZXkiLCJ2YWwiLCJoYXNoQ29kZSIsImJ1Y2tldEZpbmQiLCJoYXNoSW50IiwiaCIsImludDMyIiwiaW5zQSIsImluc0IiLCJudW1iZXJzIiwiZmluYWxpemVIYXNoIiwiaGFzaE51bWJlcnMiLCJhcnJheSIsImZpcnN0IiwicGZuIiwicXVldWVzIiwicHJpb3JpdHlGdW5jdGlvbiIsImxvd2VzdFByaW9yaXR5IiwiSW5maW5pdHkiLCJoaWdoZXN0UHJpb3JpdHkiLCJtZW1iZXJzIiwiY2xlYXIiLCJjb250YWlucyIsInEiLCJMSVZFU0VUX0NMRUFSX0lOVEVSVkFMIiwiY29uZmlnIiwiaW5pdFRocmVhZCIsImVucXVldWVUaHJlYWQiLCJ0ZW1wIiwic3ViZ3JvdXBzIiwidGhyZWFkIiwidGhyZWFkMiIsInB1c2hNYXRjaEluc3RydWN0aW9uIiwidGVybWluYXRlIiwibGl2ZSIsImVxdWFscyIsIm1lcmdlVGhyZWFkIiwidGhyZWFkTGlzdCIsImdyb3VwcyIsImxpdmVHcm91cHMiLCJuZXdHIiwicmVzdWx0cyIsIm9wZW5Hcm91cHMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZ2kiLCJjb250aW51ZWRHIiwicm9vdEdyb3VwIiwic2hpZnQiLCJyb290TWF0Y2giLCJmaWx0ZXIiLCJpc1JlYWR5IiwibmV4dFN0YXRlIiwiaGFzUmVhZHlNYXRjaCIsImN1cnJlbnRTdGF0ZSIsImNvcGllZFN0YXRlIiwibGltaXQiLCJsYXN0UHJpb3JpdHkiLCJ0IiwiY2hlY2tSZXN1bHQiLCJoYXNPcGVuTWF0Y2giLCJoYXNFeHBsaWNpdE1hdGNoIiwiY29weUN1cnJlbnRTdGF0ZSIsImlzU3RyZWFtaW5nIiwiYWR2YW5jZVN0YXRlIiwicHJldHR5TWF0Y2giLCJwcmV0dGlmeU1hdGNoIl0sIm1hcHBpbmdzIjoiMEJBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQTJDQSxPQXRDQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVosRUFBQW1CLEVBQUEsU0FBQWpCLEdBQ0FZLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURrQixPQUFBLEtBSWpEcEIsRUFBQXFCLEVBQUEsU0FBQWxCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQW1CLFdBQ0EsV0FBMkIsT0FBQW5CLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFVLEVBQUFDLEdBQXNELE9BQUFWLE9BQUFXLFVBQUFDLGVBQUFuQixLQUFBZ0IsRUFBQUMsSUFHdER4QixFQUFBMkIsRUFBQSxHQUlBM0IsSUFBQTRCLEVBQUEseUNDakVPLE1BQU1DLEdBQ1RDLFdBQVksSUFDWkMsY0FBZSxJQUVmQyxZQUFhLE1BQ2JDLGVBQWdCLEtBQ2hCQyxXQUFZLE1BQ1pDLFdBQVksSUFDWkMsWUFBYSxJQUNiQyxxQkFBc0IsS0FDdEJDLFlBQWEsSUFDYkMsYUFBYyxJQUNkQyxJQUFLLElBQ0xDLEdBQUksSUFDSkMsSUFBSyxNQUNMQyxNQUFPLFFBQ1BDLElBQUssTUFDTEMsS0FBTSxPQUNOQyxNQUFPLFFBQ1BDLE1BQU8sU0FHRUMsR0FDVEMsTUFBT3BCLEVBQVdLLFdBQ2xCZ0IsV0FBWXJCLEVBQVdHLFlBQ3ZCRCxjQUFlRixFQUFXRSxjQUMxQm9CLFFBQVMsS0FDVEMsTUFBT3ZCLEVBQVdNLFdBQ2xCRyxZQUFhVCxFQUFXUyxZQUN4QkMsYUFBY1YsRUFBV1UsYUFDekJDLElBQUtYLEVBQVdXLElBQ2hCQyxHQUFJWixFQUFXWSxHQUNmQyxJQUFLYixFQUFXYSxJQUNoQkMsTUFBT2QsRUFBV2MsTUFDbEJDLElBQUtmLEVBQVdlLElBQ2hCQyxLQUFNaEIsRUFBV2dCLEtBQ2pCQyxNQUFPakIsRUFBV2lCLE1BQ2xCQyxNQUFPbEIsRUFBV2tCLE9BV2hCLFNBQUFNLEVBQW9CMUIsR0FDdEIsT0FDSTJCLEtBQU0zQixFQUFFMkIsS0FDUmxDLE1BQU9PLEVBQUVQLE1BQ1RtQyxTQUFVNUIsRUFBRTRCLFNBQVNDLFFBQ3JCQyxPQUNJQyxNQUFPL0IsRUFBRThCLE1BQU1DLE1BQ2ZDLElBQUtoQyxFQUFFOEIsTUFBTUUsTUFLbEIsTUFBTUMsRUFBZ0IsU0FBVW5ELEdBQ25DLE9BQU8sU0FBVW9ELEdBQ2IsT0FBT3BELElBSUZxRCxFQUFhLFNBQVVDLEVBQWlCQyxHQUNqRCxPQUFPRCxFQUFPRSxLQUFLRCxFQUFNVixLQUFNVSxFQUFNNUMsUUFHNUI4QyxFQUFjLFNBQVVILEVBQWlCSSxFQUFpQkgsR0FDbkUsSUFBSVQsR0FBWVksR0FFaEIsT0FEQVosRUFBU2EsS0FBS0wsRUFBT00sZ0JBQWdCTCxFQUFNTSxVQUFZLElBQ2hEUCxFQUFPRSxLQUFLRCxFQUFNVixLQUFNVSxFQUFNNUMsTUFBT21DLElBR25DZ0IsRUFBMkIsU0FBVVIsRUFBaUJJLEVBQWlCSCxHQUNoRixJQUFLUSxFQUFnQkwsR0FDakIsT0FBT0osRUFBT1UsTUFBTSxnREFBaURULEVBQU9HLEdBRWhGLElBQUlaLEdBQVlZLEdBQ2hCLE1BQU1PLEVBQVFYLEVBQU9NLGdCQUFnQkwsRUFBTU0sVUFBWSxHQUN2RCxPQUFLRSxFQUFnQkUsSUFHckJuQixFQUFTYSxLQUFLTSxHQUNQWCxFQUFPRSxLQUFLRCxFQUFNVixLQUFNVSxFQUFNNUMsTUFBT21DLElBSGpDUSxFQUFPVSxNQUFNLGlEQUFrRFQsRUFBT1UsSUFNeEVDLEVBQWlCLE9BRWpCQyxJQUVMdEIsS0FBUXpCLEVBQVdDLFdBQ25CK0MsTUFBTyxTQUdQdkIsS0FBTXpCLEVBQVdFLGNBQ2pCOEMsT0FBUWhELEVBQVdFLGVBQ25CdUMsVUFBVyxJQUNYUSxZQUFhWixJQUdiWixLQUFNekIsRUFBV0csWUFDakI2QyxNQUFPLGdDQUNQekQsTUFBTyxTQUFVMkQsR0FDYixPQUNJQyxRQUFRLEVBQ1JDLFdBQVlGLEVBQVksR0FBS0csU0FBU0gsRUFBWSxJQUFNLEVBQ3hESSxXQUFZSixFQUFZLEdBQUtHLFNBQVNILEVBQVksSUFBTUosSUFHaEVMLFVBQVcsSUFDWGMsV0FBWSxTQUFVckIsRUFBaUJDLEdBQ25DLE1BQU1xQixFQUFVdEIsRUFBT0UsS0FBS2pCLEVBQVdILE1BQU0sR0FHN0MsT0FGQXdDLEVBQVE1QixNQUFNQyxNQUFRTSxFQUFNUCxNQUFNQyxNQUNsQzJCLEVBQVE1QixNQUFNRSxJQUFNSyxFQUFNUCxNQUFNQyxNQUN6QkssRUFBT0UsS0FBS2pCLEVBQVdFLFdBQVljLEVBQU01QyxPQUFRaUUsS0FFNURQLFlBQWEsU0FBVWYsRUFBaUJJLEVBQWlCSCxHQUNyRCxPQUFPRCxFQUFPRSxLQUFLakIsRUFBV0UsV0FBWWMsRUFBTTVDLE9BQVErQyxPQUk1RGIsS0FBTXpCLEVBQVdJLGVBQ2pCNEMsTUFBTyw4QkFDUFAsVUFBVyxJQUNYbEQsTUFBTyxTQUFVMkQsR0FDYixPQUNJQyxRQUFRLEVBQ1JDLFdBQVlGLEVBQVksR0FBS0csU0FBU0gsRUFBWSxJQUFNLEVBQ3hESSxXQUFZSixFQUFZLEdBQUtHLFNBQVNILEVBQVksSUFBTUosSUFHaEVTLFdBQVksU0FBVXJCLEVBQWlCQyxHQUNuQyxNQUFNcUIsRUFBVXRCLEVBQU9FLEtBQUtqQixFQUFXSCxNQUFNLEdBRzdDLE9BRkF3QyxFQUFRNUIsTUFBTUMsTUFBUU0sRUFBTVAsTUFBTUMsTUFDbEMyQixFQUFRNUIsTUFBTUUsSUFBTUssRUFBTVAsTUFBTUMsTUFDekJLLEVBQU9FLEtBQUtqQixFQUFXRSxXQUFZYyxFQUFNNUMsT0FBUWlFLEtBRTVEUCxZQUFhLFNBQVVmLEVBQWlCSSxFQUFpQkgsR0FDckQsT0FBT0QsRUFBT0UsS0FBS2pCLEVBQVdFLFdBQVljLEVBQU01QyxPQUFRK0MsT0FJNURiLEtBQU16QixFQUFXSyxXQUNqQjJDLE9BQVFoRCxFQUFXSyxZQUNuQm9DLFVBQVcsSUFDWGMsV0FBWSxTQUFVckIsRUFBaUJDLEdBQ25DLE1BQU1xQixFQUFVdEIsRUFBT0UsS0FBS2pCLEVBQVdILE1BQU0sR0FHN0MsT0FGQXdDLEVBQVE1QixNQUFNQyxNQUFRTSxFQUFNUCxNQUFNQyxNQUNsQzJCLEVBQVE1QixNQUFNRSxJQUFNSyxFQUFNUCxNQUFNRSxJQUN6QkksRUFBT0UsS0FBS2pCLEVBQVdDLE1BQU9lLEVBQU01QyxPQUFRaUUsS0FFdkRQLFlBQWEsU0FBVWYsRUFBaUJJLEVBQWlCSCxHQUNyRCxPQUFPRCxFQUFPRSxLQUFLakIsRUFBV0MsTUFBT2UsRUFBTTVDLE9BQVErQyxPQUl2RGIsS0FBTXpCLEVBQVdNLFdBQ2pCMEMsT0FBUWhELEVBQVdNLFlBQ25CaUQsV0FBWSxTQUFVckIsRUFBaUJDLEdBRW5DLE1BQU1zQixFQUFPdkIsRUFBT00sZ0JBQWdCLEdBQ3BDLE9BQUlOLEVBQU93QixlQUFlakMsTUFBUXpCLEVBQVdPLFlBQ2xDMkIsRUFBT1UsTUFBTSw0QkFBNkJULEVBQU9zQixJQUU1RHZCLEVBQU95QixVQUNBekIsRUFBT0UsS0FBS2pCLEVBQVdJLE1BQU9ZLEVBQU01QyxPQUFRa0UsUUFJdkRoQyxLQUFNekIsRUFBV08sWUFDakJ5QyxPQUFRaEQsRUFBV08sZUFHbkJrQixLQUFNekIsRUFBV1EscUJBQ2pCd0MsTUFBTywyQkFDUHpELE1BQU8sU0FBVTJELEdBQ2IsT0FDSVUsTUFBT1YsRUFBWSxJQUFNLGNBR2pDSyxXQUFZLFNBQVVyQixFQUFpQkMsR0FFbkMsTUFBTXNCLEVBQU92QixFQUFPTSxnQkFBZ0IsR0FDcEMsT0FBSU4sRUFBT3dCLGVBQWVqQyxNQUFRekIsRUFBV08sWUFDbEMyQixFQUFPVSxNQUFNLDRCQUE2QlQsRUFBT3NCLElBRTVEdkIsRUFBT3lCLFVBQ0F6QixFQUFPRSxLQUFLakIsRUFBV0csUUFBU2EsRUFBTTVDLE9BQVFrRSxRQUl6RGhDLEtBQU16QixFQUFXUyxZQUNqQnVDLE9BQVFoRCxFQUFXUyxhQUNuQmdDLFVBQVcsR0FDWFEsWUFBYVosSUFHYlosS0FBTXpCLEVBQVdVLGFBQ2pCc0MsT0FBUWhELEVBQVdVLGNBQ25CK0IsVUFBVyxHQUNYUSxZQUFhWixJQUdiWixLQUFNekIsRUFBV1csSUFDakJxQyxPQUFRaEQsRUFBV1csS0FDbkI4QixVQUFXLElBQ1hRLFlBQWFQLElBR2JqQixLQUFNekIsRUFBV1ksR0FDakJvQyxPQUFRaEQsRUFBV1ksSUFDbkI2QixVQUFXLElBQ1hRLFlBQWFQLElBR2JqQixLQUFNekIsRUFBV2EsSUFDakJtQyxPQUFRaEQsRUFBV2EsS0FDbkI0QixVQUFXLElBQ1hjLFdBQVksU0FBVXJCLEVBQWlCQyxHQUNuQyxNQUFNMEIsRUFBTTNCLEVBQU9NLGdCQUFnQkwsRUFBTU0sV0FDekMsT0FBS0UsRUFBZ0JrQixHQUdkM0IsRUFBT0UsS0FBS0QsRUFBTVYsS0FBTVUsRUFBTTVDLE9BQVFzRSxJQUZsQzNCLEVBQU9VLE1BQU0sbURBQW9EVCxFQUFPMEIsTUFNdkZwQyxLQUFNekIsRUFBV2MsTUFDakJrQyxPQUFRaEQsRUFBV2MsT0FDbkJ5QyxXQUFZdEIsSUFHWlIsS0FBTXpCLEVBQVdlLElBQ2pCaUMsT0FBUWhELEVBQVdlLEtBQ25Cd0MsV0FBWXRCLElBR1pSLEtBQU16QixFQUFXZ0IsS0FDakJnQyxPQUFRaEQsRUFBV2dCLE1BQ25CekIsTUFBT3dDLEdBQWMsR0FDckJ3QixXQUFZdEIsSUFHWlIsS0FBTXpCLEVBQVdpQixNQUNqQitCLE9BQVFoRCxFQUFXaUIsT0FDbkIxQixNQUFPd0MsR0FBYyxHQUNyQndCLFdBQVl0QixJQUdaUixLQUFNekIsRUFBV2tCLE1BQ2pCOEIsTUFBTyxPQUNQTyxXQUFZdEIsSUFJZDZCLEVBQXdCLElBRXhCNUMsRUFBUSxRQUVSLFNBQUE2QyxFQUFtQmpFLEdBQ3JCLElBQUssSUFBSWtFLEtBQUs3QyxFQUNWLEdBQUlBLEVBQVc2QyxJQUFNbEUsRUFBRTJCLEtBQ25CLE9BQU8sRUFHZixPQUFPLEVBR0wsU0FBQWtCLEVBQTBCN0MsR0FDNUIsT0FBT2lFLEVBQVNqRSxJQUNaQSxFQUFFMkIsTUFBUU4sRUFBV1IsS0FDckJiLEVBQUUyQixNQUFRTixFQUFXUCxJQUNyQmQsRUFBRTJCLE1BQVFOLEVBQVdOLEtBQ3JCZixFQUFFMkIsTUFBUU4sRUFBV0gsTUFDckJsQixFQUFFMkIsTUFBUU4sRUFBV0YsT0FDckJuQixFQUFFMkIsTUFBUU4sRUFBV0wsT0FDckJoQixFQUFFMkIsTUFBUU4sRUFBV0osTUFDbkJqQixFQUFFMkIsTUFBUU4sRUFBV0ksT0FBU3pCLEVBQUUyQixNQUFRTixFQUFXRyxVQUNqRHhCLEVBQUU0QixTQUFTdUMsTUFBTSxTQUFVckYsR0FDdkIsT0FBTytELEVBQWdCL0QsV0FRakNzRixFQUtGQyxZQUFZQyxHQUNSQyxLQUFLQyxvQkFDTEQsS0FBS0UsZ0JBQ0xGLEtBQUtHLGVBQ0wsTUFBTUMsRUFBZUwsTUFDZk0sRUFBU0QsRUFBYUUsT0FBTzVCLEdBQ25DLElBQUssSUFBSTZCLEVBQUssRUFBR0EsRUFBS0YsRUFBT0csT0FBUUQsSUFBTSxDQUN2QyxNQUFNRSxFQUF5QkosRUFBT0UsR0FDaENuQyxFQUFvQnFDLEVBQU1yQyxXQUFhLEVBQ3ZDc0MsR0FDRnRELEtBQU1xRCxFQUFNckQsS0FDWnVCLE1BQU84QixFQUFNOUIsaUJBQWlCZ0MsT0FBU0YsRUFBTTlCLE1BQ2hCLGlCQUFoQjhCLEVBQVcsT0FBa0JBLEVBQU05QixPQUN4QzhCLEVBQU05QixNQUNkekQsTUFBT3VGLEVBQU12RixPQUFTLFNBQVUwRixHQUM1QixPQUFPQSxFQUFHLElBRWR4QyxVQUFXbUMsRUFBS0gsRUFBYUksT0FBU3BDLEVBQVlxQixFQUF3QnJCLEVBQzFFYyxXQUFZdUIsRUFBTXZCLFlBQWMsU0FBVXJCLEVBQWlCQyxHQUN2RCxPQUFPRCxFQUFPVSxNQUFNLDJDQUE0Q1QsSUFFcEVjLFlBQWE2QixFQUFNN0IsYUFBZSxTQUFVZixFQUFpQmdELEVBQXNCL0MsR0FDL0UsT0FBT0QsRUFBT1UsTUFBTSw0Q0FBNkNULEVBQU8rQyxLQUdoRmIsS0FBS0MsaUJBQWlCL0IsS0FBS3dDLEdBQzNCVixLQUFLRSxhQUFhUSxFQUFLdEQsTUFBUXNELEVBRW5DVixLQUFLYyxjQUdUaEIsS0FBSzFDLEVBQWNsQyxFQUF3Qm1DLE1BQ3ZDLE9BQVNELE9BQU1sQyxRQUFPbUMsV0FBVUUsT0FBU0MsT0FBUSxFQUFHQyxLQUFNLElBRzlEcUMsTUFBTWlCLEVBQWFqRCxFQUFja0QsR0FDN0IsTUFBTUMsRUFBTWpCLEtBQUtqQyxLQUFLbEIsR0FBU3FFLFFBQVNILEVBQUtqRCxRQUFPa0QsU0FFcEQsT0FEQWhCLEtBQUtHLFlBQVlqQyxLQUFLK0MsR0FDZkEsRUFHWG5CLFNBQVNxQixHQUNMLElBQUlDLEtBQ0FDLEtBQ0FDLEVBQW9CSCxFQUNwQkksRUFBZ0IsRUFDcEIsS0FBT0QsRUFBVWQsUUFDYixJQUFLLElBQUlELEVBQUssRUFBR0EsRUFBS1AsS0FBS0MsaUJBQWlCTyxPQUFRRCxJQUFNLENBQ3RELE1BQU1pQixFQUFtQ3hCLEtBQUtDLGlCQUFpQk0sR0FDekQ1QixFQUFRNkMsRUFBZ0I3QyxNQUM5QixJQUFJRSxHQUlJRixNQUFPLEtBQ1A0QyxPQUFRLEdBRWhCLEdBQUk1QyxhQUFpQmdDLE9BQVEsQ0FDekIsSUFBSWMsRUFBYTlDLEVBQU0rQyxLQUFLSixHQUN4QkcsSUFDQTVDLEVBQVlGLE1BQVE4QyxFQUNwQjVDLEVBQVkwQyxNQUFRRSxFQUFXRixZQUVoQyxHQUFJSSxNQUFNQyxRQUFRakQsR0FDckIsSUFBSyxJQUFJa0QsRUFBSyxFQUFHQSxFQUFLbEQsRUFBTTZCLE9BQVFxQixJQUFNLENBQ3RDLE1BQU1DLEVBQVluRCxFQUFNa0QsR0FDcEJQLEVBQVVTLE9BQU8sRUFBR0QsRUFBVXRCLFNBQVdzQixJQUN6Q2pELEVBQVlGLE9BQVNtRCxHQUNyQmpELEVBQVkwQyxNQUFRLEdBSWhDLEdBQUkxQyxFQUFZRixPQUE4QixHQUFyQkUsRUFBWTBDLE1BQVksQ0FDN0MsTUFBTVMsRUFBY25ELEVBQVlGLE1BQU0sR0FBRzZCLE9BQ3pDYyxFQUFZQSxFQUFVUyxPQUFPbEQsRUFBWUYsTUFBTSxHQUFHNkIsUUFDbEQsTUFBTXlCLEVBQVdWLEVBQ2pCQSxHQUFTUyxFQUNMUixFQUFnQnBFLE9BQVN6QixFQUFXQyxhQUNoQzRGLEVBQWdCcEUsT0FBU3pCLEVBQVdrQixPQUNwQ3dFLEVBQU9uRCxLQUFLa0QsRUFBT1osUUFFdkJZLEVBQU9sRCxNQUNIZCxLQUFNb0UsRUFBZ0JwRSxLQUN0QmxDLE1BQU9zRyxFQUFnQnRHLE1BQU8yRCxFQUFZRixPQUMxQ1AsVUFBV29ELEVBQWdCcEQsV0FBYSxFQUN4Q2IsT0FBU0MsTUFBT3lFLEVBQVV4RSxJQUFLOEQsTUFHdkMsT0FJWixPQUFTVyxPQUFRZixFQUFLZCxPQUFRZSxFQUFRZSxTQUFVLEVBQUdkLE9BQVFBLEdBRy9EdkIsY0FDSUUsS0FBS29DLFFBQVdGLE9BQVEsR0FBSTdCLFVBQVk4QixTQUFVLEVBQUdkLFdBR3pEdkIsZUFDSSxPQUFPRSxLQUFLWCxlQUFpQlcsS0FBS1gsZUFBZTlCLE1BQU1DLE1BQVF3QyxLQUFLb0MsT0FBUUYsT0FBTzFCLE9BR3ZGVixZQUNJLE1BQU1yQyxFQUFNdUMsS0FBS3FDLGVBQ2pCLE9BQU9yQyxLQUFLb0MsT0FBUUYsT0FBT0gsT0FBT3RFLEdBR3RDcUMsZUFDSSxPQUFPRSxLQUFLb0MsT0FBUS9CLE9BQU9MLEtBQUtvQyxPQUFRRCxVQUc1Q3JDLFVBQ0lFLEtBQUtvQyxPQUFRRCxXQUdqQnJDLE1BQU1xQixHQUNGbkIsS0FBS29DLE9BQVNwQyxLQUFLc0MsU0FBU25CLEdBQzVCbkIsS0FBS0csZUFFTCxJQUFJaUIsR0FBV0osS0FERmhCLEtBQUs3QixnQkFBZ0IsR0FDYmtELE9BQVFyQixLQUFLRyxZQUFhb0MsVUFBV3ZDLEtBQUt1QyxhQUcvRCxPQUZBdkMsS0FBS0csZUFDTEgsS0FBS2MsY0FDRU0sRUFHWHRCLGdCQUFnQjFCLEdBQ1osSUFBSU4sRUFBUWtDLEtBQUtYLGVBQ2JtRCxFQUFXeEMsS0FBS0UsYUFBYXBDLEVBQU1WLE1BQ3ZDLE1BQU1JLEVBQVFNLEVBQU1QLE1BQU1DLE1BQzFCd0MsS0FBS1YsVUFDTCxJQUFJMEIsRUFBT3dCLEVBQVN0RCxXQUFZYyxLQUFNbEMsR0FHdEMsR0FGQWtELEVBQUt6RCxNQUFNQyxNQUFRQSxFQUNuQndELEVBQUt6RCxNQUFNRSxJQUFNdUMsS0FBS3FDLGVBQ2xCckIsRUFBSzVELE1BQVFQLEVBQ2IsT0FBT21FLEVBR1gsSUFEQWxELEVBQVFrQyxLQUFLWCxlQUNOdkIsR0FBU00sRUFBWU4sRUFBTU0sV0FBVyxDQUN6Q29FLEVBQVd4QyxLQUFLRSxhQUFhcEMsRUFBTVYsTUFDbkM0QyxLQUFLVixVQUNMLElBQUltRCxFQUFVRCxFQUFTNUQsWUFBYW9CLEtBQU1nQixFQUFNbEQsR0FHaEQsR0FGQTJFLEVBQVFsRixNQUFNQyxNQUFRd0QsRUFBS3pELE1BQU1DLE1BQ2pDaUYsRUFBUWxGLE1BQU1FLElBQU11QyxLQUFLcUMsZUFDckJJLEVBQVFyRixNQUFRUCxFQUNoQixPQUFPNEYsRUFFWHpCLEVBQU95QixFQUNQM0UsRUFBUWtDLEtBQUtYLGVBRWpCLE9BQU8yQixHQzViZixJQUFJMEIsRUFBVSxFQUVSLFNBQUFDLElBQ0ZELEVBQVUsUUFHUkUsRUFHRjlDLGNBQ0lFLEtBQUs2QyxhQUFlLElBQUlDLEdBQ3hCOUMsS0FBSytDLG1CQUdUakQsU0FBU2tELEdBQ0wsT0FBTyxJQUFJRixFQUFNRSxHQUdyQmxELGNBQWNwRSxJQUU4QixHQUFwQ3NFLEtBQUsrQyxnQkFBZ0JFLFFBQVF2SCxJQUM3QnNFLEtBQUsrQyxnQkFBZ0I3RSxLQUFLeEMsR0FHOUJBLEVBQUV3SCxRQUFRLElBQUlDLEVBQUt6SCxFQUFHLFVBRXRCQSxFQUFFMEgsYUFBYyxFQUdwQnRELGlCQUFpQnBFLEdBRWJBLEVBQUUwSCxhQUFjLEdBQ3dCLEdBQXBDcEQsS0FBSytDLGdCQUFnQkUsUUFBUXZILElBRTdCc0UsS0FBSytDLGdCQUFnQk0sT0FBT3JELEtBQUsrQyxnQkFBZ0JFLFFBQVF2SCxHQUFJLEdBSXJFb0UsWUFDSSxJQUFJd0QsS0FDQUMsRUFBUXZELEtBQUs2QyxZQUFZdkYsUUFDN0IsS0FBT2lHLEVBQU0vQyxRQUFRLENBQ2pCLE1BQU1nRCxFQUFjRCxFQUFNRSxNQUMxQkgsRUFBTUUsRUFBS0UsSUFBTUYsRUFDakIsSUFBSyxJQUFJRyxLQUFNSCxFQUFLSSxNQUFPLENBQ3ZCLElBQUlDLEVBQUlMLEVBQUtJLE1BQU1ELElBQ2ZFLEVBQUVDLFFBQVlELEVBQUVDLE9BQU9KLE1BQU1KLEdBQzdCQyxFQUFNckYsS0FBSzJGLEVBQUVDLFNBSXpCLE9BQU9sSixPQUFPbUosS0FBS1QsR0FBT1UsSUFBS3JFLEdBQU0yRCxFQUFNM0QsSUFHL0NHLFFBWUksTUFYYywrQkFFQ0UsS0FBS2lFLFlBQVlELElBQUksU0FBVXRJLEdBQzFDLE9BQVEsS0FBT0EsRUFBRWdJLGNBQWdCaEksRUFBRTBILFlBQWMsZUFBaUIsY0FBYzlDLE9BQzVFNUUsRUFBRWtJLE1BQU1JLElBQUksU0FBVUgsRUFBRzNKLEdBQ3JCLE1BQU8sS0FBT3dCLEVBQUVnSSxHQUFLLEtBQU9HLEVBQUVDLE9BQVFKLGVBQ3RCeEosS0FBSzJKLEVBQUVLLFFBQVVDLEVBQWlCTixFQUFFSyxTQUFXLFlBQVlMLEVBQUVPLE1BQU1KLElBQUs3SixHQUFNQSxFQUFFaUQsS0FBTyxJQUFNakQsRUFBRW9GLE9BQU84RSxLQUFLLGFBRWpJQSxLQUFLLFFBQ1JBLEtBQUssTUFDSSxNQUloQnZFLFFBQ0ksSUFBSXlELEVBQVF2RCxLQUFLNkMsWUFBWXZGLFFBQ3pCZ0gsS0FDSixJQUFLLElBQUlDLEVBQUssRUFBR0EsRUFBS2hCLEVBQU0vQyxPQUFRK0QsSUFDaENELEVBQUtmLEVBQU1nQixHQUFJYixJQUFNSCxFQUFNZ0IsR0FFL0IsS0FBT2hCLEVBQU0vQyxRQUFRLENBQ2pCLE1BQU05RSxFQUFJNkgsRUFBTUUsTUFDaEIsSUFBSWUsR0FBYzFFLENBQUNwRSxFQUFFZ0ksSUFBS2hJLEdBQzFCLElBQUssSUFBSXhCLEVBQUksRUFBR0EsRUFBSXdCLEVBQUVrSSxNQUFNcEQsT0FBUXRHLElBQUssQ0FDckMsTUFBTTJKLEVBQUluSSxFQUFFa0ksTUFBTTFKLEdBRWxCLEtBQUsySixFQUFFSyxTQUFheEksRUFBRTBILGFBQWVTLEVBQUVDLFFBQVVwSSxHQUFJLENBQ2pELEdBQUltSSxFQUFFQyxPQUFRSixNQUFNYyxFQUFXLENBQzNCOUksRUFBRWtJLE1BQU1QLE9BQU9uSixFQUFHLEdBQ2xCQSxJQUNBLFNBQ0csQ0FDSCxNQUNNdUssRUFEV1osRUFBRUMsT0FBUUYsTUFDSkksSUFBS1UsR0FBTyxJQUFJdkIsRUFBS3VCLEVBQUdaLFFBQVVELEVBQUVDLFFBQXdCLE1BQWRZLEVBQUdSLFFBQWtCeEksRUFBSWdKLEVBQUdaLE9BQVFZLEVBQUdSLFFBQVNMLEVBQUVPLE1BQU05RCxPQUFPb0UsRUFBR04sU0FDbklQLEVBQUVDLE9BQVFWLGNBQWdCMUgsRUFBRTBILGNBQzVCcEQsS0FBSytDLGdCQUFnQjdFLEtBQUt4QyxHQUMxQkEsRUFBRTBILGFBQWMsR0FFcEIxSCxFQUFFa0ksTUFBTVAsT0FBT25KLEVBQUcsS0FBTXVLLElBR2hDRCxFQUFVWCxFQUFFQyxPQUFRSixJQUFNRyxFQUFFQyxPQUVoQyxJQUFLLElBQUlhLEtBQU1ILEVBQ0xHLEtBQU1MLElBQ1JmLEVBQU1yRixLQUFLc0csRUFBVUcsSUFDckJMLEVBQUtLLEdBQU1ILEVBQVVHLElBSWpDLE9BQU8zRSxLQUdYRixVQUFVOEUsR0FDTjVFLEtBQUs2RSxRQUNMLE1BQU1DLEVBQUk5RSxLQUNWNEUsRUFBRUMsUUFDRixJQUFJRSxFQUFNLElBQUluQyxFQUNkbUMsRUFBSWxDLGVBQ0osSUFBSVUsS0FBdUJ5QixLQUMzQixJQUFLLElBQUk5SyxFQUFJLEVBQUdBLEVBQUk0SyxFQUFFakMsWUFBWXJDLE9BQVF0RyxJQUFLLENBQzNDLE1BQU0rSyxFQUFLSCxFQUFFakMsWUFBWTNJLEdBQ3pCLElBQUssSUFBSWdMLEVBQUksRUFBR0EsRUFBSU4sRUFBRS9CLFlBQVlyQyxPQUFRMEUsSUFBSyxDQUMzQyxNQUFNQyxFQUFLUCxFQUFFL0IsWUFBWXFDLEdBQ3pCM0IsRUFBTXJGLE1BQU0rRyxFQUFJRSxJQUNWRixFQUFHdkIsTUFBTXNCLElBQ1hBLEVBQU9DLEVBQUd2QixRQUVkLElBQUkwQixFQUFPTCxFQUFJTSxhQUFhSixFQUFHdkIsTUFBTXlCLEVBQUd6QixPQUN4Q3FCLEVBQUlsQyxZQUFZM0UsS0FBS2tILEdBQ3JCSixFQUFPQyxFQUFHdkIsSUFBSXlCLEVBQUd6QixJQUFNMEIsRUFDbkJILEVBQUc3QixhQUFlK0IsRUFBRy9CLGFBQ3JCMkIsRUFBSU8sY0FBY0YsSUFJOUIsS0FBTzdCLEVBQU0vQyxRQUFRLENBQ2pCLE1BQU95RSxFQUFJRSxHQUFNNUIsRUFBTUUsTUFDakI4QixFQUFNUCxFQUFPQyxFQUFHdkIsSUFBSXlCLEVBQUd6QixJQUM3QixJQUFLLElBQUl4SixFQUFJLEVBQUdBLEVBQUkrSyxFQUFHckIsTUFBTXBELE9BQVF0RyxJQUFLLENBQ3RDLE1BQU1zTCxFQUFLUCxFQUFHckIsTUFBTTFKLEdBQ2R1TCxFQUFNRCxFQUFHMUIsT0FDVDRCLEVBQXdCVCxFQUFHN0IsYUFBZXFDLEdBQU9SLElBQU9PLEVBQUd0QixRQUNqRSxJQUFLLElBQUlnQixFQUFJLEVBQUdBLEVBQUlDLEVBQUd2QixNQUFNcEQsT0FBUTBFLElBQUssQ0FDdEMsTUFBTVMsRUFBS1IsRUFBR3ZCLE1BQU1zQixHQUNkVSxFQUFNRCxFQUFHN0IsT0FFZixJQUFJdEUsRUFBTSxLQUNWLEdBQUlrRyxJQUYwQlAsRUFBRy9CLGFBQWV3QyxHQUFPVCxJQUFPUSxFQUFHekIsU0FHN0QsU0FDRyxLQUFLd0IsSUFDSEYsRUFBR3RCLFNBQVl5QixFQUFHekIsU0FDbkIyQixRQUFRdEgsTUFBTSwyQ0FpQ2Z1SCxFQS9CcUJOLEVBQUd0QixRQStCVDZCLEVBL0JtQkosRUFBR3pCLFFBQXhDMUUsR0FpQ1hwQyxLQUFNTixFQUFXUixJQUFLcEIsTUFBTyxJQUFLbUMsVUFBV3lJLEVBQUlDLEdBQUt4SSxPQUFTQyxPQUFRLEVBQUdDLEtBQU0sTUEvQmpFLFNBR1IsSUFBSXVJLEVBQVcsS0FDWFAsRUFBSS9CLE1BQU1zQixHQUFVWSxFQUFJbEMsTUFBTXNCLEVBQU9TLEVBQUkvQixJQUN6Q3NDLEVBQVdoQixFQUFPUyxFQUFJL0IsSUFBSWtDLEVBQUlsQyxLQUU5QnNDLEVBQVdqQixFQUFJTSxhQUFhSSxFQUFJL0IsTUFBTWtDLEVBQUlsQyxPQUNwQytCLEVBQUkvQixNQUFNc0IsSUFDWkEsRUFBT1MsRUFBSS9CLFFBRWZzQixFQUFPUyxFQUFJL0IsSUFBSWtDLEVBQUlsQyxJQUFNc0MsRUFDekJ6QyxFQUFNckYsTUFBTXVILEVBQUtHLElBQ2JILEVBQUlyQyxhQUFld0MsRUFBSXhDLGNBSXZCNEMsRUFBUzVDLGFBQWMsRUFDdkIyQixFQUFJaEMsZ0JBQWdCN0UsS0FBSzhILEtBR2pDVCxFQUFJckMsUUFBUSxJQUFJQyxFQUFLNkMsRUFBVXhHLEVBQUtnRyxFQUFHcEIsTUFBTTlELE9BQU9xRixFQUFHdkIsV0FRM0UsSUFBMkIwQixFQUFlQyxFQUpsQyxPQUFPaEIsU0FTVGpDLEVBSUZoRCxZQUFZNEQsR0FDUjFELEtBQUswRCxHQUFLQSxJQUFPaEIsS0FBV3VELFNBQVMsSUFDckNqRyxLQUFLNEQsU0FDTDVELEtBQUtvRCxhQUFjLEVBR3ZCdEQsUUFBUStELEdBQ0o3RCxLQUFLNEQsTUFBTTFGLEtBQUsyRixHQUdwQi9ELFdBQVcrRCxHQUNQN0QsS0FBSzRELE1BQU1QLE9BQU9yRCxLQUFLNEQsTUFBTVgsUUFBUVksR0FBSSxVQUkzQ1YsRUFJRnJELFlBQVlnRSxFQUFzQkksRUFBMkJFLEdBQ3pEcEUsS0FBSzhELE9BQVNBLEVBQ2Q5RCxLQUFLa0UsUUFBVUEsRUFDZmxFLEtBQUtvRSxNQUFRQSxHQUlmLFNBQUE4QixFQUF3QmxGLEdBQzFCLE1BQU1tRixFQUFNLElBQUl2RCxFQUVWd0QsRUFVVixTQUFBQyxFQUFlRixFQUFVRyxFQUFrQnRGLEdBQ3ZDLEdBQUkxQyxFQUFnQjBDLElBQVNBLEVBQUs1RCxNQUFRTixFQUFXRyxRQUFTLENBQzFELE1BQU00RyxFQUFJLElBQUlWLEVBQUssS0FBTW5DLE1BRXpCLE9BREFzRixFQUFVcEQsUUFBUVcsSUFDVkEsR0FDTCxHQUFJN0MsRUFBSzVELE1BQVFOLEVBQVdqQixjQUFlLENBQzlDLE1BQU0wSyxFQUFNRixFQUFNRixFQUFLRyxFQUFXdEYsRUFBSzNELFNBQVMsSUFDMUMzQixFQUFJeUssRUFBSWQsV0FDZCxJQUFLLElBQUkxQixFQUFLLEVBQUdBLEVBQUs0QyxFQUFJL0YsT0FBUW1ELElBQU0sQ0FDcEMsSUFBSUUsRUFBSTBDLEVBQUk1QyxHQUNaRSxFQUFFQyxPQUFTcEksRUFFZixPQUFPMkssRUFBTUYsRUFBS3pLLEVBQUdzRixFQUFLM0QsU0FBUyxJQUNoQyxHQUFJMkQsRUFBSzVELE1BQVFOLEVBQVdFLFdBQVksQ0FDM0MsTUFBTThCLEVBQVNrQyxFQUFLOUYsTUFBTTRELE9BQ3BCMEgsRUFBTXhGLEVBQUs5RixNQUFNNkQsV0FDakIwSCxFQUFNekYsRUFBSzlGLE1BQU0rRCxXQUNqQk8sRUFBTXdCLEVBQUszRCxTQUFTLEdBQzFCLEdBQUltSixFQUFNLEVBQUcsQ0FDVCxJQUFJRSxFQUFTdkosRUFBVTZELEdBQ3ZCMEYsRUFBT3hMLE1BQU02RCxhQUNrQixRQUEzQjJILEVBQU94TCxNQUFNK0QsWUFDYnlILEVBQU94TCxNQUFNK0QsYUFFakIsSUFBSTBILEdBQ0F2SixLQUFNTixFQUFXakIsY0FDakJYLE1BQU8sSUFDUG1DLFVBQVdGLEVBQVVxQyxHQUFNa0gsR0FDM0JuSixPQUFTQyxNQUFPa0osRUFBT25KLE1BQU1DLE1BQU9DLElBQUtpSixFQUFPbkosTUFBTUUsTUFFMUQsT0FBTzRJLEVBQU1GLEVBQUtHLEVBQVdLLEdBQzFCLEdBQVcsUUFBUEYsRUFBZSxDQUN0QixJQUFJQyxFQUFTdkosRUFBVTZELEdBQ3ZCMEYsRUFBT3hMLE1BQU0rRCxhQUNiLElBQUkwSCxHQUNBdkosS0FBTU4sRUFBV2pCLGNBQ2pCWCxNQUFPLElBQ1BtQyxVQUFXRixFQUFVcUMsR0FBTWtILEdBQzNCbkosT0FBU0MsTUFBT2tKLEVBQU9uSixNQUFNQyxNQUFPQyxJQUFLaUosRUFBT25KLE1BQU1FLE1BSTFELEdBQUlxQixFQUFRLENBQ1IsSUFBSThFLEtBRUFBLEVBRE8sR0FBUDZDLEVBQ1E3QyxFQUFNdEQsUUFBUSxJQUFJNkMsRUFBSyxLQUFNM0QsUUFFN0JvRSxFQUFNdEQsT0FBTytGLEVBQU1GLEVBQUtHLEVBQVdLLElBRS9DLE1BQU1DLEVBQU0sSUFBSXpELEVBQUssS0FBTSxTQUczQixPQUZBbUQsRUFBVXBELFFBQVEwRCxHQUNsQmhELEVBQU0xRixLQUFLMEksR0FDSmhELEVBQ0osQ0FDSCxJQUFJQSxLQUNKLE1BQU1nRCxFQUFNLElBQUl6RCxFQUFLLEtBQU0sU0FRM0IsT0FQQW1ELEVBQVVwRCxRQUFRMEQsR0FDbEJoRCxFQUFNMUYsS0FBSzBJLEdBRVBoRCxFQURPLEdBQVA2QyxFQUNRN0MsRUFBTXRELFFBQVEsSUFBSTZDLEVBQUssS0FBTTNELFFBRTdCb0UsRUFBTXRELE9BQU8rRixFQUFNRixFQUFLRyxFQUFXSyxLQUtuRCxHQUFJN0gsRUFBUSxDQUNSLElBQUk4RSxFQUFReUMsRUFBTUYsRUFBS0csRUFBVzlHLEdBQ2xDLElBQUssSUFBSW1FLEVBQUssRUFBR0EsRUFBS0MsRUFBTXBELE9BQVFtRCxJQUFNLENBQ3RDLElBQUlFLEVBQUlELEVBQU1ELEdBQ2RFLEVBQUVDLE9BQVN3QyxFQUVmLE1BQU16QyxFQUFJLElBQUlWLEVBQUssS0FBTSxTQUV6QixPQURBbUQsRUFBVXBELFFBQVFXLElBQ1ZBLEdBQ0wsQ0FDSCxNQUFNQSxFQUFJLElBQUlWLEVBQUssS0FBTSxTQUN6Qm1ELEVBQVVwRCxRQUFRVyxHQUNsQixJQUFJRCxFQUFReUMsRUFBTUYsRUFBS0csRUFBVzlHLEdBQ2xDLElBQUssSUFBSW1FLEVBQUssRUFBR0EsRUFBS0MsRUFBTXBELE9BQVFtRCxJQUFNLENBQ3RDLElBQUlFLEVBQUlELEVBQU1ELEdBQ2RFLEVBQUVDLE9BQVN3QyxFQUVmLE9BQVF6QyxJQUdiLEdBQUk3QyxFQUFLNUQsTUFBUU4sRUFBV0ksTUFBTyxDQUN0QyxJQUFJeEIsRUFBSXlLLEVBQUlkLFdBQ1ppQixFQUFVcEQsUUFBUSxJQUFJQyxFQUFLekgsRUFBRyxVQUM5QixNQUFNbUwsRUFBS1IsRUFBTUYsRUFBS3pLLEVBQUdzRixFQUFLM0QsU0FBUyxJQUN2QyxPQUFPd0osRUFDSixHQUFJN0YsRUFBSzVELE1BQVFOLEVBQVdHLFFBQVMsQ0FDeEMsSUFBSXZCLEVBQUl5SyxFQUFJZCxXQUlSeUIsR0FBaUIxSixLQUFNLGdCQUFpQm1DLE1BQTRCLGFBQXBCeUIsRUFBSzlGLE1BQU1xRSxNQUF1QjdELEVBQUVnSSxHQUFLMUMsRUFBSzlGLE1BQU1xRSxPQUN4RytHLEVBQVVwRCxRQUFRLElBQUlDLEVBQUt6SCxFQUFHLE1BQU9vTCxLQUNyQyxNQUFNRCxFQUFLUixFQUFNRixFQUFLekssRUFBR3NGLEVBQUszRCxTQUFTLElBQ3ZDLElBQUssSUFBSXNHLEVBQUssRUFBR0EsRUFBS2tELEVBQUdyRyxPQUFRbUQsSUFBTSxDQUNuQyxJQUFJRSxFQUFJZ0QsRUFBR2xELEdBQ1hFLEVBQUVPLE1BQU1sRyxNQUNKZCxLQUFNLGNBQ05tQyxNQUE0QixhQUFwQnlCLEVBQUs5RixNQUFNcUUsTUFBdUI3RCxFQUFFZ0ksR0FBSzFDLEVBQUs5RixNQUFNcUUsTUFDNUQvQixNQUFPc0osSUFHZixPQUFPRCxFQUNKLEdBQUk3RixFQUFLNUQsTUFBUU4sRUFBV1YsWUFBYSxDQUM1QyxNQUFNMEksRUFBSXFCLEVBQUlkLFdBQ1JULEVBQUl1QixFQUFJZCxXQUNkaUIsRUFBVXBELFFBQVEsSUFBSUMsRUFBSzJCLEVBQUcsVUFDOUJ3QixFQUFVcEQsUUFBUSxJQUFJQyxFQUFLeUIsRUFBRyxVQUM5QixNQUFNMkIsRUFBTUYsRUFBTUYsRUFBS3JCLEVBQUc5RCxFQUFLM0QsU0FBUyxJQUNsQzBKLEVBQU1WLEVBQU1GLEVBQUt2QixFQUFHNUQsRUFBSzNELFNBQVMsSUFDeEMsT0FBT2tKLEVBQUlqRyxPQUFPeUcsR0FDZixHQUFJL0YsRUFBSzVELE1BQVFOLEVBQVdULGFBQWMsQ0FDN0MsTUFBTXlJLEVBQUlvQixFQUFjbEYsRUFBSzNELFNBQVMsSUFDaEN1SCxFQUFJc0IsRUFBY2xGLEVBQUszRCxTQUFTLElBQ2hDMEgsRUFBTUQsRUFBRWtDLFVBQVVwQyxHQUNsQnFDLEVBQWVsQyxFQUFJaEMsZ0JBQWdCekYsUUFJekMsSUFBSyxJQUFJNEosRUFBUyxFQUFHQSxFQUFTbkMsRUFBSWxDLFlBQVlyQyxPQUFRMEcsSUFDbERaLEVBQVVwRCxRQUFRLElBQUlDLEVBQUs0QixFQUFJbEMsWUFBWXFFLEdBQVMsVUFFeEQsSUFBSWQsS0FDSixJQUFLLElBQUllLEVBQU8sRUFBR0EsRUFBT0YsRUFBYXpHLE9BQVEyRyxJQUFRLENBQ25ELE1BQU1DLEVBQU1ILEVBQWFFLEdBQ3pCaEIsRUFBSWtCLGlCQUFpQkQsR0FFckIsSUFBSyxJQUFJRSxFQUFLLEVBQUdBLEVBQUtGLEVBQUl4RCxNQUFNcEQsT0FBUThHLElBQ2hDRixFQUFJeEQsTUFBTTBELEdBQUl4RCxRQUFVc0QsR0FBUUEsRUFBSXhELE1BQU0wRCxHQUFJcEQsVUFDOUNrRCxFQUFJeEQsTUFBTTBELEdBQUl4RCxPQUFTLEtBQ3ZCc0MsRUFBU2xJLEtBQUtrSixFQUFJeEQsTUFBTTBELEtBU3BDLE9BQU9sQixFQUVQLEtBQU0sc0JBNUpPQyxDQUFNRixFQURiQSxFQUFJdEQsWUFBWSxHQUNLN0IsR0FDekJ1RyxFQUFXcEIsRUFBSWQsV0FDckIsSUFBSyxJQUFJMUIsRUFBSyxFQUFHQSxFQUFLeUMsRUFBUzVGLE9BQVFtRCxJQUFNLENBQy9CeUMsRUFBU3pDLEdBQ2pCRyxPQUFTeUQsRUFHZixPQURBcEIsRUFBSWIsY0FBY2lDLEdBQ1hwQixFQ2xOWCxNQUFNcUIsR0FBYSxRQUViQyxFQUVGM0gsWUFBWTRILEdBQ1IxSCxLQUFLMkgsV0FBYSxFQUd0QjdILFlBQVlrQixFQUFpQjRHLEdBRXpCLEdBQUk1RyxFQUFLNUQsTUFBUU4sRUFBV0ksTUFDeEIsT0FBTzhDLEtBQUs2SCxZQUFZN0csRUFBSzNELFNBQVMsR0FBSXVLLEdBRTlDLEdBQUk1RyxFQUFLNUQsTUFBUU4sRUFBV0csUUFBUyxDQUNqQyxNQUFNNkssRUFBWTlILEtBQUsySCxXQUNqQnBJLEVBQTRCLGFBQXBCeUIsRUFBSzlGLE1BQU1xRSxNQUF1QnVJLEVBQVk5RyxFQUFLOUYsTUFBTXFFLE1BQ2pFL0IsR0FBVUosS0FBTSxRQUFTbUMsTUFBT0EsRUFBT3VJLFVBQVdBLEVBQVd2RyxNQUFPcUcsRUFBS0csT0FBUS9HLEdBQ3ZGaEIsS0FBSzJILGFBQ0wsTUFBTXRLLEVBQStCMkMsS0FBSzZILFlBQVk3RyxFQUFLM0QsU0FBUyxHQUFJdUssRUFBTSxHQUN4RW5LLEdBQ0ZMLEtBQU0sTUFDTm1DLE1BQU9BLEVBQ1B1SSxVQUFXQSxFQUNYdkcsTUFBT3FHLEVBQU0sRUFBSXZLLEVBQVNtRCxPQUMxQnVILE9BQVEvRyxHQUVaLE9BQVN4RCxHQUFtQjhDLE9BQU9qRCxHQUFVaUQsUUFBUTdDLElBRXpELEdBQUlhLEVBQWdCMEMsR0FFaEIsUUFBVTVELEtBQU0sUUFBUzhHLFFBQVNsRCxFQUFNTyxNQUFPcUcsRUFBS0csT0FBUS9HLElBRWhFLEdBQUlBLEVBQUs1RCxNQUFRTixFQUFXakIsY0FBZSxDQUN2QyxNQUFNbU0sRUFBT0osRUFDUDlDLEVBQUk5RSxLQUFLNkgsWUFBWTdHLEVBQUszRCxTQUFTLEdBQUkySyxHQUN2Q0MsRUFBT0wsRUFBTTlDLEVBQUV0RSxPQUNmb0UsRUFBSTVFLEtBQUs2SCxZQUFZN0csRUFBSzNELFNBQVMsR0FBSTRLLEdBQzdDLE9BQU9uRCxFQUFFeEUsT0FBT3NFLEdBRXBCLEdBQUk1RCxFQUFLNUQsTUFBUU4sRUFBV1YsWUFBYSxDQUdyQyxNQUFNNEwsRUFBT0osRUFBTSxFQUNiM0osRUFBTytCLEtBQUs2SCxZQUFZN0csRUFBSzNELFNBQVMsR0FBSTJLLEdBQzFDQyxFQUFPRCxFQUFPL0osRUFBS3VDLE9BQVMsRUFFNUIwSCxJQUFxQjlLLEtBQU0sUUFBU2EsS0FBTStKLEVBQU14SixNQUFPeUosRUFBTTFHLE1BQU9xRyxFQUFLRyxPQUFRL0csSUFFakZ4QyxFQUFRd0IsS0FBSzZILFlBQVk3RyxFQUFLM0QsU0FBUyxHQUFJNEssR0FFM0NFLElBQW1CL0ssS0FBTSxPQUFRMEcsT0FEMUJtRSxFQUFPekosRUFBTWdDLE9BQzJCZSxNQUFPeUcsRUFBTy9KLEVBQUt1QyxPQUFRdUgsT0FBUS9HLElBQ3hGLE9BQU9rSCxFQUFPNUgsT0FBT3JDLEdBQU1xQyxPQUFPNkgsR0FBTTdILE9BQU85QixHQUVuRCxHQUFJd0MsRUFBSzVELE1BQVFOLEVBQVdULGFBQWMsQ0FDdEMsTUFBTXlJLEVBQUlvQixFQUFjbEYsRUFBSzNELFNBQVMsSUFDaEN1SCxFQUFJc0IsRUFBY2xGLEVBQUszRCxTQUFTLElBQ2hDMEgsRUFBTUQsRUFBRWtDLFVBQVVwQyxHQUN4QixPQUFPNUUsS0FBS29JLFdBQVdyRCxFQUFLNkMsR0FFaEMsR0FBSTVHLEVBQUs1RCxNQUFRTixFQUFXRSxXQUFZLENBQ3BDLE1BQU04QixFQUFTa0MsRUFBSzlGLE1BQU00RCxPQUNwQjBILEVBQU14RixFQUFLOUYsTUFBTTZELFdBQ2pCUyxFQUFNd0IsRUFBSzNELFNBQVMsR0FFMUIsSUFBSWdMLEtBQ0osSUFBSyxJQUFJbk8sRUFBSSxFQUFHQSxFQUFJc00sRUFBS3RNLElBQUssQ0FDMUIsTUFBTW9PLEVBQVN0SSxLQUFLNkgsWUFBWXJJLEVBQUtvSSxHQUNyQ0EsR0FBT1UsRUFBTzlILE9BQ2Q2SCxFQUFRbkssUUFBUW9LLEdBRXBCLEdBQUl0SCxFQUFLOUYsTUFBTStELFlBQWNSLEVBQWdCLENBRXpDLE1BQU1nSSxFQUFNekYsRUFBSzlGLE1BQU0rRCxXQUN2QixJQUFJc0osS0FDQUMsS0FDSixJQUFLLElBQUl0TyxFQUFJc00sRUFBS3RNLEVBQUl1TSxFQUFLdk0sSUFBSyxDQUU1QjBOLEdBQVksRUFFWlksRUFBUXRLLEtBQUswSixHQUNiLE1BQU1VLEVBQVN0SSxLQUFLNkgsWUFBWXJJLEVBQUtvSSxHQUVyQ0EsR0FBT1UsRUFBTzlILE9BQ2QrSCxFQUFVckssS0FBS29LLEdBR25CLElBQUlHLEtBQ0osSUFBSyxJQUFJdk8sRUFBSSxFQUFHQSxFQUFJcU8sRUFBVS9ILE9BQVF0RyxJQUNsQ3VPLEVBQVd2SyxNQUNQZCxLQUFNLFFBQ05hLEtBQU9hLEVBQVMwSixFQUFRdE8sR0FBSzBOLEVBQzdCcEosTUFBUU0sRUFBUzhJLEVBQU1ZLEVBQVF0TyxHQUMvQnFILE1BQU9pSCxFQUFRdE8sR0FBSyxFQUNwQjZOLE9BQVEvRyxJQUVaeUgsRUFBV3ZLLFFBQVNxSyxFQUFVck8sSUFFbEMsT0FBT21PLEVBQVEvSCxPQUFPbUksR0FDbkIsQ0FFSCxNQUFNVCxFQUFPSixFQUVQSyxFQUFPRCxFQUFPLEVBRWRwRCxFQUFJNUUsS0FBSzZILFlBQVlySSxFQUFLeUksR0FDMUJFLElBQW1CL0ssS0FBTSxPQUFRMEcsT0FBUWtFLEVBQU16RyxNQUFPMEcsRUFBT3JELEVBQUVwRSxPQUFRdUgsT0FBUS9HLElBRS9FMEgsRUFBT1QsRUFBT3JELEVBQUVwRSxPQUFTLEVBQ3pCMEgsSUFDRjlLLEtBQU0sUUFDTmEsS0FBT2EsRUFBU21KLEVBQU9TLEVBQ3ZCbEssTUFBUU0sRUFBUzRKLEVBQU9ULEVBQ3hCMUcsTUFBT3FHLEVBQ1BHLE9BQVEvRyxJQUVaLE9BQU9xSCxFQUFRL0gsT0FBTzRILEdBQVE1SCxPQUFPc0UsR0FBR3RFLE9BQU82SCxJQUd2RCxNQUFNLElBQUlRLE1BQU0saUJBQW1CQyxLQUFLQyxVQUFVN0gsSUFHdERsQixXQUFXcUcsRUFBVXlCLEdBQ2pCLElBQUlrQixLQUFrQkMsS0FDbEJDLEtBQ0osSUFBSyxJQUFJOU8sRUFBSSxFQUFHQSxFQUFJaU0sRUFBSXRELFlBQVlyQyxPQUFRdEcsSUFBSyxDQUM3QyxNQUFNc0QsRUFBUTJJLEVBQUl0RCxZQUFZM0ksR0FDeEIrTyxFQUFXakosS0FBS2tKLFlBQVkxTCxFQUFPb0ssRUFBS2tCLEVBQWFDLEdBQzNEQyxFQUFNQSxFQUFJMUksT0FBTzJJLEdBQ2pCckIsR0FBT3FCLEVBQVN6SSxPQUVwQixJQUFLLElBQUl0RyxFQUFJLEVBQUdBLEVBQUk2TyxFQUFTdkksT0FBUXRHLElBQ2pDNk8sRUFBUzdPLEdBQUc0SixPQUFTOEQsRUFFekIsT0FBT29CLEVBR1hsSixZQUFZcUosRUFBY3ZCLEVBQWFrQixFQUF3Q0MsR0FDM0UsR0FBSUksRUFBTXpGLE1BQU1vRixFQUNaLFFBQ0kxTCxLQUFNLE9BQ04wRyxPQUFRZ0YsRUFBWUssRUFBTXpGLElBQzFCbkMsTUFBT3FHLEVBQ1BHLFFBQVUzSyxLQUFNLFFBQVNsQyxNQUFPaU8sRUFBTXpGLE1BSTlDLEdBREFvRixFQUFZSyxFQUFNekYsSUFBTWtFLEVBQ0UsR0FBdEJ1QixFQUFNdkYsTUFBTXBELE9BQWEsQ0FDekIsR0FBSTJJLEVBQU0vRixZQUFhLENBQ25CLE1BQU0rRSxHQUNGL0ssS0FBTSxPQUNOMEcsT0FBUSxLQUNSdkMsTUFBT3FHLEVBQ1BHLFFBQVUzSyxLQUFNLFFBQVNsQyxNQUFPaU8sRUFBTXpGLEdBQUlyRyxZQUFjRSxPQUFTQyxPQUFRLEVBQUdDLEtBQU0sS0FHdEYsT0FEQXNMLEVBQVM3SyxLQUFLaUssSUFDTkEsR0FFUixNQUFNLElBQUlRLE1BQU0saURBRWpCLENBQ0gsSUFBSUssS0FDSixJQUFLLElBQUk5TyxFQUFJLEVBQUdBLEVBQUlpUCxFQUFNdkYsTUFBTXBELE9BQVMsRUFBR3RHLElBQUssQ0FDN0MsTUFBTWtQLEVBQU9ELEVBQU12RixNQUFNMUosR0FDbkJtUCxHQUNGak0sS0FBTSxRQUNOYSxLQUFNMkosRUFBTSxFQUNacEosTUFBTyxLQUNQK0MsTUFBT3FHLEVBQ1BHLFFBQ0kzSyxLQUFNLFFBQVNsQyxTQUFVaU8sRUFBTXpGLE1BQU14SixJQUNyQ21ELFlBQWNFLE9BQVNDLE9BQVEsRUFBR0MsS0FBTSxLQUcxQzZMLEdBQXFCRCxHQUF1Qi9JLE9BQzlDTixLQUFLdUosZ0JBQWdCSixFQUFPQyxFQUFNeEIsRUFBTSxFQUFHa0IsRUFBYUMsSUFFNURDLEVBQU1BLEVBQUkxSSxPQUFPZ0osR0FDakIxQixHQUFPMEIsRUFBUTlJLE9BQ2Y2SSxFQUFVN0ssTUFBUW9KLEVBRXRCLE1BQU13QixFQUFPRCxFQUFNdkYsTUFBTXVGLEVBQU12RixNQUFNcEQsT0FBUyxHQUN4QzhJLEVBQVV0SixLQUFLdUosZ0JBQWdCSixFQUFPQyxFQUFNeEIsRUFBS2tCLEVBQWFDLEdBQ3BFLE9BQU9DLEVBQUkxSSxPQUFPZ0osSUFJMUJ4SixnQkFBZ0JxSixFQUFjQyxFQUFZeEIsRUFBYWtCLEVBQXVDQyxHQUcxRixNQUFNTyxFQUFtQnRKLEtBQUt3SixxQkFBcUJMLEVBQU9DLEVBQU14QixHQUVoRSxHQURBQSxHQUFPMEIsRUFBUTlJLE9BQ1gySSxFQUFNL0YsYUFBZWdHLEVBQUt0RixRQUFVcUYsSUFBVUMsRUFBS2xGLFFBQVMsQ0FDNUQsTUFBTWlFLEdBQ0YvSyxLQUFNLE9BQ04wRyxPQUFRLEtBQ1J2QyxNQUFPcUcsRUFDUEcsUUFDSTNLLEtBQU0sT0FBUWxDLFNBQVVpTyxFQUFNekYsT0FBTzBGLEVBQUt0RixPQUFPSixLQUNqRHJHLFlBQWNFLE9BQVNDLE9BQVEsRUFBR0MsS0FBTSxLQUloRCxPQURBc0wsRUFBUzdLLEtBQUtpSyxHQUNQbUIsRUFBUWhKLFFBQVE2SCxJQUNwQixPQUFJaUIsRUFBS2xGLFFBQ0xvRixFQUFRaEosU0FDWGxELEtBQU0sUUFDTjhHLFFBQVNrRixFQUFLbEYsUUFDZDNDLE1BQU9xRyxFQUNQRyxRQUFVM0ssS0FBTSxPQUFRbEMsU0FBVWlPLEVBQU16RixPQUFPMEYsRUFBS3RGLE9BQVFKLFNBQ2pEcEQsT0FDWE4sS0FBS2tKLFlBQVlFLEVBQUt0RixPQUFTOEQsRUFBTSxFQUFHa0IsRUFBYUMsSUFHbERPLEVBQVFoSixPQUNYTixLQUFLa0osWUFBWUUsRUFBS3RGLE9BQVM4RCxFQUFLa0IsRUFBYUMsSUFLN0RqSixxQkFBcUJxSixFQUFjQyxFQUFZeEIsR0FDM0MsSUFBSW9CLEtBQ0osSUFBSyxJQUFJOU8sRUFBSSxFQUFHQSxFQUFJa1AsRUFBS2hGLE1BQU01RCxPQUFRdEcsSUFBSyxDQUN4QyxNQUFNQyxFQUFJaVAsRUFBS2hGLE1BQU1sSyxHQUNyQixHQUFjLGlCQUFWQyxFQUFFaUQsS0FBeUIsQ0FDM0IsTUFBTTBLLEVBQVk5SCxLQUFLMkgsV0FDakJwSSxFQUFRcEYsRUFBRW9GLE1BQ2hCcEYsRUFBRTJOLFVBQVlBLEVBQ2QsTUFBTXRLLEdBQ0ZKLEtBQU0sUUFDTm1DLE1BQU9BLEVBQ1B1SSxVQUFXQSxFQUNYdkcsTUFBT3FHLEVBQ1BHLFFBQ0kzSyxLQUFNLE9BQVFsQyxTQUFVaU8sRUFBTXpGLE9BQU8wRixFQUFLdEYsT0FBUUosS0FDbERyRyxZQUFjRSxPQUFTQyxPQUFRLEVBQUdDLEtBQU0sS0FHaER1QyxLQUFLMkgsYUFDTHFCLEVBQUk5SyxLQUFLVixHQUNUb0ssU0FDRyxHQUFjLGVBQVZ6TixFQUFFaUQsS0FBdUIsQ0FDaEMsTUFBTTBLLEVBQVkzTixFQUFFcUQsTUFBTXNLLFVBRXBCckssR0FDRkwsS0FBTSxNQUNObUMsTUFIVXBGLEVBQUVvRixNQUladUksVUFBV0EsRUFDWHZHLE1BQU9xRyxFQUNQRyxRQUNJM0ssS0FBTSxPQUFRbEMsU0FBVWlPLEVBQU16RixPQUFPMEYsRUFBS3RGLE9BQVFKLEtBQ2xEckcsWUFBY0UsT0FBU0MsT0FBUSxFQUFHQyxLQUFNLEtBR2hEdUwsRUFBSTlLLEtBQUtULEdBQ1RtSyxLQUdSLE9BQU9vQixFQUdYbEosUUFBUWtCLEVBQWlCeUksR0FBaUIsR0FPdEMsSUFBS3pKLEtBQUswSixrQkFBa0IxSSxHQUN4QixNQUFNLElBQUkySCxNQUFNLGdEQUVwQmhHLElBQ0EzQyxLQUFLMkgsV0FBYSxFQUdsQixNQUFNVSxJQUNBakwsS0FBTSxRQUFTYSxLQUFNLEVBQUdPLE1BQU8sRUFBRytDLE1BQU8sRUFBR3dHLE9BQVEsU0FFbEQzSyxLQUFNLFFBQ044RyxTQUNJOUcsS0FBTU4sRUFBV0gsS0FDakJ6QixPQUFPLEVBQ1BtQyxZQUNBRSxPQUFTQyxNQUFPLEVBQUdDLElBQUssSUFFNUI4RCxNQUFPLEVBQ1B3RyxPQUFRLFNBRVYzSyxLQUFNLE9BQVEwRyxPQUFRLEVBQUd2QyxNQUFPLEVBQUd3RyxPQUFRLFNBQzNDM0ssS0FBTSxRQUFTbUMsTUFBTyxRQUFTdUksV0FBWSxFQUFHdkcsTUFBTyxFQUFHd0csT0FBUSxTQUVoRTRCLEVBQU8zSixLQUFLNkgsWUFBWTdHLEVBQU1xSCxFQUFRN0gsUUFDdENZLEVBQVNpSCxFQUFRL0gsT0FBT3FKLEdBQU1ySixTQUU1QmxELEtBQU0sTUFDTm1DLE1BQU8sUUFDUHVJLFdBQVksRUFDWnZHLE1BQU84RyxFQUFRN0gsT0FBU21KLEVBQUtuSixPQUM3QnVILE9BQVEsU0FHUjNLLEtBQU0sUUFDTm1FLE1BQU84RyxFQUFRN0gsT0FBU21KLEVBQUtuSixPQUFTLEVBQ3RDdUgsT0FBUSxVQUdoQixJQUFLL0gsS0FBSzRKLGdCQUFnQnhJLEdBQ3RCLE1BQU0sSUFBSXVILE1BQ04sd0JBQTBCQyxLQUFLQyxVQUFVN0gsR0FBUSxnQkFBa0I0SCxLQUFLQyxVQUFVekgsSUFHMUYsSUFBS3FJLEVBQ0QsSUFBSyxJQUFJdlAsRUFBSSxFQUFHQSxFQUFJa0gsRUFBT1osT0FBUXRHLFdBQ3hCa0gsRUFBT2xILEdBQUc2TixjQUNWM0csRUFBT2xILEdBQUdxSCxNQUd6QixPQUFPSCxFQUdYdEIsa0JBQWtCZSxHQUNkLE9BQUsyRyxJQUlEeEgsS0FBSzZKLDhCQUE4QmhKLEdBTzNDZiw4QkFBOEJnSyxHQUMxQixNQUFNQyxFQUFPekwsRUFBZ0J3TCxHQUM3QixJQUFLLElBQUlFLEVBQUssRUFBR0EsRUFBS0YsRUFBT3pNLFNBQVNtRCxPQUFRd0osSUFBTSxDQUNoRCxNQUFNQyxFQUFRSCxFQUFPek0sU0FBUzJNLEdBQzlCLEdBQUlELEdBQVFFLEVBQU03TSxNQUFRTixFQUFXRyxRQUVqQyxPQURBNEksUUFBUXFFLG1FQUFtRS9GLEVBQWlCMkYsUUFDckYsRUFFWCxHQUFJOUosS0FBSzZKLDhCQUE4QkksR0FDbkMsT0FBTyxFQUdmLE9BQU8sRUFHWG5LLGdCQUFnQmtKLEdBS1osSUFBS3hCLEVBQ0QsT0FBTyxFQUVYLElBQUssSUFBSXROLEVBQUksRUFBR0EsRUFBSThPLEVBQUl4SSxPQUFRdEcsSUFBSyxDQUNqQyxNQUFNaVEsRUFBUW5CLEVBQUk5TyxHQUVsQixHQUFJaVEsRUFBTTVJLFFBQVVySCxFQUNoQixNQUFNLElBQUl5Tyw2QkFBNkJ3QixFQUFNNUksWUFBWXJILFNBQVMyTyxHQUFXc0IsVUFBY3RCLEVBQVVHLE1BRzdHLE1BQU14RSxFQUFZeEUsS0FBS29LLHNCQUFzQnBCLEVBQUssTUFDbEQsSUFBSyxJQUFJOU8sRUFBSSxFQUFHQSxFQUFJOE8sRUFBSXhJLE9BQVF0RyxJQUM1QixJQUFLc0ssRUFBVXRLLEdBQ1gsTUFBTSxJQUFJeU8sNkJBQTZCek8sdUJBQXVCMk8sR0FBV0csRUFBSTlPLFdBQVcyTyxFQUFVRyxNQUcxRyxPQUFPLEVBR1hsSixzQkFBc0JrSixFQUFjcUIsRUFBWS9GLEdBRTVDLEdBQUsrRixLQUFNL0YsR0FBUytGLEdBQU1yQixFQUFJeEksT0FDMUIsT0FBTzhELEVBR1hBLEVBQUsrRixJQUFNLEVBQ1gsTUFBTUMsRUFBUXRCLEVBQUlxQixHQUVsQixHQUFrQixTQUFkQyxFQUFNbE4sS0FBaUIsQ0FDdkIsSUFBSW1OLEVBQVd2SyxLQUFLb0ssc0JBQXNCcEIsRUFBS3NCLEVBQU1yTSxLQUFNcUcsR0FDM0QsT0FBT3RFLEtBQUtvSyxzQkFBc0JwQixFQUFLc0IsRUFBTTlMLE1BQVErTCxHQUNsRCxNQUFrQixRQUFkRCxFQUFNbE4sS0FDTjRDLEtBQUtvSyxzQkFBc0JwQixFQUFLc0IsRUFBTXhHLE9BQVNRLEdBRy9DdEUsS0FBS29LLHNCQUFzQnBCLEVBQUtxQixFQUFLLEVBQUcvRixJQUtyRCxTQUFBa0csRUFBMEJ0RyxHQUM1QixNQUFNaEosT0FBMEJ1UCxJQUFsQnZHLEVBQVFoSixNQUFzQixHQUFLZ0osRUFBUWhKLE1BQU0rSyxXQUN6RDVJLEVBQVc2RyxFQUFRN0csVUFBWTZHLEVBQVE3RyxTQUFTbUQsT0FDakQwRCxFQUFRN0csU0FBUzJHLElBQUt6SixHQUFNNEosRUFBaUI1SixJQUFLOEosS0FBSyxLQUN4RCxHQUNKLFNBQVVILEVBQVE5RyxRQUFRbEMsS0FBU21DLEtBR2pDLFNBQUE4RyxFQUEyQkQsR0FDN0IsT0FBUUEsRUFBUTlHLE1BQ1osS0FBS04sRUFBV0gsS0FDWixNQUFPLE9BQ1gsS0FBS0csRUFBV0YsTUFDWixNQUFPLFFBQ1gsS0FBS0UsRUFBV0wsTUFDWixNQUFPLFFBQ1gsS0FBS0ssRUFBV0osSUFDWixNQUFPLE1BQ1gsS0FBS0ksRUFBV1IsSUFDWixTQUFVNkgsRUFBaUJELEVBQVE3RyxTQUFTLFNBQVM4RyxFQUFpQkQsRUFBUTdHLFNBQVMsTUFDM0YsS0FBS1AsRUFBV1AsR0FDWixTQUFVNEgsRUFBaUJELEVBQVE3RyxTQUFTLFNBQVM4RyxFQUFpQkQsRUFBUTdHLFNBQVMsTUFDM0YsS0FBS1AsRUFBV04sSUFDWixhQUFjMkgsRUFBaUJELEVBQVE3RyxTQUFTLE1BQ3BELEtBQUtQLEVBQVdJLE1BQ1osVUFBV2lILEVBQWlCRCxFQUFRN0csU0FBUyxPQUNqRCxLQUFLUCxFQUFXRyxRQUNaLFVBQVdpSCxFQUFRaEosTUFBTTRNLGFBQWE1RCxFQUFRaEosTUFBTXFFLFNBQVM0RSxFQUFpQkQsRUFBUTdHLFNBQVMsT0FDbkcsUUFDSSxPQUFPbU4sRUFBZ0J0RyxJQUk3QixTQUFBMkUsRUFBb0I2QixHQUN0QixJQUFJdEosS0FDSixJQUFLLElBQUlsSCxFQUFJLEVBQUdBLEVBQUl3USxFQUFLbEssT0FBUXRHLElBQUssQ0FDbEMsTUFBTWlRLEVBQVFPLEVBQUt4USxHQUNuQixJQUFJeVEsS0FBY3pRLEtBQUtpUSxFQUFNL00sT0FDN0IsT0FBUStNLEVBQU0vTSxNQUNWLElBQUssUUFDRHVOLE9BQWdCUixFQUFNbE0sUUFBUWtNLEVBQU0zTCxRQUNwQyxNQUNKLElBQUssT0FDRG1NLE9BQWdCUixFQUFNckcsU0FDdEIsTUFDSixJQUFLLFFBQ0Q2RyxHQUFZLElBQU14RyxFQUFpQmdHLEVBQU1qRyxTQUN6QyxNQUNKLElBQUssUUFDTCxJQUFLLE1BQ0R5RyxPQUFnQlIsRUFBTTVLLFVBQVU0SyxFQUFNckMsYUFDdEMsTUFDSixJQUFLLFFBQ0QsTUFDSixRQUNJLE1BQU0sSUFBSWEsTUFBTSw0QkFBOEJ3QixHQUV0RCxHQUFJQSxFQUFNcEMsT0FBUSxDQUNkLElBQUk2QyxFQUFNVCxFQUFNcEMsT0FDTCxRQUFQNkMsRUFDQUQsR0FBWSxlQUVNLFNBQWRSLEVBQU0vTSxNQUFtQixVQUFXd04sRUFDcENELGFBQXNCQyxFQUFJck4sTUFBTUMsU0FBU29OLEVBQUlyTixNQUFNRSxPQUVuRGtOLFdBQW9CQyxFQUFJeE4sUUFBUXdMLEtBQUtDLFVBQVUrQixFQUFJMVAsVUFJL0RrRyxFQUFPbEQsS0FBS3lNLEdBRWhCLE9BQU92SixFQUFPaUQsS0FBSyxZQzVkakJ3RyxFQUtGL0ssWUFBWWdMLEVBQWNDLEVBQXlDdEIsR0FBaUIsR0FDaEZ6SixLQUFLK0ssUUFBVUEsRUFDZi9LLEtBQUs4SyxLQUFPQSxFQUNaLE1BQU1qTixFQUFTLElBQUlnQyxFQUFPa0wsRUFBUTFLLFFBQzVCMkssRUFBVyxJQUFJdkQsRUFBU3NELEVBQVExSyxRQUV0QyxHQURBTCxLQUFLaUwsWUFBY3BOLEVBQU9xTixNQUFNSixHQUM1QjlLLEtBQUtpTCxZQUFZNUosT0FBT2IsT0FDeEIsTUFBTSxJQUFJbUksTUFBTSxzQkFBd0JDLEtBQUtDLFVBQVU3SSxLQUFLaUwsWUFBWTVKLFNBRTVFckIsS0FBS21MLFFBQVVILEVBQVNJLFFBQVFwTCxLQUFLaUwsWUFBWWpLLEtBQU15SSxHQUUzRDRCLGVBQ0ksT0FBT3JMLEtBQUsrSyxRQUFRTyxNQUV4QkMsZUFDSSxPQUFPdkwsS0FBSytLLFFBQVFTLE9BRXhCMUwsTUFBTXdMLEVBQWNuQyxFQUFjdkIsRUFBYTFELEdBQzNDLElBQUlqRyxFQUFNTyxFQUVWLE9BQVEwRixFQUFROUcsTUFDWixLQUFLTixFQUFXSCxLQUNaLE9BQU8sRUFDWCxLQUFLRyxFQUFXRixNQUNaLE9BQU8sRUFDWCxLQUFLRSxFQUFXTCxNQUNaLE9BQWMsR0FBUG1MLEVBQ1gsS0FBSzlLLEVBQVdKLElBQ1osT0FBT3NELEtBQUtxTCxTQUFTSSxRQUFRSCxHQUNqQyxLQUFLeE8sRUFBV1IsSUFHWixPQUZBMkIsRUFBTytCLEtBQUswTCxNQUFNSixFQUFPbkMsRUFBT3ZCLEVBQUsxRCxFQUFRN0csU0FBUyxJQUN0RG1CLEVBQVF3QixLQUFLMEwsTUFBTUosRUFBT25DLEVBQU92QixFQUFLMUQsRUFBUTdHLFNBQVMsT0FDbkRZLElBQVFPLEtBQ0NULEtBQU1tRyxFQUFTakcsS0FBTUEsRUFBTU8sTUFBT0EsR0FHbkQsS0FBSzFCLEVBQVdQLEdBR1osT0FGQTBCLEVBQU8rQixLQUFLMEwsTUFBTUosRUFBT25DLEVBQU92QixFQUFLMUQsRUFBUTdHLFNBQVMsSUFDdERtQixFQUFRd0IsS0FBSzBMLE1BQU1KLEVBQU9uQyxFQUFPdkIsRUFBSzFELEVBQVE3RyxTQUFTLE9BQ25EWSxJQUFRTyxLQUNDVCxLQUFNbUcsRUFBU2pHLEtBQU1BLEVBQU1PLE1BQU9BLEdBR25ELEtBQUsxQixFQUFXTixJQUNaLE9BQVF3RCxLQUFLMEwsTUFBTUosRUFBT25DLEVBQU92QixFQUFLMUQsRUFBUTdHLFNBQVMsSUFDM0QsS0FBS1AsRUFBV0ksTUFDWixPQUFPOEMsS0FBSzBMLE1BQU1KLEVBQU9uQyxFQUFPdkIsRUFBSzFELEVBQVE3RyxTQUFTLElBQzFELFFBQ0ksR0FBSTJDLEtBQUt1TCxTQUFTckgsRUFBUTlHLE1BQ3RCLE9BQU80QyxLQUFLdUwsU0FBU3JILEVBQVE5RyxNQUFNa08sRUFBT25DLEVBQU92QixFQUFLMUQsR0FFdEQsTUFBTSxJQUFJeUUsTUFBTSx1Q0FLaEM3SSxNQUFNd0wsRUFBY0ssR0FBNEMsR0FDNUQsT0FBTyxJQUFLQyxHQUNSZCxLQUFNOUssS0FDTjJMLGtCQUtaLFNBQW9DTCxHQUNoQyxPQUdJTyxNQUFPLElBQUlDLEVBQ1hDLFVBQVcsSUFBSUQsRUFDZkUsV0FFQUMsUUFBUyxJQUFJQyxFQUNULENBQUVwSCxFQUFHRixJQUFNRSxHQUFLRixFQUNkRSxHQUFNQSxHQUVacUgsWUFBYSxFQUliNUssT0FBUSxFQUNSNkssU0FBUyxFQUNUZCxNQUFPQSxFQUVQZSxXQUFZLElBQUlDLEVBQ1hoUyxHQUFhQSxFQUFFaVMsVUFFcEJDLFNBQVUsSUFBSU4sRUFBb0JPLEVBQWNDLEdBQ2hEQyxrQkFBbUIsR0E1QmhCQyxDQUF3QnRCLFFBQVFiLEdBQVk5RCxjQWdDdkRrRyxFQUtJL00sWUFBWTRELEVBQVlvSixFQUFZUCxFQUFrQlEsR0FDbEQvTSxLQUFLMEQsR0FBS0EsRUFDVjFELEtBQUs4TSxHQUFLQSxFQUNWOU0sS0FBS3VNLFNBQVdBLEVBRWhCdk0sS0FBSytNLFFBQVVBLEVBQVEvSSxJQUFJLFNBQVUxSixHQUNqQyxJQUFJMFMsRUFBS0MsRUFBVzNTLEdBRXBCLE9BREEwUyxFQUFHVCxTQUFXVyxLQUFLekcsSUFBSThGLEVBQVVqUyxFQUFFaVMsVUFDNUJTLElBSWZsTixPQUFPcU4sR0FDSCxPQUFPbk4sS0FBSzhNLElBQU1LLEVBQUdMLEdBR3pCaE4sT0FDSSxPQUFPRSxLQUFLOE0sR0FHaEJoTixZQUFZd0ssR0FJUixJQUFLLElBQUlwUSxFQUFJLEVBQUdBLEVBQUlvUSxFQUFNeUMsUUFBUXZNLE9BQVF0RyxJQUFLLENBQzNDLElBQUlvSixHQUFRLEVBQ1osSUFBSyxJQUFJNEIsRUFBSSxFQUFHQSxFQUFJbEYsS0FBSytNLFFBQVF2TSxPQUFRMEUsSUFDckMsR0FBSXVILEVBQWF6TSxLQUFLK00sUUFBUTdILEdBQUlvRixFQUFNeUMsUUFBUTdTLElBQUssQ0FDakRvSixHQUFRLEVBQ1IsTUFHUixJQUFLQSxFQUFPLENBQ1IsSUFBSTNFLEVBQVFzTyxFQUFXM0MsRUFBTXlDLFFBQVE3UyxJQUNyQ3lFLEVBQU00TixTQUFXVyxLQUFLekcsSUFBSXpHLEtBQUt1TSxTQUFVNU4sRUFBTTROLFVBQy9Ddk0sS0FBSytNLFFBQVE3TyxLQUFLUyxLQU05Qm1CLGVBQ0ksSUFBSyxJQUFJNUYsRUFBSSxFQUFHQSxFQUFJOEYsS0FBSytNLFFBQVF2TSxPQUFRdEcsSUFDckMsR0FBSThGLEtBQUsrTSxRQUFRN1MsR0FBR2tULGFBQWE1TSxPQUFTLEVBQ3RDLE9BQU8sRUFHZixPQUFPLEVBR1hWLG1CQUNJLElBQUssSUFBSTVGLEVBQUksRUFBR0EsRUFBSThGLEtBQUsrTSxRQUFRdk0sT0FBUXRHLElBQ3JDLEdBQUk4RixLQUFLK00sUUFBUTdTLEdBQUdrVCxhQUFhNU0sT0FBUyxJQUM0QixHQUFqRVIsS0FBSytNLFFBQVE3UyxHQUFHa1QsYUFBYSxHQUFxQkMsV0FDbkQsT0FBTyxFQUdmLE9BQU8sRUFHWHZOLHFCQUFxQnFLLEdBSWpCLElBQUssSUFBSWpRLEVBQUksRUFBR0EsRUFBSThGLEtBQUsrTSxRQUFRdk0sT0FBUXRHLElBQ3JDOEYsS0FBSytNLFFBQVE3UyxHQUFHa1QsYUFBYWxQLEtBQUtpTSxHQUkxQ3JLLFlBRUlFLEtBQUsrTSxrQkFhYmIsRUFLSXBNLFlBQ0l3TixFQUNBQyxFQUNBQyxFQUFzQixLQUN0QnhOLEtBQUt5TixNQUFRSCxFQUNidE4sS0FBSzBOLEtBQU9ILEVBQ1p2TixLQUFLMk4sS0FBTyxJQUFJaE0sTUFBTTZMLEdBQ3RCeE4sS0FBS1EsT0FBUyxFQUdsQlYsV0FBVzhOLEVBQXNCQyxHQUM3QixJQUFLLElBQUkzVCxFQUFJLEVBQUdBLEVBQUkwVCxFQUFPcE4sT0FBUXRHLElBQy9CLEdBQUk4RixLQUFLeU4sTUFBUXpOLEtBQUt5TixNQUFNRyxFQUFPMVQsR0FBRzRULElBQUtELEdBQU9ELEVBQU8xVCxHQUFHNFQsS0FBT0QsRUFDL0QsT0FBT0QsRUFBTzFULEdBQUc2VCxJQVE3QmpPLEtBQUsrTixFQUFRRSxHQUNULE1BQU1DLEVBQVdoTyxLQUFLME4sS0FBS0csR0FBTzdOLEtBQUsyTixLQUFLbk4sT0FDNUMsSUFBSW9OLEVBQVM1TixLQUFLMk4sS0FBS0ssR0FDdkIsR0FBS0osRUFFRSxDQUNILFFBQXFDbkQsSUFBakN6SyxLQUFLaU8sV0FBV0wsRUFBUUMsR0FDeEIsT0FBTyxFQUVQRCxFQUFPMVAsTUFBTzRQLElBQUtELEVBQUtFLElBQUtBLFNBTGpDL04sS0FBSzJOLEtBQUtLLEtBQWVGLElBQUtELEVBQUtFLElBQUtBLElBUzVDLE9BREEvTixLQUFLUSxVQUNFLEVBR1hWLElBQUkrTixHQUNBLEdBQW1CLEdBQWY3TixLQUFLUSxPQUNMLE9BRUosTUFBTXdOLEVBQVdoTyxLQUFLME4sS0FBS0csR0FBTzdOLEtBQUsyTixLQUFLbk4sT0FDNUMsSUFBSW9OLEVBQVM1TixLQUFLMk4sS0FBS0ssR0FDdkIsT0FBS0osRUFHRTVOLEtBQUtpTyxXQUFXTCxFQUFRQyxRQUgvQixFQU1KL04sUUFDSSxJQUFLLElBQUk1RixFQUFJLEVBQUdBLEVBQUk4RixLQUFLMk4sS0FBS25OLE9BQVF0RyxJQUVsQzhGLEtBQUsyTixLQUFLelQsTUFFZDhGLEtBQUtRLE9BQVMsRUFHbEJWLFNBQVMrTixHQUNMLEdBQW1CLEdBQWY3TixLQUFLUSxPQUNMLE9BQU8sRUFFWCxNQUFNd04sRUFBV2hPLEtBQUswTixLQUFLRyxHQUFPN04sS0FBSzJOLEtBQUtuTixPQUM1QyxJQUFJb04sRUFBUzVOLEtBQUsyTixLQUFLSyxHQUN2QixRQUFLSixRQUdtQ25ELElBQWpDekssS0FBS2lPLFdBQVdMLEVBQVFDLElBSXZDLFNBQUFLLEVBQWlCQyxFQUFXQyxHQWF4QixPQVpBRCxHQUFlLEVBQVYsRUFDTEEsR0FBTUEsR0FBSyxHQUFNLEVBQ2pCQSxHQUFNQSxHQUFLLEVBQUssRUFDaEJBLEdBQU9DLEdBQVMsRUFBTSxFQUN0QkQsR0FBTUEsR0FBSyxHQUFNLEVBQ2pCQSxHQUFNQSxHQUFLLEVBQUssRUFDaEJBLEdBQU9DLEdBQVMsR0FBTyxFQUN2QkQsR0FBTUEsR0FBSyxHQUFNLEVBQ2pCQSxHQUFNQSxHQUFLLEVBQUssRUFDaEJBLEdBQU9DLEdBQVMsR0FBTyxFQUN2QkQsR0FBTUEsR0FBSyxHQUFNLEVBQ2pCQSxHQUFNQSxHQUFLLEVBQUssRUEwQnBCLE1BQU0xQixFQUFlLFNBQVUzSCxFQUFVRixHQUNyQyxHQUFJRSxFQUFFc0ksYUFBYTVNLFFBQVVvRSxFQUFFd0ksYUFBYTVNLE9BQ3hDLE9BQU8sRUFFWCxJQUFLLElBQUl0RyxFQUFJLEVBQUdBLEVBQUk0SyxFQUFFc0ksYUFBYTVNLE9BQVF0RyxJQUFLLENBQzVDLE1BQU1tVSxFQUFPdkosRUFBRXNJLGFBQWFsVCxHQUN0Qm9VLEVBQU8xSixFQUFFd0ksYUFBYWxULEdBQzVCLEdBQUltVSxFQUFLalIsTUFBUWtSLEVBQUtsUixNQUNsQmlSLEVBQUs5TSxPQUFTK00sRUFBSy9NLE9BQ2pCOE0sRUFBdUI5TyxPQUFVK08sRUFBdUIvTyxNQUMxRCxPQUFPLEVBR2YsT0FBTyxHQUVMbU4sRUFBYyxTQUFVNUgsR0FDMUIsT0FqQ0osWUFBd0J5SixHQUNwQixJQUFJSixFQUFJLEVBQ1IsSUFBSyxJQUFJalUsRUFBSSxFQUFHQSxFQUFJcVUsRUFBUS9OLE9BQVF0RyxJQUNoQ2lVLEVBQUlELEVBQVFDLEVBQUdJLEVBQVFyVSxJQUUzQixPQVhKLFNBQXNCaVUsR0FJbEIsT0FIQUEsR0FBTUEsR0FBSyxFQUFLLEVBQ2hCQSxHQUFNQSxHQUFLLEdBQU0sRUFDakJBLEdBQU1BLEdBQUssR0FBTSxFQVFWSyxDQUFhTCxHQTRCYk0sQ0FBWTNKLEVBQUVzSSxhQUFhNU0sU0FHdEMsU0FBQXlNLEVBQW9CM1MsR0FDaEIsT0FDSWlTLFNBQVVqUyxFQUFFaVMsU0FDWmEsYUFBYzlTLEVBQUU4UyxhQUFhOVAsZUFJckN3TyxFQUdJaE0sY0FDSUUsS0FBSzBPLFNBQ0wxTyxLQUFLUSxPQUFTLEVBR2xCVixLQUFLK04sR0FDRDdOLEtBQUswTyxNQUFNMU8sS0FBS1EsUUFBVXFOLEVBQzFCN04sS0FBS1EsU0FHVFYsUUFDSUUsS0FBS1EsT0FBUyxFQUdsQm1PLFlBQ0ksR0FBbUIsR0FBZjNPLEtBQUtRLE9BR1QsT0FBT1IsS0FBSzBPLE1BQU0sR0FHdEI1TyxJQUFJNUYsR0FDQSxLQUFJQSxFQUFJLEdBQUtBLEdBQUs4RixLQUFLUSxRQUd2QixPQUFPUixLQUFLME8sTUFBTXhVLFVBSzFCb1MsRUFPSXhNLFlBQ0k4TyxFQUNBdEIsRUFDQUMsR0FDQXZOLEtBQUs2TyxVQUNMN08sS0FBSzhPLGlCQUFtQkYsRUFDeEI1TyxLQUFLUSxPQUFTLEVBQ2RSLEtBQUsrTyxlQUFpQkMsSUFDdEJoUCxLQUFLaVAsaUJBQW1CRCxJQUVwQmhQLEtBQUtrUCxRQURMNUIsR0FBV0MsRUFDSSxJQUFJckIsRUFBb0JvQixFQUFTQyxRQUVqQzlDLEVBRW5CekssS0FBS21QLFFBSVRyUCxLQUFLK04sR0FDRCxNQUFNakcsRUFBTTVILEtBQUs4TyxpQkFBaUJqQixHQUNsQyxHQUFJN04sS0FBS2tQLFFBQVMsQ0FDZCxHQUFJbFAsS0FBS2tQLFFBQVFFLFNBQVN2QixHQUN0QixPQUFPLEVBRVg3TixLQUFLa1AsUUFBUWhSLEtBQUsyUCxHQUFLLEdBYzNCLE9BWk1qRyxLQUFPNUgsS0FBSzZPLE9BR2Q3TyxLQUFLNk8sT0FBT2pILEdBQUsxSixLQUFLMlAsR0FGdEI3TixLQUFLNk8sT0FBT2pILElBQVFpRyxHQUlwQmpHLEVBQU01SCxLQUFLK08saUJBQ1gvTyxLQUFLK08sZUFBaUJuSCxHQUV0QkEsRUFBTTVILEtBQUtpUCxrQkFDWGpQLEtBQUtpUCxnQkFBa0JySCxHQUUzQjVILEtBQUtRLFVBQ0UsRUFHWFYsUUFDSSxHQUFJRSxLQUFLK08sZ0JBQWtCQyxLQUEyQixHQUFmaFAsS0FBS1EsT0FDeEMsT0FFSixNQUFNNk8sRUFBSXJQLEtBQUs2TyxPQUFPN08sS0FBSytPLGdCQUVyQjNOLEVBQVNpTyxFQUFFNUwsTUFDakIsR0FBZ0IsR0FBWjRMLEVBQUU3TyxPQUVGLFVBRE9SLEtBQUs2TyxPQUFPN08sS0FBSytPLGdCQUNwQi9PLEtBQUtpUCxpQkFBbUJqUCxLQUFLK08sZUFDN0IvTyxLQUFLK08sZUFBaUJDLElBQ3RCaFAsS0FBS2lQLGlCQUFtQkQsU0FFeEIsTUFBU2hQLEtBQUs2TyxPQUFPN08sS0FBSytPLGlCQUFvQi9PLEtBQUsrTyxlQUFpQi9PLEtBQUtpUCxpQkFDckVqUCxLQUFLK08saUJBS2pCLE9BREEvTyxLQUFLUSxTQUNFWSxFQUdYdU4sWUFDSSxHQUFtQixHQUFmM08sS0FBS1EsT0FHVCxPQUFPUixLQUFLNk8sT0FBTzdPLEtBQUsrTyxnQkFBZ0IsR0FHNUNqUCxRQUVJRSxLQUFLNk8sVUFDTDdPLEtBQUsrTyxlQUFpQkMsSUFDdEJoUCxLQUFLaVAsaUJBQW1CRCxJQUN4QmhQLEtBQUtRLE9BQVMsRUFDVlIsS0FBS2tQLFNBQ0xsUCxLQUFLa1AsUUFBUUMsU0FLekIsTUFBTUcsRUFBeUIsVUFzQy9CMUQsRUFJSTlMLFlBQ0l5UCxFQUNBcEcsRUFDQXhLLEdBR0EsR0FGQXFCLEtBQUt1UCxPQUFTQSxFQUNkdlAsS0FBS21KLE1BQVFBLEdBQ1ksR0FBckJuSixLQUFLbUosTUFBTTVILE1BQWEsQ0FDeEJ2QixLQUFLbUosTUFBTW1DLE1BQVF0TCxLQUFLdVAsT0FBT3pFLEtBQUtPLFNBQVM3TixNQUFNd0MsS0FBS21KLE1BQU1tQyxPQUM5RCxJQUFJa0UsRUFBYSxJQUFJM0MsRUFBTyxFQUFHLEVBQUcsSUFBTU4sU0FBVSxFQUFHYSxtQkFDckRwTixLQUFLeVAsY0FBY0QsR0FFbkIsTUFBTUUsRUFBTzFQLEtBQUttSixNQUFNMEMsTUFDeEI3TCxLQUFLbUosTUFBTTBDLE1BQVE3TCxLQUFLbUosTUFBTTRDLFVBQzlCL0wsS0FBS21KLE1BQU00QyxVQUFZMkQsRUFFdkIxUCxLQUFLbUosTUFBTThDLFFBQVFrRCxRQUNuQm5QLEtBQUttSixNQUFNcUQsU0FBUzJDLFFBRXBCblAsS0FBS21KLE1BQU01SCxNQUFRLEVBRXZCdkIsS0FBS3JCLE1BQVFBLEVBR2pCbkIsWUFDSSxPQUFPd0MsS0FBS3JCLE1BQVFxQixLQUFLckIsTUFBTW5CLE9BQVMsRUFHNUNDLFVBQ0ksT0FBT3VDLEtBQUtyQixNQUFRcUIsS0FBS3JCLE1BQU1sQixLQUFPLEVBRzFDdUgsYUFDSSxPQUFPaEYsS0FBS3JCLE1BQVFxQixLQUFLckIsTUFBTXFHLFlBQVN5RixFQUc1Q2tGLGdCQUNJLE9BQU8zUCxLQUFLckIsTUFBUXFCLEtBQUtyQixNQUFNZ1IsZUFBWWxGLEVBRy9DM0ssZ0JBQ0ksUUFBS0UsS0FBS21KLE1BQU9rRCxXQUFXN0wsVUFHdkJSLEtBQUttSixNQUFPMEMsTUFBTXJMLFFBR2hCUixLQUFLbUosTUFBT2tELFdBQVdzQyxNQUFPcEMsVUFBWXZNLEtBQUttSixNQUFPMEMsTUFBTThDLE1BQU9wQyxVQUc5RXpNLGNBQWM4UCxHQUlWLE1BQU16RixFQUFRbkssS0FBS3VQLE9BQU96RSxLQUFLSyxRQUFReUUsRUFBTzlDLElBQzlDLE9BQVEzQyxFQUFNL00sTUFDVixJQUFLLE9BR0QsT0FGQXdTLEVBQU85QyxHQUFLM0MsRUFBTXJHLFlBQ2xCOUQsS0FBS3lQLGNBQWNHLEdBRXZCLElBQUssUUFDRDVQLEtBQUttSixNQUFPZ0QsY0FDWnlELEVBQU85QyxHQUFLM0MsRUFBTWxNLEtBR2xCLE1BQU00UixFQUFVLElBQUloRCxFQUFPN00sS0FBS21KLE1BQU9nRCxZQUFhaEMsRUFBTTNMLE1BQVFvUixFQUFPckQsU0FBVyxFQUFHcUQsRUFBTzdDLFNBRzlGLE9BRkEvTSxLQUFLeVAsY0FBY0csUUFDbkI1UCxLQUFLeVAsY0FBY0ksR0FFdkIsSUFBSyxRQVdELE9BVkFELEVBQU9FLHNCQUNIMVMsS0FBTSxRQUdObUUsTUFBT3ZCLEtBQUttSixNQUFPNUgsTUFBUSxFQUMzQmhDLE1BQU80SyxFQUFNNUssTUFDYjhOLFdBQVlsRCxFQUFNckMsWUFFdEI4SCxFQUFPOUMsVUFDUDlNLEtBQUt5UCxjQUFjRyxHQUV2QixJQUFLLE1BVUQsT0FUQUEsRUFBT0Usc0JBQ0gxUyxLQUFNLE1BRU5tRSxNQUFPdkIsS0FBS21KLE1BQU81SCxNQUFRLEVBQzNCaEMsTUFBTzRLLEVBQU01SyxNQUNiOE4sV0FBWWxELEVBQU1yQyxZQUV0QjhILEVBQU85QyxVQUNQOU0sS0FBS3lQLGNBQWNHLEdBRXZCLElBQUssUUFFRCxJQUFLLElBQUkxVixFQUFJLEVBQUdBLEVBQUkwVixFQUFPN0MsUUFBUXZNLE9BQVF0RyxJQUNuQzBWLEVBQU83QyxRQUFRN1MsR0FBR3FTLFVBQVlxRCxFQUFPckQsVUFFakN2TSxLQUFLbUosTUFBT3FELFNBQVN0TyxLQUFLMFIsRUFBTzdDLFFBQVE3UyxJQUFJLElBRTdDOEYsS0FBS21KLE1BQU9rRCxXQUFXbk8sS0FBSzBSLEVBQU83QyxRQUFRN1MsSUFNdkQsWUFEQTBWLEVBQU9HLFlBRVgsSUFBSyxRQUVELE1BQU1yQyxFQUFPa0MsRUFBT2xDLE9BQ3BCLElBQUl2RSxFQUFRbkosS0FBS21KLE1BQ2I2RyxFQUFnQzdHLEVBQU04QyxRQUFRalIsSUFBSTBTLEdBQ3RELEdBQUtzQyxHQU9FLEdBQUlBLEVBQUt6TyxPQUFTNEgsRUFBTzVILE1BQzVCeU8sRUFBS3pPLE1BQVE0SCxFQUFNNUgsTUFDbkJ5TyxFQUFLaEUsUUFBUW1ELFFBQ2JhLEVBQUtoRSxRQUFROU4sS0FBSzBSLFFBR2xCLElBQUssSUFBSTFWLEVBQUksRUFBR0EsRUFBSThWLEVBQUtoRSxRQUFReEwsT0FBUXRHLElBQ3JDLEdBQUk4VixFQUFLaEUsUUFBUWhSLElBQUlkLEdBQUkrVixPQUFPTCxHQUk1QixPQUhBSSxFQUFLaEUsUUFBUWhSLElBQUlkLEdBQUlnVyxZQUFZTixRQUVqQ0EsRUFBT0csZ0JBakJSLENBQ1AsSUFBSUksRUFBYSxJQUFJckUsRUFDckJxRSxFQUFXalMsS0FBSzBSLEdBQ2hCekcsRUFBTThDLFFBQVEvTixLQUFLd1AsR0FDZm5NLE1BQU80SCxFQUFNNUgsTUFDYnlLLFFBQVNtRSxJQW1CakIsWUFEQWhILEVBQU00QyxVQUFVN04sS0FBSzBSLEdBSXpCLFFBQ0ksTUFBTSxJQUFJakgsTUFBTSxnREFJNUI3SSxjQUFjeEYsR0FDVixJQUFJOFYsS0FDQUMsS0FJSixJQUFLLElBQUluVyxFQUFJLEVBQUdBLEVBQUlJLEVBQUU4UyxhQUFhNU0sT0FBUXRHLElBQUssQ0FDNUMsTUFBTWlRLEVBQVE3UCxFQUFFOFMsYUFBYWxULEdBQzdCLE9BQVFpUSxFQUFNL00sTUFDVixJQUFLLFFBQ0QsSUFBSWtULEdBQ0EvUSxNQUFPNEssRUFBTTVLLE1BQ2I4TixXQUFZbEQsRUFBTWtELFdBQ2xCN1AsTUFBTzJNLEVBQU01SSxNQUNiOUQsSUFBS3VSLElBQ0xoSyxZQUFReUYsRUFDUjhGLGFBQVM5RixHQU9iLEdBTEl6SyxLQUFLdVAsT0FBTzVELGlCQUNaMkUsRUFBS3RMLFVBQ0xzTCxFQUFLQyxZQUVUSCxFQUFPbFMsS0FBS29TLEdBQ1JELEVBQVdDLEVBQUsvUSxPQUNoQixNQUFNLElBQUlvSixNQUFNLDJCQUVwQjBILEVBQVdDLEVBQUsvUSxPQUFTK1EsRUFDekIsTUFDSixJQUFLLFFBQ0QsSUFBSUUsRUFBYTVWLE9BQU82VixvQkFBb0JKLEdBQzVDLElBQUssSUFBSUssRUFBSyxFQUFHQSxFQUFLRixFQUFXaFEsT0FBUWtRLElBQU0sQ0FDM0MsSUFBSUMsRUFBYU4sRUFBV0csRUFBV0UsSUFFdkNDLEVBQVczTCxPQUFROUcsS0FBS2lNLEVBQU1oQixPQUM5QndILEVBQVdKLFFBQVNyUyxLQUFLaU0sRUFBTS9JLFFBRW5DLE1BQ0osSUFBSyxNQUNlaVAsRUFBV2xHLEVBQU01SyxPQUN2QjlCLElBQU0wTSxFQUFNNUksYUFDZjhPLEVBQVdsRyxFQUFNNUssUUFJcEMsSUFBSWlSLEVBQWE1VixPQUFPNlYsb0JBQW9CSixHQUM1QyxHQUFJRyxFQUFXaFEsT0FDWCxNQUFNLElBQUltSSw4QkFBOEI2SCxFQUFXbk0sS0FBSyxRQUU1RCxJQUFJdU0sRUFBWVIsRUFBT1MsUUFDbkJDLEdBQ0F0VCxNQUFPb1QsRUFBVXBULE1BQ2pCQyxJQUFLbVQsRUFBVW5ULElBRWZrUyxVQUFXUyxFQUFPVyxPQUNieFIsR0FBVUEsRUFBTS9CLE9BQVMrQixFQUFNOUIsS0FFcEN1SCxZQUFReUYsRUFDUjhGLGFBQVM5RixHQU1iLE9BSkl6SyxLQUFLdVAsT0FBTzVELGlCQUNabUYsRUFBVTlMLE9BQVM0TCxFQUFVNUwsT0FDN0I4TCxFQUFVUCxRQUFVSyxFQUFVTCxTQUUzQk8sRUFHWGhSLE9BQ0ksSUFBS0UsS0FBS21KLE1BQ04sTUFBTSxJQUFJUixNQUFNLHVEQUdwQixHQUFJM0ksS0FBS3VQLE9BQU96RSxLQUFLTyxTQUFTMkYsVUFDekJoUixLQUFLdVAsT0FBT3pFLEtBQUtPLFNBQVMyRixRQUFRaFIsS0FBS21KLE1BQU1tQyxPQUFRLENBQ3RELE1BQU0yRixFQUFZalIsS0FBS21KLE1BRXZCLE9BREFuSixLQUFLbUosV0FBUXNCLEVBQ04sSUFBSW1CLEVBQWU1TCxLQUFLdVAsT0FBUTBCLE9BQVd4RyxHQUV0RCxNQUFRekssS0FBS2tSLGlCQUFtQmxSLEtBQUttSixNQUFNMEMsTUFBTXJMLFFBQVEsQ0FDckQsTUFBTTJJLEVBQVFuSixLQUFLdVAsT0FBT3pFLEtBQUtPLFNBQVM4RixhQUFhblIsS0FBS21KLE1BQU1tQyxPQUNoRSxJQUFJOEYsT0FBYzNHLEVBQ2xCLE1BQU00RyxFQUFRclIsS0FBS21KLE1BQU0wQyxNQUFNckwsT0FDL0IsSUFBSThRLEVBQWUsRUFDbkIsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUl2UixLQUFLbUosTUFBTTBDLE1BQU1yTCxPQUFRK1EsSUFBSyxDQUM5QyxHQUFJQSxHQUFLRixFQUNMLE1BQU0sSUFBSTFJLE1BQU0sbUVBRXBCLElBQUlpSCxFQUFTNVAsS0FBS21KLE1BQU0wQyxNQUFNN1EsSUFBSXVXLEdBQ2xDLEdBQUkzQixFQUFPckQsU0FBVytFLEVBQ2xCLE1BQU0sSUFBSTNJLE1BQU0sd0JBRXBCLE1BQU13QixFQUFRbkssS0FBS3VQLE9BQU96RSxLQUFLSyxRQUFReUUsRUFBTzlDLElBQzlDLE9BQVEzQyxFQUFNL00sTUFDVixJQUFLLFFBQ0QsTUFBTW9VLEVBQWN4UixLQUFLdVAsT0FBT3pFLEtBQUtZLE1BQ2pDMUwsS0FBS21KLE1BQU1tQyxNQUNYbkMsRUFDQW5KLEtBQUttSixNQUFNNUgsTUFDWDRJLEVBQU1qRyxTQUVOc04sR0FDQTVCLEVBQU85QyxLQUNIOEMsRUFBTzZCLGdCQUNIelIsS0FBS3VQLE9BQU81RCxpQkFDWGlFLEVBQU84QixvQkFDMEIsWUFBOUIxUixLQUFLdVAsT0FBTzVELGtCQUNYeUYsSUFDREEsRUFBY3BSLEtBQUt1UCxPQUFPekUsS0FBS08sU0FBU3NHLGlCQUNwQzNSLEtBQUt1UCxPQUFPekUsS0FBS08sU0FBU3NHLGlCQUFpQjNSLEtBQUttSixNQUFNbUMsT0FDdERuQyxHQUVSeUcsRUFBT0Usc0JBQ0gxUyxLQUFNLFFBQ05tRSxNQUFPdkIsS0FBS21KLE1BQU01SCxNQUNsQjRILE1BQU9pSSxFQUNQaFEsT0FBUW9RLEtBSXBCeFIsS0FBS3lQLGNBQWNHLElBRW5CQSxFQUFPRyxZQUVYLE1BQ0osUUFDSSxNQUFNLElBQUlwSCxNQUFNLHdDQUk1QixJQUFJK0csRUFBTzFQLEtBQUttSixNQUFNMEMsTUFXdEIsR0FWQTdMLEtBQUttSixNQUFNMEMsTUFBUTdMLEtBQUttSixNQUFNNEMsVUFDOUIyRCxFQUFLUCxRQUNMblAsS0FBS21KLE1BQU00QyxVQUFZMkQsRUFFbEIxUCxLQUFLbUosTUFBTTVILE1BQVErTixHQUEyQixHQUMvQ3RQLEtBQUttSixNQUFNOEMsUUFBUWtELFFBR3ZCblAsS0FBS21KLE1BQU1xRCxTQUFTMkMsUUFFaEJuUCxLQUFLdVAsT0FBT3pFLEtBQUtPLFNBQVNJLFFBQVF6TCxLQUFLbUosTUFBTW1DLE9BQVEsQ0FFaER0TCxLQUFLdVAsT0FBT3pFLEtBQUtPLFNBQVN1RyxhQUMxQjVSLEtBQUt1UCxPQUFPekUsS0FBS08sU0FBU3VHLFlBQVk1UixLQUFLbUosTUFBTW1DLFFBQ2xEdEwsS0FBS21KLE1BQU0wQyxNQUFNc0QsUUFFckIsTUFFSm5QLEtBQUt1UCxPQUFPekUsS0FBS08sU0FBU3dHLGFBQWE3UixLQUFLbUosTUFBTW1DLE9BQ2xEdEwsS0FBS21KLE1BQU01SCxRQUVmLEdBQUl2QixLQUFLa1IsZ0JBQWlCLENBRXRCLE1BQU12UyxFQUFRcUIsS0FBS21KLE1BQU1rRCxXQUFXd0UsUUFDcEMsR0FBSTdRLEtBQUttSixNQUFNd0Qsa0JBQW9CaE8sRUFBTTROLFNBQ3JDLE1BQU0sSUFBSTVELE1BQU0sZ0NBRXBCM0ksS0FBS21KLE1BQU13RCxrQkFBb0JoTyxFQUFNNE4sU0FDckMsTUFBTXVGLEVBQWM5UixLQUFLK1IsY0FBY3BULEdBQ2pDc1MsRUFBWWpSLEtBQUttSixNQUV2QixPQURBbkosS0FBS21KLFdBQVFzQixFQUNOLElBQUltQixFQUNQNUwsS0FBS3VQLE9BQ0wwQixFQUNBYSxHQUdSLEdBQUk5UixLQUFLdVAsT0FBT3pFLEtBQUtPLFNBQVN1RyxhQUMxQjVSLEtBQUt1UCxPQUFPekUsS0FBS08sU0FBU3VHLFlBQVk1UixLQUFLbUosTUFBTW1DLE9BQVEsQ0FDekQsTUFBTTJGLEVBQVlqUixLQUFLbUosTUFFdkIsT0FEQW5KLEtBQUttSixXQUFRc0IsRUFDTixJQUFJbUIsRUFDUDVMLEtBQUt1UCxPQUNMMEIsT0FDQXhHLEdBS1IsT0FEQXpLLEtBQUttSixXQUFRc0IsRUFDTiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgVG9rZW5EZWZpbml0aW9uLCBUb2tlbiwgUGFyc2VUcmVlLCBNYXRjaFJlc3VsdCwgSVBhcnNlciB9IGZyb20gXCIuL3R5cGVzXCI7XG5cbmV4cG9ydCBjb25zdCB0b2tlblR5cGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgIFdISVRFU1BBQ0U6IFwiIFwiLFxuICAgIENPTkNBVEVOQVRJT046IFwiLFwiLFxuICAgIC8vIEJvdW5kaW5nIGludGVnZXJzIGFyZSB0b2tlbml6ZWQgYXMgcGFydCBvZiB0aGUgZG90cyB0byBtaW5pbWl6ZSBwb3RlbnRpYWwgY29uZmxpY3RzIHdpdGggdXNlci1wcm92aWRlZCBzeW50YXguXG4gICAgRE9UU19HUkVFRFk6IFwiLi4uXCIsXG4gICAgRE9UU19SRUxVQ1RBTlQ6IFwiLi5cIixcbiAgICBET1RTX09NRUdBOiBcIioqKlwiLFxuICAgIExFRlRfUEFSRU46IFwiKFwiLFxuICAgIFJJR0hUX1BBUkVOOiBcIilcIixcbiAgICBDQVBUVVJJTkdfTEVGVF9QQVJFTjogXCIkKFwiLFxuICAgIEFMVEVSTkFUSU9OOiBcIjtcIixcbiAgICBJTlRFUlNFQ1RJT046IFwiXlwiLFxuICAgIEFORDogXCImXCIsXG4gICAgT1I6IFwifFwiLFxuICAgIE5PVDogXCJub3RcIixcbiAgICBTVEFSVDogXCJzdGFydFwiLFxuICAgIEVORDogXCJlbmRcIixcbiAgICBUUlVFOiBcInRydWVcIixcbiAgICBGQUxTRTogXCJmYWxzZVwiLFxuICAgIEVSUk9SOiBcImVycm9yXCJcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZVR5cGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgIE9NRUdBOiB0b2tlblR5cGVzLkRPVFNfT01FR0EsXG4gICAgUkVQRVRJVElPTjogdG9rZW5UeXBlcy5ET1RTX0dSRUVEWSxcbiAgICBDT05DQVRFTkFUSU9OOiB0b2tlblR5cGVzLkNPTkNBVEVOQVRJT04sXG4gICAgQ0FQVFVSRTogXCIkKFwiLFxuICAgIEdST1VQOiB0b2tlblR5cGVzLkxFRlRfUEFSRU4sXG4gICAgQUxURVJOQVRJT046IHRva2VuVHlwZXMuQUxURVJOQVRJT04sXG4gICAgSU5URVJTRUNUSU9OOiB0b2tlblR5cGVzLklOVEVSU0VDVElPTixcbiAgICBBTkQ6IHRva2VuVHlwZXMuQU5ELFxuICAgIE9SOiB0b2tlblR5cGVzLk9SLFxuICAgIE5PVDogdG9rZW5UeXBlcy5OT1QsXG4gICAgU1RBUlQ6IHRva2VuVHlwZXMuU1RBUlQsXG4gICAgRU5EOiB0b2tlblR5cGVzLkVORCxcbiAgICBUUlVFOiB0b2tlblR5cGVzLlRSVUUsXG4gICAgRkFMU0U6IHRva2VuVHlwZXMuRkFMU0UsXG4gICAgRVJST1I6IHRva2VuVHlwZXMuRVJST1Jcbn07XG5cblxuZXhwb3J0IHR5cGUgVG9rZW5TdHJlYW0gPSB7XG4gICAgc3RyaW5nOiBzdHJpbmcsXG4gICAgdG9rZW5zOiBBcnJheTxUb2tlbj4sXG4gICAgcG9zaXRpb246IG51bWJlcixcbiAgICBlcnJvcnM6IEFycmF5PG51bWJlcj5cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZVRyZWUocDogUGFyc2VUcmVlKTogUGFyc2VUcmVlIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBwLnR5cGUsXG4gICAgICAgIHZhbHVlOiBwLnZhbHVlLFxuICAgICAgICBjaGlsZHJlbjogcC5jaGlsZHJlbi5zbGljZSgpLFxuICAgICAgICByYW5nZToge1xuICAgICAgICAgICAgc3RhcnQ6IHAucmFuZ2Uuc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IHAucmFuZ2UuZW5kXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5leHBvcnQgY29uc3QgY29uc3RhbnRWYWx1ZSA9IGZ1bmN0aW9uIChjOiBhbnkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKF9tcjogTWF0Y2hSZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlVmFsdWUgPSBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pIHtcbiAgICByZXR1cm4gcGFyc2VyLm5vZGUodG9rZW4udHlwZSwgdG9rZW4udmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IHBhcnNlSW5maXhSID0gZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgbGVmdDogUGFyc2VUcmVlLCB0b2tlbjogVG9rZW4pIHtcbiAgICBsZXQgY2hpbGRyZW4gPSBbbGVmdF07XG4gICAgY2hpbGRyZW4ucHVzaChwYXJzZXIucGFyc2VFeHByZXNzaW9uKHRva2VuLnRpZ2h0bmVzcyAtIDEpKTtcbiAgICByZXR1cm4gcGFyc2VyLm5vZGUodG9rZW4udHlwZSwgdG9rZW4udmFsdWUsIGNoaWxkcmVuKTtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZUluZml4UlByb3Bvc2l0aW9uYWwgPSBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCBsZWZ0OiBQYXJzZVRyZWUsIHRva2VuOiBUb2tlbikge1xuICAgIGlmICghaXNQcm9wb3NpdGlvbmFsKGxlZnQpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJMZWZ0IGhhbmQgc2lkZSBvZiB0b2tlbiBtdXN0IGJlIHByb3Bvc2l0aW9uYWxcIiwgdG9rZW4sIGxlZnQpO1xuICAgIH1cbiAgICBsZXQgY2hpbGRyZW4gPSBbbGVmdF07XG4gICAgY29uc3QgcmlnaHQgPSBwYXJzZXIucGFyc2VFeHByZXNzaW9uKHRva2VuLnRpZ2h0bmVzcyAtIDEpO1xuICAgIGlmICghaXNQcm9wb3NpdGlvbmFsKHJpZ2h0KSkge1xuICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiUmlnaHQgaGFuZCBzaWRlIG9mIHRva2VuIG11c3QgYmUgcHJvcG9zaXRpb25hbFwiLCB0b2tlbiwgcmlnaHQpO1xuICAgIH1cbiAgICBjaGlsZHJlbi5wdXNoKHJpZ2h0KTtcbiAgICByZXR1cm4gcGFyc2VyLm5vZGUodG9rZW4udHlwZSwgdG9rZW4udmFsdWUsIGNoaWxkcmVuKTtcbn07XG5cbmV4cG9ydCBjb25zdCBCT1VORF9JTkZJTklURSA9IFwiJEVORFwiO1xuXG5leHBvcnQgY29uc3Qgc3RhbmRhcmRUb2tlbnM6IEFycmF5PFRva2VuRGVmaW5pdGlvbj4gPSBbXG4gICAge1xuICAgICAgICBcInR5cGVcIjogdG9rZW5UeXBlcy5XSElURVNQQUNFLFxuICAgICAgICBtYXRjaDogL15cXHMrL1xuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkNPTkNBVEVOQVRJT04sXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5DT05DQVRFTkFUSU9OXSxcbiAgICAgICAgdGlnaHRuZXNzOiAxMDAsXG4gICAgICAgIGV4dGVuZFBhcnNlOiBwYXJzZUluZml4UlxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkRPVFNfR1JFRURZLFxuICAgICAgICBtYXRjaDogL14oWzAtOV0qKVxccypcXC5cXC5cXC5cXHMqKFswLTldKikvLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKG1hdGNoUmVzdWx0OiBNYXRjaFJlc3VsdCk6IGFueSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGdyZWVkeTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBsb3dlckJvdW5kOiBtYXRjaFJlc3VsdFsxXSA/IHBhcnNlSW50KG1hdGNoUmVzdWx0WzFdKSA6IDAsXG4gICAgICAgICAgICAgICAgdXBwZXJCb3VuZDogbWF0Y2hSZXN1bHRbMl0gPyBwYXJzZUludChtYXRjaFJlc3VsdFsyXSkgOiBCT1VORF9JTkZJTklURVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgdGlnaHRuZXNzOiAxMTAsXG4gICAgICAgIHN0YXJ0UGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICBjb25zdCB0cnVlUGhpID0gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5UUlVFLCB0cnVlKTtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2Uuc3RhcnQgPSB0b2tlbi5yYW5nZS5zdGFydDtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2UuZW5kID0gdG9rZW4ucmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5SRVBFVElUSU9OLCB0b2tlbi52YWx1ZSwgW3RydWVQaGldKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIGxlZnQ6IFBhcnNlVHJlZSwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZShwYXJzZVR5cGVzLlJFUEVUSVRJT04sIHRva2VuLnZhbHVlLCBbbGVmdF0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuRE9UU19SRUxVQ1RBTlQsXG4gICAgICAgIG1hdGNoOiAvXihbMC05XSopXFxzKlxcLlxcLlxccyooWzAtOV0qKS8sXG4gICAgICAgIHRpZ2h0bmVzczogMTEwLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKG1hdGNoUmVzdWx0OiBNYXRjaFJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBncmVlZHk6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGxvd2VyQm91bmQ6IG1hdGNoUmVzdWx0WzFdID8gcGFyc2VJbnQobWF0Y2hSZXN1bHRbMV0pIDogMCxcbiAgICAgICAgICAgICAgICB1cHBlckJvdW5kOiBtYXRjaFJlc3VsdFsyXSA/IHBhcnNlSW50KG1hdGNoUmVzdWx0WzJdKSA6IEJPVU5EX0lORklOSVRFXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBzdGFydFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgY29uc3QgdHJ1ZVBoaSA9IHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuVFJVRSwgdHJ1ZSk7XG4gICAgICAgICAgICB0cnVlUGhpLnJhbmdlLnN0YXJ0ID0gdG9rZW4ucmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICB0cnVlUGhpLnJhbmdlLmVuZCA9IHRva2VuLnJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuUkVQRVRJVElPTiwgdG9rZW4udmFsdWUsIFt0cnVlUGhpXSk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4dGVuZFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCBsZWZ0OiBQYXJzZVRyZWUsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5SRVBFVElUSU9OLCB0b2tlbi52YWx1ZSwgW2xlZnRdKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkRPVFNfT01FR0EsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5ET1RTX09NRUdBXSxcbiAgICAgICAgdGlnaHRuZXNzOiAxMTAsXG4gICAgICAgIHN0YXJ0UGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICBjb25zdCB0cnVlUGhpID0gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5UUlVFLCB0cnVlKTtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2Uuc3RhcnQgPSB0b2tlbi5yYW5nZS5zdGFydDtcbiAgICAgICAgICAgIHRydWVQaGkucmFuZ2UuZW5kID0gdG9rZW4ucmFuZ2UuZW5kO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuT01FR0EsIHRva2VuLnZhbHVlLCBbdHJ1ZVBoaV0pO1xuICAgICAgICB9LFxuICAgICAgICBleHRlbmRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgbGVmdDogUGFyc2VUcmVlLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuT01FR0EsIHRva2VuLnZhbHVlLCBbbGVmdF0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuTEVGVF9QQVJFTixcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkxFRlRfUEFSRU5dLFxuICAgICAgICBzdGFydFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgLy9wYXJzZSBhbiBleHByZXNzaW9uIGF0IFJCUCAwLCB0aGVuIGVhdCBhIClcbiAgICAgICAgICAgIGNvbnN0IGV4cHIgPSBwYXJzZXIucGFyc2VFeHByZXNzaW9uKDApO1xuICAgICAgICAgICAgaWYgKHBhcnNlci5jdXJyZW50VG9rZW4oKS50eXBlICE9IHRva2VuVHlwZXMuUklHSFRfUEFSRU4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiTWlzc2luZyByaWdodCBwYXJlbnRoZXNpc1wiLCB0b2tlbiwgZXhwcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIuYWR2YW5jZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuR1JPVVAsIHRva2VuLnZhbHVlLCBbZXhwcl0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuUklHSFRfUEFSRU4sXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5SSUdIVF9QQVJFTl1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5DQVBUVVJJTkdfTEVGVF9QQVJFTixcbiAgICAgICAgbWF0Y2g6IC9eXFwkKFtBLXpfXVtBLXpfMC05XSopP1xcKC8sXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiAobWF0Y2hSZXN1bHQ6IE1hdGNoUmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGdyb3VwOiBtYXRjaFJlc3VsdFsxXSB8fCBcIiRpbXBsaWNpdFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBzdGFydFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgLy9wYXJzZSBhbiBleHByZXNzaW9uIGF0IFJCUCAwLCB0aGVuIGVhdCBhIClcbiAgICAgICAgICAgIGNvbnN0IGV4cHIgPSBwYXJzZXIucGFyc2VFeHByZXNzaW9uKDApO1xuICAgICAgICAgICAgaWYgKHBhcnNlci5jdXJyZW50VG9rZW4oKS50eXBlICE9IHRva2VuVHlwZXMuUklHSFRfUEFSRU4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiTWlzc2luZyByaWdodCBwYXJlbnRoZXNpc1wiLCB0b2tlbiwgZXhwcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIuYWR2YW5jZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuQ0FQVFVSRSwgdG9rZW4udmFsdWUsIFtleHByXSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5BTFRFUk5BVElPTixcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkFMVEVSTkFUSU9OXSxcbiAgICAgICAgdGlnaHRuZXNzOiA2MCxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IHBhcnNlSW5maXhSXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuSU5URVJTRUNUSU9OLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuSU5URVJTRUNUSU9OXSxcbiAgICAgICAgdGlnaHRuZXNzOiA1MCxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IHBhcnNlSW5maXhSXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuQU5ELFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuQU5EXSxcbiAgICAgICAgdGlnaHRuZXNzOiAyMDAsXG4gICAgICAgIGV4dGVuZFBhcnNlOiBwYXJzZUluZml4UlByb3Bvc2l0aW9uYWxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5PUixcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLk9SXSxcbiAgICAgICAgdGlnaHRuZXNzOiAyMTAsXG4gICAgICAgIGV4dGVuZFBhcnNlOiBwYXJzZUluZml4UlByb3Bvc2l0aW9uYWxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5OT1QsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5OT1RdLFxuICAgICAgICB0aWdodG5lc3M6IDIyMCxcbiAgICAgICAgc3RhcnRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIGNvbnN0IHBoaSA9IHBhcnNlci5wYXJzZUV4cHJlc3Npb24odG9rZW4udGlnaHRuZXNzKTtcbiAgICAgICAgICAgIGlmICghaXNQcm9wb3NpdGlvbmFsKHBoaSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiTk9UIG1heSBvbmx5IG5lZ2F0ZSBwcm9wb3NpdGlvbmFsIHN0YXRlIGZvcm11bGFlXCIsIHRva2VuLCBwaGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHRva2VuLnR5cGUsIHRva2VuLnZhbHVlLCBbcGhpXSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5TVEFSVCxcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLlNUQVJUXSxcbiAgICAgICAgc3RhcnRQYXJzZTogcGFyc2VWYWx1ZVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkVORCxcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkVORF0sXG4gICAgICAgIHN0YXJ0UGFyc2U6IHBhcnNlVmFsdWVcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5UUlVFLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuVFJVRV0sXG4gICAgICAgIHZhbHVlOiBjb25zdGFudFZhbHVlKHRydWUpLFxuICAgICAgICBzdGFydFBhcnNlOiBwYXJzZVZhbHVlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuRkFMU0UsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5GQUxTRV0sXG4gICAgICAgIHZhbHVlOiBjb25zdGFudFZhbHVlKGZhbHNlKSxcbiAgICAgICAgc3RhcnRQYXJzZTogcGFyc2VWYWx1ZVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkVSUk9SLFxuICAgICAgICBtYXRjaDogL15cXFMrLyxcbiAgICAgICAgc3RhcnRQYXJzZTogcGFyc2VWYWx1ZVxuICAgIH1cbl07XG5cbmNvbnN0IGN1c3RvbVRpZ2h0bmVzc09mZnNldCA9IDMwMDtcblxuY29uc3QgRVJST1IgPSBcIkVSUk9SXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0N1c3RvbShwOiBQYXJzZVRyZWUpOiBib29sZWFuIHtcbiAgICBmb3IgKHZhciBrIGluIHBhcnNlVHlwZXMpIHtcbiAgICAgICAgaWYgKHBhcnNlVHlwZXNba10gPT0gcC50eXBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3Bvc2l0aW9uYWwocDogUGFyc2VUcmVlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzQ3VzdG9tKHApIHx8XG4gICAgICAgIHAudHlwZSA9PSBwYXJzZVR5cGVzLkFORCB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5PUiB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5OT1QgfHxcbiAgICAgICAgcC50eXBlID09IHBhcnNlVHlwZXMuVFJVRSB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5GQUxTRSB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5TVEFSVCB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5FTkQgfHxcbiAgICAgICAgKChwLnR5cGUgPT0gcGFyc2VUeXBlcy5HUk9VUCB8fCBwLnR5cGUgPT0gcGFyc2VUeXBlcy5DQVBUVVJFKSAmJlxuICAgICAgICAgICAgcC5jaGlsZHJlbi5ldmVyeShmdW5jdGlvbiAoYykge1xuICAgICAgICAgICAgICAgIHJldHVybiBpc1Byb3Bvc2l0aW9uYWwoYyk7XG4gICAgICAgICAgICB9KSk7XG59XG5leHBvcnQgdHlwZSBQYXJzZVJlc3VsdCA9IHtcbiAgICB0cmVlOiBQYXJzZVRyZWUsXG4gICAgZXJyb3JzOiBBcnJheTxQYXJzZVRyZWU+LFxuICAgIHJlbWFpbmRlcjogc3RyaW5nXG59O1xuZXhwb3J0IGNsYXNzIFBhcnNlciBpbXBsZW1lbnRzIElQYXJzZXIge1xuICAgIHB1YmxpYyB0b2tlbkRlZmluaXRpb25zOiBBcnJheTxUb2tlbkRlZmluaXRpb24+O1xuICAgIHB1YmxpYyB0b2tlbnNCeVR5cGU6IHsgW2tleTogc3RyaW5nXTogVG9rZW5EZWZpbml0aW9uIH07XG4gICAgcHVibGljIHBhcnNlRXJyb3JzOiBBcnJheTxQYXJzZVRyZWU+O1xuICAgIHB1YmxpYyBzdHJlYW0/OiBUb2tlblN0cmVhbTtcbiAgICBjb25zdHJ1Y3Rvcihjb250ZXh0VG9rZW5zOiBBcnJheTxUb2tlbkRlZmluaXRpb24+KSB7XG4gICAgICAgIHRoaXMudG9rZW5EZWZpbml0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLnRva2Vuc0J5VHlwZSA9IHt9O1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3JzID0gW107XG4gICAgICAgIGNvbnN0IGN1c3RvbVRva2VucyA9IGNvbnRleHRUb2tlbnMgfHwgW107XG4gICAgICAgIGNvbnN0IHRva2VucyA9IGN1c3RvbVRva2Vucy5jb25jYXQoc3RhbmRhcmRUb2tlbnMpO1xuICAgICAgICBmb3IgKGxldCB0aSA9IDA7IHRpIDwgdG9rZW5zLmxlbmd0aDsgdGkrKykge1xuICAgICAgICAgICAgY29uc3QgaW5wdXQ6IFRva2VuRGVmaW5pdGlvbiA9IHRva2Vuc1t0aV07XG4gICAgICAgICAgICBjb25zdCB0aWdodG5lc3M6IG51bWJlciA9IGlucHV0LnRpZ2h0bmVzcyB8fCAwO1xuICAgICAgICAgICAgY29uc3QgZGVmbjogVG9rZW5EZWZpbml0aW9uID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IGlucHV0LnR5cGUsXG4gICAgICAgICAgICAgICAgbWF0Y2g6IGlucHV0Lm1hdGNoIGluc3RhbmNlb2YgUmVnRXhwID8gaW5wdXQubWF0Y2ggOlxuICAgICAgICAgICAgICAgICAgICAodHlwZW9mIChpbnB1dC5tYXRjaCkgPT0gJ3N0cmluZycpID8gW2lucHV0Lm1hdGNoXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5tYXRjaCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogaW5wdXQudmFsdWUgfHwgZnVuY3Rpb24gKG1yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtclswXTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRpZ2h0bmVzczogdGkgPCBjdXN0b21Ub2tlbnMubGVuZ3RoID8gdGlnaHRuZXNzICsgY3VzdG9tVGlnaHRuZXNzT2Zmc2V0IDogdGlnaHRuZXNzLFxuICAgICAgICAgICAgICAgIHN0YXJ0UGFyc2U6IGlucHV0LnN0YXJ0UGFyc2UgfHwgZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJDYW4ndCBzdGFydCBhIHBhcnNlIHRyZWUgd2l0aCB0aGlzIHRva2VuXCIsIHRva2VuKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGV4dGVuZFBhcnNlOiBpbnB1dC5leHRlbmRQYXJzZSB8fCBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCBwYXJzZVRyZWU6IFBhcnNlVHJlZSwgdG9rZW46IFRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZXJyb3IoXCJDYW4ndCBleHRlbmQgYSBwYXJzZSB0cmVlIHdpdGggdGhpcyB0b2tlblwiLCB0b2tlbiwgcGFyc2VUcmVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50b2tlbkRlZmluaXRpb25zLnB1c2goZGVmbik7XG4gICAgICAgICAgICB0aGlzLnRva2Vuc0J5VHlwZVtkZWZuLnR5cGVdID0gZGVmbjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlc2V0U3RyZWFtKCk7XG4gICAgfVxuXG4gICAgbm9kZSh0eXBlOiBzdHJpbmcsIHZhbHVlOiBhbnkgPSB1bmRlZmluZWQsIGNoaWxkcmVuOiBBcnJheTxQYXJzZVRyZWU+ID0gW10pOiBQYXJzZVRyZWUge1xuICAgICAgICByZXR1cm4geyB0eXBlLCB2YWx1ZSwgY2hpbGRyZW4sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9IH07XG4gICAgfVxuXG4gICAgZXJyb3IobXNnOiBzdHJpbmcsIHRva2VuOiBUb2tlbiwgdHJlZT86IFBhcnNlVHJlZSk6IFBhcnNlVHJlZSB7XG4gICAgICAgIGNvbnN0IGVyciA9IHRoaXMubm9kZShFUlJPUiwgeyBtZXNzYWdlOiBtc2csIHRva2VuLCB0cmVlIH0pO1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3JzLnB1c2goZXJyKTtcbiAgICAgICAgcmV0dXJuIGVycjtcbiAgICB9XG5cbiAgICB0b2tlbml6ZShzdHI6IHN0cmluZyk6IFRva2VuU3RyZWFtIHtcbiAgICAgICAgbGV0IHJlc3VsdDogQXJyYXk8VG9rZW4+ID0gW107XG4gICAgICAgIGxldCBlcnJvcnM6IEFycmF5PG51bWJlcj4gPSBbXTtcbiAgICAgICAgbGV0IHN1YnN0cmluZzogc3RyaW5nID0gc3RyO1xuICAgICAgICBsZXQgaW5kZXg6IG51bWJlciA9IDA7XG4gICAgICAgIHdoaWxlIChzdWJzdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB0aSA9IDA7IHRpIDwgdGhpcy50b2tlbkRlZmluaXRpb25zLmxlbmd0aDsgdGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuRGVmaW5pdGlvbjogVG9rZW5EZWZpbml0aW9uID0gdGhpcy50b2tlbkRlZmluaXRpb25zW3RpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRva2VuRGVmaW5pdGlvbi5tYXRjaDtcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2hSZXN1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IEFycmF5PHN0cmluZz4gfCBSZWdFeHBFeGVjQXJyYXkgfCBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogbnVtYmVyXG4gICAgICAgICAgICAgICAgfSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IC0xXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBleGVjUmVzdWx0ID0gbWF0Y2guZXhlYyhzdWJzdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhlY1Jlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQubWF0Y2ggPSBleGVjUmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQuaW5kZXggPSBleGVjUmVzdWx0LmluZGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1hdGNoKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBtaSA9IDA7IG1pIDwgbWF0Y2gubGVuZ3RoOyBtaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBtYXRjaFttaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic3RyaW5nLnN1YnN0cigwLCBjYW5kaWRhdGUubGVuZ3RoKSA9PSBjYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5tYXRjaCA9IFtjYW5kaWRhdGVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hSZXN1bHQubWF0Y2ggJiYgbWF0Y2hSZXN1bHQuaW5kZXggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRjaExlbmd0aCA9IG1hdGNoUmVzdWx0Lm1hdGNoWzBdLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgc3Vic3RyaW5nID0gc3Vic3RyaW5nLnN1YnN0cihtYXRjaFJlc3VsdC5tYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvbGRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgICAgICAgICBpbmRleCArPSBtYXRjaExlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuRGVmaW5pdGlvbi50eXBlICE9PSB0b2tlblR5cGVzLldISVRFU1BBQ0UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbkRlZmluaXRpb24udHlwZSA9PT0gdG9rZW5UeXBlcy5FUlJPUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHJlc3VsdC5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHRva2VuRGVmaW5pdGlvbi50eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0b2tlbkRlZmluaXRpb24udmFsdWUhKG1hdGNoUmVzdWx0Lm1hdGNoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWdodG5lc3M6IHRva2VuRGVmaW5pdGlvbi50aWdodG5lc3MgfHwgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZTogeyBzdGFydDogb2xkSW5kZXgsIGVuZDogaW5kZXggfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0cmluZzogc3RyLCB0b2tlbnM6IHJlc3VsdCwgcG9zaXRpb246IDAsIGVycm9yczogZXJyb3JzIH07XG4gICAgfVxuXG4gICAgcmVzZXRTdHJlYW0oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RyZWFtID0geyBzdHJpbmc6IFwiXCIsIHRva2VuczogW10sIHBvc2l0aW9uOiAwLCBlcnJvcnM6IFtdIH07XG4gICAgfVxuXG4gICAgY2hhclBvc2l0aW9uKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRUb2tlbigpID8gdGhpcy5jdXJyZW50VG9rZW4oKS5yYW5nZS5zdGFydCA6IHRoaXMuc3RyZWFtIS5zdHJpbmcubGVuZ3RoO1xuICAgIH1cblxuICAgIHJlbWFpbmRlcigpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBlbmQgPSB0aGlzLmNoYXJQb3NpdGlvbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW0hLnN0cmluZy5zdWJzdHIoZW5kKTtcbiAgICB9XG5cbiAgICBjdXJyZW50VG9rZW4oKTogVG9rZW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zdHJlYW0hLnRva2Vuc1t0aGlzLnN0cmVhbSEucG9zaXRpb25dO1xuICAgIH1cblxuICAgIGFkdmFuY2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RyZWFtIS5wb3NpdGlvbisrO1xuICAgIH1cblxuICAgIHBhcnNlKHN0cjogc3RyaW5nKTogUGFyc2VSZXN1bHQge1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHRoaXMudG9rZW5pemUoc3RyKTtcbiAgICAgICAgdGhpcy5wYXJzZUVycm9ycyA9IFtdO1xuICAgICAgICBjb25zdCB0cmVlID0gdGhpcy5wYXJzZUV4cHJlc3Npb24oMCk7XG4gICAgICAgIHZhciByZXN1bHQgPSB7IHRyZWUsIGVycm9yczogdGhpcy5wYXJzZUVycm9ycywgcmVtYWluZGVyOiB0aGlzLnJlbWFpbmRlcigpIH07XG4gICAgICAgIHRoaXMucGFyc2VFcnJvcnMgPSBbXTtcbiAgICAgICAgdGhpcy5yZXNldFN0cmVhbSgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHBhcnNlRXhwcmVzc2lvbih0aWdodG5lc3M6IG51bWJlcik6IFBhcnNlVHJlZSB7XG4gICAgICAgIGxldCB0b2tlbiA9IHRoaXMuY3VycmVudFRva2VuKCk7XG4gICAgICAgIGxldCB0b2tlbkRlZiA9IHRoaXMudG9rZW5zQnlUeXBlW3Rva2VuLnR5cGVdO1xuICAgICAgICBjb25zdCBzdGFydCA9IHRva2VuLnJhbmdlLnN0YXJ0O1xuICAgICAgICB0aGlzLmFkdmFuY2UoKTtcbiAgICAgICAgbGV0IHRyZWUgPSB0b2tlbkRlZi5zdGFydFBhcnNlISh0aGlzLCB0b2tlbik7XG4gICAgICAgIHRyZWUucmFuZ2Uuc3RhcnQgPSBzdGFydDtcbiAgICAgICAgdHJlZS5yYW5nZS5lbmQgPSB0aGlzLmNoYXJQb3NpdGlvbigpO1xuICAgICAgICBpZiAodHJlZS50eXBlID09IEVSUk9SKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJlZTtcbiAgICAgICAgfVxuICAgICAgICB0b2tlbiA9IHRoaXMuY3VycmVudFRva2VuKCk7XG4gICAgICAgIHdoaWxlICh0b2tlbiAmJiB0aWdodG5lc3MgPCB0b2tlbi50aWdodG5lc3MpIHtcbiAgICAgICAgICAgIHRva2VuRGVmID0gdGhpcy50b2tlbnNCeVR5cGVbdG9rZW4udHlwZV07XG4gICAgICAgICAgICB0aGlzLmFkdmFuY2UoKTtcbiAgICAgICAgICAgIGxldCBuZXdUcmVlID0gdG9rZW5EZWYuZXh0ZW5kUGFyc2UhKHRoaXMsIHRyZWUsIHRva2VuKTtcbiAgICAgICAgICAgIG5ld1RyZWUucmFuZ2Uuc3RhcnQgPSB0cmVlLnJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgbmV3VHJlZS5yYW5nZS5lbmQgPSB0aGlzLmNoYXJQb3NpdGlvbigpO1xuICAgICAgICAgICAgaWYgKG5ld1RyZWUudHlwZSA9PSBFUlJPUikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdUcmVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJlZSA9IG5ld1RyZWU7XG4gICAgICAgICAgICB0b2tlbiA9IHRoaXMuY3VycmVudFRva2VuKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQgeyBwYXJzZVR5cGVzLCBpc1Byb3Bvc2l0aW9uYWwsIGNsb25lVHJlZSB9IGZyb20gXCIuL3BhcnNlclwiO1xuaW1wb3J0IHsgUGFyc2VUcmVlIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHN0cmluZ2lmeUZvcm11bGEgfSBmcm9tIFwiLi9jb21waWxlclwiO1xubGV0IHN0YXRlSUQgPSAwO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRTdGF0ZUlEKCkge1xuICAgIHN0YXRlSUQgPSAwO1xufVxuXG5leHBvcnQgY2xhc3MgU0ZBIHtcbiAgICBzdGFydFN0YXRlczogU3RhdGVbXTtcbiAgICBhY2NlcHRpbmdTdGF0ZXM6IFN0YXRlW107XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3RhcnRTdGF0ZXMgPSBbbmV3IFN0YXRlKCldO1xuICAgICAgICB0aGlzLmFjY2VwdGluZ1N0YXRlcyA9IFtdO1xuICAgIH1cblxuICAgIG5ld1N0YXRlKG9wdElEPzogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RhdGUob3B0SUQpO1xuICAgIH1cblxuICAgIG1hcmtBY2NlcHRpbmcoczogU3RhdGUpIHtcbiAgICAgICAgLy9hZGQgdG8gYWNjZXB0aW5nU3RhdGVzXG4gICAgICAgIGlmICh0aGlzLmFjY2VwdGluZ1N0YXRlcy5pbmRleE9mKHMpID09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmFjY2VwdGluZ1N0YXRlcy5wdXNoKHMpO1xuICAgICAgICB9XG4gICAgICAgIC8vYWRkIGFjY2VwdGluZyBzZWxmLWVkZ2VcbiAgICAgICAgcy5hZGRFZGdlKG5ldyBFZGdlKHMsIG51bGwsIFtdKSk7XG4gICAgICAgIC8vbWFyayBhY2NlcHRpbmdcbiAgICAgICAgcy5pc0FjY2VwdGluZyA9IHRydWU7XG4gICAgfVxuXG4gICAgbWFya05vbkFjY2VwdGluZyhzOiBTdGF0ZSkge1xuICAgICAgICAvL21hcmsgbm9uLWFjY2VwdGluZ1xuICAgICAgICBzLmlzQWNjZXB0aW5nID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmFjY2VwdGluZ1N0YXRlcy5pbmRleE9mKHMpICE9IC0xKSB7XG4gICAgICAgICAgICAvL3JlbW92ZSBmcm9tIGFjY2VwdGluZ1N0YXRlc1xuICAgICAgICAgICAgdGhpcy5hY2NlcHRpbmdTdGF0ZXMuc3BsaWNlKHRoaXMuYWNjZXB0aW5nU3RhdGVzLmluZGV4T2YocyksIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0U3RhdGVzKCkge1xuICAgICAgICBsZXQgZm91bmQ6IHsgW2lkOiBzdHJpbmddOiBTdGF0ZSB9ID0ge307XG4gICAgICAgIGxldCBzdGFjayA9IHRoaXMuc3RhcnRTdGF0ZXMuc2xpY2UoKTtcbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgaGVyZTogU3RhdGUgPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgICBmb3VuZFtoZXJlLmlkXSA9IGhlcmU7XG4gICAgICAgICAgICBmb3IgKGxldCBlayBpbiBoZXJlLmVkZ2VzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSBoZXJlLmVkZ2VzW2VrXTtcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgJiYgIShlLnRhcmdldC5pZCBpbiBmb3VuZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhmb3VuZCkubWFwKChrKSA9PiBmb3VuZFtrXSk7XG4gICAgfVxuXG4gICAgdG9Eb3QoKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gXCJkaWdyYXBoIGcge1xcblwiICtcbiAgICAgICAgICAgIFwiICByYW5rZGlyPUxSO1xcblwiO1xuICAgICAgICBjb25zdCBtaWRkbGUgPSB0aGlzLmdldFN0YXRlcygpLm1hcChmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgcmV0dXJuIFtcIiAgXCIgKyBzLmlkICsgYCBbc2hhcGU9JHtzLmlzQWNjZXB0aW5nID8gXCJkb3VibGVjaXJjbGVcIiA6IFwiY2lyY2xlXCJ9XTtgXS5jb25jYXQoXG4gICAgICAgICAgICAgICAgcy5lZGdlcy5tYXAoZnVuY3Rpb24gKGUsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiICBcIiArIHMuaWQgKyBcIi0+XCIgKyBlLnRhcmdldCEuaWQgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYCBbbGFiZWw9XCIke2l9OiR7ZS5mb3JtdWxhID8gc3RyaW5naWZ5Rm9ybXVsYShlLmZvcm11bGEpIDogXCImIzk0OTtcIn06JHtlLmxhYmVsLm1hcCgobCkgPT4gbC50eXBlICsgXCIuXCIgKyBsLmdyb3VwKS5qb2luKFwiLFwiKX1cIl07YDtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICB9KS5qb2luKFwiXFxuXCIpO1xuICAgICAgICBjb25zdCBlbmQgPSBcIlxcbn1cIjtcbiAgICAgICAgcmV0dXJuIHN0YXJ0ICsgbWlkZGxlICsgZW5kO1xuICAgIH1cblxuICAgIGVlbGltKCkge1xuICAgICAgICBsZXQgc3RhY2sgPSB0aGlzLnN0YXJ0U3RhdGVzLnNsaWNlKCksXG4gICAgICAgICAgICBzZWVuOiB7IFtpZDogc3RyaW5nXTogU3RhdGUgfSA9IHt9O1xuICAgICAgICBmb3IgKGxldCBzayA9IDA7IHNrIDwgc3RhY2subGVuZ3RoOyBzaysrKSB7XG4gICAgICAgICAgICBzZWVuW3N0YWNrW3NrXS5pZF0gPSBzdGFja1tza107XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHN0YWNrLnBvcCgpITtcbiAgICAgICAgICAgIGxldCByZWFjaGFibGUgPSB7IFtzLmlkXTogcyB9O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmVkZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHMuZWRnZXNbaV07XG4gICAgICAgICAgICAgICAgLy9lIGlzIGEgbnVsbCB0cmFuc2l0aW9uIGJ1dCBub3QgYW4gYWNjZXB0aW5nIG51bGwgdHJhbnNpdGlvblxuICAgICAgICAgICAgICAgIGlmICghZS5mb3JtdWxhICYmICEocy5pc0FjY2VwdGluZyAmJiBlLnRhcmdldCA9PSBzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQhLmlkIGluIHJlYWNoYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcy5lZGdlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEVzID0gZS50YXJnZXQhLmVkZ2VzO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RXMgPSB0YXJnZXRFcy5tYXAoKHRlKSA9PiBuZXcgRWRnZSh0ZS50YXJnZXQgPT0gZS50YXJnZXQgJiYgdGUuZm9ybXVsYSA9PSBudWxsID8gcyA6IHRlLnRhcmdldCwgdGUuZm9ybXVsYSwgZS5sYWJlbC5jb25jYXQodGUubGFiZWwpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQhLmlzQWNjZXB0aW5nICYmICFzLmlzQWNjZXB0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY2NlcHRpbmdTdGF0ZXMucHVzaChzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmlzQWNjZXB0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHMuZWRnZXMuc3BsaWNlKGksIDEsIC4uLm5ld0VzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWFjaGFibGVbZS50YXJnZXQhLmlkXSA9IGUudGFyZ2V0ITtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IHJrIGluIHJlYWNoYWJsZSkge1xuICAgICAgICAgICAgICAgIGlmICghKHJrIGluIHNlZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2gocmVhY2hhYmxlW3JrXSk7XG4gICAgICAgICAgICAgICAgICAgIHNlZW5bcmtdID0gcmVhY2hhYmxlW3JrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaW50ZXJzZWN0KGI6IFNGQSk6IFNGQSB7XG4gICAgICAgIHRoaXMuZWVsaW0oKTtcbiAgICAgICAgY29uc3QgYSA9IHRoaXM7XG4gICAgICAgIGIuZWVsaW0oKTtcbiAgICAgICAgbGV0IGF4YiA9IG5ldyBTRkEoKTtcbiAgICAgICAgYXhiLnN0YXJ0U3RhdGVzID0gW107XG4gICAgICAgIGxldCBzdGFjazogU3RhdGVbXVtdID0gW10sIHN0YXRlczogeyBbaWQ6IHN0cmluZ106IHsgW2lkOiBzdHJpbmddOiBTdGF0ZSB9IH0gPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLnN0YXJ0U3RhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzYSA9IGEuc3RhcnRTdGF0ZXNbaV07XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGIuc3RhcnRTdGF0ZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzYiA9IGIuc3RhcnRTdGF0ZXNbal07XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChbc2EsIHNiXSk7XG4gICAgICAgICAgICAgICAgaWYgKCEoc2EuaWQgaW4gc3RhdGVzKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXNbc2EuaWRdID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBzYXNiID0gYXhiLm5ld1N0YXRlKGBhJHtzYS5pZH14JHtzYi5pZH1iYCk7XG4gICAgICAgICAgICAgICAgYXhiLnN0YXJ0U3RhdGVzLnB1c2goc2FzYik7XG4gICAgICAgICAgICAgICAgc3RhdGVzW3NhLmlkXVtzYi5pZF0gPSBzYXNiO1xuICAgICAgICAgICAgICAgIGlmIChzYS5pc0FjY2VwdGluZyAmJiBzYi5pc0FjY2VwdGluZykge1xuICAgICAgICAgICAgICAgICAgICBheGIubWFya0FjY2VwdGluZyhzYXNiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHN0YWNrLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgW3NhLCBzYl0gPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgICBjb25zdCBzYWIgPSBzdGF0ZXNbc2EuaWRdW3NiLmlkXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2EuZWRnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhZSA9IHNhLmVkZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFldCA9IGFlLnRhcmdldCE7XG4gICAgICAgICAgICAgICAgY29uc3QgYWVJc0FjY2VwdGluZ1NlbGZFZGdlID0gc2EuaXNBY2NlcHRpbmcgJiYgYWV0ID09IHNhICYmICFhZS5mb3JtdWxhO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2IuZWRnZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmUgPSBzYi5lZGdlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmV0ID0gYmUudGFyZ2V0ITtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmVJc0FjY2VwdGluZ1NlbGZFZGdlID0gc2IuaXNBY2NlcHRpbmcgJiYgYmV0ID09IHNiICYmICFiZS5mb3JtdWxhO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGhpID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFlSXNBY2NlcHRpbmdTZWxmRWRnZSAhPSBiZUlzQWNjZXB0aW5nU2VsZkVkZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFhZUlzQWNjZXB0aW5nU2VsZkVkZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWUuZm9ybXVsYSB8fCAhYmUuZm9ybXVsYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJVbmVsaW1pbmF0ZWQgbm9uIEFTRSBlcHNpbG9uIHRyYW5zaXRpb25cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwaGkgPSBpbnRlcnNlY3RGb3JtdWxhZShhZS5mb3JtdWxhISwgYmUuZm9ybXVsYSEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwaGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsZXQgY29tYmluZWQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWV0LmlkIGluIHN0YXRlcyAmJiBiZXQuaWQgaW4gc3RhdGVzW2FldC5pZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkID0gc3RhdGVzW2FldC5pZF1bYmV0LmlkXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkID0gYXhiLm5ld1N0YXRlKGBhJHthZXQuaWR9eCR7YmV0LmlkfWJgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGFldC5pZCBpbiBzdGF0ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzW2FldC5pZF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlc1thZXQuaWRdW2JldC5pZF0gPSBjb21iaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goW2FldCwgYmV0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWV0LmlzQWNjZXB0aW5nICYmIGJldC5pc0FjY2VwdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbm8gbmVlZCBmb3IgbWFya2FjY2VwdGluZyBvciB0byBjaGVjayBtZW1iZXJzaGlwIG9mIGNvbWJpbmVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZm9ybWVyIGJlY2F1c2Ugd2UnbGwgZ2V0IHRoZSBhY2NlcHRpbmcgc2VsZiBlZGdlcyBmb3IgZnJlZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbGF0dGVyIGJlY2F1c2UgdGhpcyBzdGF0ZSBpcyBieSBkZWZpbml0aW9uIG5ld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbWJpbmVkLmlzQWNjZXB0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBheGIuYWNjZXB0aW5nU3RhdGVzLnB1c2goY29tYmluZWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNhYi5hZGRFZGdlKG5ldyBFZGdlKGNvbWJpbmVkLCBwaGksIGFlLmxhYmVsLmNvbmNhdChiZS5sYWJlbCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF4YjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGludGVyc2VjdEZvcm11bGFlKHAxOiBQYXJzZVRyZWUsIHAyOiBQYXJzZVRyZWUpIHtcbiAgICAvL3RvZG86IGZpeG1lOiBpbXBsZW1lbnQgZm9yIHJlYWxcbiAgICByZXR1cm4geyB0eXBlOiBwYXJzZVR5cGVzLkFORCwgdmFsdWU6IFwiJlwiLCBjaGlsZHJlbjogW3AxLCBwMl0sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9IH07XG59XG5cbmV4cG9ydCBjbGFzcyBTdGF0ZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBlZGdlczogRWRnZVtdO1xuICAgIGlzQWNjZXB0aW5nOiBib29sZWFuO1xuICAgIGNvbnN0cnVjdG9yKGlkPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpZCB8fCAoc3RhdGVJRCsrKS50b1N0cmluZygxMCk7XG4gICAgICAgIHRoaXMuZWRnZXMgPSBbXTtcbiAgICAgICAgdGhpcy5pc0FjY2VwdGluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIGFkZEVkZ2UoZTogRWRnZSkge1xuICAgICAgICB0aGlzLmVkZ2VzLnB1c2goZSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlRWRnZShlOiBFZGdlKSB7XG4gICAgICAgIHRoaXMuZWRnZXMuc3BsaWNlKHRoaXMuZWRnZXMuaW5kZXhPZihlKSwgMSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRWRnZSB7XG4gICAgdGFyZ2V0OiBTdGF0ZSB8IG51bGw7XG4gICAgZm9ybXVsYTogUGFyc2VUcmVlIHwgbnVsbDtcbiAgICBsYWJlbDogYW55W107XG4gICAgY29uc3RydWN0b3IodGFyZ2V0OiBTdGF0ZSB8IG51bGwsIGZvcm11bGE6IFBhcnNlVHJlZSB8IG51bGwsIGxhYmVsOiBhbnlbXSkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5mb3JtdWxhID0gZm9ybXVsYTtcbiAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21QYXJzZVRyZWUodHJlZTogUGFyc2VUcmVlKSB7XG4gICAgY29uc3Qgc2ZhID0gbmV3IFNGQSgpO1xuICAgIGNvbnN0IHMgPSBzZmEuc3RhcnRTdGF0ZXNbMF07XG4gICAgY29uc3Qgb3V0RWRnZXMgPSBidWlsZChzZmEsIHMsIHRyZWUpO1xuICAgIGNvbnN0IHRlcm1pbnVzID0gc2ZhLm5ld1N0YXRlKCk7XG4gICAgZm9yIChsZXQgZWsgPSAwOyBlayA8IG91dEVkZ2VzLmxlbmd0aDsgZWsrKykge1xuICAgICAgICBjb25zdCBlID0gb3V0RWRnZXNbZWtdO1xuICAgICAgICBlLnRhcmdldCA9IHRlcm1pbnVzO1xuICAgIH1cbiAgICBzZmEubWFya0FjY2VwdGluZyh0ZXJtaW51cyk7XG4gICAgcmV0dXJuIHNmYTtcbn1cblxuZnVuY3Rpb24gYnVpbGQoc2ZhOiBTRkEsIHNlZWRTdGF0ZTogU3RhdGUsIHRyZWU6IFBhcnNlVHJlZSk6IEVkZ2VbXSB7XG4gICAgaWYgKGlzUHJvcG9zaXRpb25hbCh0cmVlKSAmJiB0cmVlLnR5cGUgIT0gcGFyc2VUeXBlcy5DQVBUVVJFKSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRWRnZShudWxsLCB0cmVlLCBbXSk7XG4gICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKGUpO1xuICAgICAgICByZXR1cm4gW2VdO1xuICAgIH0gZWxzZSBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuQ09OQ0FURU5BVElPTikge1xuICAgICAgICBjb25zdCBhZXMgPSBidWlsZChzZmEsIHNlZWRTdGF0ZSwgdHJlZS5jaGlsZHJlblswXSk7XG4gICAgICAgIGNvbnN0IHMgPSBzZmEubmV3U3RhdGUoKTtcbiAgICAgICAgZm9yIChsZXQgZWsgPSAwOyBlayA8IGFlcy5sZW5ndGg7IGVrKyspIHtcbiAgICAgICAgICAgIGxldCBlID0gYWVzW2VrXTtcbiAgICAgICAgICAgIGUudGFyZ2V0ID0gcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVpbGQoc2ZhLCBzLCB0cmVlLmNoaWxkcmVuWzFdKTtcbiAgICB9IGVsc2UgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLlJFUEVUSVRJT04pIHtcbiAgICAgICAgY29uc3QgZ3JlZWR5ID0gdHJlZS52YWx1ZS5ncmVlZHk7XG4gICAgICAgIGNvbnN0IG1pbiA9IHRyZWUudmFsdWUubG93ZXJCb3VuZDtcbiAgICAgICAgY29uc3QgbWF4ID0gdHJlZS52YWx1ZS51cHBlckJvdW5kO1xuICAgICAgICBjb25zdCBwaGkgPSB0cmVlLmNoaWxkcmVuWzBdO1xuICAgICAgICBpZiAobWluID4gMCkge1xuICAgICAgICAgICAgbGV0IGNsb25lZCA9IGNsb25lVHJlZSh0cmVlKTtcbiAgICAgICAgICAgIGNsb25lZC52YWx1ZS5sb3dlckJvdW5kLS07XG4gICAgICAgICAgICBpZiAoY2xvbmVkLnZhbHVlLnVwcGVyQm91bmQgIT0gXCIkRU5EXCIpIHtcbiAgICAgICAgICAgICAgICBjbG9uZWQudmFsdWUudXBwZXJCb3VuZC0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5leHQgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcGFyc2VUeXBlcy5DT05DQVRFTkFUSU9OLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBcIixcIixcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW2Nsb25lVHJlZShwaGkpLCBjbG9uZWRdLFxuICAgICAgICAgICAgICAgIHJhbmdlOiB7IHN0YXJ0OiBjbG9uZWQucmFuZ2Uuc3RhcnQsIGVuZDogY2xvbmVkLnJhbmdlLmVuZCB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkKHNmYSwgc2VlZFN0YXRlLCBuZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChtYXggIT0gXCIkRU5EXCIpIHtcbiAgICAgICAgICAgIGxldCBjbG9uZWQgPSBjbG9uZVRyZWUodHJlZSk7XG4gICAgICAgICAgICBjbG9uZWQudmFsdWUudXBwZXJCb3VuZC0tO1xuICAgICAgICAgICAgbGV0IG5leHQgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogcGFyc2VUeXBlcy5DT05DQVRFTkFUSU9OLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBcIixcIixcbiAgICAgICAgICAgICAgICBjaGlsZHJlbjogW2Nsb25lVHJlZShwaGkpLCBjbG9uZWRdLFxuICAgICAgICAgICAgICAgIHJhbmdlOiB7IHN0YXJ0OiBjbG9uZWQucmFuZ2Uuc3RhcnQsIGVuZDogY2xvbmVkLnJhbmdlLmVuZCB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy9Mb3RzIG9mIGR1cGxpY2F0aW9uIGhlcmUgd2hlbiBvbmx5IG9yZGVyaW5ncyBhcmUgY2hhbmdlZC4gTm90IHNvIHByb3VkIG9mIGl0XG4gICAgICAgICAgICAvL2J1dCBsZXQncyBqdXN0IG1ha2Ugc3VyZSBpdCdzIHdvcmtpbmcgZmlyc3QuXG4gICAgICAgICAgICBpZiAoZ3JlZWR5KSB7XG4gICAgICAgICAgICAgICAgbGV0IGVkZ2VzOiBFZGdlW10gPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZWRnZXMgPSBlZGdlcy5jb25jYXQoW25ldyBFZGdlKG51bGwsIHBoaSwgW10pXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWRnZXMgPSBlZGdlcy5jb25jYXQoYnVpbGQoc2ZhLCBzZWVkU3RhdGUsIG5leHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0ID0gbmV3IEVkZ2UobnVsbCwgbnVsbCwgW10pO1xuICAgICAgICAgICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKG91dCk7XG4gICAgICAgICAgICAgICAgZWRnZXMucHVzaChvdXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlZGdlcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGVkZ2VzID0gW107XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0ID0gbmV3IEVkZ2UobnVsbCwgbnVsbCwgW10pO1xuICAgICAgICAgICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKG91dCk7XG4gICAgICAgICAgICAgICAgZWRnZXMucHVzaChvdXQpO1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBlZGdlcyA9IGVkZ2VzLmNvbmNhdChbbmV3IEVkZ2UobnVsbCwgcGhpLCBbXSldKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlZGdlcyA9IGVkZ2VzLmNvbmNhdChidWlsZChzZmEsIHNlZWRTdGF0ZSwgbmV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZWRnZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoZ3JlZWR5KSB7XG4gICAgICAgICAgICAgICAgbGV0IGVkZ2VzID0gYnVpbGQoc2ZhLCBzZWVkU3RhdGUsIHBoaSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZWsgPSAwOyBlayA8IGVkZ2VzLmxlbmd0aDsgZWsrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IGVkZ2VzW2VrXTtcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQgPSBzZWVkU3RhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRWRnZShudWxsLCBudWxsLCBbXSk7XG4gICAgICAgICAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UoZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtlXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFZGdlKG51bGwsIG51bGwsIFtdKTtcbiAgICAgICAgICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShlKTtcbiAgICAgICAgICAgICAgICBsZXQgZWRnZXMgPSBidWlsZChzZmEsIHNlZWRTdGF0ZSwgcGhpKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlayA9IDA7IGVrIDwgZWRnZXMubGVuZ3RoOyBlaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBlID0gZWRnZXNbZWtdO1xuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldCA9IHNlZWRTdGF0ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuR1JPVVApIHtcbiAgICAgICAgbGV0IHMgPSBzZmEubmV3U3RhdGUoKTtcbiAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UobmV3IEVkZ2UocywgbnVsbCwgW10pKTtcbiAgICAgICAgY29uc3QgZXMgPSBidWlsZChzZmEsIHMsIHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICByZXR1cm4gZXM7XG4gICAgfSBlbHNlIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5DQVBUVVJFKSB7XG4gICAgICAgIGxldCBzID0gc2ZhLm5ld1N0YXRlKCk7XG4gICAgICAgIC8vaGFjazogd2Ugc3RvcmUgYSBsaW5rIGZyb20gdGhlIGVuZCB0byBpdHMgY29ycmVzcG9uZGluZyBzdGFydFxuICAgICAgICAvL3NvIHRoYXQgdGhlIGNvcnJlY3QgY2FwdHVyZUlEIGNhbiBiZSBwcm9wYWdhdGVkIHRvIHRoZSBcImVuZFwiXG4gICAgICAgIC8vZnJvbSB0aGUgXCJzdGFydFwiIGR1cmluZyBjb21waWxhdGlvblxuICAgICAgICBsZXQgY2FwdHVyZVN0YXJ0ID0geyB0eXBlOiBcInN0YXJ0LWNhcHR1cmVcIiwgZ3JvdXA6ICh0cmVlLnZhbHVlLmdyb3VwID09IFwiJGltcGxpY2l0XCIgPyBzLmlkIDogdHJlZS52YWx1ZS5ncm91cCkgfTtcbiAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UobmV3IEVkZ2UocywgbnVsbCwgW2NhcHR1cmVTdGFydF0pKTtcbiAgICAgICAgY29uc3QgZXMgPSBidWlsZChzZmEsIHMsIHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICBmb3IgKGxldCBlayA9IDA7IGVrIDwgZXMubGVuZ3RoOyBlaysrKSB7XG4gICAgICAgICAgICBsZXQgZSA9IGVzW2VrXTtcbiAgICAgICAgICAgIGUubGFiZWwucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJlbmQtY2FwdHVyZVwiLFxuICAgICAgICAgICAgICAgIGdyb3VwOiAodHJlZS52YWx1ZS5ncm91cCA9PSBcIiRpbXBsaWNpdFwiID8gcy5pZCA6IHRyZWUudmFsdWUuZ3JvdXApLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiBjYXB0dXJlU3RhcnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlcztcbiAgICB9IGVsc2UgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkFMVEVSTkFUSU9OKSB7XG4gICAgICAgIGNvbnN0IGEgPSBzZmEubmV3U3RhdGUoKTtcbiAgICAgICAgY29uc3QgYiA9IHNmYS5uZXdTdGF0ZSgpO1xuICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShuZXcgRWRnZShhLCBudWxsLCBbXSkpO1xuICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShuZXcgRWRnZShiLCBudWxsLCBbXSkpO1xuICAgICAgICBjb25zdCBhZXMgPSBidWlsZChzZmEsIGEsIHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICBjb25zdCBiZXMgPSBidWlsZChzZmEsIGIsIHRyZWUuY2hpbGRyZW5bMV0pO1xuICAgICAgICByZXR1cm4gYWVzLmNvbmNhdChiZXMpO1xuICAgIH0gZWxzZSBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuSU5URVJTRUNUSU9OKSB7XG4gICAgICAgIGNvbnN0IGEgPSBmcm9tUGFyc2VUcmVlKHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICBjb25zdCBiID0gZnJvbVBhcnNlVHJlZSh0cmVlLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgY29uc3QgYXhiID0gYS5pbnRlcnNlY3QoYik7XG4gICAgICAgIGNvbnN0IG9sZEFjY2VwdGluZyA9IGF4Yi5hY2NlcHRpbmdTdGF0ZXMuc2xpY2UoKTtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIlN1cHBvc2VkIGFjY2VwdGluZzpcIiwgb2xkQWNjZXB0aW5nLCBcImFjdHVhbFwiLFxuICAgICAgICAvLyAgICBheGIuZ2V0U3RhdGVzKCkuZmlsdGVyKChzKSA9PiBzLmlzQWNjZXB0aW5nKVxuICAgICAgICAvLyk7XG4gICAgICAgIGZvciAobGV0IHN0YXJ0ayA9IDA7IHN0YXJ0ayA8IGF4Yi5zdGFydFN0YXRlcy5sZW5ndGg7IHN0YXJ0aysrKSB7XG4gICAgICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShuZXcgRWRnZShheGIuc3RhcnRTdGF0ZXNbc3RhcnRrXSwgbnVsbCwgW10pKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3V0RWRnZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgYWNjayA9IDA7IGFjY2sgPCBvbGRBY2NlcHRpbmcubGVuZ3RoOyBhY2NrKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGFjYyA9IG9sZEFjY2VwdGluZ1thY2NrXTtcbiAgICAgICAgICAgIHNmYS5tYXJrTm9uQWNjZXB0aW5nKGFjYyk7XG4gICAgICAgICAgICAvL2ZpbmQgdGhlIHNlbGYtZWRnZSBhbmQgcmVwb2ludCBpdCB0b3dhcmRzIG5vdGhpbmcsIGluY2x1ZGluZyBpdCBpbiBvdXRFZGdlc1xuICAgICAgICAgICAgZm9yIChsZXQgZWkgPSAwOyBlaSA8IGFjYy5lZGdlcy5sZW5ndGg7IGVpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYWNjLmVkZ2VzW2VpXS50YXJnZXQgPT0gYWNjICYmICFhY2MuZWRnZXNbZWldLmZvcm11bGEpIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjLmVkZ2VzW2VpXS50YXJnZXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBvdXRFZGdlcy5wdXNoKGFjYy5lZGdlc1tlaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJQT1NUIHN1cHBvc2VkIGFjY2VwdGluZzpcIiwgc2ZhLmFjY2VwdGluZ1N0YXRlcywgXCJhY3R1YWxcIixcbiAgICAgICAgLy8gICAgc2ZhLmdldFN0YXRlcygpLmZpbHRlcigocykgPT4gcy5pc0FjY2VwdGluZylcbiAgICAgICAgLy8pO1xuXG4gICAgICAgIHJldHVybiBvdXRFZGdlcztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBcIk5vdCB5ZXQgaW1wbGVtZW50ZWRcIjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBwYXJzZVR5cGVzLCBpc1Byb3Bvc2l0aW9uYWwsIEJPVU5EX0lORklOSVRFIH0gZnJvbSBcIi4vcGFyc2VyXCI7XG5pbXBvcnQgeyBmcm9tUGFyc2VUcmVlLCByZXNldFN0YXRlSUQsIFNGQSwgU3RhdGUsIEVkZ2UgfSBmcm9tIFwiLi9zZmFcIjtcbmltcG9ydCB7IFRva2VuRGVmaW5pdGlvbiwgUGFyc2VUcmVlIH0gZnJvbSBcIi4vdHlwZXNcIjtcbnR5cGUgSnVtcCA9IHsgdHlwZTogXCJqdW1wXCIsIHRhcmdldDogbnVtYmVyIHwgbnVsbCwgaW5kZXg/OiBudW1iZXIsIHNvdXJjZT86IFwicm9vdFwiIHwgUGFyc2VUcmVlIH07XG50eXBlIFNwbGl0ID0geyB0eXBlOiBcInNwbGl0XCIsIGxlZnQ6IG51bWJlciwgcmlnaHQ6IG51bWJlciB8IG51bGwsIGluZGV4PzogbnVtYmVyLCBzb3VyY2U/OiBcInJvb3RcIiB8IFBhcnNlVHJlZSB9O1xudHlwZSBTdGFydCA9IHsgdHlwZTogXCJzdGFydFwiLCBncm91cDogc3RyaW5nIHwgbnVtYmVyLCBjYXB0dXJlSUQ6IG51bWJlciwgaW5kZXg/OiBudW1iZXIsIHNvdXJjZT86IFwicm9vdFwiIHwgUGFyc2VUcmVlIH07XG50eXBlIE1hdGNoID0geyB0eXBlOiBcIm1hdGNoXCIsIGluZGV4PzogbnVtYmVyLCBzb3VyY2U/OiBcInJvb3RcIiB8IFBhcnNlVHJlZSB9O1xudHlwZSBFbmQgPSB7IHR5cGU6IFwiZW5kXCIsIGdyb3VwOiBzdHJpbmcgfCBudW1iZXIsIGNhcHR1cmVJRDogbnVtYmVyLCBpbmRleD86IG51bWJlciwgc291cmNlPzogXCJyb290XCIgfCBQYXJzZVRyZWUgfTtcbnR5cGUgQ2hlY2sgPSB7IHR5cGU6IFwiY2hlY2tcIiwgZm9ybXVsYTogUGFyc2VUcmVlLCBpbmRleD86IG51bWJlciwgc291cmNlPzogXCJyb290XCIgfCBQYXJzZVRyZWUgfTtcbnR5cGUgSW5zdHJ1Y3Rpb24gPVxuICAgIENoZWNrIHxcbiAgICBKdW1wIHxcbiAgICBTcGxpdCB8XG4gICAgTWF0Y2ggfFxuICAgIFN0YXJ0IHxcbiAgICBFbmQ7XG5leHBvcnQgdHlwZSBQcm9ncmFtID0gQXJyYXk8SW5zdHJ1Y3Rpb24+O1xuXG5jb25zdCBERUJVR19NT0RFID0gZmFsc2U7XG5cbmV4cG9ydCBjbGFzcyBDb21waWxlciB7XG4gICAgY2FwdHVyZUlkeDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKF90b2tlbkRlZnM6IEFycmF5PFRva2VuRGVmaW5pdGlvbj4pIHtcbiAgICAgICAgdGhpcy5jYXB0dXJlSWR4ID0gMDtcbiAgICB9XG5cbiAgICBjb21waWxlVHJlZSh0cmVlOiBQYXJzZVRyZWUsIGlkeDogbnVtYmVyKTogUHJvZ3JhbSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coYGNvbXBpbGUgJHt0cmVlLnR5cGV9IGF0IGluZGV4ICR7aWR4fWApO1xuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuR1JPVVApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBpbGVUcmVlKHRyZWUuY2hpbGRyZW5bMF0sIGlkeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkNBUFRVUkUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhcHR1cmVJRCA9IHRoaXMuY2FwdHVyZUlkeDtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gdHJlZS52YWx1ZS5ncm91cCA9PSBcIiRpbXBsaWNpdFwiID8gY2FwdHVyZUlEIDogdHJlZS52YWx1ZS5ncm91cDtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0geyB0eXBlOiBcInN0YXJ0XCIsIGdyb3VwOiBncm91cCwgY2FwdHVyZUlEOiBjYXB0dXJlSUQsIGluZGV4OiBpZHgsIHNvdXJjZTogdHJlZSB9O1xuICAgICAgICAgICAgdGhpcy5jYXB0dXJlSWR4Kys7XG4gICAgICAgICAgICBjb25zdCBjaGlsZHJlbjogQXJyYXk8SW5zdHJ1Y3Rpb24+ID0gdGhpcy5jb21waWxlVHJlZSh0cmVlLmNoaWxkcmVuWzBdLCBpZHggKyAxKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImVuZFwiLFxuICAgICAgICAgICAgICAgIGdyb3VwOiBncm91cCxcbiAgICAgICAgICAgICAgICBjYXB0dXJlSUQ6IGNhcHR1cmVJRCxcbiAgICAgICAgICAgICAgICBpbmRleDogaWR4ICsgMSArIGNoaWxkcmVuLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHRyZWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gKFtzdGFydF0gYXMgUHJvZ3JhbSkuY29uY2F0KGNoaWxkcmVuKS5jb25jYXQoW2VuZF0gYXMgUHJvZ3JhbSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJvcG9zaXRpb25hbCh0cmVlKSkge1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInRyZWUgXCIgKyBKU09OLnN0cmluZ2lmeSh0cmVlKSArIFwiOlwiICsgdHJlZS50eXBlICsgXCIgaXMgcHJvcG9zaXRpb25hbFwiKTtcbiAgICAgICAgICAgIHJldHVybiBbeyB0eXBlOiBcImNoZWNrXCIsIGZvcm11bGE6IHRyZWUsIGluZGV4OiBpZHgsIHNvdXJjZTogdHJlZSB9XTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuQ09OQ0FURU5BVElPTikge1xuICAgICAgICAgICAgY29uc3QgYUlkeCA9IGlkeDtcbiAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLmNvbXBpbGVUcmVlKHRyZWUuY2hpbGRyZW5bMF0sIGFJZHgpO1xuICAgICAgICAgICAgY29uc3QgYklkeCA9IGlkeCArIGEubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMuY29tcGlsZVRyZWUodHJlZS5jaGlsZHJlblsxXSwgYklkeCk7XG4gICAgICAgICAgICByZXR1cm4gYS5jb25jYXQoYik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkFMVEVSTkFUSU9OKSB7XG4gICAgICAgICAgICAvLyBicmFuY2g7IGJ1dCBuZWVkIHRvIGNvbXBpbGUgbGVmdCBmaXJzdC5cbiAgICAgICAgICAgIC8vIGxlZnQ6XG4gICAgICAgICAgICBjb25zdCBhSWR4ID0gaWR4ICsgMTtcbiAgICAgICAgICAgIGNvbnN0IGxlZnQgPSB0aGlzLmNvbXBpbGVUcmVlKHRyZWUuY2hpbGRyZW5bMF0sIGFJZHgpO1xuICAgICAgICAgICAgY29uc3QgYklkeCA9IGFJZHggKyBsZWZ0Lmxlbmd0aCArIDE7IC8vIExlYXZlIHJvb20gZm9yIGp1bXAgYWZ0ZXIgbGVmdFxuICAgICAgICAgICAgLy8gbm93IHdlIGNhbiBkZWZpbmUgYnJhbmNoLCB3aGljaCBnb2VzIGJlZm9yZSBsZWZ0OlxuICAgICAgICAgICAgY29uc3QgYnJhbmNoOiBQcm9ncmFtID0gW3sgdHlwZTogXCJzcGxpdFwiLCBsZWZ0OiBhSWR4LCByaWdodDogYklkeCwgaW5kZXg6IGlkeCwgc291cmNlOiB0cmVlIH1dO1xuICAgICAgICAgICAgLy8gcmlnaHQ6XG4gICAgICAgICAgICBjb25zdCByaWdodCA9IHRoaXMuY29tcGlsZVRyZWUodHJlZS5jaGlsZHJlblsxXSwgYklkeCk7XG4gICAgICAgICAgICBjb25zdCBjSWR4ID0gYklkeCArIHJpZ2h0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGp1bXA6IFByb2dyYW0gPSBbeyB0eXBlOiBcImp1bXBcIiwgdGFyZ2V0OiBjSWR4LCBpbmRleDogYUlkeCArIGxlZnQubGVuZ3RoLCBzb3VyY2U6IHRyZWUgfV07XG4gICAgICAgICAgICByZXR1cm4gYnJhbmNoLmNvbmNhdChsZWZ0KS5jb25jYXQoanVtcCkuY29uY2F0KHJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuSU5URVJTRUNUSU9OKSB7XG4gICAgICAgICAgICBjb25zdCBhID0gZnJvbVBhcnNlVHJlZSh0cmVlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgIGNvbnN0IGIgPSBmcm9tUGFyc2VUcmVlKHRyZWUuY2hpbGRyZW5bMV0pO1xuICAgICAgICAgICAgY29uc3QgYXhiID0gYS5pbnRlcnNlY3QoYik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlU0ZBKGF4YiwgaWR4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuUkVQRVRJVElPTikge1xuICAgICAgICAgICAgY29uc3QgZ3JlZWR5ID0gdHJlZS52YWx1ZS5ncmVlZHk7XG4gICAgICAgICAgICBjb25zdCBtaW4gPSB0cmVlLnZhbHVlLmxvd2VyQm91bmQ7XG4gICAgICAgICAgICBjb25zdCBwaGkgPSB0cmVlLmNoaWxkcmVuWzBdO1xuICAgICAgICAgICAgLy8gbWluIHJlcGV0aXRpb25zIG9mIHBoaVxuICAgICAgICAgICAgbGV0IHByZWZhY2UgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWluOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwaGlQZ20gPSB0aGlzLmNvbXBpbGVUcmVlKHBoaSwgaWR4KTtcbiAgICAgICAgICAgICAgICBpZHggKz0gcGhpUGdtLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBwcmVmYWNlLnB1c2goLi4ucGhpUGdtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmVlLnZhbHVlLnVwcGVyQm91bmQgIT0gQk9VTkRfSU5GSU5JVEUpIHtcbiAgICAgICAgICAgICAgICAvLyBNLU4gcmVwZXRpdGlvbnMgb2YgKHBoaT8pXG4gICAgICAgICAgICAgICAgY29uc3QgbWF4ID0gdHJlZS52YWx1ZS51cHBlckJvdW5kO1xuICAgICAgICAgICAgICAgIGxldCBvcHRpb25hbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0cyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBtaW47IGkgPCBtYXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHJvb20gZm9yIHNwbGl0IGxpLGxaXG4gICAgICAgICAgICAgICAgICAgIGlkeCA9IGlkeCArIDE7XG4gICAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIGp1bXAgdGFyZ2V0IGxpIGluIHRhcmdldHNcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0cy5wdXNoKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoaVBnbSA9IHRoaXMuY29tcGlsZVRyZWUocGhpLCBpZHgpO1xuICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIHJvb20gZm9yIHBoaVBnbVxuICAgICAgICAgICAgICAgICAgICBpZHggKz0gcGhpUGdtLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxzLnB1c2gocGhpUGdtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9pZHggaXMgbm93IGp1c3QgcGFzdCB0aGUgZW5kIG9mIGFsbCB0aGUgXCJvcHRpb25hbHNcIi5cbiAgICAgICAgICAgICAgICBsZXQgcmVwZXRpdGlvbjogUHJvZ3JhbSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9uYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcGV0aXRpb24ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNwbGl0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAoZ3JlZWR5ID8gdGFyZ2V0c1tpXSA6IGlkeCksXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogKGdyZWVkeSA/IGlkeCA6IHRhcmdldHNbaV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRhcmdldHNbaV0gLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0cmVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXBldGl0aW9uLnB1c2goLi4uKG9wdGlvbmFsc1tpXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlZmFjZS5jb25jYXQocmVwZXRpdGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEE6IHNwbGl0IEIsIEM7IGJ1dCBtdXN0IGNvbXBpbGUgQiBmaXJzdCB0byBnZXQgbGFiZWwgZm9yIENcbiAgICAgICAgICAgICAgICBjb25zdCBhSWR4ID0gaWR4O1xuICAgICAgICAgICAgICAgIC8vIG1ha2Ugcm9vbSBmb3IgdGhlIHNwbGl0XG4gICAgICAgICAgICAgICAgY29uc3QgYklkeCA9IGFJZHggKyAxO1xuICAgICAgICAgICAgICAgIC8vIHRoZW4gcHV0IGluIEJcbiAgICAgICAgICAgICAgICBjb25zdCBiID0gdGhpcy5jb21waWxlVHJlZShwaGksIGJJZHgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGp1bXA6IFByb2dyYW0gPSBbeyB0eXBlOiBcImp1bXBcIiwgdGFyZ2V0OiBhSWR4LCBpbmRleDogYklkeCArIGIubGVuZ3RoLCBzb3VyY2U6IHRyZWUgfV07XG4gICAgICAgICAgICAgICAgLy8gdGhlbiBsYWJlbCBDXG4gICAgICAgICAgICAgICAgY29uc3QgY0lkeCA9IGJJZHggKyBiLmxlbmd0aCArIDE7XG4gICAgICAgICAgICAgICAgY29uc3QgYnJhbmNoOiBQcm9ncmFtID0gW3tcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzcGxpdFwiLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAoZ3JlZWR5ID8gYklkeCA6IGNJZHgpLFxuICAgICAgICAgICAgICAgICAgICByaWdodDogKGdyZWVkeSA/IGNJZHggOiBiSWR4KSxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB0cmVlXG4gICAgICAgICAgICAgICAgfV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWZhY2UuY29uY2F0KGJyYW5jaCkuY29uY2F0KGIpLmNvbmNhdChqdW1wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBjb21waWxlIFwiICsgSlNPTi5zdHJpbmdpZnkodHJlZSkpO1xuICAgIH1cblxuICAgIGNvbXBpbGVTRkEoc2ZhOiBTRkEsIGlkeDogbnVtYmVyKTogUHJvZ3JhbSB7XG4gICAgICAgIGxldCBzdGF0ZVN0YXJ0cyA9IHt9LCBlbmRKdW1wczogSnVtcFtdID0gW107XG4gICAgICAgIGxldCBwZ206IFByb2dyYW0gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZmEuc3RhcnRTdGF0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gc2ZhLnN0YXJ0U3RhdGVzW2ldO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRQZ20gPSB0aGlzLmNvbXBpbGVTRkFfKHN0YXJ0LCBpZHgsIHN0YXRlU3RhcnRzLCBlbmRKdW1wcyk7XG4gICAgICAgICAgICBwZ20gPSBwZ20uY29uY2F0KHN0YXJ0UGdtKTtcbiAgICAgICAgICAgIGlkeCArPSBzdGFydFBnbS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbmRKdW1wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZW5kSnVtcHNbaV0udGFyZ2V0ID0gaWR4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwZ207XG4gICAgfVxuXG4gICAgY29tcGlsZVNGQV8oc3RhdGU6IFN0YXRlLCBpZHg6IG51bWJlciwgc3RhdGVTdGFydHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0sIGVuZEp1bXBzOiBKdW1wW10pOiBQcm9ncmFtIHtcbiAgICAgICAgaWYgKHN0YXRlLmlkIGluIHN0YXRlU3RhcnRzKSB7XG4gICAgICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgICAgICB0eXBlOiBcImp1bXBcIixcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHN0YXRlU3RhcnRzW3N0YXRlLmlkXSxcbiAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgIHNvdXJjZTogeyB0eXBlOiBcInN0YXRlXCIsIHZhbHVlOiBzdGF0ZS5pZCB9XG4gICAgICAgICAgICB9XSBhcyBQcm9ncmFtO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlU3RhcnRzW3N0YXRlLmlkXSA9IGlkeDtcbiAgICAgICAgaWYgKHN0YXRlLmVkZ2VzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUuaXNBY2NlcHRpbmcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBqdW1wOiBKdW1wID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImp1bXBcIixcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHsgdHlwZTogXCJzdGF0ZVwiLCB2YWx1ZTogc3RhdGUuaWQsIGNoaWxkcmVuOiBbXSwgcmFuZ2U6IHsgc3RhcnQ6IC0xLCBlbmQ6IC0xIH0gfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZW5kSnVtcHMucHVzaChqdW1wKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2p1bXBdIGFzIFByb2dyYW07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbXBpbGluZyBhbiBTRkEgc3RhdGUgd2l0aCBubyBvdXRnb2luZyBlZGdlc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBwZ206IFByb2dyYW0gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUuZWRnZXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWRnZSA9IHN0YXRlLmVkZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2VTcGxpdDogU3BsaXQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3BsaXRcIixcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogaWR4ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGF0ZVwiLCB2YWx1ZTogYCR7c3RhdGUuaWR9LiR7aX1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBlZGdlUGdtOiBQcm9ncmFtID0gKFtlZGdlU3BsaXRdIGFzIFByb2dyYW0pLmNvbmNhdChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21waWxlU0ZBX2VkZ2Uoc3RhdGUsIGVkZ2UsIGlkeCArIDEsIHN0YXRlU3RhcnRzLCBlbmRKdW1wcylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHBnbSA9IHBnbS5jb25jYXQoZWRnZVBnbSk7XG4gICAgICAgICAgICAgICAgaWR4ICs9IGVkZ2VQZ20ubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGVkZ2VTcGxpdC5yaWdodCA9IGlkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVkZ2UgPSBzdGF0ZS5lZGdlc1tzdGF0ZS5lZGdlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IGVkZ2VQZ20gPSB0aGlzLmNvbXBpbGVTRkFfZWRnZShzdGF0ZSwgZWRnZSwgaWR4LCBzdGF0ZVN0YXJ0cywgZW5kSnVtcHMpO1xuICAgICAgICAgICAgcmV0dXJuIHBnbS5jb25jYXQoZWRnZVBnbSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21waWxlU0ZBX2VkZ2Uoc3RhdGU6IFN0YXRlLCBlZGdlOiBFZGdlLCBpZHg6IG51bWJlciwgc3RhdGVTdGFydHM6IHsgW2lkOiBzdHJpbmddOiBudW1iZXIgfSwgZW5kSnVtcHM6IEp1bXBbXSk6IFByb2dyYW0ge1xuICAgICAgICAvL2FjY2VwdGluZyBzZWxmLWVkZ2VzIG5lZWQgdG8gYmUgdHJlYXRlZCBzcGVjaWFsbHkgc28gdGhleSBkb24ndCBqdW1wIHJpZ2h0IGJhY2tcbiAgICAgICAgLy90byB0aGUgcGFyZW50IHN0YXRlLlxuICAgICAgICBjb25zdCBlZGdlUGdtOiBQcm9ncmFtID0gdGhpcy5jb21waWxlU0ZBX2VkZ2VMYWJlbChzdGF0ZSwgZWRnZSwgaWR4KTtcbiAgICAgICAgaWR4ICs9IGVkZ2VQZ20ubGVuZ3RoO1xuICAgICAgICBpZiAoc3RhdGUuaXNBY2NlcHRpbmcgJiYgZWRnZS50YXJnZXQgPT0gc3RhdGUgJiYgIWVkZ2UuZm9ybXVsYSkge1xuICAgICAgICAgICAgY29uc3QganVtcDogSnVtcCA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImp1bXBcIixcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IG51bGwsXG4gICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlZGdlXCIsIHZhbHVlOiBgJHtzdGF0ZS5pZH0tPiR7ZWRnZS50YXJnZXQuaWR9YCxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBlbmRKdW1wcy5wdXNoKGp1bXApO1xuICAgICAgICAgICAgcmV0dXJuIGVkZ2VQZ20uY29uY2F0KFtqdW1wXSBhcyBQcm9ncmFtKTtcbiAgICAgICAgfSBlbHNlIGlmIChlZGdlLmZvcm11bGEpIHtcbiAgICAgICAgICAgIHJldHVybiBlZGdlUGdtLmNvbmNhdChbe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiY2hlY2tcIixcbiAgICAgICAgICAgICAgICBmb3JtdWxhOiBlZGdlLmZvcm11bGEsXG4gICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHsgdHlwZTogXCJlZGdlXCIsIHZhbHVlOiBgJHtzdGF0ZS5pZH0tPiR7ZWRnZS50YXJnZXQhLmlkfWAgfVxuICAgICAgICAgICAgfV0gYXMgUHJvZ3JhbSkuY29uY2F0KFxuICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZVNGQV8oZWRnZS50YXJnZXQhLCBpZHggKyAxLCBzdGF0ZVN0YXJ0cywgZW5kSnVtcHMpXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGVkZ2VQZ20uY29uY2F0KFxuICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZVNGQV8oZWRnZS50YXJnZXQhLCBpZHgsIHN0YXRlU3RhcnRzLCBlbmRKdW1wcylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb21waWxlU0ZBX2VkZ2VMYWJlbChzdGF0ZTogU3RhdGUsIGVkZ2U6IEVkZ2UsIGlkeDogbnVtYmVyKTogUHJvZ3JhbSB7XG4gICAgICAgIGxldCBwZ206IFByb2dyYW0gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlZGdlLmxhYmVsLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBsID0gZWRnZS5sYWJlbFtpXTtcbiAgICAgICAgICAgIGlmIChsLnR5cGUgPT0gXCJzdGFydC1jYXB0dXJlXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlSUQgPSB0aGlzLmNhcHR1cmVJZHg7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBsLmdyb3VwO1xuICAgICAgICAgICAgICAgIGwuY2FwdHVyZUlEID0gY2FwdHVyZUlEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0OiBTdGFydCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICBncm91cDogZ3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJRDogY2FwdHVyZUlELFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZWRnZVwiLCB2YWx1ZTogYCR7c3RhdGUuaWR9LT4ke2VkZ2UudGFyZ2V0IS5pZH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhcHR1cmVJZHgrKztcbiAgICAgICAgICAgICAgICBwZ20ucHVzaChzdGFydCk7XG4gICAgICAgICAgICAgICAgaWR4Kys7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGwudHlwZSA9PSBcImVuZC1jYXB0dXJlXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlSUQgPSBsLnN0YXJ0LmNhcHR1cmVJRDtcbiAgICAgICAgICAgICAgICBjb25zdCBncm91cCA9IGwuZ3JvdXA7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5kOiBFbmQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwOiBncm91cCxcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZUlEOiBjYXB0dXJlSUQsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlZGdlXCIsIHZhbHVlOiBgJHtzdGF0ZS5pZH0tPiR7ZWRnZS50YXJnZXQhLmlkfWAsXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHBnbS5wdXNoKGVuZCk7XG4gICAgICAgICAgICAgICAgaWR4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBnbTtcbiAgICB9XG5cbiAgICBjb21waWxlKHRyZWU6IFBhcnNlVHJlZSwgZGVidWc6IGJvb2xlYW4gPSBmYWxzZSk6IFByb2dyYW0ge1xuICAgICAgICAvLyBpZiAoIXRyZWUudHlwZSAmJiB0cmVlLnRyZWUgJiYgdHJlZS5lcnJvcnMgJiYgdHJlZS5yZW1haW5kZXIpIHtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAvLyBcIlJlY2VpdmVkIGEgUGFyc2VSZXN1bHQsIGJ1dCBleHBlY3RlZCBhIFBhcnNlVHJlZS5cIiArXG4gICAgICAgIC8vIFwiQ2FsbCBjb21waWxlKCkgd2l0aCB0aGUgLnRyZWUgZWxlbWVudCBvZiBcIiArIHRyZWVcbiAgICAgICAgLy8gKTtcbiAgICAgICAgLy8gfVxuICAgICAgICBpZiAoIXRoaXMudmFsaWRhdGVQYXJzZVRyZWUodHJlZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBhcnNlIHRyZWUgZGlkIG5vdCByZXByZXNlbnQgYSB2YWxpZCBwcm9ncmFtXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJlc2V0U3RhdGVJRCgpO1xuICAgICAgICB0aGlzLmNhcHR1cmVJZHggPSAwO1xuICAgICAgICAvLyBXZSBwcmVmYWNlIGV2ZXJ5IHByb2dyYW0gd2l0aCBcInRydWUgLi5cIiBzbyB0aGF0IGFsbCBQbGF5c3BlY3MgYXJlIGVmZmVjdGl2ZWx5IHN0YXJ0LWFuY2hvcmVkLlxuICAgICAgICAvLyBUaGlzIGlzIGFzIHBlciBodHRwczovL3N3dGNoLmNvbS9+cnNjL3JlZ2V4cC9yZWdleHAyLmh0bWxcbiAgICAgICAgY29uc3QgcHJlZmFjZTogUHJvZ3JhbSA9IFtcbiAgICAgICAgICAgIHsgdHlwZTogXCJzcGxpdFwiLCBsZWZ0OiAzLCByaWdodDogMSwgaW5kZXg6IDAsIHNvdXJjZTogXCJyb290XCIgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrXCIsXG4gICAgICAgICAgICAgICAgZm9ybXVsYToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBwYXJzZVR5cGVzLlRSVUUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW10sXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiB7IHN0YXJ0OiAwLCBlbmQ6IDAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5kZXg6IDEsXG4gICAgICAgICAgICAgICAgc291cmNlOiBcInJvb3RcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgdHlwZTogXCJqdW1wXCIsIHRhcmdldDogMCwgaW5kZXg6IDIsIHNvdXJjZTogXCJyb290XCIgfSxcbiAgICAgICAgICAgIHsgdHlwZTogXCJzdGFydFwiLCBncm91cDogXCIkcm9vdFwiLCBjYXB0dXJlSUQ6IC0xLCBpbmRleDogMywgc291cmNlOiBcInJvb3RcIiB9XG4gICAgICAgIF07XG4gICAgICAgIGNvbnN0IGJvZHkgPSB0aGlzLmNvbXBpbGVUcmVlKHRyZWUsIHByZWZhY2UubGVuZ3RoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcHJlZmFjZS5jb25jYXQoYm9keSkuY29uY2F0KFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcImVuZFwiLFxuICAgICAgICAgICAgICAgIGdyb3VwOiBcIiRyb290XCIsXG4gICAgICAgICAgICAgICAgY2FwdHVyZUlEOiAtMSxcbiAgICAgICAgICAgICAgICBpbmRleDogcHJlZmFjZS5sZW5ndGggKyBib2R5Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IFwicm9vdFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IFwibWF0Y2hcIixcbiAgICAgICAgICAgICAgICBpbmRleDogcHJlZmFjZS5sZW5ndGggKyBib2R5Lmxlbmd0aCArIDEsXG4gICAgICAgICAgICAgICAgc291cmNlOiBcInJvb3RcIlxuICAgICAgICAgICAgfVxuICAgICAgICBdKTtcbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlUHJvZ3JhbShyZXN1bHQpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgXCJFcnJvciBjb21waWxpbmcgdHJlZSBcIiArIEpTT04uc3RyaW5naWZ5KHRyZWUpICsgXCIgaW50byByZXN1bHQgXCIgKyBKU09OLnN0cmluZ2lmeShyZXN1bHQpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZGVidWcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdFtpXS5zb3VyY2U7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHJlc3VsdFtpXS5pbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHZhbGlkYXRlUGFyc2VUcmVlKHBhcnNlVHJlZTogUGFyc2VUcmVlKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghREVCVUdfTU9ERSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZW5zdXJlIG5vICR7fSB1bmRlcm5lYXRoIGEgcHJvcG9zaXRpb25cbiAgICAgICAgaWYgKHRoaXMuYW55Q2FwdHVyZXNJbnNpZGVQcm9wb3NpdGlvbnMocGFyc2VUcmVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRvZG86IG90aGVyIHNhbml0eSBjaGVja3NcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgYW55Q2FwdHVyZXNJbnNpZGVQcm9wb3NpdGlvbnMocGFyZW50OiBQYXJzZVRyZWUpIHtcbiAgICAgICAgY29uc3QgcHJvcCA9IGlzUHJvcG9zaXRpb25hbChwYXJlbnQpO1xuICAgICAgICBmb3IgKGxldCBjaSA9IDA7IGNpIDwgcGFyZW50LmNoaWxkcmVuLmxlbmd0aDsgY2krKykge1xuICAgICAgICAgICAgY29uc3QgY2hpbGQgPSBwYXJlbnQuY2hpbGRyZW5bY2ldO1xuICAgICAgICAgICAgaWYgKHByb3AgJiYgY2hpbGQudHlwZSA9PSBwYXJzZVR5cGVzLkNBUFRVUkUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgQ2FuJ3QgcHV0IGEgY2FwdHVyaW5nIGdyb3VwIGluc2lkZSBvZiBhIHByb3Bvc2l0aW9uYWwgdGVybTogJHtzdHJpbmdpZnlGb3JtdWxhKHBhcmVudCl9IWApO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYW55Q2FwdHVyZXNJbnNpZGVQcm9wb3NpdGlvbnMoY2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhbGlkYXRlUHJvZ3JhbShwZ206IFByb2dyYW0pOiBib29sZWFuIHtcbiAgICAgICAgLy8gdG9kbzogdmFsaWRhdGUgcHJvZ3JhbXMgYWdhaW5zdCBtb3JlIGJhc2ljIHNhbml0eSBjaGVja3MuXG4gICAgICAgIC8vZW5zdXJlIGVhY2ggaW5zdHJ1Y3Rpb24ncyBpbmRleCBpcyBpdHMgaW5kZXggaW4gcGdtXG4gICAgICAgIC8vZW5zdXJlIG5vIHNwbGl0IG9yIGp1bXAgZ29lcyBiZXlvbmQgZW5kIG9mIHByb2dyYW1cbiAgICAgICAgLy8uLi5cbiAgICAgICAgaWYgKCFERUJVR19NT0RFKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBnbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaW5zdHIgPSBwZ21baV07XG4gICAgICAgICAgICAvL2lzIGl0cyBpbmRleCBjb3JyZWN0P1xuICAgICAgICAgICAgaWYgKGluc3RyLmluZGV4ICE9PSBpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCYWQgY29kZSBnZW5lcmF0aW9uOiR7aW5zdHIuaW5kZXh9ICE9ICR7aX0gZm9yICR7c3RyaW5naWZ5KFtpbnN0cl0pfSBpbiAke3N0cmluZ2lmeShwZ20pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlYWNoYWJsZSA9IHRoaXMucmVhY2hhYmxlSW5zdHJ1Y3Rpb25zKHBnbSwgMCwge30pO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBnbS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCFyZWFjaGFibGVbaV0pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEJhZCBjb2RlIGdlbmVyYXRpb246JHtpfSBub3QgcmVhY2hhYmxlIGZvciAke3N0cmluZ2lmeShbcGdtW2ldXSl9IGluICR7c3RyaW5naWZ5KHBnbSl9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmVhY2hhYmxlSW5zdHJ1Y3Rpb25zKHBnbTogUHJvZ3JhbSwgaTA6IG51bWJlciwgc2VlbjogeyBbcG9pbnQ6IG51bWJlcl06IGJvb2xlYW4gfSk6IHsgW3BvaW50OiBudW1iZXJdOiBib29sZWFuIH0ge1xuICAgICAgICAvL2EgbG9vcCwgb3IgZWxzZSBvdXQgb2YgcHJvZ3JhbSBjb2RlXG4gICAgICAgIGlmICgoaTAgaW4gc2VlbikgfHwgaTAgPj0gcGdtLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHNlZW47XG4gICAgICAgIH1cbiAgICAgICAgLy9tYXJrIGkwIGFzIHNlZW5cbiAgICAgICAgc2VlbltpMF0gPSB0cnVlO1xuICAgICAgICBjb25zdCBvdGhlciA9IHBnbVtpMF07XG4gICAgICAgIC8vZm9sbG93IGluZGlyZWN0aW9uIHZpYSByZWN1cnNpdmUgc2VhcmNoLCBrZWVwaW5nIHRyYWNrIG9mIHNlZW4gbG9jYXRpb25zXG4gICAgICAgIGlmIChvdGhlci50eXBlID09IFwic3BsaXRcIikge1xuICAgICAgICAgICAgbGV0IHNlZW5MZWZ0ID0gdGhpcy5yZWFjaGFibGVJbnN0cnVjdGlvbnMocGdtLCBvdGhlci5sZWZ0LCBzZWVuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWNoYWJsZUluc3RydWN0aW9ucyhwZ20sIG90aGVyLnJpZ2h0ISwgc2VlbkxlZnQpO1xuICAgICAgICB9IGVsc2UgaWYgKG90aGVyLnR5cGUgPT0gXCJqdW1wXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWNoYWJsZUluc3RydWN0aW9ucyhwZ20sIG90aGVyLnRhcmdldCEsIHNlZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy9mb3Igbm9uLWluZGlyZWN0IGluc3RydWN0aW9ucywganVzdCBpbmNyZW1lbnQgaTAgYW5kIG1vdmUgb25cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlYWNoYWJsZUluc3RydWN0aW9ucyhwZ20sIGkwICsgMSwgc2Vlbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlDdXN0b20oZm9ybXVsYTogUGFyc2VUcmVlKTogc3RyaW5nIHtcbiAgICBjb25zdCB2YWx1ZSA9IGZvcm11bGEudmFsdWUgPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBmb3JtdWxhLnZhbHVlLnRvU3RyaW5nKCk7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBmb3JtdWxhLmNoaWxkcmVuICYmIGZvcm11bGEuY2hpbGRyZW4ubGVuZ3RoID9cbiAgICAgICAgKGZvcm11bGEuY2hpbGRyZW4ubWFwKChjKSA9PiBzdHJpbmdpZnlGb3JtdWxhKGMpKSkuam9pbihcIixcIikgOlxuICAgICAgICBcIlwiO1xuICAgIHJldHVybiBgJHtmb3JtdWxhLnR5cGV9KCR7dmFsdWV9LCR7Y2hpbGRyZW59KWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGE6IFBhcnNlVHJlZSk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChmb3JtdWxhLnR5cGUpIHtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLlRSVUU6XG4gICAgICAgICAgICByZXR1cm4gXCJ0cnVlXCI7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5GQUxTRTpcbiAgICAgICAgICAgIHJldHVybiBcImZhbHNlXCI7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5TVEFSVDpcbiAgICAgICAgICAgIHJldHVybiBcInN0YXJ0XCI7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5FTkQ6XG4gICAgICAgICAgICByZXR1cm4gXCJlbmRcIjtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkFORDpcbiAgICAgICAgICAgIHJldHVybiBgJHtzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGEuY2hpbGRyZW5bMF0pfSAmICR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzFdKX1gO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuT1I6XG4gICAgICAgICAgICByZXR1cm4gYCR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzBdKX0gfCAke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblsxXSl9YDtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLk5PVDpcbiAgICAgICAgICAgIHJldHVybiBgbm90ICR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzBdKX1gO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuR1JPVVA6XG4gICAgICAgICAgICByZXR1cm4gYCgke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblswXSl9KWA7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5DQVBUVVJFOlxuICAgICAgICAgICAgcmV0dXJuIGAkJHtmb3JtdWxhLnZhbHVlLmNhcHR1cmVJRH06JHtmb3JtdWxhLnZhbHVlLmdyb3VwfSgke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblswXSl9KWA7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gc3RyaW5naWZ5Q3VzdG9tKGZvcm11bGEpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ2lmeShjb2RlOiBQcm9ncmFtKTogc3RyaW5nIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb2RlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGluc3RyID0gY29kZVtpXTtcbiAgICAgICAgbGV0IGluc3RyU3RyID0gYCR7aX06JHtpbnN0ci50eXBlfWA7XG4gICAgICAgIHN3aXRjaCAoaW5zdHIudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInNwbGl0XCI6XG4gICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gYCAke2luc3RyLmxlZnR9ICR7aW5zdHIucmlnaHR9YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJqdW1wXCI6XG4gICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gYCAke2luc3RyLnRhcmdldH1gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNoZWNrXCI6XG4gICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gXCIgXCIgKyBzdHJpbmdpZnlGb3JtdWxhKGluc3RyLmZvcm11bGEpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gYCAke2luc3RyLmdyb3VwfSAoJHtpbnN0ci5jYXB0dXJlSUR9KWA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibWF0Y2hcIjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIGluc3RydWN0aW9uIFwiICsgaW5zdHIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnN0ci5zb3VyY2UpIHtcbiAgICAgICAgICAgIHZhciBzcmMgPSBpbnN0ci5zb3VyY2UhO1xuICAgICAgICAgICAgaWYgKHNyYyA9PSBcInJvb3RcIikge1xuICAgICAgICAgICAgICAgIGluc3RyU3RyICs9IFwiICBcXHRcXHQocm9vdClcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGluc3RyLnR5cGUgPT0gXCJjaGVja1wiICYmIFwicmFuZ2VcIiBpbiBzcmMpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gYFxcdChjaC4gJHtzcmMucmFuZ2Uuc3RhcnR9LSR7c3JjLnJhbmdlLmVuZH0pYDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnN0clN0ciArPSBgXFx0XFx0KCR7c3JjLnR5cGV9ICR7SlNPTi5zdHJpbmdpZnkoc3JjLnZhbHVlKX0pYDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0LnB1c2goaW5zdHJTdHIpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oXCJcXG5cIik7XG59XG4iLCJpbXBvcnQgeyBQbGF5c3BlY3NDb250ZXh0IH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHBhcnNlVHlwZXMsIFBhcnNlciwgUGFyc2VSZXN1bHQgfSBmcm9tIFwiLi9wYXJzZXJcIjtcbmltcG9ydCB7IFBhcnNlVHJlZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBDb21waWxlciwgUHJvZ3JhbSB9IGZyb20gXCIuL2NvbXBpbGVyXCI7XG5leHBvcnQgY2xhc3MgUGxheXNwZWM8VHJhY2UsIFN0YXRlPiB7XG4gICAgY29udGV4dDogUGxheXNwZWNzQ29udGV4dDxUcmFjZSwgU3RhdGU+O1xuICAgIHNwZWM6IHN0cmluZztcbiAgICBwYXJzZVJlc3VsdDogUGFyc2VSZXN1bHQ7XG4gICAgcHJvZ3JhbTogUHJvZ3JhbTtcbiAgICBjb25zdHJ1Y3RvcihzcGVjOiBzdHJpbmcsIGNvbnRleHQ6IFBsYXlzcGVjc0NvbnRleHQ8VHJhY2UsIFN0YXRlPiwgZGVidWc6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICB0aGlzLnNwZWMgPSBzcGVjO1xuICAgICAgICBjb25zdCBwYXJzZXIgPSBuZXcgUGFyc2VyKGNvbnRleHQudG9rZW5zKTtcbiAgICAgICAgY29uc3QgY29tcGlsZXIgPSBuZXcgQ29tcGlsZXIoY29udGV4dC50b2tlbnMpO1xuICAgICAgICB0aGlzLnBhcnNlUmVzdWx0ID0gcGFyc2VyLnBhcnNlKHNwZWMpO1xuICAgICAgICBpZiAodGhpcy5wYXJzZVJlc3VsdC5lcnJvcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZWQgd2l0aCBlcnJvcnM6XCIgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnBhcnNlUmVzdWx0LmVycm9ycykpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJvZ3JhbSA9IGNvbXBpbGVyLmNvbXBpbGUodGhpcy5wYXJzZVJlc3VsdC50cmVlLCBkZWJ1Zyk7XG4gICAgfVxuICAgIGdldCB0cmFjZUFQSSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC50cmFjZTtcbiAgICB9XG4gICAgZ2V0IGNoZWNrQVBJKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmNoZWNrcztcbiAgICB9XG4gICAgY2hlY2sodHJhY2U6IFRyYWNlLCBzdGF0ZTogU3RhdGUsIGlkeDogbnVtYmVyLCBmb3JtdWxhOiBQYXJzZVRyZWUpOiBhbnkge1xuICAgICAgICB2YXIgbGVmdCwgcmlnaHQ7XG4gICAgICAgIC8vVE9ETzogZ2VuZXJhdGUgbGVzcyBnYXJiYWdlIG9uIGNoZWNrIHJlc3VsdHNcbiAgICAgICAgc3dpdGNoIChmb3JtdWxhLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5UUlVFOlxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkZBTFNFOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5TVEFSVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gaWR4ID09IDA7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuRU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYWNlQVBJLmlzQXRFbmQodHJhY2UpO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkFORDpcbiAgICAgICAgICAgICAgICBsZWZ0ID0gdGhpcy5jaGVjayh0cmFjZSwgc3RhdGUsIGlkeCwgZm9ybXVsYS5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICAgICAgcmlnaHQgPSB0aGlzLmNoZWNrKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgICAgICAgICBpZiAobGVmdCAmJiByaWdodCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBub2RlOiBmb3JtdWxhLCBsZWZ0OiBsZWZ0LCByaWdodDogcmlnaHQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLk9SOlxuICAgICAgICAgICAgICAgIGxlZnQgPSB0aGlzLmNoZWNrKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgICAgICByaWdodCA9IHRoaXMuY2hlY2sodHJhY2UsIHN0YXRlLCBpZHgsIGZvcm11bGEuY2hpbGRyZW5bMV0pO1xuICAgICAgICAgICAgICAgIGlmIChsZWZ0IHx8IHJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IG5vZGU6IGZvcm11bGEsIGxlZnQ6IGxlZnQsIHJpZ2h0OiByaWdodCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuTk9UOlxuICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy5jaGVjayh0cmFjZSwgc3RhdGUsIGlkeCwgZm9ybXVsYS5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuR1JPVVA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2sodHJhY2UsIHN0YXRlLCBpZHgsIGZvcm11bGEuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jaGVja0FQSVtmb3JtdWxhLnR5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrQVBJW2Zvcm11bGEudHlwZV0odHJhY2UsIHN0YXRlLCBpZHgsIGZvcm11bGEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBwcm9wb3NpdGlvbmFsIGZvcm11bGFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgbWF0Y2godHJhY2U6IFRyYWNlLCBwcmVzZXJ2ZVN0YXRlczogZmFsc2UgfCB0cnVlIHwgXCJleHBsaWNpdFwiID0gZmFsc2UpOiBQbGF5c3BlY1Jlc3VsdDxUcmFjZSwgU3RhdGU+IHwgbnVsbCB7XG4gICAgICAgIHJldHVybiAobmV3IFBsYXlzcGVjUmVzdWx0KHtcbiAgICAgICAgICAgIHNwZWM6IHRoaXMsXG4gICAgICAgICAgICBwcmVzZXJ2ZVN0YXRlc1xuICAgICAgICB9LCBwbGF5c3BlY1Jlc3VsdFN0YXRlSW5pdCh0cmFjZSksIHVuZGVmaW5lZCkpLm5leHQoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBsYXlzcGVjUmVzdWx0U3RhdGVJbml0PFQ+KHRyYWNlOiBUKTogUGxheXNwZWNSZXN1bHRTdGF0ZTxUPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLy8gV2UgY2FuIHVzZSBwbGFpbiBhcnJheXMgZm9yIHRoZSBwcmlvcml0eSBxdWV1ZSBmb3Igbm93LCBzaW5jZSB3ZSBrbm93IHRocmVhZHMgd2lsbCBiZSBhZGRlZFxuICAgICAgICAvLyBpbiBwcmlvcml0eSBvcmRlci4gVGhpcyBhbHNvIG1lYW5zIHdlIG5ldmVyIHNoaWZ0LCBidXQgaW5jcmVtZW50IGkgZ29pbmcgdXAgdGhyb3VnaCB0aGUgcXVldWUuXG4gICAgICAgIHF1ZXVlOiBuZXcgTm9uU2hyaW5raW5nQXJyYXk8VGhyZWFkPigpLFxuICAgICAgICBuZXh0UXVldWU6IG5ldyBOb25TaHJpbmtpbmdBcnJheTxUaHJlYWQ+KCksXG4gICAgICAgIHRocmVhZHM6IFtdLFxuICAgICAgICAvLyBUaGlzIE5vblJlcGxhY2luZ0hhc2hNYXAgd2lsbCBoYXZlIG51bWJlciBrZXlzIHNvIGl0IGNhbiB1c2UgZGVmYXVsdCBoYXNoL2VxdWl2XG4gICAgICAgIGxpdmVTZXQ6IG5ldyBOb25SZXBsYWNpbmdIYXNoTWFwPG51bWJlciwgVGhyZWFkU3RhdGU+KFxuICAgICAgICAgICAgKChhLCBiKSA9PiBhID09IGIpLFxuICAgICAgICAgICAgKChhKSA9PiBhKVxuICAgICAgICApLFxuICAgICAgICBtYXhUaHJlYWRJRDogMCxcbiAgICAgICAgLy8gV2Ugc3RhcnQgYXQgLTEgc2luY2UgdGhlIGluaXRpYWwgYWN0aW9ucyBvZiB0aGUgaW5pdGlhbCB0aHJlYWRcbiAgICAgICAgLy8gc2hvdWxkIGhhcHBlbiBiZWZvcmUgdGhlIHRyYWNlIHJlYWNoZXMgaW5kZXggMC4gVGhpcyBtYWlubHkgZW5zdXJlcyB0aGF0XG4gICAgICAgIC8vIGNhcHR1cmUgZ3JvdXBzIGxpbmUgdXAgY29ycmVjdGx5LlxuICAgICAgICBpbmRleDogLTEsXG4gICAgICAgIHBhc3RFbmQ6IGZhbHNlLFxuICAgICAgICB0cmFjZTogdHJhY2UsXG4gICAgICAgIC8vIFNhbWUgaGVyZSBmb3IgbWF0Y2hlcywgYWx3YXlzIGFkZGVkIGluIHByaW9yaXR5IG9yZGVyIC0tIGJ1dCBjYW4gdXNlIGEgcmVndWxhciBhcnJheVxuICAgICAgICBtYXRjaFF1ZXVlOiBuZXcgUHJpb3JpdHlRdWV1ZShcbiAgICAgICAgICAgIChtOiBNYXRjaCkgPT4gbS5wcmlvcml0eVxuICAgICAgICApLFxuICAgICAgICBtYXRjaFNldDogbmV3IE5vblJlcGxhY2luZ0hhc2hNYXAobWF0Y2hFcXVpdkZuLCBtYXRjaEhhc2hGbiksXG4gICAgICAgIGxhc3RNYXRjaFByaW9yaXR5OiAwXG4gICAgfTtcbn1cblxuY2xhc3MgVGhyZWFkIHtcbiAgICBpZDogbnVtYmVyO1xuICAgIHBjOiBudW1iZXI7XG4gICAgcHJpb3JpdHk6IG51bWJlcjtcbiAgICBtYXRjaGVzOiBNYXRjaFtdO1xuICAgIGNvbnN0cnVjdG9yKGlkOiBudW1iZXIsIHBjOiBudW1iZXIsIHByaW9yaXR5OiBudW1iZXIsIG1hdGNoZXM6IEFycmF5PE1hdGNoPikge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMucGMgPSBwYztcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICAvL21hdGNoIHNoYXJpbmc6IGluc3RlYWQgc2V0IHRoaXMubWF0Y2hlcyB0byBtYXRjaGVzIGFuZCBzZXQgc2hhcmVkTWF0Y2hlcyB0byB0cnVlXG4gICAgICAgIHRoaXMubWF0Y2hlcyA9IG1hdGNoZXMubWFwKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICBsZXQgbTIgPSBjbG9uZU1hdGNoKG0pO1xuICAgICAgICAgICAgbTIucHJpb3JpdHkgPSBNYXRoLm1heChwcmlvcml0eSwgbS5wcmlvcml0eSk7XG4gICAgICAgICAgICByZXR1cm4gbTI7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGVxdWFscyh0MjogVGhyZWFkKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnBjID09IHQyLnBjO1xuICAgIH1cblxuICAgIGhhc2goKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGM7XG4gICAgfVxuXG4gICAgbWVyZ2VUaHJlYWQob3RoZXI6IFRocmVhZCkge1xuICAgICAgICAvLyBNYXRjaCBzaGFyaW5nOiBpZiBtYXRjaGVzIGFyZSBzaGFyZWQsIHJlcGxhY2UgbWF0Y2hlcyBsaXN0IHdpdGggc2xpY2Ugb2YgbWF0Y2hlcyBsaXN0LFxuICAgICAgICAvLyBhbmQgaW5zZXJ0IGVpdGhlciBjbG9uZXMgb2Ygb3RoZXIncyBtYXRjaGVzIChpZiBvdGhlciBpcyBzaGFyaW5nIG1hdGNoZXMpIG9yIG90aGVyJ3MgbWF0Y2hlcyBkaXJlY3RseVxuICAgICAgICAvLyBBbHNvIHVwZGF0ZSBwcmlvcml0eSBvZiBuZXcgbWF0Y2hlc1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG90aGVyLm1hdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLm1hdGNoZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hFcXVpdkZuKHRoaXMubWF0Y2hlc1tqXSwgb3RoZXIubWF0Y2hlc1tpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gY2xvbmVNYXRjaChvdGhlci5tYXRjaGVzW2ldKTtcbiAgICAgICAgICAgICAgICBtYXRjaC5wcmlvcml0eSA9IE1hdGgubWF4KHRoaXMucHJpb3JpdHksIG1hdGNoLnByaW9yaXR5KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hdGNoZXMucHVzaChtYXRjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gTWVyZ2UgYW55IG90aGVyIHN0YXRlXG4gICAgfVxuXG4gICAgaGFzT3Blbk1hdGNoKCk6IGJvb2xlYW4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMubWF0Y2hlc1tpXS5pbnN0cnVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBoYXNFeHBsaWNpdE1hdGNoKCk6IGJvb2xlYW4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMubWF0Y2hlc1tpXS5pbnN0cnVjdGlvbnMubGVuZ3RoID4gMCAmJlxuICAgICAgICAgICAgICAgICh0aGlzLm1hdGNoZXNbaV0uaW5zdHJ1Y3Rpb25zWzBdIGFzIE1hdGNoU3RhcnRFbmQpLmdyb3VwSW5kZXggIT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVzaE1hdGNoSW5zdHJ1Y3Rpb24oaW5zdHI6IE1hdGNoSW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgLy8gTWF0Y2ggc2hhcmluZzogaWYgbWF0Y2hlcyBhcmUgc2hhcmVkLCByZXBsYWNlIG1hdGNoZXMgbGlzdCB3aXRoIGEgbmV3IGxpc3QgY29udGFpbmluZyBjbG9uZXMgb2YgbWF0Y2hlc1xuICAgICAgICAvLyBBbHNvIHVwZGF0ZSBwcmlvcml0eSBvZiBtYXRjaGVzXG4gICAgICAgIC8vIEFuZCBzZXQgc2hhcmVkTWF0Y2hlcyB0byBmYWxzZVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5tYXRjaGVzW2ldLmluc3RydWN0aW9ucy5wdXNoKGluc3RyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgLy8gTGV0IG1hdGNoZXMsIGFuZCB0aHVzIGtlcHQgc3RhdGVzLCBiZSBnYXJiYWdlIGNvbGxlY3RlZFxuICAgICAgICB0aGlzLm1hdGNoZXMgPSBbXTtcbiAgICB9XG59XG5cbmNsYXNzIEl0ZW08SywgVj4ge1xuICAgIGtleTogSztcbiAgICB2YWw6IFY7XG4gICAgY29uc3RydWN0b3IoazogSywgdjogVikge1xuICAgICAgICB0aGlzLmtleSA9IGs7XG4gICAgICAgIHRoaXMudmFsID0gdjtcbiAgICB9XG59XG5cbmNsYXNzIE5vblJlcGxhY2luZ0hhc2hNYXA8SywgVj4ge1xuICAgIGVxdWl2OiAoYTogSywgYjogSykgPT4gYm9vbGVhbjtcbiAgICBoYXNoOiAoYTogSykgPT4gbnVtYmVyO1xuICAgIGNvbGw6IEl0ZW08SywgVj5bXVtdO1xuICAgIGxlbmd0aDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBlcXVpdkZuOiAoYTogSywgYjogSykgPT4gYm9vbGVhbixcbiAgICAgICAgaGFzaEZuOiAoYTogSykgPT4gbnVtYmVyLFxuICAgICAgICBidWNrZXRDb3VudDogbnVtYmVyID0gMTAwMCkge1xuICAgICAgICB0aGlzLmVxdWl2ID0gZXF1aXZGbjtcbiAgICAgICAgdGhpcy5oYXNoID0gaGFzaEZuO1xuICAgICAgICB0aGlzLmNvbGwgPSBuZXcgQXJyYXkoYnVja2V0Q291bnQpO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgYnVja2V0RmluZChidWNrZXQ6IEl0ZW08SywgVj5bXSwgb2JqOiBLKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVja2V0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5lcXVpdiA/IHRoaXMuZXF1aXYoYnVja2V0W2ldLmtleSwgb2JqKSA6IGJ1Y2tldFtpXS5rZXkgPT0gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1Y2tldFtpXS52YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBJZiB2YWwgaXMgbm90IHByb3ZpZGVkLCBpdCBkZWZhdWx0cyB0byB0cnVlXG4gICAgLy8gVW5saWtlIGEgcmVndWxhciBtYXAsIHRoaXMgd2lsbCBOT1QgcmVwbGFjZSBleGlzdGluZyBrZXlzIVxuICAgIHB1c2gob2JqOiBLLCB2YWw6IFYpIHtcbiAgICAgICAgY29uc3QgaGFzaENvZGUgPSB0aGlzLmhhc2gob2JqKSAlIHRoaXMuY29sbC5sZW5ndGg7XG4gICAgICAgIGxldCBidWNrZXQgPSB0aGlzLmNvbGxbaGFzaENvZGVdO1xuICAgICAgICBpZiAoIWJ1Y2tldCkge1xuICAgICAgICAgICAgdGhpcy5jb2xsW2hhc2hDb2RlXSA9IFt7IGtleTogb2JqLCB2YWw6IHZhbCB9XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJ1Y2tldEZpbmQoYnVja2V0LCBvYmopICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1Y2tldC5wdXNoKHsga2V5OiBvYmosIHZhbDogdmFsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMubGVuZ3RoKys7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGdldChvYmo6IEspOiBWIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFzaENvZGUgPSB0aGlzLmhhc2gob2JqKSAlIHRoaXMuY29sbC5sZW5ndGg7XG4gICAgICAgIGxldCBidWNrZXQgPSB0aGlzLmNvbGxbaGFzaENvZGVdO1xuICAgICAgICBpZiAoIWJ1Y2tldCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5idWNrZXRGaW5kKGJ1Y2tldCwgb2JqKTtcbiAgICB9XG5cbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmNvbGwubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vdG9kbzogZ2VuZXJhdGUgbGVzcyBnYXJiYWdlP1xuICAgICAgICAgICAgdGhpcy5jb2xsW2ldID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGNvbnRhaW5zKG9iajogSyk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc2hDb2RlID0gdGhpcy5oYXNoKG9iaikgJSB0aGlzLmNvbGwubGVuZ3RoO1xuICAgICAgICBsZXQgYnVja2V0ID0gdGhpcy5jb2xsW2hhc2hDb2RlXTtcbiAgICAgICAgaWYgKCFidWNrZXQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5idWNrZXRGaW5kKGJ1Y2tldCwgb2JqKSAhPT0gdW5kZWZpbmVkO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFzaEludChoOiBudW1iZXIsIGludDMyOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGggKz0gKGludDMyKSB8IDA7XG4gICAgaCArPSAoaCA8PCAxMCkgfCAwO1xuICAgIGggXj0gKGggPj4gNikgfCAwO1xuICAgIGggKz0gKChpbnQzMiA+PiA4KSkgfCAwO1xuICAgIGggKz0gKGggPDwgMTApIHwgMDtcbiAgICBoIF49IChoID4+IDYpIHwgMDtcbiAgICBoICs9ICgoaW50MzIgPj4gMTYpKSB8IDA7XG4gICAgaCArPSAoaCA8PCAxMCkgfCAwO1xuICAgIGggXj0gKGggPj4gNikgfCAwO1xuICAgIGggKz0gKChpbnQzMiA+PiAyNCkpIHwgMDtcbiAgICBoICs9IChoIDw8IDEwKSB8IDA7XG4gICAgaCBePSAoaCA+PiA2KSB8IDA7XG4gICAgcmV0dXJuIGg7XG59XG5mdW5jdGlvbiBmaW5hbGl6ZUhhc2goaDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBoICs9IChoIDw8IDMpIHwgMDtcbiAgICBoIF49IChoID4+IDExKSB8IDA7XG4gICAgaCArPSAoaCA8PCAxNSkgfCAwO1xuICAgIHJldHVybiBoO1xufVxuZnVuY3Rpb24gaGFzaE51bWJlcnMoLi4ubnVtYmVyczogbnVtYmVyW10pOiBudW1iZXIge1xuICAgIGxldCBoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaCA9IGhhc2hJbnQoaCwgbnVtYmVyc1tpXSk7XG4gICAgfVxuICAgIHJldHVybiBmaW5hbGl6ZUhhc2goaCk7XG59XG50eXBlIE1hdGNoU3RhcnRFbmQgPSB7XG4gICAgdHlwZTogXCJzdGFydFwiIHwgXCJlbmRcIixcbiAgICBncm91cDogc3RyaW5nIHwgbnVtYmVyLFxuICAgIGdyb3VwSW5kZXg6IG51bWJlcixcbiAgICBpbmRleDogbnVtYmVyXG59O1xudHlwZSBNYXRjaFJlZ2lzdGVyU3RhdGUgPSB7IHR5cGU6IFwic3RhdGVcIiwgaW5kZXg6IG51bWJlciwgc3RhdGU6IGFueSwgcmVzdWx0OiBhbnkgfTtcbnR5cGUgTWF0Y2hJbnN0cnVjdGlvbiA9IE1hdGNoU3RhcnRFbmQgfCBNYXRjaFJlZ2lzdGVyU3RhdGU7XG50eXBlIE1hdGNoID0geyBwcmlvcml0eTogbnVtYmVyLCBpbnN0cnVjdGlvbnM6IEFycmF5PE1hdGNoSW5zdHJ1Y3Rpb24+IH07XG5cbmNvbnN0IG1hdGNoRXF1aXZGbiA9IGZ1bmN0aW9uIChhOiBNYXRjaCwgYjogTWF0Y2gpIHtcbiAgICBpZiAoYS5pbnN0cnVjdGlvbnMubGVuZ3RoICE9IGIuaW5zdHJ1Y3Rpb25zLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5pbnN0cnVjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgaW5zQSA9IGEuaW5zdHJ1Y3Rpb25zW2ldO1xuICAgICAgICBjb25zdCBpbnNCID0gYi5pbnN0cnVjdGlvbnNbaV07XG4gICAgICAgIGlmIChpbnNBLnR5cGUgIT0gaW5zQi50eXBlIHx8XG4gICAgICAgICAgICBpbnNBLmluZGV4ICE9IGluc0IuaW5kZXggfHxcbiAgICAgICAgICAgICgoaW5zQSBhcyBNYXRjaFN0YXJ0RW5kKS5ncm91cCAhPSAoaW5zQiBhcyBNYXRjaFN0YXJ0RW5kKS5ncm91cCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmNvbnN0IG1hdGNoSGFzaEZuID0gZnVuY3Rpb24gKGE6IE1hdGNoKSB7XG4gICAgcmV0dXJuIGhhc2hOdW1iZXJzKGEuaW5zdHJ1Y3Rpb25zLmxlbmd0aCk7XG59XG5cbmZ1bmN0aW9uIGNsb25lTWF0Y2gobTogTWF0Y2gpOiBNYXRjaCB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcHJpb3JpdHk6IG0ucHJpb3JpdHksXG4gICAgICAgIGluc3RydWN0aW9uczogbS5pbnN0cnVjdGlvbnMuc2xpY2UoKVxuICAgIH07XG59XG5cbmNsYXNzIE5vblNocmlua2luZ0FycmF5PFQ+IHtcbiAgICBhcnJheTogVFtdO1xuICAgIGxlbmd0aDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFycmF5ID0gW107XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBwdXNoKG9iajogVCk6IHZvaWQge1xuICAgICAgICB0aGlzLmFycmF5W3RoaXMubGVuZ3RoXSA9IG9iajtcbiAgICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICB9XG5cbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGdldCBmaXJzdCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMF07XG4gICAgfVxuXG4gICAgZ2V0KGk6IG51bWJlcik6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoaSA8IDAgfHwgaSA+PSB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hcnJheVtpXTtcbiAgICB9XG59XG5cbi8vIFdlIGtub3cgYSBwcmlvcmkgdGhhdCB0aGUgbnVtYmVyIG9mIHByaW9yaXR5IGxldmVscyBpcyByZWxhdGl2ZWx5IHNtYWxsXG5jbGFzcyBQcmlvcml0eVF1ZXVlPFQ+IHtcbiAgICBxdWV1ZXM6IFRbXVtdO1xuICAgIG1lbWJlcnM6IE5vblJlcGxhY2luZ0hhc2hNYXA8VCwgYm9vbGVhbj4gfCB1bmRlZmluZWQ7XG4gICAgcHJpb3JpdHlGdW5jdGlvbjogKHQ6IFQpID0+IG51bWJlcjtcbiAgICBsZW5ndGg6IG51bWJlcjtcbiAgICBsb3dlc3RQcmlvcml0eTogbnVtYmVyO1xuICAgIGhpZ2hlc3RQcmlvcml0eTogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwZm46ICh0OiBUKSA9PiBudW1iZXIsXG4gICAgICAgIGVxdWl2Rm4/OiAodDE6IFQsIHQyOiBUKSA9PiBib29sZWFuLFxuICAgICAgICBoYXNoRm4/OiAodDogVCkgPT4gbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucXVldWVzID0gW107XG4gICAgICAgIHRoaXMucHJpb3JpdHlGdW5jdGlvbiA9IHBmbjtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgICB0aGlzLmxvd2VzdFByaW9yaXR5ID0gSW5maW5pdHk7XG4gICAgICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5ID0gLUluZmluaXR5O1xuICAgICAgICBpZiAoZXF1aXZGbiAmJiBoYXNoRm4pIHtcbiAgICAgICAgICAgIHRoaXMubWVtYmVycyA9IG5ldyBOb25SZXBsYWNpbmdIYXNoTWFwKGVxdWl2Rm4sIGhhc2hGbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1lbWJlcnMgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgIH1cblxuICAgIC8vIFdlIGFsc28ga25vdyBhIHByaW9yaSB0aGF0IGR1cGxpY2F0ZXMgd2lsbCBiZSBkZXRlY3RlZCBleHRlcm5hbGx5IGlmIHRoZXJlIGlzIG5vIGVxdWl2Rm4vaGFzaEZuXG4gICAgcHVzaChvYmo6IFQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgaWR4ID0gdGhpcy5wcmlvcml0eUZ1bmN0aW9uKG9iaik7XG4gICAgICAgIGlmICh0aGlzLm1lbWJlcnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1lbWJlcnMuY29udGFpbnMob2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubWVtYmVycy5wdXNoKG9iaiwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEoaWR4IGluIHRoaXMucXVldWVzKSkge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZXNbaWR4XSA9IFtvYmpdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZXNbaWR4XS5wdXNoKG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkeCA8IHRoaXMubG93ZXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHRoaXMubG93ZXN0UHJpb3JpdHkgPSBpZHg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlkeCA+IHRoaXMuaGlnaGVzdFByaW9yaXR5KSB7XG4gICAgICAgICAgICB0aGlzLmhpZ2hlc3RQcmlvcml0eSA9IGlkeDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlbmd0aCsrO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBzaGlmdCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMubG93ZXN0UHJpb3JpdHkgPj0gSW5maW5pdHkgfHwgdGhpcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxID0gdGhpcy5xdWV1ZXNbdGhpcy5sb3dlc3RQcmlvcml0eV07XG4gICAgICAgIC8vIFdpdGhpbiBhIHByaW9yaXR5IGxldmVsLCB3ZSB3YW50IHRoZSBfcmV2ZXJzZV8gb3JkZXIgb2YgYWRkaXRpb25cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcS5wb3AoKTtcbiAgICAgICAgaWYgKHEubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlc1t0aGlzLmxvd2VzdFByaW9yaXR5XTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhpZ2hlc3RQcmlvcml0eSA8PSB0aGlzLmxvd2VzdFByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb3dlc3RQcmlvcml0eSA9IEluZmluaXR5O1xuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5ID0gLUluZmluaXR5O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoISh0aGlzLnF1ZXVlc1t0aGlzLmxvd2VzdFByaW9yaXR5XSkgJiYgdGhpcy5sb3dlc3RQcmlvcml0eSA8IHRoaXMuaGlnaGVzdFByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG93ZXN0UHJpb3JpdHkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZW5ndGgtLTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBnZXQgZmlyc3QoKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlc1t0aGlzLmxvd2VzdFByaW9yaXR5XVswXTtcbiAgICB9XG5cbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgLy90b2RvOiBnZW5lcmF0ZSBsZXNzIGdhcmJhZ2VcbiAgICAgICAgdGhpcy5xdWV1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5sb3dlc3RQcmlvcml0eSA9IEluZmluaXR5O1xuICAgICAgICB0aGlzLmhpZ2hlc3RQcmlvcml0eSA9IC1JbmZpbml0eTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgICBpZiAodGhpcy5tZW1iZXJzKSB7XG4gICAgICAgICAgICB0aGlzLm1lbWJlcnMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgTElWRVNFVF9DTEVBUl9JTlRFUlZBTCA9IDEwMDtcblxudHlwZSBUaHJlYWRTdGF0ZSA9IHtcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIHRocmVhZHM6IE5vblNocmlua2luZ0FycmF5PFRocmVhZD5cbn07XG5cbnR5cGUgUGxheXNwZWNSZXN1bHRTdGF0ZTxUcmFjZT4gPSB7XG4gICAgdHJhY2U6IFRyYWNlLFxuICAgIHRocmVhZHM6IFRocmVhZFtdLFxuICAgIG1heFRocmVhZElEOiBudW1iZXIsXG4gICAgcXVldWU6IE5vblNocmlua2luZ0FycmF5PFRocmVhZD4sXG4gICAgbmV4dFF1ZXVlOiBOb25TaHJpbmtpbmdBcnJheTxUaHJlYWQ+LFxuICAgIGxpdmVTZXQ6IE5vblJlcGxhY2luZ0hhc2hNYXA8bnVtYmVyLCBUaHJlYWRTdGF0ZT4sXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBwYXN0RW5kOiBib29sZWFuLFxuICAgIG1hdGNoUXVldWU6IFByaW9yaXR5UXVldWU8TWF0Y2g+LFxuICAgIG1hdGNoU2V0OiBOb25SZXBsYWNpbmdIYXNoTWFwPE1hdGNoLCBib29sZWFuPixcbiAgICBsYXN0TWF0Y2hQcmlvcml0eTogbnVtYmVyXG59O1xuXG50eXBlIEdyb3VwRGF0YTxTdGF0ZT4gPSB7XG4gICAgZ3JvdXA6IHN0cmluZyB8IG51bWJlcixcbiAgICBncm91cEluZGV4OiBudW1iZXIsXG4gICAgc3RhcnQ6IG51bWJlcixcbiAgICBlbmQ6IG51bWJlcixcbiAgICBzdGF0ZXM6IFN0YXRlW10gfCB1bmRlZmluZWQsXG4gICAgcmVzdWx0czogYW55W10gfCB1bmRlZmluZWRcbn07XG5cbnR5cGUgUGxheXNwZWNNYXRjaFJlc3VsdDxTdGF0ZT4gPSB7XG4gICAgc3RhcnQ6IG51bWJlcixcbiAgICBlbmQ6IG51bWJlcixcbiAgICBzdGF0ZXM/OiBTdGF0ZVtdLFxuICAgIHJlc3VsdHM/OiBhbnlbXSxcbiAgICBzdWJncm91cHM6IEdyb3VwRGF0YTxTdGF0ZT5bXVxufTtcblxuY2xhc3MgUGxheXNwZWNSZXN1bHQ8VHJhY2UsIFN0YXRlPiB7XG4gICAgY29uZmlnOiB7IHNwZWM6IFBsYXlzcGVjPFRyYWNlLCBTdGF0ZT4sIHByZXNlcnZlU3RhdGVzOiBmYWxzZSB8IHRydWUgfCBcImV4cGxpY2l0XCIgfTtcbiAgICBzdGF0ZTogUGxheXNwZWNSZXN1bHRTdGF0ZTxUcmFjZT4gfCB1bmRlZmluZWQ7XG4gICAgbWF0Y2g6IFBsYXlzcGVjTWF0Y2hSZXN1bHQ8U3RhdGU+IHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBjb25maWc6IHsgc3BlYzogUGxheXNwZWM8VHJhY2UsIFN0YXRlPiwgcHJlc2VydmVTdGF0ZXM6IGZhbHNlIHwgdHJ1ZSB8IFwiZXhwbGljaXRcIiB9LFxuICAgICAgICBzdGF0ZTogUGxheXNwZWNSZXN1bHRTdGF0ZTxUcmFjZT4sXG4gICAgICAgIG1hdGNoOiBQbGF5c3BlY01hdGNoUmVzdWx0PFN0YXRlPiB8IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5pbmRleCA9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS50cmFjZSA9IHRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuc3RhcnQodGhpcy5zdGF0ZS50cmFjZSk7XG4gICAgICAgICAgICBsZXQgaW5pdFRocmVhZCA9IG5ldyBUaHJlYWQoMCwgMCwgMCwgW3sgcHJpb3JpdHk6IDAsIGluc3RydWN0aW9uczogW10gfV0pO1xuICAgICAgICAgICAgdGhpcy5lbnF1ZXVlVGhyZWFkKGluaXRUaHJlYWQpO1xuICAgICAgICAgICAgLy9zd2FwIHF1ZXVlc1xuICAgICAgICAgICAgY29uc3QgdGVtcCA9IHRoaXMuc3RhdGUucXVldWU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnF1ZXVlID0gdGhpcy5zdGF0ZS5uZXh0UXVldWU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLm5leHRRdWV1ZSA9IHRlbXA7XG4gICAgICAgICAgICAvL2NsZWFyIGxpdmUgYW5kIG1hdGNoIHNldHNcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubGl2ZVNldC5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5tYXRjaFNldC5jbGVhcigpO1xuICAgICAgICAgICAgLy9tb3ZlIGluZGV4IHRvIHN0YXJ0XG4gICAgICAgICAgICB0aGlzLnN0YXRlLmluZGV4ID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hdGNoID0gbWF0Y2g7XG4gICAgfVxuXG4gICAgZ2V0IHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaCA/IHRoaXMubWF0Y2guc3RhcnQgOiAtMTtcbiAgICB9XG5cbiAgICBnZXQgZW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaCA/IHRoaXMubWF0Y2guZW5kIDogLTE7XG4gICAgfVxuXG4gICAgZ2V0IHN0YXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2ggPyB0aGlzLm1hdGNoLnN0YXRlcyA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBnZXQgc3ViZ3JvdXBzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaCA/IHRoaXMubWF0Y2guc3ViZ3JvdXBzIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGhhc1JlYWR5TWF0Y2goKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZSEubWF0Y2hRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUhLnF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUhLm1hdGNoUXVldWUuZmlyc3QhLnByaW9yaXR5IDw9IHRoaXMuc3RhdGUhLnF1ZXVlLmZpcnN0IS5wcmlvcml0eVxuICAgIH1cblxuICAgIGVucXVldWVUaHJlYWQodGhyZWFkOiBUaHJlYWQpIHtcbiAgICAgICAgLy8gVW5saWtlIENveCdzIGltcGxlbWVudGF0aW9uLCB3ZSBjYW4gb25seSBkbyBkdXBsaWNhdGUgY2hlY2tpbmcgZm9yIHRocmVhZHMgdGhhdCBhcmUgYWJvdXQgdG8gcGFyay5cbiAgICAgICAgLy8gU28gd2UnbGwgZG8gc29tZSByZWR1bmRhbnQganVtcGluZy9zcGxpdHRpbmcvbWF0Y2hpbmcsIGJ1dCBzaW5jZSB3ZSBuZWVkIHRvIG1lcmdlIHRocmVhZHMgaXQgY2FuJ3RcbiAgICAgICAgLy8gcmVhbGx5IGJlIGF2b2lkZWQuXG4gICAgICAgIGNvbnN0IGluc3RyID0gdGhpcy5jb25maWcuc3BlYy5wcm9ncmFtW3RocmVhZC5wY107XG4gICAgICAgIHN3aXRjaCAoaW5zdHIudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcImp1bXBcIjpcbiAgICAgICAgICAgICAgICB0aHJlYWQucGMgPSBpbnN0ci50YXJnZXQhO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgXCJzcGxpdFwiOlxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUhLm1heFRocmVhZElEISsrO1xuICAgICAgICAgICAgICAgIHRocmVhZC5wYyA9IGluc3RyLmxlZnQ7XG4gICAgICAgICAgICAgICAgLy9tYXRjaCBzaGFyaW5nOiBCZSBzdXJlIHRocmVhZDEga25vd3MgdGhyZWFkMiBpcyB1c2luZyBpdHMgbWF0Y2hlcy5cbiAgICAgICAgICAgICAgICAvL3RocmVhZC5zaGFyZWRNYXRjaGVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aHJlYWQyID0gbmV3IFRocmVhZCh0aGlzLnN0YXRlIS5tYXhUaHJlYWRJRCwgaW5zdHIucmlnaHQhLCB0aHJlYWQucHJpb3JpdHkgKyAxLCB0aHJlYWQubWF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnF1ZXVlVGhyZWFkKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnF1ZXVlVGhyZWFkKHRocmVhZDIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgICAgIHRocmVhZC5wdXNoTWF0Y2hJbnN0cnVjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgLy8gKzEgYmVjYXVzZSB0aGUgX2N1cnJlbnRfIHRyYWNlIGluZGV4IGp1c3QgbWF0Y2hlZCBwcmV2aW91c2x5LCBzbyB3ZSBkb24ndCB3YW50IHRvIGluY2x1ZGUgaXQgaW5cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG1hdGNoIHRoYXQgc3RhcnRzIHdpdGggdGhlIF9uZXh0XyBjaGFyYWN0ZXIuXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnN0YXRlIS5pbmRleCArIDEsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwOiBpbnN0ci5ncm91cCxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJbmRleDogaW5zdHIuY2FwdHVyZUlEXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyZWFkLnBjKys7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnF1ZXVlVGhyZWFkKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIHRocmVhZC5wdXNoTWF0Y2hJbnN0cnVjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZW5kXCIsXG4gICAgICAgICAgICAgICAgICAgIC8vICsxIGZvciBzYW1lIHJlYXNvbiBhcyBhYm92ZS5cbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuc3RhdGUhLmluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IGluc3RyLmdyb3VwLFxuICAgICAgICAgICAgICAgICAgICBncm91cEluZGV4OiBpbnN0ci5jYXB0dXJlSURcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJlYWQucGMrKztcbiAgICAgICAgICAgICAgICB0aGlzLmVucXVldWVUaHJlYWQodGhyZWFkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlIFwibWF0Y2hcIjpcbiAgICAgICAgICAgICAgICAvLyBBZGQgbWF0Y2hlcyB0byBxdWV1ZVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhyZWFkLm1hdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRocmVhZC5tYXRjaGVzW2ldLnByaW9yaXR5ID49IHRocmVhZC5wcmlvcml0eSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIG5vdmVsIG1hdGNoLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0ZSEubWF0Y2hTZXQucHVzaCh0aHJlYWQubWF0Y2hlc1tpXSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIHF1ZXVlIVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUhLm1hdGNoUXVldWUucHVzaCh0aHJlYWQubWF0Y2hlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9kcm9wIHRocmVhZCwgaXRzIHdvcmsgaXMgZG9uZVxuICAgICAgICAgICAgICAgIHRocmVhZC50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlIFwiY2hlY2tcIjpcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBsaXZlIHNldCwgdGhlbiBhZGQgdG8gcXVldWVcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNoID0gdGhyZWFkLmhhc2goKTtcbiAgICAgICAgICAgICAgICBsZXQgc3RhdGUgPSB0aGlzLnN0YXRlITtcbiAgICAgICAgICAgICAgICBsZXQgbGl2ZTogVGhyZWFkU3RhdGUgfCB1bmRlZmluZWQgPSBzdGF0ZS5saXZlU2V0LmdldChoYXNoKTtcbiAgICAgICAgICAgICAgICBpZiAoIWxpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRocmVhZExpc3QgPSBuZXcgTm9uU2hyaW5raW5nQXJyYXk8VGhyZWFkPigpO1xuICAgICAgICAgICAgICAgICAgICB0aHJlYWRMaXN0LnB1c2godGhyZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUubGl2ZVNldC5wdXNoKGhhc2gsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBzdGF0ZS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZHM6IHRocmVhZExpc3RcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsaXZlLmluZGV4ICE9IHN0YXRlIS5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICBsaXZlLmluZGV4ID0gc3RhdGUuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGxpdmUudGhyZWFkcy5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICBsaXZlLnRocmVhZHMucHVzaCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vbWF5YmUgcHJlc2VudFxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpdmUudGhyZWFkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpdmUudGhyZWFkcy5nZXQoaSkhLmVxdWFscyh0aHJlYWQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGl2ZS50aHJlYWRzLmdldChpKSEubWVyZ2VUaHJlYWQodGhyZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEcm9wIHRoZSBtZXJnZWQtaW4gdGhyZWFkLCBubyBtb3JlIHdvcmsgdG8gZG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWQudGVybWluYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vbm90IHByZXNlbnQ6IGFkZCBzdHVjayB0aHJlYWQgdG8gcXVldWUuXG4gICAgICAgICAgICAgICAgc3RhdGUubmV4dFF1ZXVlLnB1c2godGhyZWFkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAvL3RvZG86IGNhc2UgZm9yaywgam9pbiwgam9pbmVkLWxlZnQsIGpvaW5lZC1yaWdodFxuICAgICAgICAgICAgLy8gam9pbmVkLWxlZnQgYW5kIGpvaW5lZC1yaWdodCB3aWxsIG5lZWQgdG8gaGFuZGxlIG1lcmdpbmchXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBpbnN0cnVjdGlvbiB0eXBlICR7aW5zdHIudHlwZX1cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcmV0dGlmeU1hdGNoKG06IE1hdGNoKTogUGxheXNwZWNNYXRjaFJlc3VsdDxTdGF0ZT4ge1xuICAgICAgICBsZXQgZ3JvdXBzID0gW107XG4gICAgICAgIGxldCBsaXZlR3JvdXBzOiB7XG4gICAgICAgICAgICBba2V5OiBzdHJpbmddOiBHcm91cERhdGE8U3RhdGU+LFxuICAgICAgICAgICAgW2luZGV4OiBudW1iZXJdOiBHcm91cERhdGE8U3RhdGU+XG4gICAgICAgIH0gPSB7fTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtLmluc3RydWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgaW5zdHIgPSBtLmluc3RydWN0aW9uc1tpXTtcbiAgICAgICAgICAgIHN3aXRjaCAoaW5zdHIudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgICAgICAgICBsZXQgbmV3RzogR3JvdXBEYXRhPFN0YXRlPiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwOiBpbnN0ci5ncm91cCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSW5kZXg6IGluc3RyLmdyb3VwSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogaW5zdHIuaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IEluZmluaXR5LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLnByZXNlcnZlU3RhdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdHLnN0YXRlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3Ry5yZXN1bHRzID0gW107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzLnB1c2gobmV3Ryk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsaXZlR3JvdXBzW25ld0cuZ3JvdXBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEdXBsaWNhdGUgY2FwdHVyZSBncm91cFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBsaXZlR3JvdXBzW25ld0cuZ3JvdXBdID0gbmV3RztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0YXRlXCI6XG4gICAgICAgICAgICAgICAgICAgIGxldCBvcGVuR3JvdXBzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobGl2ZUdyb3Vwcyk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGdpID0gMDsgZ2kgPCBvcGVuR3JvdXBzLmxlbmd0aDsgZ2krKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRpbnVlZEcgPSBsaXZlR3JvdXBzW29wZW5Hcm91cHNbZ2ldXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vV2UnbGwgb25seSBnZXQgaGVyZSBpZiB3ZSdyZSBwcmVzZXJ2aW5nIHN0YXRlczsgdW5sZXNzIHdlIHJldXNlIFwic3RhdGVcIiBmb3IgYXRvbWljIGVsZW1lbnQgY2FwdHVyZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlZEcuc3RhdGVzIS5wdXNoKGluc3RyLnN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlZEcucmVzdWx0cyEucHVzaChpbnN0ci5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbmlzaGVkRyA9IGxpdmVHcm91cHNbaW5zdHIuZ3JvdXBdO1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hlZEcuZW5kID0gaW5zdHIuaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBsaXZlR3JvdXBzW2luc3RyLmdyb3VwXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9wZW5Hcm91cHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhsaXZlR3JvdXBzKTtcbiAgICAgICAgaWYgKG9wZW5Hcm91cHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW4gY2FwdHVyZSBncm91cHM6ICR7b3Blbkdyb3Vwcy5qb2luKFwiLFwiKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcm9vdEdyb3VwID0gZ3JvdXBzLnNoaWZ0KCkhO1xuICAgICAgICBsZXQgcm9vdE1hdGNoOiBQbGF5c3BlY01hdGNoUmVzdWx0PFN0YXRlPiA9IHtcbiAgICAgICAgICAgIHN0YXJ0OiByb290R3JvdXAuc3RhcnQsXG4gICAgICAgICAgICBlbmQ6IHJvb3RHcm91cC5lbmQsXG4gICAgICAgICAgICAvL1RPRE86IE91Z2h0IGVtcHR5IGNhcHR1cmVzIHRvIGJlIGRyb3BwZWQ/XG4gICAgICAgICAgICBzdWJncm91cHM6IGdyb3Vwcy5maWx0ZXIoXG4gICAgICAgICAgICAgICAgKGdyb3VwKSA9PiBncm91cC5zdGFydCAhPSBncm91cC5lbmRcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBzdGF0ZXM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlc3VsdHM6IHVuZGVmaW5lZFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5jb25maWcucHJlc2VydmVTdGF0ZXMpIHtcbiAgICAgICAgICAgIHJvb3RNYXRjaC5zdGF0ZXMgPSByb290R3JvdXAuc3RhdGVzO1xuICAgICAgICAgICAgcm9vdE1hdGNoLnJlc3VsdHMgPSByb290R3JvdXAucmVzdWx0cztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm9vdE1hdGNoO1xuICAgIH1cblxuICAgIG5leHQoKTogUGxheXNwZWNSZXN1bHQ8VHJhY2UsIFN0YXRlPiB8IG51bGwge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRvbid0IGNhbGwgbmV4dCgpIG9uIHRoZSBzYW1lIFBsYXlzcGVjUmVzdWx0IHR3aWNlIVwiKTtcbiAgICAgICAgfVxuICAgICAgICAvL1NvbWUga2luZHMgb2YgdHJhY2UgYXJlbid0IHJlYWR5IHRvIHN0YXJ0IG1hdGNoaW5nIHVudGlsIHNvbWUgdGltZSBnb2VzIGJ5LlxuICAgICAgICBpZiAodGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc1JlYWR5ICYmXG4gICAgICAgICAgICAhdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc1JlYWR5KHRoaXMuc3RhdGUudHJhY2UpKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0U3RhdGUgPSB0aGlzLnN0YXRlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGxheXNwZWNSZXN1bHQodGhpcy5jb25maWcsIG5leHRTdGF0ZSwgdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoIXRoaXMuaGFzUmVhZHlNYXRjaCgpICYmIHRoaXMuc3RhdGUucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuY3VycmVudFN0YXRlKHRoaXMuc3RhdGUudHJhY2UpO1xuICAgICAgICAgICAgbGV0IGNvcGllZFN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgbGltaXQgPSB0aGlzLnN0YXRlLnF1ZXVlLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBsYXN0UHJpb3JpdHkgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnN0YXRlLnF1ZXVlLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gbGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHRocmVhZCBxdWV1ZSBzaG91bGQgbmV2ZXIgZ3JvdyBkdXJpbmcgYSBzaW5nbGUgdHJhY2Ugc3RhdGUhXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdGhyZWFkID0gdGhpcy5zdGF0ZS5xdWV1ZS5nZXQodCkhO1xuICAgICAgICAgICAgICAgIGlmICh0aHJlYWQucHJpb3JpdHkgPCBsYXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRGVjcmVhc2luZyBwcmlvcml0eSFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGluc3RyID0gdGhpcy5jb25maWcuc3BlYy5wcm9ncmFtW3RocmVhZC5wY107XG4gICAgICAgICAgICAgICAgc3dpdGNoIChpbnN0ci50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjaGVja1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tSZXN1bHQgPSB0aGlzLmNvbmZpZy5zcGVjLmNoZWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUudHJhY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0ci5mb3JtdWxhXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoZWNrUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkLnBjKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRocmVhZC5oYXNPcGVuTWF0Y2goKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcucHJlc2VydmVTdGF0ZXMgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aHJlYWQuaGFzRXhwbGljaXRNYXRjaCgpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcucHJlc2VydmVTdGF0ZXMgIT0gXCJleHBsaWNpdFwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb3BpZWRTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvcGllZFN0YXRlID0gdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5jb3B5Q3VycmVudFN0YXRlID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5jb3B5Q3VycmVudFN0YXRlKHRoaXMuc3RhdGUudHJhY2UpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWQucHVzaE1hdGNoSW5zdHJ1Y3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5zdGF0ZS5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogY29waWVkU3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBjaGVja1Jlc3VsdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbnF1ZXVlVGhyZWFkKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvL290aGVyd2lzZSBkcm9wIHRoZSB0aHJlYWQgb24gdGhlIGZsb29yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaHJlYWQgc2hvdWxkIGJlIHBhcmtlZCBvbiBhIGNoZWNrLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL3N3YXAgcXVldWVzIGFuZCBjbGVhciBvbGQgcXVldWVcbiAgICAgICAgICAgIGxldCB0ZW1wID0gdGhpcy5zdGF0ZS5xdWV1ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUucXVldWUgPSB0aGlzLnN0YXRlLm5leHRRdWV1ZTtcbiAgICAgICAgICAgIHRlbXAuY2xlYXIoKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubmV4dFF1ZXVlID0gdGVtcDtcbiAgICAgICAgICAgIC8vbWF5YmUgY2xlYXIgbGl2ZXNldCAoZG9uJ3Qgd2FudCB0byBkbyBpdCBldmVyeSB0aW1lLCBzbyBzaG9ydCBzcGVjcy9zdHJpbmdzIGNhbiBhdm9pZCBtZW1vcnkgY2h1cm4pXG4gICAgICAgICAgICBpZiAoKHRoaXMuc3RhdGUuaW5kZXggJSBMSVZFU0VUX0NMRUFSX0lOVEVSVkFMKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5saXZlU2V0LmNsZWFyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL2RlZmluaXRlbHkgY2xlYXIgbWF0Y2hzZXQgKGxhdGVyIG1hdGNoZXMgd29uJ3QgZXZlciBiZSBlcXVpdmFsZW50IHRvIG1hdGNoZXMgZnJvbSB0aGlzIHRpbWUpXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm1hdGNoU2V0LmNsZWFyKCk7XG4gICAgICAgICAgICAvL2FkdmFuY2UsIHVubGVzcyBhbHJlYWR5IGF0IGVuZFxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuaXNBdEVuZCh0aGlzLnN0YXRlLnRyYWNlKSkge1xuICAgICAgICAgICAgICAgIC8vd2lwZSBvdXQgcXVldWUsIG5vIG1vcmUgdHJhY2UgdG8gbWF0Y2ghXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmlzU3RyZWFtaW5nIHx8XG4gICAgICAgICAgICAgICAgICAgICF0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmlzU3RyZWFtaW5nKHRoaXMuc3RhdGUudHJhY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUucXVldWUuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmFkdmFuY2VTdGF0ZSh0aGlzLnN0YXRlLnRyYWNlKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYXNSZWFkeU1hdGNoKCkpIHtcbiAgICAgICAgICAgIC8vIEFsc28gcmVtb3ZlcyBmaXJzdCBtYXRjaCBmcm9tIHF1ZXVlIVxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0aGlzLnN0YXRlLm1hdGNoUXVldWUuc2hpZnQoKSE7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5sYXN0TWF0Y2hQcmlvcml0eSA+IG1hdGNoLnByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWF0Y2hlcyBwb3BwZWQgb3V0IG9mIG9yZGVyIVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhdGUubGFzdE1hdGNoUHJpb3JpdHkgPSBtYXRjaC5wcmlvcml0eTtcbiAgICAgICAgICAgIGNvbnN0IHByZXR0eU1hdGNoID0gdGhpcy5wcmV0dGlmeU1hdGNoKG1hdGNoKTtcbiAgICAgICAgICAgIGNvbnN0IG5leHRTdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQbGF5c3BlY1Jlc3VsdChcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBuZXh0U3RhdGUsXG4gICAgICAgICAgICAgICAgcHJldHR5TWF0Y2hcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuaXNTdHJlYW1pbmcgJiZcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuaXNTdHJlYW1pbmcodGhpcy5zdGF0ZS50cmFjZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRTdGF0ZSA9IHRoaXMuc3RhdGU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQbGF5c3BlY1Jlc3VsdChcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBuZXh0U3RhdGUsXG4gICAgICAgICAgICAgICAgdW5kZWZpbmVkXG4gICAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSdyZSBvdXQgb2YgcXVldWUgb3IgdHJhY2UgYW5kIGhhdmUgbm93aGVyZSB0byBnb1xuICAgICAgICB0aGlzLnN0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9