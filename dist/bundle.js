var Playspecs=function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const n={WHITESPACE:" ",CONCATENATION:",",DOTS_GREEDY:"...",DOTS_RELUCTANT:"..",DOTS_OMEGA:"***",LEFT_PAREN:"(",RIGHT_PAREN:")",CAPTURING_LEFT_PAREN:"$(",ALTERNATION:";",INTERSECTION:"^",AND:"&",OR:"|",NOT:"not",START:"start",END:"end",TRUE:"true",FALSE:"false",ERROR:"error"},s={OMEGA:n.DOTS_OMEGA,REPETITION:n.DOTS_GREEDY,CONCATENATION:n.CONCATENATION,CAPTURE:"$(",GROUP:n.LEFT_PAREN,ALTERNATION:n.ALTERNATION,INTERSECTION:n.INTERSECTION,AND:n.AND,OR:n.OR,NOT:n.NOT,START:n.START,END:n.END,TRUE:n.TRUE,FALSE:n.FALSE,ERROR:n.ERROR};function i(t){return{type:t.type,value:t.value,children:t.children.slice(),range:{start:t.range.start,end:t.range.end}}}const a=function(t){return function(e){return t}},c=function(t,e){return t.node(e.type,e.value)},o=function(t,e,r){let n=[e];return n.push(t.parseExpression(r.tightness-1)),t.node(r.type,r.value,n)},h=function(t,e,r){if(!f(e))return t.error("Left hand side of token must be propositional",r,e);let n=[e];const s=t.parseExpression(r.tightness-1);return f(s)?(n.push(s),t.node(r.type,r.value,n)):t.error("Right hand side of token must be propositional",r,s)},u="$END",l=[{type:n.WHITESPACE,match:/^\s+/},{type:n.CONCATENATION,match:[n.CONCATENATION],tightness:100,extendParse:o},{type:n.DOTS_GREEDY,match:/^([0-9]*)\s*\.\.\.\s*([0-9]*)/,value:function(t){return{greedy:!0,lowerBound:t[1]?parseInt(t[1]):0,upperBound:t[2]?parseInt(t[2]):u}},tightness:110,startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.start,t.node(s.REPETITION,e.value,[r])},extendParse:function(t,e,r){return t.node(s.REPETITION,r.value,[e])}},{type:n.DOTS_RELUCTANT,match:/^([0-9]*)\s*\.\.\s*([0-9]*)/,tightness:110,value:function(t){return{greedy:!1,lowerBound:t[1]?parseInt(t[1]):0,upperBound:t[2]?parseInt(t[2]):u}},startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.start,t.node(s.REPETITION,e.value,[r])},extendParse:function(t,e,r){return t.node(s.REPETITION,r.value,[e])}},{type:n.DOTS_OMEGA,match:[n.DOTS_OMEGA],tightness:110,startParse:function(t,e){const r=t.node(s.TRUE,!0);return r.range.start=e.range.start,r.range.end=e.range.end,t.node(s.OMEGA,e.value,[r])},extendParse:function(t,e,r){return t.node(s.OMEGA,r.value,[e])}},{type:n.LEFT_PAREN,match:[n.LEFT_PAREN],startParse:function(t,e){const r=t.parseExpression(0);return t.currentToken().type!=n.RIGHT_PAREN?t.error("Missing right parenthesis",e,r):(t.advance(),t.node(s.GROUP,e.value,[r]))}},{type:n.RIGHT_PAREN,match:[n.RIGHT_PAREN]},{type:n.CAPTURING_LEFT_PAREN,match:/^\$([A-z_][A-z_0-9]*)?\(/,value:function(t){return{group:t[1]||"$implicit"}},startParse:function(t,e){const r=t.parseExpression(0);return t.currentToken().type!=n.RIGHT_PAREN?t.error("Missing right parenthesis",e,r):(t.advance(),t.node(s.CAPTURE,e.value,[r]))}},{type:n.ALTERNATION,match:[n.ALTERNATION],tightness:60,extendParse:o},{type:n.INTERSECTION,match:[n.INTERSECTION],tightness:50,extendParse:o},{type:n.AND,match:[n.AND],tightness:200,extendParse:h},{type:n.OR,match:[n.OR],tightness:210,extendParse:h},{type:n.NOT,match:[n.NOT],tightness:220,startParse:function(t,e){const r=t.parseExpression(e.tightness);return f(r)?t.node(e.type,e.value,[r]):t.error("NOT may only negate propositional state formulae",e,r)}},{type:n.START,match:[n.START],startParse:c},{type:n.END,match:[n.END],startParse:c},{type:n.TRUE,match:[n.TRUE],value:a(!0),startParse:c},{type:n.FALSE,match:[n.FALSE],value:a(!1),startParse:c},{type:n.ERROR,match:/^\S+/,startParse:c}],p=300,d="ERROR";function g(t){for(var e in s)if(s[e]==t.type)return!1;return!0}function f(t){return g(t)||t.type==s.AND||t.type==s.OR||t.type==s.NOT||t.type==s.TRUE||t.type==s.FALSE||t.type==s.START||t.type==s.END||(t.type==s.GROUP||t.type==s.CAPTURE)&&t.children.every(function(t){return f(t)})}class y{constructor(t){this.tokenDefinitions=[],this.tokensByType={},this.parseErrors=[];const e=t||[],r=e.concat(l);for(let t=0;t<r.length;t++){const n=r[t],s=n.tightness||0,i={type:n.type,match:n.match instanceof RegExp?n.match:"string"==typeof n.match?[n.match]:n.match,value:n.value||function(t){return t[0]},tightness:t<e.length?s+p:s,startParse:n.startParse||function(t,e){return t.error("Can't start a parse tree with this token",e)},extendParse:n.extendParse||function(t,e,r){return t.error("Can't extend a parse tree with this token",r,e)}};this.tokenDefinitions.push(i),this.tokensByType[i.type]=i}this.resetStream()}node(t,e,r=[]){return{type:t,value:e,children:r,range:{start:-1,end:-1}}}error(t,e,r){const n=this.node(d,{message:t,token:e,tree:r});return this.parseErrors.push(n),n}tokenize(t){let e=[],r=[],s=t,i=0;for(;s.length;)for(let t=0;t<this.tokenDefinitions.length;t++){const a=this.tokenDefinitions[t],c=a.match;let o={match:null,index:-1};if(c instanceof RegExp){let t=c.exec(s);t&&(o.match=t,o.index=t.index)}else if(Array.isArray(c))for(let t=0;t<c.length;t++){const e=c[t];s.substr(0,e.length)==e&&(o.match=[e],o.index=0)}if(o.match&&0==o.index){const t=o.match[0].length;s=s.substr(o.match[0].length);const c=i;i+=t,a.type!==n.WHITESPACE&&(a.type===n.ERROR&&r.push(e.length),e.push({type:a.type,value:a.value(o.match),tightness:a.tightness||0,range:{start:c,end:i}}));break}}return{string:t,tokens:e,position:0,errors:r}}resetStream(){this.stream={string:"",tokens:[],position:0,errors:[]}}charPosition(){return this.currentToken()?this.currentToken().range.start:this.stream.string.length}remainder(){const t=this.charPosition();return this.stream.string.substr(t)}currentToken(){return this.stream.tokens[this.stream.position]}advance(){this.stream.position++}parse(t){this.stream=this.tokenize(t),this.parseErrors=[];var e={tree:this.parseExpression(0),errors:this.parseErrors,remainder:this.remainder()};return this.parseErrors=[],this.resetStream(),e}parseExpression(t){let e=this.currentToken(),r=this.tokensByType[e.type];const n=e.range.start;this.advance();let s=r.startParse(this,e);if(s.range.start=n,s.range.end=this.charPosition(),s.type==d)return s;for(e=this.currentToken();e&&t<e.tightness;){r=this.tokensByType[e.type],this.advance();let t=r.extendParse(this,s,e);if(t.range.start=s.range.start,t.range.end=this.charPosition(),t.type==d)return t;s=t,e=this.currentToken()}return s}}let m=0;function E(){m=0}class T{constructor(){this.startStates=[new A],this.acceptingStates=[]}newState(t){return new A(t)}markAccepting(t){-1==this.acceptingStates.indexOf(t)&&this.acceptingStates.push(t),t.addEdge(new P(t,null,[])),t.isAccepting=!0}markNonAccepting(t){t.isAccepting=!1,-1!=this.acceptingStates.indexOf(t)&&this.acceptingStates.splice(this.acceptingStates.indexOf(t),1)}getStates(){let t={},e=this.startStates.slice();for(;e.length;){const r=e.pop();t[r.id]=r;for(let n in r.edges){let s=r.edges[n];!s.target||s.target.id in t||e.push(s.target)}}return Object.keys(t).map(e=>t[e])}toDot(){return"digraph g {\n  rankdir=LR;\n"+this.getStates().map(function(t){return["  "+t.id+` [shape=${t.isAccepting?"doublecircle":"circle"}];`].concat(t.edges.map(function(e,r){return"  "+t.id+"->"+e.target.id+` [label="${r}:${e.formula?x(e.formula):"&#949;"}:${e.label.map(t=>t.type+"."+t.group).join(",")}"];`})).join("\n")}).join("\n")+"\n}"}eelim(){let t=this.startStates.slice(),e={};for(let r=0;r<t.length;r++)e[t[r].id]=t[r];for(;t.length;){const r=t.pop();let n={[r.id]:r};for(let t=0;t<r.edges.length;t++){const e=r.edges[t];if(!(e.formula||r.isAccepting&&e.target==r)){if(e.target.id in n){r.edges.splice(t,1),t--;continue}{const n=e.target.edges.map(t=>new P(t.target==e.target&&null==t.formula?r:t.target,t.formula,e.label.concat(t.label)));e.target.isAccepting&&!r.isAccepting&&(this.acceptingStates.push(r),r.isAccepting=!0),r.edges.splice(t,1,...n)}}n[e.target.id]=e.target}for(let r in n)r in e||(t.push(n[r]),e[r]=n[r])}return this}intersect(t){this.eelim();const e=this;t.eelim();let r=new T;r.startStates=[];let n=[],i={};for(let s=0;s<e.startStates.length;s++){const a=e.startStates[s];for(let e=0;e<t.startStates.length;e++){const s=t.startStates[e];n.push([a,s]),a.id in i||(i[a.id]={});let c=r.newState(`a${a.id}x${s.id}b`);r.startStates.push(c),i[a.id][s.id]=c,a.isAccepting&&s.isAccepting&&r.markAccepting(c)}}for(;n.length;){const[t,e]=n.pop(),o=i[t.id][e.id];for(let h=0;h<t.edges.length;h++){const u=t.edges[h],l=u.target,p=t.isAccepting&&l==t&&!u.formula;for(let t=0;t<e.edges.length;t++){const h=e.edges[t],d=h.target;let g=null;if(p!=(e.isAccepting&&d==e&&!h.formula))continue;if(!(p||(u.formula&&h.formula||console.error("Uneliminated non ASE epsilon transition"),a=u.formula,c=h.formula,g={type:s.AND,value:"&",children:[a,c],range:{start:-1,end:-1}})))continue;let f=null;l.id in i&&d.id in i[l.id]?f=i[l.id][d.id]:(f=r.newState(`a${l.id}x${d.id}b`),l.id in i||(i[l.id]={}),i[l.id][d.id]=f,n.push([l,d]),l.isAccepting&&d.isAccepting&&(f.isAccepting=!0,r.acceptingStates.push(f))),o.addEdge(new P(f,g,u.label.concat(h.label)))}}}var a,c;return r}}class A{constructor(t){this.id=t||(m++).toString(10),this.edges=[],this.isAccepting=!1}addEdge(t){this.edges.push(t)}removeEdge(t){this.edges.splice(this.edges.indexOf(t),1)}}class P{constructor(t,e,r){this.target=t,this.formula=e,this.label=r}}function v(t){const e=new T,r=function t(e,r,n){if(f(n)&&n.type!=s.CAPTURE){const t=new P(null,n,[]);return r.addEdge(t),[t]}if(n.type==s.CONCATENATION){const s=t(e,r,n.children[0]),i=e.newState();for(let t=0;t<s.length;t++){let e=s[t];e.target=i}return t(e,i,n.children[1])}if(n.type==s.REPETITION){const a=n.value.greedy,c=n.value.lowerBound,o=n.value.upperBound,h=n.children[0];if(c>0){let a=i(n);a.value.lowerBound--,"$END"!=a.value.upperBound&&a.value.upperBound--;let c={type:s.CONCATENATION,value:",",children:[i(h),a],range:{start:a.range.start,end:a.range.end}};return t(e,r,c)}if("$END"!=o){let c=i(n);c.value.upperBound--;let u={type:s.CONCATENATION,value:",",children:[i(h),c],range:{start:c.range.start,end:c.range.end}};if(a){let n=[];n=0==o?n.concat([new P(null,h,[])]):n.concat(t(e,r,u));const s=new P(null,null,[]);return r.addEdge(s),n.push(s),n}{let n=[];const s=new P(null,null,[]);return r.addEdge(s),n.push(s),n=1==o?n.concat([new P(null,h,[])]):n.concat(t(e,r,u))}}if(a){let n=t(e,r,h);for(let t=0;t<n.length;t++){let e=n[t];e.target=r}const s=new P(null,null,[]);return r.addEdge(s),[s]}{const n=new P(null,null,[]);r.addEdge(n);let s=t(e,r,h);for(let t=0;t<s.length;t++){let e=s[t];e.target=r}return[n]}}if(n.type==s.GROUP){let s=e.newState();r.addEdge(new P(s,null,[]));const i=t(e,s,n.children[0]);return i}if(n.type==s.CAPTURE){let s=e.newState(),i={type:"start-capture",group:"$implicit"==n.value.group?s.id:n.value.group};r.addEdge(new P(s,null,[i]));const a=t(e,s,n.children[0]);for(let t=0;t<a.length;t++){let e=a[t];e.label.push({type:"end-capture",group:"$implicit"==n.value.group?s.id:n.value.group,start:i})}return a}if(n.type==s.ALTERNATION){const s=e.newState(),i=e.newState();r.addEdge(new P(s,null,[])),r.addEdge(new P(i,null,[]));const a=t(e,s,n.children[0]),c=t(e,i,n.children[1]);return a.concat(c)}if(n.type==s.INTERSECTION){const t=v(n.children[0]),s=v(n.children[1]),i=t.intersect(s),a=i.acceptingStates.slice();for(let t=0;t<i.startStates.length;t++)r.addEdge(new P(i.startStates[t],null,[]));let c=[];for(let t=0;t<a.length;t++){const r=a[t];e.markNonAccepting(r);for(let t=0;t<r.edges.length;t++)r.edges[t].target!=r||r.edges[t].formula||(r.edges[t].target=null,c.push(r.edges[t]))}return c}throw"Not yet implemented"}(e,e.startStates[0],t),n=e.newState();for(let t=0;t<r.length;t++){r[t].target=n}return e.markAccepting(n),e}const N=!1;class R{constructor(t){this.captureIdx=0}compileTree(t,e){if(t.type==s.GROUP)return this.compileTree(t.children[0],e);if(t.type==s.CAPTURE){const r=this.captureIdx,n="$implicit"==t.value.group?r:t.value.group,s={type:"start",group:n,captureID:r,index:e,source:t};this.captureIdx++;const i=this.compileTree(t.children[0],e+1),a={type:"end",group:n,captureID:r,index:e+1+i.length,source:t};return[s].concat(i).concat([a])}if(f(t))return[{type:"check",formula:t,index:e,source:t}];if(t.type==s.CONCATENATION){const r=e,n=this.compileTree(t.children[0],r),s=e+n.length,i=this.compileTree(t.children[1],s);return n.concat(i)}if(t.type==s.ALTERNATION){const r=e+1,n=this.compileTree(t.children[0],r),s=r+n.length+1,i=[{type:"split",left:r,right:s,index:e,source:t}],a=this.compileTree(t.children[1],s),c=[{type:"jump",target:s+a.length,index:r+n.length,source:t}];return i.concat(n).concat(c).concat(a)}if(t.type==s.INTERSECTION){const r=v(t.children[0]),n=v(t.children[1]),s=r.intersect(n);return this.compileSFA(s,e)}if(t.type==s.REPETITION){const r=t.value.greedy,n=t.value.lowerBound,s=t.children[0];let i=[];for(let t=0;t<n;t++){const t=this.compileTree(s,e);e+=t.length,i.push(...t)}if(t.value.upperBound!=u){const a=t.value.upperBound;let c=[],o=[];for(let t=n;t<a;t++){e+=1,o.push(e);const t=this.compileTree(s,e);e+=t.length,c.push(t)}let h=[];for(let n=0;n<c.length;n++)h.push({type:"split",left:r?o[n]:e,right:r?e:o[n],index:o[n]-1,source:t}),h.push(...c[n]);return i.concat(h)}{const n=e,a=n+1,c=this.compileTree(s,a),o=[{type:"jump",target:n,index:a+c.length,source:t}],h=a+c.length+1,u=[{type:"split",left:r?a:h,right:r?h:a,index:e,source:t}];return i.concat(u).concat(c).concat(o)}}throw new Error("Can't compile "+JSON.stringify(t))}compileSFA(t,e){let r={},n=[],s=[];for(let i=0;i<t.startStates.length;i++){const a=t.startStates[i],c=this.compileSFA_(a,e,r,n);s=s.concat(c),e+=c.length}for(let t=0;t<n.length;t++)n[t].target=e;return s}compileSFA_(t,e,r,n){if(t.id in r)return[{type:"jump",target:r[t.id],index:e,source:{type:"state",value:t.id}}];if(r[t.id]=e,0==t.edges.length){if(t.isAccepting){const r={type:"jump",target:null,index:e,source:{type:"state",value:t.id,children:[],range:{start:-1,end:-1}}};return n.push(r),[r]}throw new Error("Compiling an SFA state with no outgoing edges")}{let s=[];for(let i=0;i<t.edges.length-1;i++){const a=t.edges[i],c={type:"split",left:e+1,right:null,index:e,source:{type:"state",value:`${t.id}.${i}`,children:[],range:{start:-1,end:-1}}},o=[c].concat(this.compileSFA_edge(t,a,e+1,r,n));s=s.concat(o),e+=o.length,c.right=e}const i=t.edges[t.edges.length-1],a=this.compileSFA_edge(t,i,e,r,n);return s.concat(a)}}compileSFA_edge(t,e,r,n,s){const i=this.compileSFA_edgeLabel(t,e,r);if(r+=i.length,t.isAccepting&&e.target==t&&!e.formula){const n={type:"jump",target:null,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};return s.push(n),i.concat([n])}return e.formula?i.concat([{type:"check",formula:e.formula,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`}}]).concat(this.compileSFA_(e.target,r+1,n,s)):i.concat(this.compileSFA_(e.target,r,n,s))}compileSFA_edgeLabel(t,e,r){let n=[];for(let s=0;s<e.label.length;s++){const i=e.label[s];if("start-capture"==i.type){const s=this.captureIdx,a=i.group;i.captureID=s;const c={type:"start",group:a,captureID:s,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};this.captureIdx++,n.push(c),r++}else if("end-capture"==i.type){const s=i.start.captureID,a={type:"end",group:i.group,captureID:s,index:r,source:{type:"edge",value:`${t.id}->${e.target.id}`,children:[],range:{start:-1,end:-1}}};n.push(a),r++}}return n}compile(t,e=!1){if(!this.validateParseTree(t))throw new Error("Parse tree did not represent a valid program");E(),this.captureIdx=0;const r=[{type:"split",left:3,right:1,index:0,source:"root"},{type:"check",formula:{type:s.TRUE,value:!0,children:[],range:{start:0,end:0}},index:1,source:"root"},{type:"jump",target:0,index:2,source:"root"},{type:"start",group:"$root",captureID:-1,index:3,source:"root"}],n=this.compileTree(t,r.length),i=r.concat(n).concat([{type:"end",group:"$root",captureID:-1,index:r.length+n.length,source:"root"},{type:"match",index:r.length+n.length+1,source:"root"}]);if(!this.validateProgram(i))throw new Error("Error compiling tree "+JSON.stringify(t)+" into result "+JSON.stringify(i));if(!e)for(let t=0;t<i.length;t++)delete i[t].source,delete i[t].index;return i}validateParseTree(t){return!N||!this.anyCapturesInsidePropositions(t)}anyCapturesInsidePropositions(t){const e=f(t);for(let r=0;r<t.children.length;r++){const n=t.children[r];if(e&&n.type==s.CAPTURE)return console.log(`Can't put a capturing group inside of a propositional term: ${x(t)}!`),!0;if(this.anyCapturesInsidePropositions(n))return!0}return!1}validateProgram(t){if(!N)return!0;for(let e=0;e<t.length;e++){const r=t[e];if(r.index!==e)throw new Error(`Bad code generation:${r.index} != ${e} for ${S([r])} in ${S(t)}`)}const e=this.reachableInstructions(t,0,{});for(let r=0;r<t.length;r++)if(!e[r])throw new Error(`Bad code generation:${r} not reachable for ${S([t[r]])} in ${S(t)}`);return!0}reachableInstructions(t,e,r){if(e in r||e>=t.length)return r;r[e]=!0;const n=t[e];if("split"==n.type){let e=this.reachableInstructions(t,n.left,r);return this.reachableInstructions(t,n.right,e)}return"jump"==n.type?this.reachableInstructions(t,n.target,r):this.reachableInstructions(t,e+1,r)}}function I(t){const e=void 0===t.value?"":t.value.toString(),r=t.children&&t.children.length?t.children.map(t=>x(t)).join(","):"";return`${t.type}(${e},${r})`}function x(t){switch(t.type){case s.TRUE:return"true";case s.FALSE:return"false";case s.START:return"start";case s.END:return"end";case s.AND:return`${x(t.children[0])} & ${x(t.children[1])}`;case s.OR:return`${x(t.children[0])} | ${x(t.children[1])}`;case s.NOT:return`not ${x(t.children[0])}`;case s.GROUP:return`(${x(t.children[0])})`;case s.CAPTURE:return`$${t.value.captureID}:${t.value.group}(${x(t.children[0])})`;default:return I(t)}}function S(t){let e=[];for(let n=0;n<t.length;n++){const s=t[n];let i=`${n}:${s.type}`;switch(s.type){case"split":i+=` ${s.left} ${s.right}`;break;case"jump":i+=` ${s.target}`;break;case"check":i+=" "+x(s.formula);break;case"start":case"end":i+=` ${s.group} (${s.captureID})`;break;case"match":break;default:throw new Error("Unrecognized instruction "+s)}if(s.source){var r=s.source;"root"==r?i+="  \t\t(root)":"check"==s.type&&"range"in r?i+=`\t(ch. ${r.range.start}-${r.range.end})`:i+=`\t\t(${r.type} ${JSON.stringify(r.value)})`}e.push(i)}return e.join("\n")}class w{constructor(t,e,r=!1){this.context=e,this.spec=t;const n=new y(e.tokens),s=new R(e.tokens);if(this.parseResult=n.parse(t),this.parseResult.errors.length)throw new Error("Parsed with errors:"+JSON.stringify(this.parseResult.errors));this.program=s.compile(this.parseResult.tree,r)}get traceAPI(){return this.context.trace}get checkAPI(){return this.context.checks}check(t,e,r,n){var i,a;switch(n.type){case s.TRUE:return!0;case s.FALSE:return!1;case s.START:return 0==r;case s.END:return this.traceAPI.isAtEnd(t);case s.AND:return i=this.check(t,e,r,n.children[0]),a=this.check(t,e,r,n.children[1]),!(!i||!a)&&{node:n,left:i,right:a};case s.OR:return i=this.check(t,e,r,n.children[0]),a=this.check(t,e,r,n.children[1]),!(!i&&!a)&&{node:n,left:i,right:a};case s.NOT:return!this.check(t,e,r,n.children[0]);case s.GROUP:return this.check(t,e,r,n.children[0]);default:if(this.checkAPI[n.type])return this.checkAPI[n.type](t,e,r,n);throw new Error("Unrecognized propositional formula")}}match(t,e=!1){return new F({spec:this,preserveStates:e},function(t){return{queue:new _,nextQueue:new _,threads:[],liveSet:new k((t,e)=>t==e,t=>t),maxThreadID:0,index:-1,pastEnd:!1,trace:t,matchQueue:new U(t=>t.priority),matchSet:new k(b,D),lastMatchPriority:0}}(t),void 0).next()}}class O{constructor(t,e,r,n){this.id=t,this.pc=e,this.priority=r,this.matches=n.map(function(t){let e=C(t);return e.priority=Math.max(r,t.priority),e})}equals(t){return this.pc==t.pc}hash(){return this.pc}mergeThread(t){for(let e=0;e<t.matches.length;e++){let r=!1;for(let n=0;n<this.matches.length;n++)if(b(this.matches[n],t.matches[e])){r=!0;break}if(!r){let r=C(t.matches[e]);r.priority=Math.max(this.priority,this.matches[e].priority),this.matches.push(r)}}}hasOpenMatch(){for(let t=0;t<this.matches.length;t++)if(this.matches[t].instructions.length>0)return!0;return!1}hasExplicitMatch(){for(let t=0;t<this.matches.length;t++)if(this.matches[t].instructions.length>0&&-1!=this.matches[t].instructions[0].groupIndex)return!0;return!1}pushMatchInstruction(t){for(let e=0;e<this.matches.length;e++)this.matches[e].instructions.push(t)}terminate(){this.matches=[]}}class k{constructor(t,e,r=1e3){this.equiv=t,this.hash=e,this.coll=new Array(r),this.length=0}bucketFind(t,e){for(let r=0;r<t.length;r++)if(this.equiv?this.equiv(t[r].key,e):t[r].key==e)return t[r].val}push(t,e){const r=this.hash(t)%this.coll.length;let n=this.coll[r];if(n){if(void 0!==this.bucketFind(n,t))return!1;n.push({key:t,val:e})}else this.coll[r]=[{key:t,val:e}];return this.length++,!0}get(t){if(0==this.length)return;const e=this.hash(t)%this.coll.length;let r=this.coll[e];return r?this.bucketFind(r,t):void 0}clear(){for(let t=0;t<this.coll.length;t++)this.coll[t]=[];this.length=0}contains(t){if(0==this.length)return!1;const e=this.hash(t)%this.coll.length;let r=this.coll[e];return!!r&&void 0!==this.bucketFind(r,t)}}function $(t,e){return t+=0|e,t+=t<<10|0,t^=t>>6|0,t+=e>>8|0,t+=t<<10|0,t^=t>>6|0,t+=e>>16|0,t+=t<<10|0,t^=t>>6|0,t+=e>>24|0,t+=t<<10|0,t^=t>>6|0}const b=function(t,e){if(t.instructions.length!=e.instructions.length)return!1;for(let r=0;r<t.instructions.length;r++){const n=t.instructions[r],s=e.instructions[r];if(n.type!=s.type||n.index!=s.index||n.group!=s.group)return!1}return!0},D=function(t){return function(...t){let e=0;for(let r=0;r<t.length;r++)e=$(e,t[r]);return function(t){return t+=t<<3|0,t^=t>>11|0,t+=t<<15|0}(e)}(t.instructions.length)};function C(t){return{priority:t.priority,instructions:t.instructions.slice()}}class _{constructor(){this.array=[],this.length=0}push(t){this.array[this.length]=t,this.length++}clear(){this.length=0}get first(){if(0!=this.length)return this.array[0]}get(t){if(!(t<0||t>=this.length))return this.array[t]}}class U{constructor(t,e,r){this.queues=[],this.priorityFunction=t,this.length=0,this.lowestPriority=1/0,this.highestPriority=-1/0,this.members=e&&r?new k(e,r):void 0,this.clear()}push(t){const e=this.priorityFunction(t);if(this.members){if(this.members.contains(t))return!1;this.members.push(t,!0)}return e in this.queues?this.queues[e].push(t):this.queues[e]=[t],e<this.lowestPriority&&(this.lowestPriority=e),e>this.highestPriority&&(this.highestPriority=e),this.length++,!0}shift(){if(this.lowestPriority>=1/0||0==this.length)return;const t=this.queues[this.lowestPriority],e=t.pop();if(0==t.length)if(delete this.queues[this.lowestPriority],this.highestPriority<=this.lowestPriority)this.lowestPriority=1/0,this.highestPriority=-1/0;else for(;!this.queues[this.lowestPriority]&&this.lowestPriority<this.highestPriority;)this.lowestPriority++;return this.length--,e}get first(){if(0!=this.length)return this.queues[this.lowestPriority][0]}clear(){this.queues=[],this.lowestPriority=1/0,this.highestPriority=-1/0,this.length=0,this.members&&this.members.clear()}}const q=100;class F{constructor(t,e,r){if(this.config=t,this.state=e,-1==this.state.index){this.state.trace=this.config.spec.traceAPI.start(this.state.trace);let t=new O(0,0,0,[{priority:0,instructions:[]}]);this.enqueueThread(t);const e=this.state.queue;this.state.queue=this.state.nextQueue,this.state.nextQueue=e,this.state.liveSet.clear(),this.state.matchSet.clear(),this.state.index=0}this.match=r}get start(){return this.match?this.match.start:-1}get end(){return this.match?this.match.end:-1}get states(){return this.match?this.match.states:void 0}get subgroups(){return this.match?this.match.subgroups:void 0}hasReadyMatch(){return!!this.state.matchQueue.length&&(!this.state.queue.length||this.state.matchQueue.first.priority<=this.state.queue.first.priority)}enqueueThread(t){const e=this.config.spec.program[t.pc];switch(e.type){case"jump":return t.pc=e.target,void this.enqueueThread(t);case"split":this.state.maxThreadID++,t.pc=e.left;const r=new O(this.state.maxThreadID,e.right,t.priority+1,t.matches);return this.enqueueThread(t),void this.enqueueThread(r);case"start":return t.pushMatchInstruction({type:"start",index:this.state.index+1,group:e.group,groupIndex:e.captureID}),t.pc++,void this.enqueueThread(t);case"end":return t.pushMatchInstruction({type:"end",index:this.state.index+1,group:e.group,groupIndex:e.captureID}),t.pc++,void this.enqueueThread(t);case"match":for(let e=0;e<t.matches.length;e++)t.matches[e].priority>=t.priority&&this.state.matchSet.push(t.matches[e],!0)&&this.state.matchQueue.push(t.matches[e]);return void t.terminate();case"check":const n=t.hash();let s=this.state,i=s.liveSet.get(n);if(i){if(i.index!=s.index)i.index=s.index,i.threads.clear(),i.threads.push(t);else for(let e=0;e<i.threads.length;e++)if(i.threads.get(e).equals(t))return i.threads.get(e).mergeThread(t),void t.terminate()}else{let e=new _;e.push(t),s.liveSet.push(n,{index:s.index,threads:e})}return void s.nextQueue.push(t);default:throw new Error("Unrecognized instruction type ${instr.type}")}}prettifyMatch(t){let e=[],r={};for(let n=0;n<t.instructions.length;n++){const s=t.instructions[n];switch(s.type){case"start":let t={group:s.group,groupIndex:s.groupIndex,start:s.index,end:1/0,states:void 0,results:void 0};if(this.config.preserveStates&&(t.states=[],t.results=[]),e.push(t),r[t.group])throw new Error("Duplicate capture group");r[t.group]=t;break;case"state":let n=Object.getOwnPropertyNames(r);for(let t=0;t<n.length;t++){let e=r[n[t]];e.states.push(s.state),e.results.push(s.result)}break;case"end":r[s.group].end=s.index,delete r[s.group]}}let n=Object.getOwnPropertyNames(r);if(n.length)throw new Error(`Open capture groups: ${n.join(",")}`);let s=e.shift(),i={start:s.start,end:s.end,subgroups:e.filter(t=>t.start!=t.end),states:void 0,results:void 0};return this.config.preserveStates&&(i.states=s.states,i.results=s.results),i}next(){if(!this.state)throw new Error("Don't call next() on the same PlayspecResult twice!");for(;!this.hasReadyMatch()&&this.state.queue.length;){const t=this.config.spec.traceAPI.currentState(this.state.trace);let e=void 0;const r=this.state.queue.length;let n=0;for(let s=0;s<this.state.queue.length;s++){if(s>=r)throw new Error("The thread queue should never grow during a single trace state!");let i=this.state.queue.get(s);if(i.priority<n)throw new Error("Decreasing priority!");const a=this.config.spec.program[i.pc];switch(a.type){case"check":const r=this.config.spec.check(this.state.trace,t,this.state.index,a.formula);r?(i.pc++,i.hasOpenMatch()&&this.config.preserveStates&&(i.hasExplicitMatch()||"explicit"!=this.config.preserveStates)&&(e||(e=this.config.spec.traceAPI.copyCurrentState?this.config.spec.traceAPI.copyCurrentState(this.state.trace):t),i.pushMatchInstruction({type:"state",index:this.state.index,state:e,result:r})),this.enqueueThread(i)):i.terminate();break;default:throw new Error("Thread should be parked on a check.")}}let s=this.state.queue;if(this.state.queue=this.state.nextQueue,s.clear(),this.state.nextQueue=s,this.state.index%q==0&&this.state.liveSet.clear(),this.state.matchSet.clear(),this.config.spec.traceAPI.isAtEnd(this.state.trace)){this.config.spec.traceAPI.isStreaming&&this.config.spec.traceAPI.isStreaming(this.state.trace)||this.state.queue.clear();break}this.config.spec.traceAPI.advanceState(this.state.trace),this.state.index++}if(this.hasReadyMatch()){const t=this.state.matchQueue.shift();if(this.state.lastMatchPriority>t.priority)throw new Error("Matches popped out of order!");this.state.lastMatchPriority=t.priority;const e=this.prettifyMatch(t),r=this.state;return this.state=void 0,new F(this.config,r,e)}if(this.config.spec.traceAPI.isStreaming&&this.config.spec.traceAPI.isStreaming(this.state.trace)){const t=this.state;return this.state=void 0,new F(this.config,t,void 0)}return this.state=void 0,null}}r.d(e,"tokenTypes",function(){return n}),r.d(e,"parseTypes",function(){return s}),r.d(e,"cloneTree",function(){return i}),r.d(e,"constantValue",function(){return a}),r.d(e,"parseValue",function(){return c}),r.d(e,"parseInfixR",function(){return o}),r.d(e,"parseInfixRPropositional",function(){return h}),r.d(e,"BOUND_INFINITE",function(){return u}),r.d(e,"standardTokens",function(){return l}),r.d(e,"isCustom",function(){return g}),r.d(e,"isPropositional",function(){return f}),r.d(e,"Parser",function(){return y}),r.d(e,"Compiler",function(){return R}),r.d(e,"stringifyCustom",function(){return I}),r.d(e,"stringifyFormula",function(){return x}),r.d(e,"stringify",function(){return S}),r.d(e,"Playspec",function(){return w}),r.d(e,"SFA",function(){return T}),r.d(e,"fromParseTree",function(){return v}),r.d(e,"resetStateID",function(){return E})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9QbGF5c3BlY3Mvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vUGxheXNwZWNzLy4vc3JjL3BhcnNlci50cyIsIndlYnBhY2s6Ly9QbGF5c3BlY3MvLi9zcmMvc2ZhLnRzIiwid2VicGFjazovL1BsYXlzcGVjcy8uL3NyYy9jb21waWxlci50cyIsIndlYnBhY2s6Ly9QbGF5c3BlY3MvLi9zcmMvcGxheXNwZWMudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwidmFsdWUiLCJuIiwiX19lc01vZHVsZSIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInRva2VuVHlwZXMiLCJXSElURVNQQUNFIiwiQ09OQ0FURU5BVElPTiIsIkRPVFNfR1JFRURZIiwiRE9UU19SRUxVQ1RBTlQiLCJET1RTX09NRUdBIiwiTEVGVF9QQVJFTiIsIlJJR0hUX1BBUkVOIiwiQ0FQVFVSSU5HX0xFRlRfUEFSRU4iLCJBTFRFUk5BVElPTiIsIklOVEVSU0VDVElPTiIsIkFORCIsIk9SIiwiTk9UIiwiU1RBUlQiLCJFTkQiLCJUUlVFIiwiRkFMU0UiLCJFUlJPUiIsInBhcnNlVHlwZXMiLCJPTUVHQSIsIlJFUEVUSVRJT04iLCJDQVBUVVJFIiwiR1JPVVAiLCJjbG9uZVRyZWUiLCJ0eXBlIiwiY2hpbGRyZW4iLCJzbGljZSIsInJhbmdlIiwic3RhcnQiLCJlbmQiLCJjb25zdGFudFZhbHVlIiwiX21yIiwicGFyc2VWYWx1ZSIsInBhcnNlciIsInRva2VuIiwibm9kZSIsInBhcnNlSW5maXhSIiwibGVmdCIsInB1c2giLCJwYXJzZUV4cHJlc3Npb24iLCJ0aWdodG5lc3MiLCJwYXJzZUluZml4UlByb3Bvc2l0aW9uYWwiLCJpc1Byb3Bvc2l0aW9uYWwiLCJlcnJvciIsInJpZ2h0IiwiQk9VTkRfSU5GSU5JVEUiLCJzdGFuZGFyZFRva2VucyIsIm1hdGNoIiwiZXh0ZW5kUGFyc2UiLCJtYXRjaFJlc3VsdCIsImdyZWVkeSIsImxvd2VyQm91bmQiLCJwYXJzZUludCIsInVwcGVyQm91bmQiLCJzdGFydFBhcnNlIiwidHJ1ZVBoaSIsImV4cHIiLCJjdXJyZW50VG9rZW4iLCJhZHZhbmNlIiwiZ3JvdXAiLCJwaGkiLCJjdXN0b21UaWdodG5lc3NPZmZzZXQiLCJpc0N1c3RvbSIsImsiLCJldmVyeSIsIlBhcnNlciIsIltvYmplY3QgT2JqZWN0XSIsImNvbnRleHRUb2tlbnMiLCJ0aGlzIiwidG9rZW5EZWZpbml0aW9ucyIsInRva2Vuc0J5VHlwZSIsInBhcnNlRXJyb3JzIiwiY3VzdG9tVG9rZW5zIiwidG9rZW5zIiwiY29uY2F0IiwidGkiLCJsZW5ndGgiLCJpbnB1dCIsImRlZm4iLCJSZWdFeHAiLCJtciIsInBhcnNlVHJlZSIsInJlc2V0U3RyZWFtIiwibXNnIiwidHJlZSIsImVyciIsIm1lc3NhZ2UiLCJzdHIiLCJyZXN1bHQiLCJlcnJvcnMiLCJzdWJzdHJpbmciLCJpbmRleCIsInRva2VuRGVmaW5pdGlvbiIsImV4ZWNSZXN1bHQiLCJleGVjIiwiQXJyYXkiLCJpc0FycmF5IiwibWkiLCJjYW5kaWRhdGUiLCJzdWJzdHIiLCJtYXRjaExlbmd0aCIsIm9sZEluZGV4Iiwic3RyaW5nIiwicG9zaXRpb24iLCJzdHJlYW0iLCJjaGFyUG9zaXRpb24iLCJ0b2tlbml6ZSIsInJlbWFpbmRlciIsInRva2VuRGVmIiwibmV3VHJlZSIsInN0YXRlSUQiLCJyZXNldFN0YXRlSUQiLCJzZmFfU0ZBIiwic3RhcnRTdGF0ZXMiLCJTdGF0ZSIsImFjY2VwdGluZ1N0YXRlcyIsIm9wdElEIiwiaW5kZXhPZiIsImFkZEVkZ2UiLCJFZGdlIiwiaXNBY2NlcHRpbmciLCJzcGxpY2UiLCJmb3VuZCIsInN0YWNrIiwiaGVyZSIsInBvcCIsImlkIiwiZWsiLCJlZGdlcyIsImUiLCJ0YXJnZXQiLCJrZXlzIiwibWFwIiwiZ2V0U3RhdGVzIiwiZm9ybXVsYSIsInN0cmluZ2lmeUZvcm11bGEiLCJsYWJlbCIsImpvaW4iLCJzZWVuIiwic2siLCJyZWFjaGFibGUiLCJuZXdFcyIsInRlIiwicmsiLCJiIiwiZWVsaW0iLCJhIiwiYXhiIiwic3RhdGVzIiwic2EiLCJqIiwic2IiLCJzYXNiIiwibmV3U3RhdGUiLCJtYXJrQWNjZXB0aW5nIiwic2FiIiwiYWUiLCJhZXQiLCJhZUlzQWNjZXB0aW5nU2VsZkVkZ2UiLCJiZSIsImJldCIsImNvbnNvbGUiLCJwMSIsInAyIiwiY29tYmluZWQiLCJ0b1N0cmluZyIsImZyb21QYXJzZVRyZWUiLCJzZmEiLCJvdXRFZGdlcyIsImJ1aWxkIiwic2VlZFN0YXRlIiwiYWVzIiwibWluIiwibWF4IiwiY2xvbmVkIiwibmV4dCIsIm91dCIsImVzIiwiY2FwdHVyZVN0YXJ0IiwiYmVzIiwiaW50ZXJzZWN0Iiwib2xkQWNjZXB0aW5nIiwic3RhcnRrIiwiYWNjayIsImFjYyIsIm1hcmtOb25BY2NlcHRpbmciLCJlaSIsInRlcm1pbnVzIiwiREVCVUdfTU9ERSIsImNvbXBpbGVyX0NvbXBpbGVyIiwiX3Rva2VuRGVmcyIsImNhcHR1cmVJZHgiLCJpZHgiLCJjb21waWxlVHJlZSIsImNhcHR1cmVJRCIsInNvdXJjZSIsImFJZHgiLCJiSWR4IiwiYnJhbmNoIiwianVtcCIsImNvbXBpbGVTRkEiLCJwcmVmYWNlIiwicGhpUGdtIiwib3B0aW9uYWxzIiwidGFyZ2V0cyIsInJlcGV0aXRpb24iLCJjSWR4IiwiRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5Iiwic3RhdGVTdGFydHMiLCJlbmRKdW1wcyIsInBnbSIsInN0YXJ0UGdtIiwiY29tcGlsZVNGQV8iLCJzdGF0ZSIsImVkZ2UiLCJlZGdlU3BsaXQiLCJlZGdlUGdtIiwiY29tcGlsZVNGQV9lZGdlIiwiY29tcGlsZVNGQV9lZGdlTGFiZWwiLCJkZWJ1ZyIsInZhbGlkYXRlUGFyc2VUcmVlIiwiYm9keSIsInZhbGlkYXRlUHJvZ3JhbSIsImFueUNhcHR1cmVzSW5zaWRlUHJvcG9zaXRpb25zIiwicGFyZW50IiwicHJvcCIsImNpIiwiY2hpbGQiLCJsb2ciLCJpbnN0ciIsInJlYWNoYWJsZUluc3RydWN0aW9ucyIsImkwIiwib3RoZXIiLCJzZWVuTGVmdCIsInN0cmluZ2lmeUN1c3RvbSIsInVuZGVmaW5lZCIsImNvZGUiLCJpbnN0clN0ciIsInNyYyIsInBsYXlzcGVjX1BsYXlzcGVjIiwic3BlYyIsImNvbnRleHQiLCJjb21waWxlciIsInBhcnNlUmVzdWx0IiwicGFyc2UiLCJwcm9ncmFtIiwiY29tcGlsZSIsInRyYWNlQVBJIiwidHJhY2UiLCJjaGVja0FQSSIsImNoZWNrcyIsImlzQXRFbmQiLCJjaGVjayIsInByZXNlcnZlU3RhdGVzIiwiUGxheXNwZWNSZXN1bHQiLCJxdWV1ZSIsIk5vblNocmlua2luZ0FycmF5IiwibmV4dFF1ZXVlIiwidGhyZWFkcyIsImxpdmVTZXQiLCJOb25SZXBsYWNpbmdIYXNoTWFwIiwibWF4VGhyZWFkSUQiLCJwYXN0RW5kIiwibWF0Y2hRdWV1ZSIsIlByaW9yaXR5UXVldWUiLCJwcmlvcml0eSIsIm1hdGNoU2V0IiwibWF0Y2hFcXVpdkZuIiwibWF0Y2hIYXNoRm4iLCJsYXN0TWF0Y2hQcmlvcml0eSIsInBsYXlzcGVjUmVzdWx0U3RhdGVJbml0IiwiVGhyZWFkIiwicGMiLCJtYXRjaGVzIiwibTIiLCJjbG9uZU1hdGNoIiwiTWF0aCIsInQyIiwiaW5zdHJ1Y3Rpb25zIiwiZ3JvdXBJbmRleCIsImVxdWl2Rm4iLCJoYXNoRm4iLCJidWNrZXRDb3VudCIsImVxdWl2IiwiaGFzaCIsImNvbGwiLCJidWNrZXQiLCJvYmoiLCJrZXkiLCJ2YWwiLCJoYXNoQ29kZSIsImJ1Y2tldEZpbmQiLCJoYXNoSW50IiwiaCIsImludDMyIiwiaW5zQSIsImluc0IiLCJudW1iZXJzIiwiZmluYWxpemVIYXNoIiwiaGFzaE51bWJlcnMiLCJhcnJheSIsImZpcnN0IiwicGZuIiwicXVldWVzIiwicHJpb3JpdHlGdW5jdGlvbiIsImxvd2VzdFByaW9yaXR5IiwiSW5maW5pdHkiLCJoaWdoZXN0UHJpb3JpdHkiLCJtZW1iZXJzIiwiY2xlYXIiLCJjb250YWlucyIsInEiLCJMSVZFU0VUX0NMRUFSX0lOVEVSVkFMIiwiY29uZmlnIiwiaW5pdFRocmVhZCIsImVucXVldWVUaHJlYWQiLCJ0ZW1wIiwic3ViZ3JvdXBzIiwidGhyZWFkIiwidGhyZWFkMiIsInB1c2hNYXRjaEluc3RydWN0aW9uIiwidGVybWluYXRlIiwibGl2ZSIsImVxdWFscyIsIm1lcmdlVGhyZWFkIiwidGhyZWFkTGlzdCIsImdyb3VwcyIsImxpdmVHcm91cHMiLCJuZXdHIiwicmVzdWx0cyIsIm9wZW5Hcm91cHMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiZ2kiLCJjb250aW51ZWRHIiwicm9vdEdyb3VwIiwic2hpZnQiLCJyb290TWF0Y2giLCJmaWx0ZXIiLCJoYXNSZWFkeU1hdGNoIiwiY3VycmVudFN0YXRlIiwiY29waWVkU3RhdGUiLCJsaW1pdCIsImxhc3RQcmlvcml0eSIsInQiLCJjaGVja1Jlc3VsdCIsImhhc09wZW5NYXRjaCIsImhhc0V4cGxpY2l0TWF0Y2giLCJjb3B5Q3VycmVudFN0YXRlIiwiaXNTdHJlYW1pbmciLCJhZHZhbmNlU3RhdGUiLCJwcmV0dHlNYXRjaCIsInByZXR0aWZ5TWF0Y2giLCJuZXh0U3RhdGUiXSwibWFwcGluZ3MiOiIwQkFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixH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QUFLbUosV0FBUXNCLEVBQ04sSUFBSW1CLEVBQ1A1TCxLQUFLdVAsT0FDTHVDLE9BQ0FySCxHQUtSLE9BREF6SyxLQUFLbUosV0FBUXNCLEVBQ04iLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImltcG9ydCB7IFRva2VuRGVmaW5pdGlvbiwgVG9rZW4sIFBhcnNlVHJlZSwgTWF0Y2hSZXN1bHQsIElQYXJzZXIgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgdG9rZW5UeXBlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICBXSElURVNQQUNFOiBcIiBcIixcbiAgICBDT05DQVRFTkFUSU9OOiBcIixcIixcbiAgICAvLyBCb3VuZGluZyBpbnRlZ2VycyBhcmUgdG9rZW5pemVkIGFzIHBhcnQgb2YgdGhlIGRvdHMgdG8gbWluaW1pemUgcG90ZW50aWFsIGNvbmZsaWN0cyB3aXRoIHVzZXItcHJvdmlkZWQgc3ludGF4LlxuICAgIERPVFNfR1JFRURZOiBcIi4uLlwiLFxuICAgIERPVFNfUkVMVUNUQU5UOiBcIi4uXCIsXG4gICAgRE9UU19PTUVHQTogXCIqKipcIixcbiAgICBMRUZUX1BBUkVOOiBcIihcIixcbiAgICBSSUdIVF9QQVJFTjogXCIpXCIsXG4gICAgQ0FQVFVSSU5HX0xFRlRfUEFSRU46IFwiJChcIixcbiAgICBBTFRFUk5BVElPTjogXCI7XCIsXG4gICAgSU5URVJTRUNUSU9OOiBcIl5cIixcbiAgICBBTkQ6IFwiJlwiLFxuICAgIE9SOiBcInxcIixcbiAgICBOT1Q6IFwibm90XCIsXG4gICAgU1RBUlQ6IFwic3RhcnRcIixcbiAgICBFTkQ6IFwiZW5kXCIsXG4gICAgVFJVRTogXCJ0cnVlXCIsXG4gICAgRkFMU0U6IFwiZmFsc2VcIixcbiAgICBFUlJPUjogXCJlcnJvclwiXG59O1xuXG5leHBvcnQgY29uc3QgcGFyc2VUeXBlczogeyBba2V5OiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcbiAgICBPTUVHQTogdG9rZW5UeXBlcy5ET1RTX09NRUdBLFxuICAgIFJFUEVUSVRJT046IHRva2VuVHlwZXMuRE9UU19HUkVFRFksXG4gICAgQ09OQ0FURU5BVElPTjogdG9rZW5UeXBlcy5DT05DQVRFTkFUSU9OLFxuICAgIENBUFRVUkU6IFwiJChcIixcbiAgICBHUk9VUDogdG9rZW5UeXBlcy5MRUZUX1BBUkVOLFxuICAgIEFMVEVSTkFUSU9OOiB0b2tlblR5cGVzLkFMVEVSTkFUSU9OLFxuICAgIElOVEVSU0VDVElPTjogdG9rZW5UeXBlcy5JTlRFUlNFQ1RJT04sXG4gICAgQU5EOiB0b2tlblR5cGVzLkFORCxcbiAgICBPUjogdG9rZW5UeXBlcy5PUixcbiAgICBOT1Q6IHRva2VuVHlwZXMuTk9ULFxuICAgIFNUQVJUOiB0b2tlblR5cGVzLlNUQVJULFxuICAgIEVORDogdG9rZW5UeXBlcy5FTkQsXG4gICAgVFJVRTogdG9rZW5UeXBlcy5UUlVFLFxuICAgIEZBTFNFOiB0b2tlblR5cGVzLkZBTFNFLFxuICAgIEVSUk9SOiB0b2tlblR5cGVzLkVSUk9SXG59O1xuXG5cbmV4cG9ydCB0eXBlIFRva2VuU3RyZWFtID0ge1xuICAgIHN0cmluZzogc3RyaW5nLFxuICAgIHRva2VuczogQXJyYXk8VG9rZW4+LFxuICAgIHBvc2l0aW9uOiBudW1iZXIsXG4gICAgZXJyb3JzOiBBcnJheTxudW1iZXI+XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmVUcmVlKHA6IFBhcnNlVHJlZSk6IFBhcnNlVHJlZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogcC50eXBlLFxuICAgICAgICB2YWx1ZTogcC52YWx1ZSxcbiAgICAgICAgY2hpbGRyZW46IHAuY2hpbGRyZW4uc2xpY2UoKSxcbiAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgIHN0YXJ0OiBwLnJhbmdlLnN0YXJ0LFxuICAgICAgICAgICAgZW5kOiBwLnJhbmdlLmVuZFxuICAgICAgICB9XG4gICAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGNvbnN0YW50VmFsdWUgPSBmdW5jdGlvbiAoYzogYW55KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChfbXI6IE1hdGNoUmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBjO1xuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZVZhbHVlID0gZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKSB7XG4gICAgcmV0dXJuIHBhcnNlci5ub2RlKHRva2VuLnR5cGUsIHRva2VuLnZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBwYXJzZUluZml4UiA9IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIGxlZnQ6IFBhcnNlVHJlZSwgdG9rZW46IFRva2VuKSB7XG4gICAgbGV0IGNoaWxkcmVuID0gW2xlZnRdO1xuICAgIGNoaWxkcmVuLnB1c2gocGFyc2VyLnBhcnNlRXhwcmVzc2lvbih0b2tlbi50aWdodG5lc3MgLSAxKSk7XG4gICAgcmV0dXJuIHBhcnNlci5ub2RlKHRva2VuLnR5cGUsIHRva2VuLnZhbHVlLCBjaGlsZHJlbik7XG59O1xuXG5leHBvcnQgY29uc3QgcGFyc2VJbmZpeFJQcm9wb3NpdGlvbmFsID0gZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgbGVmdDogUGFyc2VUcmVlLCB0b2tlbjogVG9rZW4pIHtcbiAgICBpZiAoIWlzUHJvcG9zaXRpb25hbChsZWZ0KSkge1xuICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiTGVmdCBoYW5kIHNpZGUgb2YgdG9rZW4gbXVzdCBiZSBwcm9wb3NpdGlvbmFsXCIsIHRva2VuLCBsZWZ0KTtcbiAgICB9XG4gICAgbGV0IGNoaWxkcmVuID0gW2xlZnRdO1xuICAgIGNvbnN0IHJpZ2h0ID0gcGFyc2VyLnBhcnNlRXhwcmVzc2lvbih0b2tlbi50aWdodG5lc3MgLSAxKTtcbiAgICBpZiAoIWlzUHJvcG9zaXRpb25hbChyaWdodCkpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlci5lcnJvcihcIlJpZ2h0IGhhbmQgc2lkZSBvZiB0b2tlbiBtdXN0IGJlIHByb3Bvc2l0aW9uYWxcIiwgdG9rZW4sIHJpZ2h0KTtcbiAgICB9XG4gICAgY2hpbGRyZW4ucHVzaChyaWdodCk7XG4gICAgcmV0dXJuIHBhcnNlci5ub2RlKHRva2VuLnR5cGUsIHRva2VuLnZhbHVlLCBjaGlsZHJlbik7XG59O1xuXG5leHBvcnQgY29uc3QgQk9VTkRfSU5GSU5JVEUgPSBcIiRFTkRcIjtcblxuZXhwb3J0IGNvbnN0IHN0YW5kYXJkVG9rZW5zOiBBcnJheTxUb2tlbkRlZmluaXRpb24+ID0gW1xuICAgIHtcbiAgICAgICAgXCJ0eXBlXCI6IHRva2VuVHlwZXMuV0hJVEVTUEFDRSxcbiAgICAgICAgbWF0Y2g6IC9eXFxzKy9cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5DT05DQVRFTkFUSU9OLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuQ09OQ0FURU5BVElPTl0sXG4gICAgICAgIHRpZ2h0bmVzczogMTAwLFxuICAgICAgICBleHRlbmRQYXJzZTogcGFyc2VJbmZpeFJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5ET1RTX0dSRUVEWSxcbiAgICAgICAgbWF0Y2g6IC9eKFswLTldKilcXHMqXFwuXFwuXFwuXFxzKihbMC05XSopLyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChtYXRjaFJlc3VsdDogTWF0Y2hSZXN1bHQpOiBhbnkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBncmVlZHk6IHRydWUsXG4gICAgICAgICAgICAgICAgbG93ZXJCb3VuZDogbWF0Y2hSZXN1bHRbMV0gPyBwYXJzZUludChtYXRjaFJlc3VsdFsxXSkgOiAwLFxuICAgICAgICAgICAgICAgIHVwcGVyQm91bmQ6IG1hdGNoUmVzdWx0WzJdID8gcGFyc2VJbnQobWF0Y2hSZXN1bHRbMl0pIDogQk9VTkRfSU5GSU5JVEVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIHRpZ2h0bmVzczogMTEwLFxuICAgICAgICBzdGFydFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgY29uc3QgdHJ1ZVBoaSA9IHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuVFJVRSwgdHJ1ZSk7XG4gICAgICAgICAgICB0cnVlUGhpLnJhbmdlLnN0YXJ0ID0gdG9rZW4ucmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICB0cnVlUGhpLnJhbmdlLmVuZCA9IHRva2VuLnJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuUkVQRVRJVElPTiwgdG9rZW4udmFsdWUsIFt0cnVlUGhpXSk7XG4gICAgICAgIH0sXG4gICAgICAgIGV4dGVuZFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCBsZWZ0OiBQYXJzZVRyZWUsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLm5vZGUocGFyc2VUeXBlcy5SRVBFVElUSU9OLCB0b2tlbi52YWx1ZSwgW2xlZnRdKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkRPVFNfUkVMVUNUQU5ULFxuICAgICAgICBtYXRjaDogL14oWzAtOV0qKVxccypcXC5cXC5cXHMqKFswLTldKikvLFxuICAgICAgICB0aWdodG5lc3M6IDExMCxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChtYXRjaFJlc3VsdDogTWF0Y2hSZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ3JlZWR5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb3dlckJvdW5kOiBtYXRjaFJlc3VsdFsxXSA/IHBhcnNlSW50KG1hdGNoUmVzdWx0WzFdKSA6IDAsXG4gICAgICAgICAgICAgICAgdXBwZXJCb3VuZDogbWF0Y2hSZXN1bHRbMl0gPyBwYXJzZUludChtYXRjaFJlc3VsdFsyXSkgOiBCT1VORF9JTkZJTklURVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RhcnRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIGNvbnN0IHRydWVQaGkgPSBwYXJzZXIubm9kZShwYXJzZVR5cGVzLlRSVUUsIHRydWUpO1xuICAgICAgICAgICAgdHJ1ZVBoaS5yYW5nZS5zdGFydCA9IHRva2VuLnJhbmdlLnN0YXJ0O1xuICAgICAgICAgICAgdHJ1ZVBoaS5yYW5nZS5lbmQgPSB0b2tlbi5yYW5nZS5zdGFydDtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZShwYXJzZVR5cGVzLlJFUEVUSVRJT04sIHRva2VuLnZhbHVlLCBbdHJ1ZVBoaV0pO1xuICAgICAgICB9LFxuICAgICAgICBleHRlbmRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgbGVmdDogUGFyc2VUcmVlLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuUkVQRVRJVElPTiwgdG9rZW4udmFsdWUsIFtsZWZ0XSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5ET1RTX09NRUdBLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuRE9UU19PTUVHQV0sXG4gICAgICAgIHRpZ2h0bmVzczogMTEwLFxuICAgICAgICBzdGFydFBhcnNlOiBmdW5jdGlvbiAocGFyc2VyOiBJUGFyc2VyLCB0b2tlbjogVG9rZW4pOiBQYXJzZVRyZWUge1xuICAgICAgICAgICAgY29uc3QgdHJ1ZVBoaSA9IHBhcnNlci5ub2RlKHBhcnNlVHlwZXMuVFJVRSwgdHJ1ZSk7XG4gICAgICAgICAgICB0cnVlUGhpLnJhbmdlLnN0YXJ0ID0gdG9rZW4ucmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICB0cnVlUGhpLnJhbmdlLmVuZCA9IHRva2VuLnJhbmdlLmVuZDtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZShwYXJzZVR5cGVzLk9NRUdBLCB0b2tlbi52YWx1ZSwgW3RydWVQaGldKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXh0ZW5kUGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIGxlZnQ6IFBhcnNlVHJlZSwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZShwYXJzZVR5cGVzLk9NRUdBLCB0b2tlbi52YWx1ZSwgW2xlZnRdKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkxFRlRfUEFSRU4sXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5MRUZUX1BBUkVOXSxcbiAgICAgICAgc3RhcnRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIC8vcGFyc2UgYW4gZXhwcmVzc2lvbiBhdCBSQlAgMCwgdGhlbiBlYXQgYSApXG4gICAgICAgICAgICBjb25zdCBleHByID0gcGFyc2VyLnBhcnNlRXhwcmVzc2lvbigwKTtcbiAgICAgICAgICAgIGlmIChwYXJzZXIuY3VycmVudFRva2VuKCkudHlwZSAhPSB0b2tlblR5cGVzLlJJR0hUX1BBUkVOKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5lcnJvcihcIk1pc3NpbmcgcmlnaHQgcGFyZW50aGVzaXNcIiwgdG9rZW4sIGV4cHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLmFkdmFuY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZShwYXJzZVR5cGVzLkdST1VQLCB0b2tlbi52YWx1ZSwgW2V4cHJdKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLlJJR0hUX1BBUkVOLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuUklHSFRfUEFSRU5dXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuQ0FQVFVSSU5HX0xFRlRfUEFSRU4sXG4gICAgICAgIG1hdGNoOiAvXlxcJChbQS16X11bQS16XzAtOV0qKT9cXCgvLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKG1hdGNoUmVzdWx0OiBNYXRjaFJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBncm91cDogbWF0Y2hSZXN1bHRbMV0gfHwgXCIkaW1wbGljaXRcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RhcnRQYXJzZTogZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgdG9rZW46IFRva2VuKTogUGFyc2VUcmVlIHtcbiAgICAgICAgICAgIC8vcGFyc2UgYW4gZXhwcmVzc2lvbiBhdCBSQlAgMCwgdGhlbiBlYXQgYSApXG4gICAgICAgICAgICBjb25zdCBleHByID0gcGFyc2VyLnBhcnNlRXhwcmVzc2lvbigwKTtcbiAgICAgICAgICAgIGlmIChwYXJzZXIuY3VycmVudFRva2VuKCkudHlwZSAhPSB0b2tlblR5cGVzLlJJR0hUX1BBUkVOKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5lcnJvcihcIk1pc3NpbmcgcmlnaHQgcGFyZW50aGVzaXNcIiwgdG9rZW4sIGV4cHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLmFkdmFuY2UoKTtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZShwYXJzZVR5cGVzLkNBUFRVUkUsIHRva2VuLnZhbHVlLCBbZXhwcl0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuQUxURVJOQVRJT04sXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5BTFRFUk5BVElPTl0sXG4gICAgICAgIHRpZ2h0bmVzczogNjAsXG4gICAgICAgIGV4dGVuZFBhcnNlOiBwYXJzZUluZml4UlxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLklOVEVSU0VDVElPTixcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLklOVEVSU0VDVElPTl0sXG4gICAgICAgIHRpZ2h0bmVzczogNTAsXG4gICAgICAgIGV4dGVuZFBhcnNlOiBwYXJzZUluZml4UlxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkFORCxcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLkFORF0sXG4gICAgICAgIHRpZ2h0bmVzczogMjAwLFxuICAgICAgICBleHRlbmRQYXJzZTogcGFyc2VJbmZpeFJQcm9wb3NpdGlvbmFsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuT1IsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5PUl0sXG4gICAgICAgIHRpZ2h0bmVzczogMjEwLFxuICAgICAgICBleHRlbmRQYXJzZTogcGFyc2VJbmZpeFJQcm9wb3NpdGlvbmFsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuTk9ULFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuTk9UXSxcbiAgICAgICAgdGlnaHRuZXNzOiAyMjAsXG4gICAgICAgIHN0YXJ0UGFyc2U6IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbik6IFBhcnNlVHJlZSB7XG4gICAgICAgICAgICBjb25zdCBwaGkgPSBwYXJzZXIucGFyc2VFeHByZXNzaW9uKHRva2VuLnRpZ2h0bmVzcyk7XG4gICAgICAgICAgICBpZiAoIWlzUHJvcG9zaXRpb25hbChwaGkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5lcnJvcihcIk5PVCBtYXkgb25seSBuZWdhdGUgcHJvcG9zaXRpb25hbCBzdGF0ZSBmb3JtdWxhZVwiLCB0b2tlbiwgcGhpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIubm9kZSh0b2tlbi50eXBlLCB0b2tlbi52YWx1ZSwgW3BoaV0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuU1RBUlQsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5TVEFSVF0sXG4gICAgICAgIHN0YXJ0UGFyc2U6IHBhcnNlVmFsdWVcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5FTkQsXG4gICAgICAgIG1hdGNoOiBbdG9rZW5UeXBlcy5FTkRdLFxuICAgICAgICBzdGFydFBhcnNlOiBwYXJzZVZhbHVlXG4gICAgfSxcbiAgICB7XG4gICAgICAgIHR5cGU6IHRva2VuVHlwZXMuVFJVRSxcbiAgICAgICAgbWF0Y2g6IFt0b2tlblR5cGVzLlRSVUVdLFxuICAgICAgICB2YWx1ZTogY29uc3RhbnRWYWx1ZSh0cnVlKSxcbiAgICAgICAgc3RhcnRQYXJzZTogcGFyc2VWYWx1ZVxuICAgIH0sXG4gICAge1xuICAgICAgICB0eXBlOiB0b2tlblR5cGVzLkZBTFNFLFxuICAgICAgICBtYXRjaDogW3Rva2VuVHlwZXMuRkFMU0VdLFxuICAgICAgICB2YWx1ZTogY29uc3RhbnRWYWx1ZShmYWxzZSksXG4gICAgICAgIHN0YXJ0UGFyc2U6IHBhcnNlVmFsdWVcbiAgICB9LFxuICAgIHtcbiAgICAgICAgdHlwZTogdG9rZW5UeXBlcy5FUlJPUixcbiAgICAgICAgbWF0Y2g6IC9eXFxTKy8sXG4gICAgICAgIHN0YXJ0UGFyc2U6IHBhcnNlVmFsdWVcbiAgICB9XG5dO1xuXG5jb25zdCBjdXN0b21UaWdodG5lc3NPZmZzZXQgPSAzMDA7XG5cbmNvbnN0IEVSUk9SID0gXCJFUlJPUlwiO1xuXG5leHBvcnQgZnVuY3Rpb24gaXNDdXN0b20ocDogUGFyc2VUcmVlKTogYm9vbGVhbiB7XG4gICAgZm9yICh2YXIgayBpbiBwYXJzZVR5cGVzKSB7XG4gICAgICAgIGlmIChwYXJzZVR5cGVzW2tdID09IHAudHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNQcm9wb3NpdGlvbmFsKHA6IFBhcnNlVHJlZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc0N1c3RvbShwKSB8fFxuICAgICAgICBwLnR5cGUgPT0gcGFyc2VUeXBlcy5BTkQgfHxcbiAgICAgICAgcC50eXBlID09IHBhcnNlVHlwZXMuT1IgfHxcbiAgICAgICAgcC50eXBlID09IHBhcnNlVHlwZXMuTk9UIHx8XG4gICAgICAgIHAudHlwZSA9PSBwYXJzZVR5cGVzLlRSVUUgfHxcbiAgICAgICAgcC50eXBlID09IHBhcnNlVHlwZXMuRkFMU0UgfHxcbiAgICAgICAgcC50eXBlID09IHBhcnNlVHlwZXMuU1RBUlQgfHxcbiAgICAgICAgcC50eXBlID09IHBhcnNlVHlwZXMuRU5EIHx8XG4gICAgICAgICgocC50eXBlID09IHBhcnNlVHlwZXMuR1JPVVAgfHwgcC50eXBlID09IHBhcnNlVHlwZXMuQ0FQVFVSRSkgJiZcbiAgICAgICAgICAgIHAuY2hpbGRyZW4uZXZlcnkoZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNQcm9wb3NpdGlvbmFsKGMpO1xuICAgICAgICAgICAgfSkpO1xufVxuZXhwb3J0IHR5cGUgUGFyc2VSZXN1bHQgPSB7XG4gICAgdHJlZTogUGFyc2VUcmVlLFxuICAgIGVycm9yczogQXJyYXk8UGFyc2VUcmVlPixcbiAgICByZW1haW5kZXI6IHN0cmluZ1xufTtcbmV4cG9ydCBjbGFzcyBQYXJzZXIgaW1wbGVtZW50cyBJUGFyc2VyIHtcbiAgICBwdWJsaWMgdG9rZW5EZWZpbml0aW9uczogQXJyYXk8VG9rZW5EZWZpbml0aW9uPjtcbiAgICBwdWJsaWMgdG9rZW5zQnlUeXBlOiB7IFtrZXk6IHN0cmluZ106IFRva2VuRGVmaW5pdGlvbiB9O1xuICAgIHB1YmxpYyBwYXJzZUVycm9yczogQXJyYXk8UGFyc2VUcmVlPjtcbiAgICBwdWJsaWMgc3RyZWFtPzogVG9rZW5TdHJlYW07XG4gICAgY29uc3RydWN0b3IoY29udGV4dFRva2VuczogQXJyYXk8VG9rZW5EZWZpbml0aW9uPikge1xuICAgICAgICB0aGlzLnRva2VuRGVmaW5pdGlvbnMgPSBbXTtcbiAgICAgICAgdGhpcy50b2tlbnNCeVR5cGUgPSB7fTtcbiAgICAgICAgdGhpcy5wYXJzZUVycm9ycyA9IFtdO1xuICAgICAgICBjb25zdCBjdXN0b21Ub2tlbnMgPSBjb250ZXh0VG9rZW5zIHx8IFtdO1xuICAgICAgICBjb25zdCB0b2tlbnMgPSBjdXN0b21Ub2tlbnMuY29uY2F0KHN0YW5kYXJkVG9rZW5zKTtcbiAgICAgICAgZm9yIChsZXQgdGkgPSAwOyB0aSA8IHRva2Vucy5sZW5ndGg7IHRpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0OiBUb2tlbkRlZmluaXRpb24gPSB0b2tlbnNbdGldO1xuICAgICAgICAgICAgY29uc3QgdGlnaHRuZXNzOiBudW1iZXIgPSBpbnB1dC50aWdodG5lc3MgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGRlZm46IFRva2VuRGVmaW5pdGlvbiA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBpbnB1dC50eXBlLFxuICAgICAgICAgICAgICAgIG1hdGNoOiBpbnB1dC5tYXRjaCBpbnN0YW5jZW9mIFJlZ0V4cCA/IGlucHV0Lm1hdGNoIDpcbiAgICAgICAgICAgICAgICAgICAgKHR5cGVvZiAoaW5wdXQubWF0Y2gpID09ICdzdHJpbmcnKSA/IFtpbnB1dC5tYXRjaF0gOlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQubWF0Y2gsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGlucHV0LnZhbHVlIHx8IGZ1bmN0aW9uIChtcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbXJbMF07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aWdodG5lc3M6IHRpIDwgY3VzdG9tVG9rZW5zLmxlbmd0aCA/IHRpZ2h0bmVzcyArIGN1c3RvbVRpZ2h0bmVzc09mZnNldCA6IHRpZ2h0bmVzcyxcbiAgICAgICAgICAgICAgICBzdGFydFBhcnNlOiBpbnB1dC5zdGFydFBhcnNlIHx8IGZ1bmN0aW9uIChwYXJzZXI6IElQYXJzZXIsIHRva2VuOiBUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiQ2FuJ3Qgc3RhcnQgYSBwYXJzZSB0cmVlIHdpdGggdGhpcyB0b2tlblwiLCB0b2tlbik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBleHRlbmRQYXJzZTogaW5wdXQuZXh0ZW5kUGFyc2UgfHwgZnVuY3Rpb24gKHBhcnNlcjogSVBhcnNlciwgcGFyc2VUcmVlOiBQYXJzZVRyZWUsIHRva2VuOiBUb2tlbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VyLmVycm9yKFwiQ2FuJ3QgZXh0ZW5kIGEgcGFyc2UgdHJlZSB3aXRoIHRoaXMgdG9rZW5cIiwgdG9rZW4sIHBhcnNlVHJlZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMudG9rZW5EZWZpbml0aW9ucy5wdXNoKGRlZm4pO1xuICAgICAgICAgICAgdGhpcy50b2tlbnNCeVR5cGVbZGVmbi50eXBlXSA9IGRlZm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZXNldFN0cmVhbSgpO1xuICAgIH1cblxuICAgIG5vZGUodHlwZTogc3RyaW5nLCB2YWx1ZTogYW55ID0gdW5kZWZpbmVkLCBjaGlsZHJlbjogQXJyYXk8UGFyc2VUcmVlPiA9IFtdKTogUGFyc2VUcmVlIHtcbiAgICAgICAgcmV0dXJuIHsgdHlwZSwgdmFsdWUsIGNoaWxkcmVuLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfSB9O1xuICAgIH1cblxuICAgIGVycm9yKG1zZzogc3RyaW5nLCB0b2tlbjogVG9rZW4sIHRyZWU/OiBQYXJzZVRyZWUpOiBQYXJzZVRyZWUge1xuICAgICAgICBjb25zdCBlcnIgPSB0aGlzLm5vZGUoRVJST1IsIHsgbWVzc2FnZTogbXNnLCB0b2tlbiwgdHJlZSB9KTtcbiAgICAgICAgdGhpcy5wYXJzZUVycm9ycy5wdXNoKGVycik7XG4gICAgICAgIHJldHVybiBlcnI7XG4gICAgfVxuXG4gICAgdG9rZW5pemUoc3RyOiBzdHJpbmcpOiBUb2tlblN0cmVhbSB7XG4gICAgICAgIGxldCByZXN1bHQ6IEFycmF5PFRva2VuPiA9IFtdO1xuICAgICAgICBsZXQgZXJyb3JzOiBBcnJheTxudW1iZXI+ID0gW107XG4gICAgICAgIGxldCBzdWJzdHJpbmc6IHN0cmluZyA9IHN0cjtcbiAgICAgICAgbGV0IGluZGV4OiBudW1iZXIgPSAwO1xuICAgICAgICB3aGlsZSAoc3Vic3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yIChsZXQgdGkgPSAwOyB0aSA8IHRoaXMudG9rZW5EZWZpbml0aW9ucy5sZW5ndGg7IHRpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbkRlZmluaXRpb246IFRva2VuRGVmaW5pdGlvbiA9IHRoaXMudG9rZW5EZWZpbml0aW9uc1t0aV07XG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSB0b2tlbkRlZmluaXRpb24ubWF0Y2g7XG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoUmVzdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoOiBBcnJheTxzdHJpbmc+IHwgUmVnRXhwRXhlY0FycmF5IHwgbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlclxuICAgICAgICAgICAgICAgIH0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiAtMVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCBpbnN0YW5jZW9mIFJlZ0V4cCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZXhlY1Jlc3VsdCA9IG1hdGNoLmV4ZWMoc3Vic3RyaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4ZWNSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0Lm1hdGNoID0gZXhlY1Jlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0LmluZGV4ID0gZXhlY1Jlc3VsdC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtYXRjaCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbWkgPSAwOyBtaSA8IG1hdGNoLmxlbmd0aDsgbWkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gbWF0Y2hbbWldO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnN0cmluZy5zdWJzdHIoMCwgY2FuZGlkYXRlLmxlbmd0aCkgPT0gY2FuZGlkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQubWF0Y2ggPSBbY2FuZGlkYXRlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdC5pbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoUmVzdWx0Lm1hdGNoICYmIG1hdGNoUmVzdWx0LmluZGV4ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hMZW5ndGggPSBtYXRjaFJlc3VsdC5tYXRjaFswXS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHN1YnN0cmluZyA9IHN1YnN0cmluZy5zdWJzdHIobWF0Y2hSZXN1bHQubWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkSW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggKz0gbWF0Y2hMZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b2tlbkRlZmluaXRpb24udHlwZSAhPT0gdG9rZW5UeXBlcy5XSElURVNQQUNFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW5EZWZpbml0aW9uLnR5cGUgPT09IHRva2VuVHlwZXMuRVJST1IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChyZXN1bHQubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiB0b2tlbkRlZmluaXRpb24udHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdG9rZW5EZWZpbml0aW9uLnZhbHVlIShtYXRjaFJlc3VsdC5tYXRjaCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlnaHRuZXNzOiB0b2tlbkRlZmluaXRpb24udGlnaHRuZXNzIHx8IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IHsgc3RhcnQ6IG9sZEluZGV4LCBlbmQ6IGluZGV4IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdHJpbmc6IHN0ciwgdG9rZW5zOiByZXN1bHQsIHBvc2l0aW9uOiAwLCBlcnJvcnM6IGVycm9ycyB9O1xuICAgIH1cblxuICAgIHJlc2V0U3RyZWFtKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHsgc3RyaW5nOiBcIlwiLCB0b2tlbnM6IFtdLCBwb3NpdGlvbjogMCwgZXJyb3JzOiBbXSB9O1xuICAgIH1cblxuICAgIGNoYXJQb3NpdGlvbigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VG9rZW4oKSA/IHRoaXMuY3VycmVudFRva2VuKCkucmFuZ2Uuc3RhcnQgOiB0aGlzLnN0cmVhbSEuc3RyaW5nLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZW1haW5kZXIoKTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZW5kID0gdGhpcy5jaGFyUG9zaXRpb24oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtIS5zdHJpbmcuc3Vic3RyKGVuZCk7XG4gICAgfVxuXG4gICAgY3VycmVudFRva2VuKCk6IFRva2VuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RyZWFtIS50b2tlbnNbdGhpcy5zdHJlYW0hLnBvc2l0aW9uXTtcbiAgICB9XG5cbiAgICBhZHZhbmNlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0cmVhbSEucG9zaXRpb24rKztcbiAgICB9XG5cbiAgICBwYXJzZShzdHI6IHN0cmluZyk6IFBhcnNlUmVzdWx0IHtcbiAgICAgICAgdGhpcy5zdHJlYW0gPSB0aGlzLnRva2VuaXplKHN0cik7XG4gICAgICAgIHRoaXMucGFyc2VFcnJvcnMgPSBbXTtcbiAgICAgICAgY29uc3QgdHJlZSA9IHRoaXMucGFyc2VFeHByZXNzaW9uKDApO1xuICAgICAgICB2YXIgcmVzdWx0ID0geyB0cmVlLCBlcnJvcnM6IHRoaXMucGFyc2VFcnJvcnMsIHJlbWFpbmRlcjogdGhpcy5yZW1haW5kZXIoKSB9O1xuICAgICAgICB0aGlzLnBhcnNlRXJyb3JzID0gW107XG4gICAgICAgIHRoaXMucmVzZXRTdHJlYW0oKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBwYXJzZUV4cHJlc3Npb24odGlnaHRuZXNzOiBudW1iZXIpOiBQYXJzZVRyZWUge1xuICAgICAgICBsZXQgdG9rZW4gPSB0aGlzLmN1cnJlbnRUb2tlbigpO1xuICAgICAgICBsZXQgdG9rZW5EZWYgPSB0aGlzLnRva2Vuc0J5VHlwZVt0b2tlbi50eXBlXTtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSB0b2tlbi5yYW5nZS5zdGFydDtcbiAgICAgICAgdGhpcy5hZHZhbmNlKCk7XG4gICAgICAgIGxldCB0cmVlID0gdG9rZW5EZWYuc3RhcnRQYXJzZSEodGhpcywgdG9rZW4pO1xuICAgICAgICB0cmVlLnJhbmdlLnN0YXJ0ID0gc3RhcnQ7XG4gICAgICAgIHRyZWUucmFuZ2UuZW5kID0gdGhpcy5jaGFyUG9zaXRpb24oKTtcbiAgICAgICAgaWYgKHRyZWUudHlwZSA9PSBFUlJPUikge1xuICAgICAgICAgICAgcmV0dXJuIHRyZWU7XG4gICAgICAgIH1cbiAgICAgICAgdG9rZW4gPSB0aGlzLmN1cnJlbnRUb2tlbigpO1xuICAgICAgICB3aGlsZSAodG9rZW4gJiYgdGlnaHRuZXNzIDwgdG9rZW4udGlnaHRuZXNzKSB7XG4gICAgICAgICAgICB0b2tlbkRlZiA9IHRoaXMudG9rZW5zQnlUeXBlW3Rva2VuLnR5cGVdO1xuICAgICAgICAgICAgdGhpcy5hZHZhbmNlKCk7XG4gICAgICAgICAgICBsZXQgbmV3VHJlZSA9IHRva2VuRGVmLmV4dGVuZFBhcnNlISh0aGlzLCB0cmVlLCB0b2tlbik7XG4gICAgICAgICAgICBuZXdUcmVlLnJhbmdlLnN0YXJ0ID0gdHJlZS5yYW5nZS5zdGFydDtcbiAgICAgICAgICAgIG5ld1RyZWUucmFuZ2UuZW5kID0gdGhpcy5jaGFyUG9zaXRpb24oKTtcbiAgICAgICAgICAgIGlmIChuZXdUcmVlLnR5cGUgPT0gRVJST1IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3VHJlZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRyZWUgPSBuZXdUcmVlO1xuICAgICAgICAgICAgdG9rZW4gPSB0aGlzLmN1cnJlbnRUb2tlbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cmVlO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHsgcGFyc2VUeXBlcywgaXNQcm9wb3NpdGlvbmFsLCBjbG9uZVRyZWUgfSBmcm9tIFwiLi9wYXJzZXJcIjtcbmltcG9ydCB7IFBhcnNlVHJlZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBzdHJpbmdpZnlGb3JtdWxhIH0gZnJvbSBcIi4vY29tcGlsZXJcIjtcbmxldCBzdGF0ZUlEID0gMDtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0U3RhdGVJRCgpIHtcbiAgICBzdGF0ZUlEID0gMDtcbn1cblxuZXhwb3J0IGNsYXNzIFNGQSB7XG4gICAgc3RhcnRTdGF0ZXM6IFN0YXRlW107XG4gICAgYWNjZXB0aW5nU3RhdGVzOiBTdGF0ZVtdO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0YXJ0U3RhdGVzID0gW25ldyBTdGF0ZSgpXTtcbiAgICAgICAgdGhpcy5hY2NlcHRpbmdTdGF0ZXMgPSBbXTtcbiAgICB9XG5cbiAgICBuZXdTdGF0ZShvcHRJRD86IHN0cmluZykge1xuICAgICAgICByZXR1cm4gbmV3IFN0YXRlKG9wdElEKTtcbiAgICB9XG5cbiAgICBtYXJrQWNjZXB0aW5nKHM6IFN0YXRlKSB7XG4gICAgICAgIC8vYWRkIHRvIGFjY2VwdGluZ1N0YXRlc1xuICAgICAgICBpZiAodGhpcy5hY2NlcHRpbmdTdGF0ZXMuaW5kZXhPZihzKSA9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5hY2NlcHRpbmdTdGF0ZXMucHVzaChzKTtcbiAgICAgICAgfVxuICAgICAgICAvL2FkZCBhY2NlcHRpbmcgc2VsZi1lZGdlXG4gICAgICAgIHMuYWRkRWRnZShuZXcgRWRnZShzLCBudWxsLCBbXSkpO1xuICAgICAgICAvL21hcmsgYWNjZXB0aW5nXG4gICAgICAgIHMuaXNBY2NlcHRpbmcgPSB0cnVlO1xuICAgIH1cblxuICAgIG1hcmtOb25BY2NlcHRpbmcoczogU3RhdGUpIHtcbiAgICAgICAgLy9tYXJrIG5vbi1hY2NlcHRpbmdcbiAgICAgICAgcy5pc0FjY2VwdGluZyA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5hY2NlcHRpbmdTdGF0ZXMuaW5kZXhPZihzKSAhPSAtMSkge1xuICAgICAgICAgICAgLy9yZW1vdmUgZnJvbSBhY2NlcHRpbmdTdGF0ZXNcbiAgICAgICAgICAgIHRoaXMuYWNjZXB0aW5nU3RhdGVzLnNwbGljZSh0aGlzLmFjY2VwdGluZ1N0YXRlcy5pbmRleE9mKHMpLCAxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldFN0YXRlcygpIHtcbiAgICAgICAgbGV0IGZvdW5kOiB7IFtpZDogc3RyaW5nXTogU3RhdGUgfSA9IHt9O1xuICAgICAgICBsZXQgc3RhY2sgPSB0aGlzLnN0YXJ0U3RhdGVzLnNsaWNlKCk7XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGhlcmU6IFN0YXRlID0gc3RhY2sucG9wKCkhO1xuICAgICAgICAgICAgZm91bmRbaGVyZS5pZF0gPSBoZXJlO1xuICAgICAgICAgICAgZm9yIChsZXQgZWsgaW4gaGVyZS5lZGdlcykge1xuICAgICAgICAgICAgICAgIGxldCBlID0gaGVyZS5lZGdlc1tla107XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICYmICEoZS50YXJnZXQuaWQgaW4gZm91bmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goZS50YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoZm91bmQpLm1hcCgoaykgPT4gZm91bmRba10pO1xuICAgIH1cblxuICAgIHRvRG90KCkge1xuICAgICAgICBjb25zdCBzdGFydCA9IFwiZGlncmFwaCBnIHtcXG5cIiArXG4gICAgICAgICAgICBcIiAgcmFua2Rpcj1MUjtcXG5cIjtcbiAgICAgICAgY29uc3QgbWlkZGxlID0gdGhpcy5nZXRTdGF0ZXMoKS5tYXAoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBbXCIgIFwiICsgcy5pZCArIGAgW3NoYXBlPSR7cy5pc0FjY2VwdGluZyA/IFwiZG91YmxlY2lyY2xlXCIgOiBcImNpcmNsZVwifV07YF0uY29uY2F0KFxuICAgICAgICAgICAgICAgIHMuZWRnZXMubWFwKGZ1bmN0aW9uIChlLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIiAgXCIgKyBzLmlkICsgXCItPlwiICsgZS50YXJnZXQhLmlkICtcbiAgICAgICAgICAgICAgICAgICAgICAgIGAgW2xhYmVsPVwiJHtpfToke2UuZm9ybXVsYSA/IHN0cmluZ2lmeUZvcm11bGEoZS5mb3JtdWxhKSA6IFwiJiM5NDk7XCJ9OiR7ZS5sYWJlbC5tYXAoKGwpID0+IGwudHlwZSArIFwiLlwiICsgbC5ncm91cCkuam9pbihcIixcIil9XCJdO2A7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICkuam9pbihcIlxcblwiKTtcbiAgICAgICAgfSkuam9pbihcIlxcblwiKTtcbiAgICAgICAgY29uc3QgZW5kID0gXCJcXG59XCI7XG4gICAgICAgIHJldHVybiBzdGFydCArIG1pZGRsZSArIGVuZDtcbiAgICB9XG5cbiAgICBlZWxpbSgpIHtcbiAgICAgICAgbGV0IHN0YWNrID0gdGhpcy5zdGFydFN0YXRlcy5zbGljZSgpLFxuICAgICAgICAgICAgc2VlbjogeyBbaWQ6IHN0cmluZ106IFN0YXRlIH0gPSB7fTtcbiAgICAgICAgZm9yIChsZXQgc2sgPSAwOyBzayA8IHN0YWNrLmxlbmd0aDsgc2srKykge1xuICAgICAgICAgICAgc2VlbltzdGFja1tza10uaWRdID0gc3RhY2tbc2tdO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBzdGFjay5wb3AoKSE7XG4gICAgICAgICAgICBsZXQgcmVhY2hhYmxlID0geyBbcy5pZF06IHMgfTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5lZGdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBzLmVkZ2VzW2ldO1xuICAgICAgICAgICAgICAgIC8vZSBpcyBhIG51bGwgdHJhbnNpdGlvbiBidXQgbm90IGFuIGFjY2VwdGluZyBudWxsIHRyYW5zaXRpb25cbiAgICAgICAgICAgICAgICBpZiAoIWUuZm9ybXVsYSAmJiAhKHMuaXNBY2NlcHRpbmcgJiYgZS50YXJnZXQgPT0gcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0IS5pZCBpbiByZWFjaGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMuZWRnZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRFcyA9IGUudGFyZ2V0IS5lZGdlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0VzID0gdGFyZ2V0RXMubWFwKCh0ZSkgPT4gbmV3IEVkZ2UodGUudGFyZ2V0ID09IGUudGFyZ2V0ICYmIHRlLmZvcm11bGEgPT0gbnVsbCA/IHMgOiB0ZS50YXJnZXQsIHRlLmZvcm11bGEsIGUubGFiZWwuY29uY2F0KHRlLmxhYmVsKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0IS5pc0FjY2VwdGluZyAmJiAhcy5pc0FjY2VwdGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWNjZXB0aW5nU3RhdGVzLnB1c2gocyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5pc0FjY2VwdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzLmVkZ2VzLnNwbGljZShpLCAxLCAuLi5uZXdFcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVhY2hhYmxlW2UudGFyZ2V0IS5pZF0gPSBlLnRhcmdldCE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCByayBpbiByZWFjaGFibGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShyayBpbiBzZWVuKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKHJlYWNoYWJsZVtya10pO1xuICAgICAgICAgICAgICAgICAgICBzZWVuW3JrXSA9IHJlYWNoYWJsZVtya107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGludGVyc2VjdChiOiBTRkEpOiBTRkEge1xuICAgICAgICB0aGlzLmVlbGltKCk7XG4gICAgICAgIGNvbnN0IGEgPSB0aGlzO1xuICAgICAgICBiLmVlbGltKCk7XG4gICAgICAgIGxldCBheGIgPSBuZXcgU0ZBKCk7XG4gICAgICAgIGF4Yi5zdGFydFN0YXRlcyA9IFtdO1xuICAgICAgICBsZXQgc3RhY2s6IFN0YXRlW11bXSA9IFtdLCBzdGF0ZXM6IHsgW2lkOiBzdHJpbmddOiB7IFtpZDogc3RyaW5nXTogU3RhdGUgfSB9ID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYS5zdGFydFN0YXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc2EgPSBhLnN0YXJ0U3RhdGVzW2ldO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiLnN0YXJ0U3RhdGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2IgPSBiLnN0YXJ0U3RhdGVzW2pdO1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goW3NhLCBzYl0pO1xuICAgICAgICAgICAgICAgIGlmICghKHNhLmlkIGluIHN0YXRlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVzW3NhLmlkXSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgc2FzYiA9IGF4Yi5uZXdTdGF0ZShgYSR7c2EuaWR9eCR7c2IuaWR9YmApO1xuICAgICAgICAgICAgICAgIGF4Yi5zdGFydFN0YXRlcy5wdXNoKHNhc2IpO1xuICAgICAgICAgICAgICAgIHN0YXRlc1tzYS5pZF1bc2IuaWRdID0gc2FzYjtcbiAgICAgICAgICAgICAgICBpZiAoc2EuaXNBY2NlcHRpbmcgJiYgc2IuaXNBY2NlcHRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXhiLm1hcmtBY2NlcHRpbmcoc2FzYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IFtzYSwgc2JdID0gc3RhY2sucG9wKCkhO1xuICAgICAgICAgICAgY29uc3Qgc2FiID0gc3RhdGVzW3NhLmlkXVtzYi5pZF07XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNhLmVkZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWUgPSBzYS5lZGdlc1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBhZXQgPSBhZS50YXJnZXQhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFlSXNBY2NlcHRpbmdTZWxmRWRnZSA9IHNhLmlzQWNjZXB0aW5nICYmIGFldCA9PSBzYSAmJiAhYWUuZm9ybXVsYTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNiLmVkZ2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJlID0gc2IuZWRnZXNbal07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJldCA9IGJlLnRhcmdldCE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJlSXNBY2NlcHRpbmdTZWxmRWRnZSA9IHNiLmlzQWNjZXB0aW5nICYmIGJldCA9PSBzYiAmJiAhYmUuZm9ybXVsYTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBoaSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhZUlzQWNjZXB0aW5nU2VsZkVkZ2UgIT0gYmVJc0FjY2VwdGluZ1NlbGZFZGdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghYWVJc0FjY2VwdGluZ1NlbGZFZGdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFlLmZvcm11bGEgfHwgIWJlLmZvcm11bGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5lbGltaW5hdGVkIG5vbiBBU0UgZXBzaWxvbiB0cmFuc2l0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGhpID0gaW50ZXJzZWN0Rm9ybXVsYWUoYWUuZm9ybXVsYSEsIGJlLmZvcm11bGEhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGhpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbWJpbmVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFldC5pZCBpbiBzdGF0ZXMgJiYgYmV0LmlkIGluIHN0YXRlc1thZXQuaWRdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21iaW5lZCA9IHN0YXRlc1thZXQuaWRdW2JldC5pZF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21iaW5lZCA9IGF4Yi5uZXdTdGF0ZShgYSR7YWV0LmlkfXgke2JldC5pZH1iYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShhZXQuaWQgaW4gc3RhdGVzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlc1thZXQuaWRdID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXNbYWV0LmlkXVtiZXQuaWRdID0gY29tYmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjay5wdXNoKFthZXQsIGJldF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFldC5pc0FjY2VwdGluZyAmJiBiZXQuaXNBY2NlcHRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL25vIG5lZWQgZm9yIG1hcmthY2NlcHRpbmcgb3IgdG8gY2hlY2sgbWVtYmVyc2hpcCBvZiBjb21iaW5lZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Zvcm1lciBiZWNhdXNlIHdlJ2xsIGdldCB0aGUgYWNjZXB0aW5nIHNlbGYgZWRnZXMgZm9yIGZyZWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2xhdHRlciBiZWNhdXNlIHRoaXMgc3RhdGUgaXMgYnkgZGVmaW5pdGlvbiBuZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21iaW5lZC5pc0FjY2VwdGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXhiLmFjY2VwdGluZ1N0YXRlcy5wdXNoKGNvbWJpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzYWIuYWRkRWRnZShuZXcgRWRnZShjb21iaW5lZCwgcGhpLCBhZS5sYWJlbC5jb25jYXQoYmUubGFiZWwpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBheGI7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpbnRlcnNlY3RGb3JtdWxhZShwMTogUGFyc2VUcmVlLCBwMjogUGFyc2VUcmVlKSB7XG4gICAgLy90b2RvOiBmaXhtZTogaW1wbGVtZW50IGZvciByZWFsXG4gICAgcmV0dXJuIHsgdHlwZTogcGFyc2VUeXBlcy5BTkQsIHZhbHVlOiBcIiZcIiwgY2hpbGRyZW46IFtwMSwgcDJdLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfSB9O1xufVxuXG5leHBvcnQgY2xhc3MgU3RhdGUge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZWRnZXM6IEVkZ2VbXTtcbiAgICBpc0FjY2VwdGluZzogYm9vbGVhbjtcbiAgICBjb25zdHJ1Y3RvcihpZD86IHN0cmluZykge1xuICAgICAgICB0aGlzLmlkID0gaWQgfHwgKHN0YXRlSUQrKykudG9TdHJpbmcoMTApO1xuICAgICAgICB0aGlzLmVkZ2VzID0gW107XG4gICAgICAgIHRoaXMuaXNBY2NlcHRpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRFZGdlKGU6IEVkZ2UpIHtcbiAgICAgICAgdGhpcy5lZGdlcy5wdXNoKGUpO1xuICAgIH1cblxuICAgIHJlbW92ZUVkZ2UoZTogRWRnZSkge1xuICAgICAgICB0aGlzLmVkZ2VzLnNwbGljZSh0aGlzLmVkZ2VzLmluZGV4T2YoZSksIDEpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEVkZ2Uge1xuICAgIHRhcmdldDogU3RhdGUgfCBudWxsO1xuICAgIGZvcm11bGE6IFBhcnNlVHJlZSB8IG51bGw7XG4gICAgbGFiZWw6IGFueVtdO1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldDogU3RhdGUgfCBudWxsLCBmb3JtdWxhOiBQYXJzZVRyZWUgfCBudWxsLCBsYWJlbDogYW55W10pIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMuZm9ybXVsYSA9IGZvcm11bGE7XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUGFyc2VUcmVlKHRyZWU6IFBhcnNlVHJlZSkge1xuICAgIGNvbnN0IHNmYSA9IG5ldyBTRkEoKTtcbiAgICBjb25zdCBzID0gc2ZhLnN0YXJ0U3RhdGVzWzBdO1xuICAgIGNvbnN0IG91dEVkZ2VzID0gYnVpbGQoc2ZhLCBzLCB0cmVlKTtcbiAgICBjb25zdCB0ZXJtaW51cyA9IHNmYS5uZXdTdGF0ZSgpO1xuICAgIGZvciAobGV0IGVrID0gMDsgZWsgPCBvdXRFZGdlcy5sZW5ndGg7IGVrKyspIHtcbiAgICAgICAgY29uc3QgZSA9IG91dEVkZ2VzW2VrXTtcbiAgICAgICAgZS50YXJnZXQgPSB0ZXJtaW51cztcbiAgICB9XG4gICAgc2ZhLm1hcmtBY2NlcHRpbmcodGVybWludXMpO1xuICAgIHJldHVybiBzZmE7XG59XG5cbmZ1bmN0aW9uIGJ1aWxkKHNmYTogU0ZBLCBzZWVkU3RhdGU6IFN0YXRlLCB0cmVlOiBQYXJzZVRyZWUpOiBFZGdlW10ge1xuICAgIGlmIChpc1Byb3Bvc2l0aW9uYWwodHJlZSkgJiYgdHJlZS50eXBlICE9IHBhcnNlVHlwZXMuQ0FQVFVSRSkge1xuICAgICAgICBjb25zdCBlID0gbmV3IEVkZ2UobnVsbCwgdHJlZSwgW10pO1xuICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShlKTtcbiAgICAgICAgcmV0dXJuIFtlXTtcbiAgICB9IGVsc2UgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkNPTkNBVEVOQVRJT04pIHtcbiAgICAgICAgY29uc3QgYWVzID0gYnVpbGQoc2ZhLCBzZWVkU3RhdGUsIHRyZWUuY2hpbGRyZW5bMF0pO1xuICAgICAgICBjb25zdCBzID0gc2ZhLm5ld1N0YXRlKCk7XG4gICAgICAgIGZvciAobGV0IGVrID0gMDsgZWsgPCBhZXMubGVuZ3RoOyBlaysrKSB7XG4gICAgICAgICAgICBsZXQgZSA9IGFlc1tla107XG4gICAgICAgICAgICBlLnRhcmdldCA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1aWxkKHNmYSwgcywgdHJlZS5jaGlsZHJlblsxXSk7XG4gICAgfSBlbHNlIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5SRVBFVElUSU9OKSB7XG4gICAgICAgIGNvbnN0IGdyZWVkeSA9IHRyZWUudmFsdWUuZ3JlZWR5O1xuICAgICAgICBjb25zdCBtaW4gPSB0cmVlLnZhbHVlLmxvd2VyQm91bmQ7XG4gICAgICAgIGNvbnN0IG1heCA9IHRyZWUudmFsdWUudXBwZXJCb3VuZDtcbiAgICAgICAgY29uc3QgcGhpID0gdHJlZS5jaGlsZHJlblswXTtcbiAgICAgICAgaWYgKG1pbiA+IDApIHtcbiAgICAgICAgICAgIGxldCBjbG9uZWQgPSBjbG9uZVRyZWUodHJlZSk7XG4gICAgICAgICAgICBjbG9uZWQudmFsdWUubG93ZXJCb3VuZC0tO1xuICAgICAgICAgICAgaWYgKGNsb25lZC52YWx1ZS51cHBlckJvdW5kICE9IFwiJEVORFwiKSB7XG4gICAgICAgICAgICAgICAgY2xvbmVkLnZhbHVlLnVwcGVyQm91bmQtLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuZXh0ID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlVHlwZXMuQ09OQ0FURU5BVElPTixcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCIsXCIsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtjbG9uZVRyZWUocGhpKSwgY2xvbmVkXSxcbiAgICAgICAgICAgICAgICByYW5nZTogeyBzdGFydDogY2xvbmVkLnJhbmdlLnN0YXJ0LCBlbmQ6IGNsb25lZC5yYW5nZS5lbmQgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBidWlsZChzZmEsIHNlZWRTdGF0ZSwgbmV4dCk7XG4gICAgICAgIH0gZWxzZSBpZiAobWF4ICE9IFwiJEVORFwiKSB7XG4gICAgICAgICAgICBsZXQgY2xvbmVkID0gY2xvbmVUcmVlKHRyZWUpO1xuICAgICAgICAgICAgY2xvbmVkLnZhbHVlLnVwcGVyQm91bmQtLTtcbiAgICAgICAgICAgIGxldCBuZXh0ID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHBhcnNlVHlwZXMuQ09OQ0FURU5BVElPTixcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCIsXCIsXG4gICAgICAgICAgICAgICAgY2hpbGRyZW46IFtjbG9uZVRyZWUocGhpKSwgY2xvbmVkXSxcbiAgICAgICAgICAgICAgICByYW5nZTogeyBzdGFydDogY2xvbmVkLnJhbmdlLnN0YXJ0LCBlbmQ6IGNsb25lZC5yYW5nZS5lbmQgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vTG90cyBvZiBkdXBsaWNhdGlvbiBoZXJlIHdoZW4gb25seSBvcmRlcmluZ3MgYXJlIGNoYW5nZWQuIE5vdCBzbyBwcm91ZCBvZiBpdFxuICAgICAgICAgICAgLy9idXQgbGV0J3MganVzdCBtYWtlIHN1cmUgaXQncyB3b3JraW5nIGZpcnN0LlxuICAgICAgICAgICAgaWYgKGdyZWVkeSkge1xuICAgICAgICAgICAgICAgIGxldCBlZGdlczogRWRnZVtdID0gW107XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzID0gZWRnZXMuY29uY2F0KFtuZXcgRWRnZShudWxsLCBwaGksIFtdKV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVkZ2VzID0gZWRnZXMuY29uY2F0KGJ1aWxkKHNmYSwgc2VlZFN0YXRlLCBuZXh0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG91dCA9IG5ldyBFZGdlKG51bGwsIG51bGwsIFtdKTtcbiAgICAgICAgICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShvdXQpO1xuICAgICAgICAgICAgICAgIGVkZ2VzLnB1c2gob3V0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWRnZXM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBlZGdlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dCA9IG5ldyBFZGdlKG51bGwsIG51bGwsIFtdKTtcbiAgICAgICAgICAgICAgICBzZWVkU3RhdGUuYWRkRWRnZShvdXQpO1xuICAgICAgICAgICAgICAgIGVkZ2VzLnB1c2gob3V0KTtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRnZXMgPSBlZGdlcy5jb25jYXQoW25ldyBFZGdlKG51bGwsIHBoaSwgW10pXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWRnZXMgPSBlZGdlcy5jb25jYXQoYnVpbGQoc2ZhLCBzZWVkU3RhdGUsIG5leHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVkZ2VzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGdyZWVkeSkge1xuICAgICAgICAgICAgICAgIGxldCBlZGdlcyA9IGJ1aWxkKHNmYSwgc2VlZFN0YXRlLCBwaGkpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGVrID0gMDsgZWsgPCBlZGdlcy5sZW5ndGg7IGVrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGUgPSBlZGdlc1tla107XG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0ID0gc2VlZFN0YXRlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IEVkZ2UobnVsbCwgbnVsbCwgW10pO1xuICAgICAgICAgICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbZV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRWRnZShudWxsLCBudWxsLCBbXSk7XG4gICAgICAgICAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UoZSk7XG4gICAgICAgICAgICAgICAgbGV0IGVkZ2VzID0gYnVpbGQoc2ZhLCBzZWVkU3RhdGUsIHBoaSk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZWsgPSAwOyBlayA8IGVkZ2VzLmxlbmd0aDsgZWsrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IGVkZ2VzW2VrXTtcbiAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQgPSBzZWVkU3RhdGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkdST1VQKSB7XG4gICAgICAgIGxldCBzID0gc2ZhLm5ld1N0YXRlKCk7XG4gICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKG5ldyBFZGdlKHMsIG51bGwsIFtdKSk7XG4gICAgICAgIGNvbnN0IGVzID0gYnVpbGQoc2ZhLCBzLCB0cmVlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgcmV0dXJuIGVzO1xuICAgIH0gZWxzZSBpZiAodHJlZS50eXBlID09IHBhcnNlVHlwZXMuQ0FQVFVSRSkge1xuICAgICAgICBsZXQgcyA9IHNmYS5uZXdTdGF0ZSgpO1xuICAgICAgICAvL2hhY2s6IHdlIHN0b3JlIGEgbGluayBmcm9tIHRoZSBlbmQgdG8gaXRzIGNvcnJlc3BvbmRpbmcgc3RhcnRcbiAgICAgICAgLy9zbyB0aGF0IHRoZSBjb3JyZWN0IGNhcHR1cmVJRCBjYW4gYmUgcHJvcGFnYXRlZCB0byB0aGUgXCJlbmRcIlxuICAgICAgICAvL2Zyb20gdGhlIFwic3RhcnRcIiBkdXJpbmcgY29tcGlsYXRpb25cbiAgICAgICAgbGV0IGNhcHR1cmVTdGFydCA9IHsgdHlwZTogXCJzdGFydC1jYXB0dXJlXCIsIGdyb3VwOiAodHJlZS52YWx1ZS5ncm91cCA9PSBcIiRpbXBsaWNpdFwiID8gcy5pZCA6IHRyZWUudmFsdWUuZ3JvdXApIH07XG4gICAgICAgIHNlZWRTdGF0ZS5hZGRFZGdlKG5ldyBFZGdlKHMsIG51bGwsIFtjYXB0dXJlU3RhcnRdKSk7XG4gICAgICAgIGNvbnN0IGVzID0gYnVpbGQoc2ZhLCBzLCB0cmVlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgZm9yIChsZXQgZWsgPSAwOyBlayA8IGVzLmxlbmd0aDsgZWsrKykge1xuICAgICAgICAgICAgbGV0IGUgPSBlc1tla107XG4gICAgICAgICAgICBlLmxhYmVsLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwiZW5kLWNhcHR1cmVcIixcbiAgICAgICAgICAgICAgICBncm91cDogKHRyZWUudmFsdWUuZ3JvdXAgPT0gXCIkaW1wbGljaXRcIiA/IHMuaWQgOiB0cmVlLnZhbHVlLmdyb3VwKSxcbiAgICAgICAgICAgICAgICBzdGFydDogY2FwdHVyZVN0YXJ0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXM7XG4gICAgfSBlbHNlIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5BTFRFUk5BVElPTikge1xuICAgICAgICBjb25zdCBhID0gc2ZhLm5ld1N0YXRlKCk7XG4gICAgICAgIGNvbnN0IGIgPSBzZmEubmV3U3RhdGUoKTtcbiAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UobmV3IEVkZ2UoYSwgbnVsbCwgW10pKTtcbiAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UobmV3IEVkZ2UoYiwgbnVsbCwgW10pKTtcbiAgICAgICAgY29uc3QgYWVzID0gYnVpbGQoc2ZhLCBhLCB0cmVlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgY29uc3QgYmVzID0gYnVpbGQoc2ZhLCBiLCB0cmVlLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgcmV0dXJuIGFlcy5jb25jYXQoYmVzKTtcbiAgICB9IGVsc2UgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLklOVEVSU0VDVElPTikge1xuICAgICAgICBjb25zdCBhID0gZnJvbVBhcnNlVHJlZSh0cmVlLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgY29uc3QgYiA9IGZyb21QYXJzZVRyZWUodHJlZS5jaGlsZHJlblsxXSk7XG4gICAgICAgIGNvbnN0IGF4YiA9IGEuaW50ZXJzZWN0KGIpO1xuICAgICAgICBjb25zdCBvbGRBY2NlcHRpbmcgPSBheGIuYWNjZXB0aW5nU3RhdGVzLnNsaWNlKCk7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJTdXBwb3NlZCBhY2NlcHRpbmc6XCIsIG9sZEFjY2VwdGluZywgXCJhY3R1YWxcIixcbiAgICAgICAgLy8gICAgYXhiLmdldFN0YXRlcygpLmZpbHRlcigocykgPT4gcy5pc0FjY2VwdGluZylcbiAgICAgICAgLy8pO1xuICAgICAgICBmb3IgKGxldCBzdGFydGsgPSAwOyBzdGFydGsgPCBheGIuc3RhcnRTdGF0ZXMubGVuZ3RoOyBzdGFydGsrKykge1xuICAgICAgICAgICAgc2VlZFN0YXRlLmFkZEVkZ2UobmV3IEVkZ2UoYXhiLnN0YXJ0U3RhdGVzW3N0YXJ0a10sIG51bGwsIFtdKSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG91dEVkZ2VzID0gW107XG4gICAgICAgIGZvciAobGV0IGFjY2sgPSAwOyBhY2NrIDwgb2xkQWNjZXB0aW5nLmxlbmd0aDsgYWNjaysrKSB7XG4gICAgICAgICAgICBjb25zdCBhY2MgPSBvbGRBY2NlcHRpbmdbYWNja107XG4gICAgICAgICAgICBzZmEubWFya05vbkFjY2VwdGluZyhhY2MpO1xuICAgICAgICAgICAgLy9maW5kIHRoZSBzZWxmLWVkZ2UgYW5kIHJlcG9pbnQgaXQgdG93YXJkcyBub3RoaW5nLCBpbmNsdWRpbmcgaXQgaW4gb3V0RWRnZXNcbiAgICAgICAgICAgIGZvciAobGV0IGVpID0gMDsgZWkgPCBhY2MuZWRnZXMubGVuZ3RoOyBlaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFjYy5lZGdlc1tlaV0udGFyZ2V0ID09IGFjYyAmJiAhYWNjLmVkZ2VzW2VpXS5mb3JtdWxhKSB7XG4gICAgICAgICAgICAgICAgICAgIGFjYy5lZGdlc1tlaV0udGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgb3V0RWRnZXMucHVzaChhY2MuZWRnZXNbZWldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiUE9TVCBzdXBwb3NlZCBhY2NlcHRpbmc6XCIsIHNmYS5hY2NlcHRpbmdTdGF0ZXMsIFwiYWN0dWFsXCIsXG4gICAgICAgIC8vICAgIHNmYS5nZXRTdGF0ZXMoKS5maWx0ZXIoKHMpID0+IHMuaXNBY2NlcHRpbmcpXG4gICAgICAgIC8vKTtcblxuICAgICAgICByZXR1cm4gb3V0RWRnZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgXCJOb3QgeWV0IGltcGxlbWVudGVkXCI7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgcGFyc2VUeXBlcywgaXNQcm9wb3NpdGlvbmFsLCBCT1VORF9JTkZJTklURSB9IGZyb20gXCIuL3BhcnNlclwiO1xuaW1wb3J0IHsgZnJvbVBhcnNlVHJlZSwgcmVzZXRTdGF0ZUlELCBTRkEsIFN0YXRlLCBFZGdlIH0gZnJvbSBcIi4vc2ZhXCI7XG5pbXBvcnQgeyBUb2tlbkRlZmluaXRpb24sIFBhcnNlVHJlZSB9IGZyb20gXCIuL3R5cGVzXCI7XG50eXBlIEp1bXAgPSB7IHR5cGU6IFwianVtcFwiLCB0YXJnZXQ6IG51bWJlciB8IG51bGwsIGluZGV4PzogbnVtYmVyLCBzb3VyY2U/OiBcInJvb3RcIiB8IFBhcnNlVHJlZSB9O1xudHlwZSBTcGxpdCA9IHsgdHlwZTogXCJzcGxpdFwiLCBsZWZ0OiBudW1iZXIsIHJpZ2h0OiBudW1iZXIgfCBudWxsLCBpbmRleD86IG51bWJlciwgc291cmNlPzogXCJyb290XCIgfCBQYXJzZVRyZWUgfTtcbnR5cGUgU3RhcnQgPSB7IHR5cGU6IFwic3RhcnRcIiwgZ3JvdXA6IHN0cmluZyB8IG51bWJlciwgY2FwdHVyZUlEOiBudW1iZXIsIGluZGV4PzogbnVtYmVyLCBzb3VyY2U/OiBcInJvb3RcIiB8IFBhcnNlVHJlZSB9O1xudHlwZSBNYXRjaCA9IHsgdHlwZTogXCJtYXRjaFwiLCBpbmRleD86IG51bWJlciwgc291cmNlPzogXCJyb290XCIgfCBQYXJzZVRyZWUgfTtcbnR5cGUgRW5kID0geyB0eXBlOiBcImVuZFwiLCBncm91cDogc3RyaW5nIHwgbnVtYmVyLCBjYXB0dXJlSUQ6IG51bWJlciwgaW5kZXg/OiBudW1iZXIsIHNvdXJjZT86IFwicm9vdFwiIHwgUGFyc2VUcmVlIH07XG50eXBlIENoZWNrID0geyB0eXBlOiBcImNoZWNrXCIsIGZvcm11bGE6IFBhcnNlVHJlZSwgaW5kZXg/OiBudW1iZXIsIHNvdXJjZT86IFwicm9vdFwiIHwgUGFyc2VUcmVlIH07XG50eXBlIEluc3RydWN0aW9uID1cbiAgICBDaGVjayB8XG4gICAgSnVtcCB8XG4gICAgU3BsaXQgfFxuICAgIE1hdGNoIHxcbiAgICBTdGFydCB8XG4gICAgRW5kO1xuZXhwb3J0IHR5cGUgUHJvZ3JhbSA9IEFycmF5PEluc3RydWN0aW9uPjtcblxuY29uc3QgREVCVUdfTU9ERSA9IGZhbHNlO1xuXG5leHBvcnQgY2xhc3MgQ29tcGlsZXIge1xuICAgIGNhcHR1cmVJZHg6IG51bWJlcjtcbiAgICBjb25zdHJ1Y3RvcihfdG9rZW5EZWZzOiBBcnJheTxUb2tlbkRlZmluaXRpb24+KSB7XG4gICAgICAgIHRoaXMuY2FwdHVyZUlkeCA9IDA7XG4gICAgfVxuXG4gICAgY29tcGlsZVRyZWUodHJlZTogUGFyc2VUcmVlLCBpZHg6IG51bWJlcik6IFByb2dyYW0ge1xuICAgICAgICAvL2NvbnNvbGUubG9nKGBjb21waWxlICR7dHJlZS50eXBlfSBhdCBpbmRleCAke2lkeH1gKTtcbiAgICAgICAgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkdST1VQKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21waWxlVHJlZSh0cmVlLmNoaWxkcmVuWzBdLCBpZHgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5DQVBUVVJFKSB7XG4gICAgICAgICAgICBjb25zdCBjYXB0dXJlSUQgPSB0aGlzLmNhcHR1cmVJZHg7XG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRyZWUudmFsdWUuZ3JvdXAgPT0gXCIkaW1wbGljaXRcIiA/IGNhcHR1cmVJRCA6IHRyZWUudmFsdWUuZ3JvdXA7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IHsgdHlwZTogXCJzdGFydFwiLCBncm91cDogZ3JvdXAsIGNhcHR1cmVJRDogY2FwdHVyZUlELCBpbmRleDogaWR4LCBzb3VyY2U6IHRyZWUgfTtcbiAgICAgICAgICAgIHRoaXMuY2FwdHVyZUlkeCsrO1xuICAgICAgICAgICAgY29uc3QgY2hpbGRyZW46IEFycmF5PEluc3RydWN0aW9uPiA9IHRoaXMuY29tcGlsZVRyZWUodHJlZS5jaGlsZHJlblswXSwgaWR4ICsgMSk7XG4gICAgICAgICAgICBjb25zdCBlbmQgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJlbmRcIixcbiAgICAgICAgICAgICAgICBncm91cDogZ3JvdXAsXG4gICAgICAgICAgICAgICAgY2FwdHVyZUlEOiBjYXB0dXJlSUQsXG4gICAgICAgICAgICAgICAgaW5kZXg6IGlkeCArIDEgKyBjaGlsZHJlbi5sZW5ndGgsXG4gICAgICAgICAgICAgICAgc291cmNlOiB0cmVlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIChbc3RhcnRdIGFzIFByb2dyYW0pLmNvbmNhdChjaGlsZHJlbikuY29uY2F0KFtlbmRdIGFzIFByb2dyYW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Byb3Bvc2l0aW9uYWwodHJlZSkpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJ0cmVlIFwiICsgSlNPTi5zdHJpbmdpZnkodHJlZSkgKyBcIjpcIiArIHRyZWUudHlwZSArIFwiIGlzIHByb3Bvc2l0aW9uYWxcIik7XG4gICAgICAgICAgICByZXR1cm4gW3sgdHlwZTogXCJjaGVja1wiLCBmb3JtdWxhOiB0cmVlLCBpbmRleDogaWR4LCBzb3VyY2U6IHRyZWUgfV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLkNPTkNBVEVOQVRJT04pIHtcbiAgICAgICAgICAgIGNvbnN0IGFJZHggPSBpZHg7XG4gICAgICAgICAgICBjb25zdCBhID0gdGhpcy5jb21waWxlVHJlZSh0cmVlLmNoaWxkcmVuWzBdLCBhSWR4KTtcbiAgICAgICAgICAgIGNvbnN0IGJJZHggPSBpZHggKyBhLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLmNvbXBpbGVUcmVlKHRyZWUuY2hpbGRyZW5bMV0sIGJJZHgpO1xuICAgICAgICAgICAgcmV0dXJuIGEuY29uY2F0KGIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmVlLnR5cGUgPT0gcGFyc2VUeXBlcy5BTFRFUk5BVElPTikge1xuICAgICAgICAgICAgLy8gYnJhbmNoOyBidXQgbmVlZCB0byBjb21waWxlIGxlZnQgZmlyc3QuXG4gICAgICAgICAgICAvLyBsZWZ0OlxuICAgICAgICAgICAgY29uc3QgYUlkeCA9IGlkeCArIDE7XG4gICAgICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcy5jb21waWxlVHJlZSh0cmVlLmNoaWxkcmVuWzBdLCBhSWR4KTtcbiAgICAgICAgICAgIGNvbnN0IGJJZHggPSBhSWR4ICsgbGVmdC5sZW5ndGggKyAxOyAvLyBMZWF2ZSByb29tIGZvciBqdW1wIGFmdGVyIGxlZnRcbiAgICAgICAgICAgIC8vIG5vdyB3ZSBjYW4gZGVmaW5lIGJyYW5jaCwgd2hpY2ggZ29lcyBiZWZvcmUgbGVmdDpcbiAgICAgICAgICAgIGNvbnN0IGJyYW5jaDogUHJvZ3JhbSA9IFt7IHR5cGU6IFwic3BsaXRcIiwgbGVmdDogYUlkeCwgcmlnaHQ6IGJJZHgsIGluZGV4OiBpZHgsIHNvdXJjZTogdHJlZSB9XTtcbiAgICAgICAgICAgIC8vIHJpZ2h0OlxuICAgICAgICAgICAgY29uc3QgcmlnaHQgPSB0aGlzLmNvbXBpbGVUcmVlKHRyZWUuY2hpbGRyZW5bMV0sIGJJZHgpO1xuICAgICAgICAgICAgY29uc3QgY0lkeCA9IGJJZHggKyByaWdodC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBqdW1wOiBQcm9ncmFtID0gW3sgdHlwZTogXCJqdW1wXCIsIHRhcmdldDogY0lkeCwgaW5kZXg6IGFJZHggKyBsZWZ0Lmxlbmd0aCwgc291cmNlOiB0cmVlIH1dO1xuICAgICAgICAgICAgcmV0dXJuIGJyYW5jaC5jb25jYXQobGVmdCkuY29uY2F0KGp1bXApLmNvbmNhdChyaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLklOVEVSU0VDVElPTikge1xuICAgICAgICAgICAgY29uc3QgYSA9IGZyb21QYXJzZVRyZWUodHJlZS5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICBjb25zdCBiID0gZnJvbVBhcnNlVHJlZSh0cmVlLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgICAgIGNvbnN0IGF4YiA9IGEuaW50ZXJzZWN0KGIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGlsZVNGQShheGIsIGlkeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyZWUudHlwZSA9PSBwYXJzZVR5cGVzLlJFUEVUSVRJT04pIHtcbiAgICAgICAgICAgIGNvbnN0IGdyZWVkeSA9IHRyZWUudmFsdWUuZ3JlZWR5O1xuICAgICAgICAgICAgY29uc3QgbWluID0gdHJlZS52YWx1ZS5sb3dlckJvdW5kO1xuICAgICAgICAgICAgY29uc3QgcGhpID0gdHJlZS5jaGlsZHJlblswXTtcbiAgICAgICAgICAgIC8vIG1pbiByZXBldGl0aW9ucyBvZiBwaGlcbiAgICAgICAgICAgIGxldCBwcmVmYWNlID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1pbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGhpUGdtID0gdGhpcy5jb21waWxlVHJlZShwaGksIGlkeCk7XG4gICAgICAgICAgICAgICAgaWR4ICs9IHBoaVBnbS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcHJlZmFjZS5wdXNoKC4uLnBoaVBnbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJlZS52YWx1ZS51cHBlckJvdW5kICE9IEJPVU5EX0lORklOSVRFKSB7XG4gICAgICAgICAgICAgICAgLy8gTS1OIHJlcGV0aXRpb25zIG9mIChwaGk/KVxuICAgICAgICAgICAgICAgIGNvbnN0IG1heCA9IHRyZWUudmFsdWUudXBwZXJCb3VuZDtcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uYWxzID0gW107XG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldHMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gbWluOyBpIDwgbWF4OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSByb29tIGZvciBzcGxpdCBsaSxsWlxuICAgICAgICAgICAgICAgICAgICBpZHggPSBpZHggKyAxO1xuICAgICAgICAgICAgICAgICAgICAvLyBzdG9yZSBqdW1wIHRhcmdldCBsaSBpbiB0YXJnZXRzXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldHMucHVzaChpZHgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwaGlQZ20gPSB0aGlzLmNvbXBpbGVUcmVlKHBoaSwgaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSByb29tIGZvciBwaGlQZ21cbiAgICAgICAgICAgICAgICAgICAgaWR4ICs9IHBoaVBnbS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFscy5wdXNoKHBoaVBnbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vaWR4IGlzIG5vdyBqdXN0IHBhc3QgdGhlIGVuZCBvZiBhbGwgdGhlIFwib3B0aW9uYWxzXCIuXG4gICAgICAgICAgICAgICAgbGV0IHJlcGV0aXRpb246IFByb2dyYW0gPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGlvbmFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByZXBldGl0aW9uLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzcGxpdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogKGdyZWVkeSA/IHRhcmdldHNbaV0gOiBpZHgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IChncmVlZHkgPyBpZHggOiB0YXJnZXRzW2ldKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0YXJnZXRzW2ldIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdHJlZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVwZXRpdGlvbi5wdXNoKC4uLihvcHRpb25hbHNbaV0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZWZhY2UuY29uY2F0KHJlcGV0aXRpb24pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBBOiBzcGxpdCBCLCBDOyBidXQgbXVzdCBjb21waWxlIEIgZmlyc3QgdG8gZ2V0IGxhYmVsIGZvciBDXG4gICAgICAgICAgICAgICAgY29uc3QgYUlkeCA9IGlkeDtcbiAgICAgICAgICAgICAgICAvLyBtYWtlIHJvb20gZm9yIHRoZSBzcGxpdFxuICAgICAgICAgICAgICAgIGNvbnN0IGJJZHggPSBhSWR4ICsgMTtcbiAgICAgICAgICAgICAgICAvLyB0aGVuIHB1dCBpbiBCXG4gICAgICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMuY29tcGlsZVRyZWUocGhpLCBiSWR4KTtcbiAgICAgICAgICAgICAgICBjb25zdCBqdW1wOiBQcm9ncmFtID0gW3sgdHlwZTogXCJqdW1wXCIsIHRhcmdldDogYUlkeCwgaW5kZXg6IGJJZHggKyBiLmxlbmd0aCwgc291cmNlOiB0cmVlIH1dO1xuICAgICAgICAgICAgICAgIC8vIHRoZW4gbGFiZWwgQ1xuICAgICAgICAgICAgICAgIGNvbnN0IGNJZHggPSBiSWR4ICsgYi5sZW5ndGggKyAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJyYW5jaDogUHJvZ3JhbSA9IFt7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3BsaXRcIixcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogKGdyZWVkeSA/IGJJZHggOiBjSWR4KSxcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IChncmVlZHkgPyBjSWR4IDogYklkeCksXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZTogdHJlZVxuICAgICAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmVmYWNlLmNvbmNhdChicmFuY2gpLmNvbmNhdChiKS5jb25jYXQoanVtcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3QgY29tcGlsZSBcIiArIEpTT04uc3RyaW5naWZ5KHRyZWUpKTtcbiAgICB9XG5cbiAgICBjb21waWxlU0ZBKHNmYTogU0ZBLCBpZHg6IG51bWJlcik6IFByb2dyYW0ge1xuICAgICAgICBsZXQgc3RhdGVTdGFydHMgPSB7fSwgZW5kSnVtcHM6IEp1bXBbXSA9IFtdO1xuICAgICAgICBsZXQgcGdtOiBQcm9ncmFtID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2ZhLnN0YXJ0U3RhdGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydCA9IHNmYS5zdGFydFN0YXRlc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0UGdtID0gdGhpcy5jb21waWxlU0ZBXyhzdGFydCwgaWR4LCBzdGF0ZVN0YXJ0cywgZW5kSnVtcHMpO1xuICAgICAgICAgICAgcGdtID0gcGdtLmNvbmNhdChzdGFydFBnbSk7XG4gICAgICAgICAgICBpZHggKz0gc3RhcnRQZ20ubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW5kSnVtcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGVuZEp1bXBzW2ldLnRhcmdldCA9IGlkeDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGdtO1xuICAgIH1cblxuICAgIGNvbXBpbGVTRkFfKHN0YXRlOiBTdGF0ZSwgaWR4OiBudW1iZXIsIHN0YXRlU3RhcnRzOiB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9LCBlbmRKdW1wczogSnVtcFtdKTogUHJvZ3JhbSB7XG4gICAgICAgIGlmIChzdGF0ZS5pZCBpbiBzdGF0ZVN0YXJ0cykge1xuICAgICAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJqdW1wXCIsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBzdGF0ZVN0YXJ0c1tzdGF0ZS5pZF0sXG4gICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICBzb3VyY2U6IHsgdHlwZTogXCJzdGF0ZVwiLCB2YWx1ZTogc3RhdGUuaWQgfVxuICAgICAgICAgICAgfV0gYXMgUHJvZ3JhbTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZVN0YXJ0c1tzdGF0ZS5pZF0gPSBpZHg7XG4gICAgICAgIGlmIChzdGF0ZS5lZGdlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLmlzQWNjZXB0aW5nKSB7XG4gICAgICAgICAgICAgICAgY29uc3QganVtcDogSnVtcCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJqdW1wXCIsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB7IHR5cGU6IFwic3RhdGVcIiwgdmFsdWU6IHN0YXRlLmlkLCBjaGlsZHJlbjogW10sIHJhbmdlOiB7IHN0YXJ0OiAtMSwgZW5kOiAtMSB9IH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGVuZEp1bXBzLnB1c2goanVtcCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtqdW1wXSBhcyBQcm9ncmFtO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb21waWxpbmcgYW4gU0ZBIHN0YXRlIHdpdGggbm8gb3V0Z29pbmcgZWRnZXNcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgcGdtOiBQcm9ncmFtID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLmVkZ2VzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2UgPSBzdGF0ZS5lZGdlc1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBlZGdlU3BsaXQ6IFNwbGl0ID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNwbGl0XCIsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGlkeCArIDEsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RhdGVcIiwgdmFsdWU6IGAke3N0YXRlLmlkfS4ke2l9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwgcmFuZ2U6IHsgc3RhcnQ6IC0xLCBlbmQ6IC0xIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgY29uc3QgZWRnZVBnbTogUHJvZ3JhbSA9IChbZWRnZVNwbGl0XSBhcyBQcm9ncmFtKS5jb25jYXQoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGlsZVNGQV9lZGdlKHN0YXRlLCBlZGdlLCBpZHggKyAxLCBzdGF0ZVN0YXJ0cywgZW5kSnVtcHMpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBwZ20gPSBwZ20uY29uY2F0KGVkZ2VQZ20pO1xuICAgICAgICAgICAgICAgIGlkeCArPSBlZGdlUGdtLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBlZGdlU3BsaXQucmlnaHQgPSBpZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlZGdlID0gc3RhdGUuZWRnZXNbc3RhdGUuZWRnZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBjb25zdCBlZGdlUGdtID0gdGhpcy5jb21waWxlU0ZBX2VkZ2Uoc3RhdGUsIGVkZ2UsIGlkeCwgc3RhdGVTdGFydHMsIGVuZEp1bXBzKTtcbiAgICAgICAgICAgIHJldHVybiBwZ20uY29uY2F0KGVkZ2VQZ20pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcGlsZVNGQV9lZGdlKHN0YXRlOiBTdGF0ZSwgZWRnZTogRWRnZSwgaWR4OiBudW1iZXIsIHN0YXRlU3RhcnRzOiB7IFtpZDogc3RyaW5nXTogbnVtYmVyIH0sIGVuZEp1bXBzOiBKdW1wW10pOiBQcm9ncmFtIHtcbiAgICAgICAgLy9hY2NlcHRpbmcgc2VsZi1lZGdlcyBuZWVkIHRvIGJlIHRyZWF0ZWQgc3BlY2lhbGx5IHNvIHRoZXkgZG9uJ3QganVtcCByaWdodCBiYWNrXG4gICAgICAgIC8vdG8gdGhlIHBhcmVudCBzdGF0ZS5cbiAgICAgICAgY29uc3QgZWRnZVBnbTogUHJvZ3JhbSA9IHRoaXMuY29tcGlsZVNGQV9lZGdlTGFiZWwoc3RhdGUsIGVkZ2UsIGlkeCk7XG4gICAgICAgIGlkeCArPSBlZGdlUGdtLmxlbmd0aDtcbiAgICAgICAgaWYgKHN0YXRlLmlzQWNjZXB0aW5nICYmIGVkZ2UudGFyZ2V0ID09IHN0YXRlICYmICFlZGdlLmZvcm11bGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGp1bXA6IEp1bXAgPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJqdW1wXCIsXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBudWxsLFxuICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZWRnZVwiLCB2YWx1ZTogYCR7c3RhdGUuaWR9LT4ke2VkZ2UudGFyZ2V0LmlkfWAsXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwgcmFuZ2U6IHsgc3RhcnQ6IC0xLCBlbmQ6IC0xIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZW5kSnVtcHMucHVzaChqdW1wKTtcbiAgICAgICAgICAgIHJldHVybiBlZGdlUGdtLmNvbmNhdChbanVtcF0gYXMgUHJvZ3JhbSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZWRnZS5mb3JtdWxhKSB7XG4gICAgICAgICAgICByZXR1cm4gZWRnZVBnbS5jb25jYXQoW3tcbiAgICAgICAgICAgICAgICB0eXBlOiBcImNoZWNrXCIsXG4gICAgICAgICAgICAgICAgZm9ybXVsYTogZWRnZS5mb3JtdWxhLFxuICAgICAgICAgICAgICAgIGluZGV4OiBpZHgsXG4gICAgICAgICAgICAgICAgc291cmNlOiB7IHR5cGU6IFwiZWRnZVwiLCB2YWx1ZTogYCR7c3RhdGUuaWR9LT4ke2VkZ2UudGFyZ2V0IS5pZH1gIH1cbiAgICAgICAgICAgIH1dIGFzIFByb2dyYW0pLmNvbmNhdChcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBpbGVTRkFfKGVkZ2UudGFyZ2V0ISwgaWR4ICsgMSwgc3RhdGVTdGFydHMsIGVuZEp1bXBzKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBlZGdlUGdtLmNvbmNhdChcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBpbGVTRkFfKGVkZ2UudGFyZ2V0ISwgaWR4LCBzdGF0ZVN0YXJ0cywgZW5kSnVtcHMpXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29tcGlsZVNGQV9lZGdlTGFiZWwoc3RhdGU6IFN0YXRlLCBlZGdlOiBFZGdlLCBpZHg6IG51bWJlcik6IFByb2dyYW0ge1xuICAgICAgICBsZXQgcGdtOiBQcm9ncmFtID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWRnZS5sYWJlbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbCA9IGVkZ2UubGFiZWxbaV07XG4gICAgICAgICAgICBpZiAobC50eXBlID09IFwic3RhcnQtY2FwdHVyZVwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FwdHVyZUlEID0gdGhpcy5jYXB0dXJlSWR4O1xuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gbC5ncm91cDtcbiAgICAgICAgICAgICAgICBsLmNhcHR1cmVJRCA9IGNhcHR1cmVJRDtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydDogU3RhcnQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLFxuICAgICAgICAgICAgICAgICAgICBjYXB0dXJlSUQ6IGNhcHR1cmVJRCxcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImVkZ2VcIiwgdmFsdWU6IGAke3N0YXRlLmlkfS0+JHtlZGdlLnRhcmdldCEuaWR9YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwgcmFuZ2U6IHsgc3RhcnQ6IC0xLCBlbmQ6IC0xIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5jYXB0dXJlSWR4Kys7XG4gICAgICAgICAgICAgICAgcGdtLnB1c2goc3RhcnQpO1xuICAgICAgICAgICAgICAgIGlkeCsrO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChsLnR5cGUgPT0gXCJlbmQtY2FwdHVyZVwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FwdHVyZUlEID0gbC5zdGFydC5jYXB0dXJlSUQ7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBsLmdyb3VwO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVuZDogRW5kID0ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImVuZFwiLFxuICAgICAgICAgICAgICAgICAgICBncm91cDogZ3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIGNhcHR1cmVJRDogY2FwdHVyZUlELFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogaWR4LFxuICAgICAgICAgICAgICAgICAgICBzb3VyY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZWRnZVwiLCB2YWx1ZTogYCR7c3RhdGUuaWR9LT4ke2VkZ2UudGFyZ2V0IS5pZH1gLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLCByYW5nZTogeyBzdGFydDogLTEsIGVuZDogLTEgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBwZ20ucHVzaChlbmQpO1xuICAgICAgICAgICAgICAgIGlkeCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwZ207XG4gICAgfVxuXG4gICAgY29tcGlsZSh0cmVlOiBQYXJzZVRyZWUsIGRlYnVnOiBib29sZWFuID0gZmFsc2UpOiBQcm9ncmFtIHtcbiAgICAgICAgLy8gaWYgKCF0cmVlLnR5cGUgJiYgdHJlZS50cmVlICYmIHRyZWUuZXJyb3JzICYmIHRyZWUucmVtYWluZGVyKSB7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgLy8gXCJSZWNlaXZlZCBhIFBhcnNlUmVzdWx0LCBidXQgZXhwZWN0ZWQgYSBQYXJzZVRyZWUuXCIgK1xuICAgICAgICAvLyBcIkNhbGwgY29tcGlsZSgpIHdpdGggdGhlIC50cmVlIGVsZW1lbnQgb2YgXCIgKyB0cmVlXG4gICAgICAgIC8vICk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgaWYgKCF0aGlzLnZhbGlkYXRlUGFyc2VUcmVlKHRyZWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQYXJzZSB0cmVlIGRpZCBub3QgcmVwcmVzZW50IGEgdmFsaWQgcHJvZ3JhbVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXNldFN0YXRlSUQoKTtcbiAgICAgICAgdGhpcy5jYXB0dXJlSWR4ID0gMDtcbiAgICAgICAgLy8gV2UgcHJlZmFjZSBldmVyeSBwcm9ncmFtIHdpdGggXCJ0cnVlIC4uXCIgc28gdGhhdCBhbGwgUGxheXNwZWNzIGFyZSBlZmZlY3RpdmVseSBzdGFydC1hbmNob3JlZC5cbiAgICAgICAgLy8gVGhpcyBpcyBhcyBwZXIgaHR0cHM6Ly9zd3RjaC5jb20vfnJzYy9yZWdleHAvcmVnZXhwMi5odG1sXG4gICAgICAgIGNvbnN0IHByZWZhY2U6IFByb2dyYW0gPSBbXG4gICAgICAgICAgICB7IHR5cGU6IFwic3BsaXRcIiwgbGVmdDogMywgcmlnaHQ6IDEsIGluZGV4OiAwLCBzb3VyY2U6IFwicm9vdFwiIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJjaGVja1wiLFxuICAgICAgICAgICAgICAgIGZvcm11bGE6IHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogcGFyc2VUeXBlcy5UUlVFLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogeyBzdGFydDogMCwgZW5kOiAwIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGluZGV4OiAxLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJyb290XCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IHR5cGU6IFwianVtcFwiLCB0YXJnZXQ6IDAsIGluZGV4OiAyLCBzb3VyY2U6IFwicm9vdFwiIH0sXG4gICAgICAgICAgICB7IHR5cGU6IFwic3RhcnRcIiwgZ3JvdXA6IFwiJHJvb3RcIiwgY2FwdHVyZUlEOiAtMSwgaW5kZXg6IDMsIHNvdXJjZTogXCJyb290XCIgfVxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5jb21waWxlVHJlZSh0cmVlLCBwcmVmYWNlLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHByZWZhY2UuY29uY2F0KGJvZHkpLmNvbmNhdChbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJlbmRcIixcbiAgICAgICAgICAgICAgICBncm91cDogXCIkcm9vdFwiLFxuICAgICAgICAgICAgICAgIGNhcHR1cmVJRDogLTEsXG4gICAgICAgICAgICAgICAgaW5kZXg6IHByZWZhY2UubGVuZ3RoICsgYm9keS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgc291cmNlOiBcInJvb3RcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIm1hdGNoXCIsXG4gICAgICAgICAgICAgICAgaW5kZXg6IHByZWZhY2UubGVuZ3RoICsgYm9keS5sZW5ndGggKyAxLFxuICAgICAgICAgICAgICAgIHNvdXJjZTogXCJyb290XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgXSk7XG4gICAgICAgIGlmICghdGhpcy52YWxpZGF0ZVByb2dyYW0ocmVzdWx0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiRXJyb3IgY29tcGlsaW5nIHRyZWUgXCIgKyBKU09OLnN0cmluZ2lmeSh0cmVlKSArIFwiIGludG8gcmVzdWx0IFwiICsgSlNPTi5zdHJpbmdpZnkocmVzdWx0KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWRlYnVnKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHRbaV0uc291cmNlO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHRbaV0uaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICB2YWxpZGF0ZVBhcnNlVHJlZShwYXJzZVRyZWU6IFBhcnNlVHJlZSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIURFQlVHX01PREUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVuc3VyZSBubyAke30gdW5kZXJuZWF0aCBhIHByb3Bvc2l0aW9uXG4gICAgICAgIGlmICh0aGlzLmFueUNhcHR1cmVzSW5zaWRlUHJvcG9zaXRpb25zKHBhcnNlVHJlZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0b2RvOiBvdGhlciBzYW5pdHkgY2hlY2tzXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGFueUNhcHR1cmVzSW5zaWRlUHJvcG9zaXRpb25zKHBhcmVudDogUGFyc2VUcmVlKSB7XG4gICAgICAgIGNvbnN0IHByb3AgPSBpc1Byb3Bvc2l0aW9uYWwocGFyZW50KTtcbiAgICAgICAgZm9yIChsZXQgY2kgPSAwOyBjaSA8IHBhcmVudC5jaGlsZHJlbi5sZW5ndGg7IGNpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gcGFyZW50LmNoaWxkcmVuW2NpXTtcbiAgICAgICAgICAgIGlmIChwcm9wICYmIGNoaWxkLnR5cGUgPT0gcGFyc2VUeXBlcy5DQVBUVVJFKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYENhbid0IHB1dCBhIGNhcHR1cmluZyBncm91cCBpbnNpZGUgb2YgYSBwcm9wb3NpdGlvbmFsIHRlcm06ICR7c3RyaW5naWZ5Rm9ybXVsYShwYXJlbnQpfSFgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmFueUNhcHR1cmVzSW5zaWRlUHJvcG9zaXRpb25zKGNoaWxkKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YWxpZGF0ZVByb2dyYW0ocGdtOiBQcm9ncmFtKTogYm9vbGVhbiB7XG4gICAgICAgIC8vIHRvZG86IHZhbGlkYXRlIHByb2dyYW1zIGFnYWluc3QgbW9yZSBiYXNpYyBzYW5pdHkgY2hlY2tzLlxuICAgICAgICAvL2Vuc3VyZSBlYWNoIGluc3RydWN0aW9uJ3MgaW5kZXggaXMgaXRzIGluZGV4IGluIHBnbVxuICAgICAgICAvL2Vuc3VyZSBubyBzcGxpdCBvciBqdW1wIGdvZXMgYmV5b25kIGVuZCBvZiBwcm9ncmFtXG4gICAgICAgIC8vLi4uXG4gICAgICAgIGlmICghREVCVUdfTU9ERSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZ20ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGluc3RyID0gcGdtW2ldO1xuICAgICAgICAgICAgLy9pcyBpdHMgaW5kZXggY29ycmVjdD9cbiAgICAgICAgICAgIGlmIChpbnN0ci5pbmRleCAhPT0gaSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQmFkIGNvZGUgZ2VuZXJhdGlvbjoke2luc3RyLmluZGV4fSAhPSAke2l9IGZvciAke3N0cmluZ2lmeShbaW5zdHJdKX0gaW4gJHtzdHJpbmdpZnkocGdtKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZWFjaGFibGUgPSB0aGlzLnJlYWNoYWJsZUluc3RydWN0aW9ucyhwZ20sIDAsIHt9KTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZ20ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghcmVhY2hhYmxlW2ldKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCYWQgY29kZSBnZW5lcmF0aW9uOiR7aX0gbm90IHJlYWNoYWJsZSBmb3IgJHtzdHJpbmdpZnkoW3BnbVtpXV0pfSBpbiAke3N0cmluZ2lmeShwZ20pfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJlYWNoYWJsZUluc3RydWN0aW9ucyhwZ206IFByb2dyYW0sIGkwOiBudW1iZXIsIHNlZW46IHsgW3BvaW50OiBudW1iZXJdOiBib29sZWFuIH0pOiB7IFtwb2ludDogbnVtYmVyXTogYm9vbGVhbiB9IHtcbiAgICAgICAgLy9hIGxvb3AsIG9yIGVsc2Ugb3V0IG9mIHByb2dyYW0gY29kZVxuICAgICAgICBpZiAoKGkwIGluIHNlZW4pIHx8IGkwID49IHBnbS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWVuO1xuICAgICAgICB9XG4gICAgICAgIC8vbWFyayBpMCBhcyBzZWVuXG4gICAgICAgIHNlZW5baTBdID0gdHJ1ZTtcbiAgICAgICAgY29uc3Qgb3RoZXIgPSBwZ21baTBdO1xuICAgICAgICAvL2ZvbGxvdyBpbmRpcmVjdGlvbiB2aWEgcmVjdXJzaXZlIHNlYXJjaCwga2VlcGluZyB0cmFjayBvZiBzZWVuIGxvY2F0aW9uc1xuICAgICAgICBpZiAob3RoZXIudHlwZSA9PSBcInNwbGl0XCIpIHtcbiAgICAgICAgICAgIGxldCBzZWVuTGVmdCA9IHRoaXMucmVhY2hhYmxlSW5zdHJ1Y3Rpb25zKHBnbSwgb3RoZXIubGVmdCwgc2Vlbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWFjaGFibGVJbnN0cnVjdGlvbnMocGdtLCBvdGhlci5yaWdodCEsIHNlZW5MZWZ0KTtcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlci50eXBlID09IFwianVtcFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWFjaGFibGVJbnN0cnVjdGlvbnMocGdtLCBvdGhlci50YXJnZXQhLCBzZWVuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vZm9yIG5vbi1pbmRpcmVjdCBpbnN0cnVjdGlvbnMsIGp1c3QgaW5jcmVtZW50IGkwIGFuZCBtb3ZlIG9uXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWFjaGFibGVJbnN0cnVjdGlvbnMocGdtLCBpMCArIDEsIHNlZW4pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5Q3VzdG9tKGZvcm11bGE6IFBhcnNlVHJlZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdmFsdWUgPSBmb3JtdWxhLnZhbHVlID09PSB1bmRlZmluZWQgPyBcIlwiIDogZm9ybXVsYS52YWx1ZS50b1N0cmluZygpO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gZm9ybXVsYS5jaGlsZHJlbiAmJiBmb3JtdWxhLmNoaWxkcmVuLmxlbmd0aCA/XG4gICAgICAgIChmb3JtdWxhLmNoaWxkcmVuLm1hcCgoYykgPT4gc3RyaW5naWZ5Rm9ybXVsYShjKSkpLmpvaW4oXCIsXCIpIDpcbiAgICAgICAgXCJcIjtcbiAgICByZXR1cm4gYCR7Zm9ybXVsYS50eXBlfSgke3ZhbHVlfSwke2NoaWxkcmVufSlgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhOiBQYXJzZVRyZWUpOiBzdHJpbmcge1xuICAgIHN3aXRjaCAoZm9ybXVsYS50eXBlKSB7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5UUlVFOlxuICAgICAgICAgICAgcmV0dXJuIFwidHJ1ZVwiO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuRkFMU0U6XG4gICAgICAgICAgICByZXR1cm4gXCJmYWxzZVwiO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuU1RBUlQ6XG4gICAgICAgICAgICByZXR1cm4gXCJzdGFydFwiO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuRU5EOlxuICAgICAgICAgICAgcmV0dXJuIFwiZW5kXCI7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5BTkQ6XG4gICAgICAgICAgICByZXR1cm4gYCR7c3RyaW5naWZ5Rm9ybXVsYShmb3JtdWxhLmNoaWxkcmVuWzBdKX0gJiAke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblsxXSl9YDtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLk9SOlxuICAgICAgICAgICAgcmV0dXJuIGAke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblswXSl9IHwgJHtzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGEuY2hpbGRyZW5bMV0pfWA7XG4gICAgICAgIGNhc2UgcGFyc2VUeXBlcy5OT1Q6XG4gICAgICAgICAgICByZXR1cm4gYG5vdCAke3N0cmluZ2lmeUZvcm11bGEoZm9ybXVsYS5jaGlsZHJlblswXSl9YDtcbiAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkdST1VQOlxuICAgICAgICAgICAgcmV0dXJuIGAoJHtzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGEuY2hpbGRyZW5bMF0pfSlgO1xuICAgICAgICBjYXNlIHBhcnNlVHlwZXMuQ0FQVFVSRTpcbiAgICAgICAgICAgIHJldHVybiBgJCR7Zm9ybXVsYS52YWx1ZS5jYXB0dXJlSUR9OiR7Zm9ybXVsYS52YWx1ZS5ncm91cH0oJHtzdHJpbmdpZnlGb3JtdWxhKGZvcm11bGEuY2hpbGRyZW5bMF0pfSlgO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ2lmeUN1c3RvbShmb3JtdWxhKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnkoY29kZTogUHJvZ3JhbSk6IHN0cmluZyB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29kZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBpbnN0ciA9IGNvZGVbaV07XG4gICAgICAgIGxldCBpbnN0clN0ciA9IGAke2l9OiR7aW5zdHIudHlwZX1gO1xuICAgICAgICBzd2l0Y2ggKGluc3RyLnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJzcGxpdFwiOlxuICAgICAgICAgICAgICAgIGluc3RyU3RyICs9IGAgJHtpbnN0ci5sZWZ0fSAke2luc3RyLnJpZ2h0fWA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwianVtcFwiOlxuICAgICAgICAgICAgICAgIGluc3RyU3RyICs9IGAgJHtpbnN0ci50YXJnZXR9YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJjaGVja1wiOlxuICAgICAgICAgICAgICAgIGluc3RyU3RyICs9IFwiIFwiICsgc3RyaW5naWZ5Rm9ybXVsYShpbnN0ci5mb3JtdWxhKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzdGFydFwiOlxuICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgIGluc3RyU3RyICs9IGAgJHtpbnN0ci5ncm91cH0gKCR7aW5zdHIuY2FwdHVyZUlEfSlgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIm1hdGNoXCI6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBpbnN0cnVjdGlvbiBcIiArIGluc3RyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5zdHIuc291cmNlKSB7XG4gICAgICAgICAgICB2YXIgc3JjID0gaW5zdHIuc291cmNlITtcbiAgICAgICAgICAgIGlmIChzcmMgPT0gXCJyb290XCIpIHtcbiAgICAgICAgICAgICAgICBpbnN0clN0ciArPSBcIiAgXFx0XFx0KHJvb3QpXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChpbnN0ci50eXBlID09IFwiY2hlY2tcIiAmJiBcInJhbmdlXCIgaW4gc3JjKSB7XG4gICAgICAgICAgICAgICAgICAgIGluc3RyU3RyICs9IGBcXHQoY2guICR7c3JjLnJhbmdlLnN0YXJ0fS0ke3NyYy5yYW5nZS5lbmR9KWA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdHJTdHIgKz0gYFxcdFxcdCgke3NyYy50eXBlfSAke0pTT04uc3RyaW5naWZ5KHNyYy52YWx1ZSl9KWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlc3VsdC5wdXNoKGluc3RyU3RyKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKFwiXFxuXCIpO1xufVxuIiwiaW1wb3J0IHsgUGxheXNwZWNzQ29udGV4dCB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBwYXJzZVR5cGVzLCBQYXJzZXIsIFBhcnNlUmVzdWx0IH0gZnJvbSBcIi4vcGFyc2VyXCI7XG5pbXBvcnQgeyBQYXJzZVRyZWUgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgQ29tcGlsZXIsIFByb2dyYW0gfSBmcm9tIFwiLi9jb21waWxlclwiO1xuZXhwb3J0IGNsYXNzIFBsYXlzcGVjPFRyYWNlLCBTdGF0ZT4ge1xuICAgIGNvbnRleHQ6IFBsYXlzcGVjc0NvbnRleHQ8VHJhY2UsIFN0YXRlPjtcbiAgICBzcGVjOiBzdHJpbmc7XG4gICAgcGFyc2VSZXN1bHQ6IFBhcnNlUmVzdWx0O1xuICAgIHByb2dyYW06IFByb2dyYW07XG4gICAgY29uc3RydWN0b3Ioc3BlYzogc3RyaW5nLCBjb250ZXh0OiBQbGF5c3BlY3NDb250ZXh0PFRyYWNlLCBTdGF0ZT4sIGRlYnVnOiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgdGhpcy5zcGVjID0gc3BlYztcbiAgICAgICAgY29uc3QgcGFyc2VyID0gbmV3IFBhcnNlcihjb250ZXh0LnRva2Vucyk7XG4gICAgICAgIGNvbnN0IGNvbXBpbGVyID0gbmV3IENvbXBpbGVyKGNvbnRleHQudG9rZW5zKTtcbiAgICAgICAgdGhpcy5wYXJzZVJlc3VsdCA9IHBhcnNlci5wYXJzZShzcGVjKTtcbiAgICAgICAgaWYgKHRoaXMucGFyc2VSZXN1bHQuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGFyc2VkIHdpdGggZXJyb3JzOlwiICsgSlNPTi5zdHJpbmdpZnkodGhpcy5wYXJzZVJlc3VsdC5lcnJvcnMpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb2dyYW0gPSBjb21waWxlci5jb21waWxlKHRoaXMucGFyc2VSZXN1bHQudHJlZSwgZGVidWcpO1xuICAgIH1cbiAgICBnZXQgdHJhY2VBUEkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQudHJhY2U7XG4gICAgfVxuICAgIGdldCBjaGVja0FQSSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5jaGVja3M7XG4gICAgfVxuICAgIGNoZWNrKHRyYWNlOiBUcmFjZSwgc3RhdGU6IFN0YXRlLCBpZHg6IG51bWJlciwgZm9ybXVsYTogUGFyc2VUcmVlKTogYW55IHtcbiAgICAgICAgdmFyIGxlZnQsIHJpZ2h0O1xuICAgICAgICAvL1RPRE86IGdlbmVyYXRlIGxlc3MgZ2FyYmFnZSBvbiBjaGVjayByZXN1bHRzXG4gICAgICAgIHN3aXRjaCAoZm9ybXVsYS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuVFJVRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5GQUxTRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBjYXNlIHBhcnNlVHlwZXMuU1RBUlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkeCA9PSAwO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkVORDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFjZUFQSS5pc0F0RW5kKHRyYWNlKTtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5BTkQ6XG4gICAgICAgICAgICAgICAgbGVmdCA9IHRoaXMuY2hlY2sodHJhY2UsIHN0YXRlLCBpZHgsIGZvcm11bGEuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgICAgIHJpZ2h0ID0gdGhpcy5jaGVjayh0cmFjZSwgc3RhdGUsIGlkeCwgZm9ybXVsYS5jaGlsZHJlblsxXSk7XG4gICAgICAgICAgICAgICAgaWYgKGxlZnQgJiYgcmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgbm9kZTogZm9ybXVsYSwgbGVmdDogbGVmdCwgcmlnaHQ6IHJpZ2h0IH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgcGFyc2VUeXBlcy5PUjpcbiAgICAgICAgICAgICAgICBsZWZ0ID0gdGhpcy5jaGVjayh0cmFjZSwgc3RhdGUsIGlkeCwgZm9ybXVsYS5jaGlsZHJlblswXSk7XG4gICAgICAgICAgICAgICAgcmlnaHQgPSB0aGlzLmNoZWNrKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhLmNoaWxkcmVuWzFdKTtcbiAgICAgICAgICAgICAgICBpZiAobGVmdCB8fCByaWdodCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBub2RlOiBmb3JtdWxhLCBsZWZ0OiBsZWZ0LCByaWdodDogcmlnaHQgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLk5PVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuY2hlY2sodHJhY2UsIHN0YXRlLCBpZHgsIGZvcm11bGEuY2hpbGRyZW5bMF0pO1xuICAgICAgICAgICAgY2FzZSBwYXJzZVR5cGVzLkdST1VQOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhLmNoaWxkcmVuWzBdKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tBUElbZm9ybXVsYS50eXBlXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jaGVja0FQSVtmb3JtdWxhLnR5cGVdKHRyYWNlLCBzdGF0ZSwgaWR4LCBmb3JtdWxhKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgcHJvcG9zaXRpb25hbCBmb3JtdWxhXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG1hdGNoKHRyYWNlOiBUcmFjZSwgcHJlc2VydmVTdGF0ZXM6IGZhbHNlIHwgdHJ1ZSB8IFwiZXhwbGljaXRcIiA9IGZhbHNlKTogUGxheXNwZWNSZXN1bHQ8VHJhY2UsIFN0YXRlPiB8IG51bGwge1xuICAgICAgICByZXR1cm4gKG5ldyBQbGF5c3BlY1Jlc3VsdCh7XG4gICAgICAgICAgICBzcGVjOiB0aGlzLFxuICAgICAgICAgICAgcHJlc2VydmVTdGF0ZXNcbiAgICAgICAgfSwgcGxheXNwZWNSZXN1bHRTdGF0ZUluaXQodHJhY2UpLCB1bmRlZmluZWQpKS5uZXh0KCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBwbGF5c3BlY1Jlc3VsdFN0YXRlSW5pdDxUPih0cmFjZTogVCk6IFBsYXlzcGVjUmVzdWx0U3RhdGU8VD4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIC8vIFdlIGNhbiB1c2UgcGxhaW4gYXJyYXlzIGZvciB0aGUgcHJpb3JpdHkgcXVldWUgZm9yIG5vdywgc2luY2Ugd2Uga25vdyB0aHJlYWRzIHdpbGwgYmUgYWRkZWRcbiAgICAgICAgLy8gaW4gcHJpb3JpdHkgb3JkZXIuIFRoaXMgYWxzbyBtZWFucyB3ZSBuZXZlciBzaGlmdCwgYnV0IGluY3JlbWVudCBpIGdvaW5nIHVwIHRocm91Z2ggdGhlIHF1ZXVlLlxuICAgICAgICBxdWV1ZTogbmV3IE5vblNocmlua2luZ0FycmF5PFRocmVhZD4oKSxcbiAgICAgICAgbmV4dFF1ZXVlOiBuZXcgTm9uU2hyaW5raW5nQXJyYXk8VGhyZWFkPigpLFxuICAgICAgICB0aHJlYWRzOiBbXSxcbiAgICAgICAgLy8gVGhpcyBOb25SZXBsYWNpbmdIYXNoTWFwIHdpbGwgaGF2ZSBudW1iZXIga2V5cyBzbyBpdCBjYW4gdXNlIGRlZmF1bHQgaGFzaC9lcXVpdlxuICAgICAgICBsaXZlU2V0OiBuZXcgTm9uUmVwbGFjaW5nSGFzaE1hcDxudW1iZXIsIFRocmVhZFN0YXRlPihcbiAgICAgICAgICAgICgoYSwgYikgPT4gYSA9PSBiKSxcbiAgICAgICAgICAgICgoYSkgPT4gYSlcbiAgICAgICAgKSxcbiAgICAgICAgbWF4VGhyZWFkSUQ6IDAsXG4gICAgICAgIC8vIFdlIHN0YXJ0IGF0IC0xIHNpbmNlIHRoZSBpbml0aWFsIGFjdGlvbnMgb2YgdGhlIGluaXRpYWwgdGhyZWFkXG4gICAgICAgIC8vIHNob3VsZCBoYXBwZW4gYmVmb3JlIHRoZSB0cmFjZSByZWFjaGVzIGluZGV4IDAuIFRoaXMgbWFpbmx5IGVuc3VyZXMgdGhhdFxuICAgICAgICAvLyBjYXB0dXJlIGdyb3VwcyBsaW5lIHVwIGNvcnJlY3RseS5cbiAgICAgICAgaW5kZXg6IC0xLFxuICAgICAgICBwYXN0RW5kOiBmYWxzZSxcbiAgICAgICAgdHJhY2U6IHRyYWNlLFxuICAgICAgICAvLyBTYW1lIGhlcmUgZm9yIG1hdGNoZXMsIGFsd2F5cyBhZGRlZCBpbiBwcmlvcml0eSBvcmRlciAtLSBidXQgY2FuIHVzZSBhIHJlZ3VsYXIgYXJyYXlcbiAgICAgICAgbWF0Y2hRdWV1ZTogbmV3IFByaW9yaXR5UXVldWUoXG4gICAgICAgICAgICAobTogTWF0Y2gpID0+IG0ucHJpb3JpdHlcbiAgICAgICAgKSxcbiAgICAgICAgbWF0Y2hTZXQ6IG5ldyBOb25SZXBsYWNpbmdIYXNoTWFwKG1hdGNoRXF1aXZGbiwgbWF0Y2hIYXNoRm4pLFxuICAgICAgICBsYXN0TWF0Y2hQcmlvcml0eTogMFxuICAgIH07XG59XG5cbmNsYXNzIFRocmVhZCB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBwYzogbnVtYmVyO1xuICAgIHByaW9yaXR5OiBudW1iZXI7XG4gICAgbWF0Y2hlczogTWF0Y2hbXTtcbiAgICBjb25zdHJ1Y3RvcihpZDogbnVtYmVyLCBwYzogbnVtYmVyLCBwcmlvcml0eTogbnVtYmVyLCBtYXRjaGVzOiBBcnJheTxNYXRjaD4pIHtcbiAgICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgICB0aGlzLnBjID0gcGM7XG4gICAgICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICAgICAgLy9tYXRjaCBzaGFyaW5nOiBpbnN0ZWFkIHNldCB0aGlzLm1hdGNoZXMgdG8gbWF0Y2hlcyBhbmQgc2V0IHNoYXJlZE1hdGNoZXMgdG8gdHJ1ZVxuICAgICAgICB0aGlzLm1hdGNoZXMgPSBtYXRjaGVzLm1hcChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgbGV0IG0yID0gY2xvbmVNYXRjaChtKTtcbiAgICAgICAgICAgIG0yLnByaW9yaXR5ID0gTWF0aC5tYXgocHJpb3JpdHksIG0ucHJpb3JpdHkpO1xuICAgICAgICAgICAgcmV0dXJuIG0yO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBlcXVhbHModDI6IFRocmVhZCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5wYyA9PSB0Mi5wYztcbiAgICB9XG5cbiAgICBoYXNoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnBjO1xuICAgIH1cblxuICAgIG1lcmdlVGhyZWFkKG90aGVyOiBUaHJlYWQpIHtcbiAgICAgICAgLy8gTWF0Y2ggc2hhcmluZzogaWYgbWF0Y2hlcyBhcmUgc2hhcmVkLCByZXBsYWNlIG1hdGNoZXMgbGlzdCB3aXRoIHNsaWNlIG9mIG1hdGNoZXMgbGlzdCxcbiAgICAgICAgLy8gYW5kIGluc2VydCBlaXRoZXIgY2xvbmVzIG9mIG90aGVyJ3MgbWF0Y2hlcyAoaWYgb3RoZXIgaXMgc2hhcmluZyBtYXRjaGVzKSBvciBvdGhlcidzIG1hdGNoZXMgZGlyZWN0bHlcbiAgICAgICAgLy8gQWxzbyB1cGRhdGUgcHJpb3JpdHkgb2YgbmV3IG1hdGNoZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdGhlci5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5tYXRjaGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoRXF1aXZGbih0aGlzLm1hdGNoZXNbal0sIG90aGVyLm1hdGNoZXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IGNsb25lTWF0Y2gob3RoZXIubWF0Y2hlc1tpXSk7XG4gICAgICAgICAgICAgICAgbWF0Y2gucHJpb3JpdHkgPSBNYXRoLm1heCh0aGlzLnByaW9yaXR5LCB0aGlzLm1hdGNoZXNbaV0ucHJpb3JpdHkpO1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hlcy5wdXNoKG1hdGNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBNZXJnZSBhbnkgb3RoZXIgc3RhdGVcbiAgICB9XG5cbiAgICBoYXNPcGVuTWF0Y2goKTogYm9vbGVhbiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXRjaGVzW2ldLmluc3RydWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGhhc0V4cGxpY2l0TWF0Y2goKTogYm9vbGVhbiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXRjaGVzW2ldLmluc3RydWN0aW9ucy5sZW5ndGggPiAwICYmXG4gICAgICAgICAgICAgICAgKHRoaXMubWF0Y2hlc1tpXS5pbnN0cnVjdGlvbnNbMF0gYXMgTWF0Y2hTdGFydEVuZCkuZ3JvdXBJbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdXNoTWF0Y2hJbnN0cnVjdGlvbihpbnN0cjogTWF0Y2hJbnN0cnVjdGlvbikge1xuICAgICAgICAvLyBNYXRjaCBzaGFyaW5nOiBpZiBtYXRjaGVzIGFyZSBzaGFyZWQsIHJlcGxhY2UgbWF0Y2hlcyBsaXN0IHdpdGggYSBuZXcgbGlzdCBjb250YWluaW5nIGNsb25lcyBvZiBtYXRjaGVzXG4gICAgICAgIC8vIEFsc28gdXBkYXRlIHByaW9yaXR5IG9mIG1hdGNoZXNcbiAgICAgICAgLy8gQW5kIHNldCBzaGFyZWRNYXRjaGVzIHRvIGZhbHNlXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm1hdGNoZXNbaV0uaW5zdHJ1Y3Rpb25zLnB1c2goaW5zdHIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICAvLyBMZXQgbWF0Y2hlcywgYW5kIHRodXMga2VwdCBzdGF0ZXMsIGJlIGdhcmJhZ2UgY29sbGVjdGVkXG4gICAgICAgIHRoaXMubWF0Y2hlcyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgSXRlbTxLLCBWPiB7XG4gICAga2V5OiBLO1xuICAgIHZhbDogVjtcbiAgICBjb25zdHJ1Y3RvcihrOiBLLCB2OiBWKSB7XG4gICAgICAgIHRoaXMua2V5ID0gaztcbiAgICAgICAgdGhpcy52YWwgPSB2O1xuICAgIH1cbn1cblxuY2xhc3MgTm9uUmVwbGFjaW5nSGFzaE1hcDxLLCBWPiB7XG4gICAgZXF1aXY6IChhOiBLLCBiOiBLKSA9PiBib29sZWFuO1xuICAgIGhhc2g6IChhOiBLKSA9PiBudW1iZXI7XG4gICAgY29sbDogSXRlbTxLLCBWPltdW107XG4gICAgbGVuZ3RoOiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGVxdWl2Rm46IChhOiBLLCBiOiBLKSA9PiBib29sZWFuLFxuICAgICAgICBoYXNoRm46IChhOiBLKSA9PiBudW1iZXIsXG4gICAgICAgIGJ1Y2tldENvdW50OiBudW1iZXIgPSAxMDAwKSB7XG4gICAgICAgIHRoaXMuZXF1aXYgPSBlcXVpdkZuO1xuICAgICAgICB0aGlzLmhhc2ggPSBoYXNoRm47XG4gICAgICAgIHRoaXMuY29sbCA9IG5ldyBBcnJheShidWNrZXRDb3VudCk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBidWNrZXRGaW5kKGJ1Y2tldDogSXRlbTxLLCBWPltdLCBvYmo6IEspIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWNrZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVxdWl2ID8gdGhpcy5lcXVpdihidWNrZXRbaV0ua2V5LCBvYmopIDogYnVja2V0W2ldLmtleSA9PSBvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVja2V0W2ldLnZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8vIElmIHZhbCBpcyBub3QgcHJvdmlkZWQsIGl0IGRlZmF1bHRzIHRvIHRydWVcbiAgICAvLyBVbmxpa2UgYSByZWd1bGFyIG1hcCwgdGhpcyB3aWxsIE5PVCByZXBsYWNlIGV4aXN0aW5nIGtleXMhXG4gICAgcHVzaChvYmo6IEssIHZhbDogVikge1xuICAgICAgICBjb25zdCBoYXNoQ29kZSA9IHRoaXMuaGFzaChvYmopICUgdGhpcy5jb2xsLmxlbmd0aDtcbiAgICAgICAgbGV0IGJ1Y2tldCA9IHRoaXMuY29sbFtoYXNoQ29kZV07XG4gICAgICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxbaGFzaENvZGVdID0gW3sga2V5OiBvYmosIHZhbDogdmFsIH1dO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuYnVja2V0RmluZChidWNrZXQsIG9iaikgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYnVja2V0LnB1c2goeyBrZXk6IG9iaiwgdmFsOiB2YWwgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZ2V0KG9iajogSyk6IFYgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYXNoQ29kZSA9IHRoaXMuaGFzaChvYmopICUgdGhpcy5jb2xsLmxlbmd0aDtcbiAgICAgICAgbGV0IGJ1Y2tldCA9IHRoaXMuY29sbFtoYXNoQ29kZV07XG4gICAgICAgIGlmICghYnVja2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJ1Y2tldEZpbmQoYnVja2V0LCBvYmopO1xuICAgIH1cblxuICAgIGNsZWFyKCk6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29sbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy90b2RvOiBnZW5lcmF0ZSBsZXNzIGdhcmJhZ2U/XG4gICAgICAgICAgICB0aGlzLmNvbGxbaV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgY29udGFpbnMob2JqOiBLKTogYm9vbGVhbiB7XG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaGFzaENvZGUgPSB0aGlzLmhhc2gob2JqKSAlIHRoaXMuY29sbC5sZW5ndGg7XG4gICAgICAgIGxldCBidWNrZXQgPSB0aGlzLmNvbGxbaGFzaENvZGVdO1xuICAgICAgICBpZiAoIWJ1Y2tldCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmJ1Y2tldEZpbmQoYnVja2V0LCBvYmopICE9PSB1bmRlZmluZWQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBoYXNoSW50KGg6IG51bWJlciwgaW50MzI6IG51bWJlcik6IG51bWJlciB7XG4gICAgaCArPSAoaW50MzIpIHwgMDtcbiAgICBoICs9IChoIDw8IDEwKSB8IDA7XG4gICAgaCBePSAoaCA+PiA2KSB8IDA7XG4gICAgaCArPSAoKGludDMyID4+IDgpKSB8IDA7XG4gICAgaCArPSAoaCA8PCAxMCkgfCAwO1xuICAgIGggXj0gKGggPj4gNikgfCAwO1xuICAgIGggKz0gKChpbnQzMiA+PiAxNikpIHwgMDtcbiAgICBoICs9IChoIDw8IDEwKSB8IDA7XG4gICAgaCBePSAoaCA+PiA2KSB8IDA7XG4gICAgaCArPSAoKGludDMyID4+IDI0KSkgfCAwO1xuICAgIGggKz0gKGggPDwgMTApIHwgMDtcbiAgICBoIF49IChoID4+IDYpIHwgMDtcbiAgICByZXR1cm4gaDtcbn1cbmZ1bmN0aW9uIGZpbmFsaXplSGFzaChoOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGggKz0gKGggPDwgMykgfCAwO1xuICAgIGggXj0gKGggPj4gMTEpIHwgMDtcbiAgICBoICs9IChoIDw8IDE1KSB8IDA7XG4gICAgcmV0dXJuIGg7XG59XG5mdW5jdGlvbiBoYXNoTnVtYmVycyguLi5udW1iZXJzOiBudW1iZXJbXSk6IG51bWJlciB7XG4gICAgbGV0IGggPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBoID0gaGFzaEludChoLCBudW1iZXJzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbmFsaXplSGFzaChoKTtcbn1cbnR5cGUgTWF0Y2hTdGFydEVuZCA9IHtcbiAgICB0eXBlOiBcInN0YXJ0XCIgfCBcImVuZFwiLFxuICAgIGdyb3VwOiBzdHJpbmcgfCBudW1iZXIsXG4gICAgZ3JvdXBJbmRleDogbnVtYmVyLFxuICAgIGluZGV4OiBudW1iZXJcbn07XG50eXBlIE1hdGNoUmVnaXN0ZXJTdGF0ZSA9IHsgdHlwZTogXCJzdGF0ZVwiLCBpbmRleDogbnVtYmVyLCBzdGF0ZTogYW55LCByZXN1bHQ6IGFueSB9O1xudHlwZSBNYXRjaEluc3RydWN0aW9uID0gTWF0Y2hTdGFydEVuZCB8IE1hdGNoUmVnaXN0ZXJTdGF0ZTtcbnR5cGUgTWF0Y2ggPSB7IHByaW9yaXR5OiBudW1iZXIsIGluc3RydWN0aW9uczogQXJyYXk8TWF0Y2hJbnN0cnVjdGlvbj4gfTtcblxuY29uc3QgbWF0Y2hFcXVpdkZuID0gZnVuY3Rpb24gKGE6IE1hdGNoLCBiOiBNYXRjaCkge1xuICAgIGlmIChhLmluc3RydWN0aW9ucy5sZW5ndGggIT0gYi5pbnN0cnVjdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmluc3RydWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBpbnNBID0gYS5pbnN0cnVjdGlvbnNbaV07XG4gICAgICAgIGNvbnN0IGluc0IgPSBiLmluc3RydWN0aW9uc1tpXTtcbiAgICAgICAgaWYgKGluc0EudHlwZSAhPSBpbnNCLnR5cGUgfHxcbiAgICAgICAgICAgIGluc0EuaW5kZXggIT0gaW5zQi5pbmRleCB8fFxuICAgICAgICAgICAgKChpbnNBIGFzIE1hdGNoU3RhcnRFbmQpLmdyb3VwICE9IChpbnNCIGFzIE1hdGNoU3RhcnRFbmQpLmdyb3VwKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuY29uc3QgbWF0Y2hIYXNoRm4gPSBmdW5jdGlvbiAoYTogTWF0Y2gpIHtcbiAgICByZXR1cm4gaGFzaE51bWJlcnMoYS5pbnN0cnVjdGlvbnMubGVuZ3RoKTtcbn1cblxuZnVuY3Rpb24gY2xvbmVNYXRjaChtOiBNYXRjaCk6IE1hdGNoIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBwcmlvcml0eTogbS5wcmlvcml0eSxcbiAgICAgICAgaW5zdHJ1Y3Rpb25zOiBtLmluc3RydWN0aW9ucy5zbGljZSgpXG4gICAgfTtcbn1cblxuY2xhc3MgTm9uU2hyaW5raW5nQXJyYXk8VD4ge1xuICAgIGFycmF5OiBUW107XG4gICAgbGVuZ3RoOiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYXJyYXkgPSBbXTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIHB1c2gob2JqOiBUKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYXJyYXlbdGhpcy5sZW5ndGhdID0gb2JqO1xuICAgICAgICB0aGlzLmxlbmd0aCsrO1xuICAgIH1cblxuICAgIGNsZWFyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgZ2V0IGZpcnN0KCk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5hcnJheVswXTtcbiAgICB9XG5cbiAgICBnZXQoaTogbnVtYmVyKTogVCB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmIChpIDwgMCB8fCBpID49IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmFycmF5W2ldO1xuICAgIH1cbn1cblxuLy8gV2Uga25vdyBhIHByaW9yaSB0aGF0IHRoZSBudW1iZXIgb2YgcHJpb3JpdHkgbGV2ZWxzIGlzIHJlbGF0aXZlbHkgc21hbGxcbmNsYXNzIFByaW9yaXR5UXVldWU8VD4ge1xuICAgIHF1ZXVlczogVFtdW107XG4gICAgbWVtYmVyczogTm9uUmVwbGFjaW5nSGFzaE1hcDxULCBib29sZWFuPiB8IHVuZGVmaW5lZDtcbiAgICBwcmlvcml0eUZ1bmN0aW9uOiAodDogVCkgPT4gbnVtYmVyO1xuICAgIGxlbmd0aDogbnVtYmVyO1xuICAgIGxvd2VzdFByaW9yaXR5OiBudW1iZXI7XG4gICAgaGlnaGVzdFByaW9yaXR5OiBudW1iZXI7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHBmbjogKHQ6IFQpID0+IG51bWJlcixcbiAgICAgICAgZXF1aXZGbj86ICh0MTogVCwgdDI6IFQpID0+IGJvb2xlYW4sXG4gICAgICAgIGhhc2hGbj86ICh0OiBUKSA9PiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5xdWV1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcmlvcml0eUZ1bmN0aW9uID0gcGZuO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMubG93ZXN0UHJpb3JpdHkgPSBJbmZpbml0eTtcbiAgICAgICAgdGhpcy5oaWdoZXN0UHJpb3JpdHkgPSAtSW5maW5pdHk7XG4gICAgICAgIGlmIChlcXVpdkZuICYmIGhhc2hGbikge1xuICAgICAgICAgICAgdGhpcy5tZW1iZXJzID0gbmV3IE5vblJlcGxhY2luZ0hhc2hNYXAoZXF1aXZGbiwgaGFzaEZuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWVtYmVycyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgLy8gV2UgYWxzbyBrbm93IGEgcHJpb3JpIHRoYXQgZHVwbGljYXRlcyB3aWxsIGJlIGRldGVjdGVkIGV4dGVybmFsbHkgaWYgdGhlcmUgaXMgbm8gZXF1aXZGbi9oYXNoRm5cbiAgICBwdXNoKG9iajogVCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLnByaW9yaXR5RnVuY3Rpb24ob2JqKTtcbiAgICAgICAgaWYgKHRoaXMubWVtYmVycykge1xuICAgICAgICAgICAgaWYgKHRoaXMubWVtYmVycy5jb250YWlucyhvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tZW1iZXJzLnB1c2gob2JqLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIShpZHggaW4gdGhpcy5xdWV1ZXMpKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlc1tpZHhdID0gW29ial07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlc1tpZHhdLnB1c2gob2JqKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWR4IDwgdGhpcy5sb3dlc3RQcmlvcml0eSkge1xuICAgICAgICAgICAgdGhpcy5sb3dlc3RQcmlvcml0eSA9IGlkeDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaWR4ID4gdGhpcy5oaWdoZXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5ID0gaWR4O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGVuZ3RoKys7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHNoaWZ0KCk6IFQgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAodGhpcy5sb3dlc3RQcmlvcml0eSA+PSBJbmZpbml0eSB8fCB0aGlzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHEgPSB0aGlzLnF1ZXVlc1t0aGlzLmxvd2VzdFByaW9yaXR5XTtcbiAgICAgICAgLy8gV2l0aGluIGEgcHJpb3JpdHkgbGV2ZWwsIHdlIHdhbnQgdGhlIF9yZXZlcnNlXyBvcmRlciBvZiBhZGRpdGlvblxuICAgICAgICBjb25zdCByZXN1bHQgPSBxLnBvcCgpO1xuICAgICAgICBpZiAocS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMucXVldWVzW3RoaXMubG93ZXN0UHJpb3JpdHldO1xuICAgICAgICAgICAgaWYgKHRoaXMuaGlnaGVzdFByaW9yaXR5IDw9IHRoaXMubG93ZXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvd2VzdFByaW9yaXR5ID0gSW5maW5pdHk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWdoZXN0UHJpb3JpdHkgPSAtSW5maW5pdHk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlICghKHRoaXMucXVldWVzW3RoaXMubG93ZXN0UHJpb3JpdHldKSAmJiB0aGlzLmxvd2VzdFByaW9yaXR5IDwgdGhpcy5oaWdoZXN0UHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb3dlc3RQcmlvcml0eSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlbmd0aC0tO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGdldCBmaXJzdCgpOiBUIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWVzW3RoaXMubG93ZXN0UHJpb3JpdHldWzBdO1xuICAgIH1cblxuICAgIGNsZWFyKCk6IHZvaWQge1xuICAgICAgICAvL3RvZG86IGdlbmVyYXRlIGxlc3MgZ2FyYmFnZVxuICAgICAgICB0aGlzLnF1ZXVlcyA9IFtdO1xuICAgICAgICB0aGlzLmxvd2VzdFByaW9yaXR5ID0gSW5maW5pdHk7XG4gICAgICAgIHRoaXMuaGlnaGVzdFByaW9yaXR5ID0gLUluZmluaXR5O1xuICAgICAgICB0aGlzLmxlbmd0aCA9IDA7XG4gICAgICAgIGlmICh0aGlzLm1lbWJlcnMpIHtcbiAgICAgICAgICAgIHRoaXMubWVtYmVycy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCBMSVZFU0VUX0NMRUFSX0lOVEVSVkFMID0gMTAwO1xuXG50eXBlIFRocmVhZFN0YXRlID0ge1xuICAgIGluZGV4OiBudW1iZXIsXG4gICAgdGhyZWFkczogTm9uU2hyaW5raW5nQXJyYXk8VGhyZWFkPlxufTtcblxudHlwZSBQbGF5c3BlY1Jlc3VsdFN0YXRlPFRyYWNlPiA9IHtcbiAgICB0cmFjZTogVHJhY2UsXG4gICAgdGhyZWFkczogVGhyZWFkW10sXG4gICAgbWF4VGhyZWFkSUQ6IG51bWJlcixcbiAgICBxdWV1ZTogTm9uU2hyaW5raW5nQXJyYXk8VGhyZWFkPixcbiAgICBuZXh0UXVldWU6IE5vblNocmlua2luZ0FycmF5PFRocmVhZD4sXG4gICAgbGl2ZVNldDogTm9uUmVwbGFjaW5nSGFzaE1hcDxudW1iZXIsIFRocmVhZFN0YXRlPixcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIHBhc3RFbmQ6IGJvb2xlYW4sXG4gICAgbWF0Y2hRdWV1ZTogUHJpb3JpdHlRdWV1ZTxNYXRjaD4sXG4gICAgbWF0Y2hTZXQ6IE5vblJlcGxhY2luZ0hhc2hNYXA8TWF0Y2gsIGJvb2xlYW4+LFxuICAgIGxhc3RNYXRjaFByaW9yaXR5OiBudW1iZXJcbn07XG5cbnR5cGUgR3JvdXBEYXRhPFN0YXRlPiA9IHtcbiAgICBncm91cDogc3RyaW5nIHwgbnVtYmVyLFxuICAgIGdyb3VwSW5kZXg6IG51bWJlcixcbiAgICBzdGFydDogbnVtYmVyLFxuICAgIGVuZDogbnVtYmVyLFxuICAgIHN0YXRlczogU3RhdGVbXSB8IHVuZGVmaW5lZCxcbiAgICByZXN1bHRzOiBhbnlbXSB8IHVuZGVmaW5lZFxufTtcblxudHlwZSBQbGF5c3BlY01hdGNoUmVzdWx0PFN0YXRlPiA9IHtcbiAgICBzdGFydDogbnVtYmVyLFxuICAgIGVuZDogbnVtYmVyLFxuICAgIHN0YXRlcz86IFN0YXRlW10sXG4gICAgcmVzdWx0cz86IGFueVtdLFxuICAgIHN1Ymdyb3VwczogR3JvdXBEYXRhPFN0YXRlPltdXG59O1xuXG5jbGFzcyBQbGF5c3BlY1Jlc3VsdDxUcmFjZSwgU3RhdGU+IHtcbiAgICBjb25maWc6IHsgc3BlYzogUGxheXNwZWM8VHJhY2UsIFN0YXRlPiwgcHJlc2VydmVTdGF0ZXM6IGZhbHNlIHwgdHJ1ZSB8IFwiZXhwbGljaXRcIiB9O1xuICAgIHN0YXRlOiBQbGF5c3BlY1Jlc3VsdFN0YXRlPFRyYWNlPiB8IHVuZGVmaW5lZDtcbiAgICBtYXRjaDogUGxheXNwZWNNYXRjaFJlc3VsdDxTdGF0ZT4gfCB1bmRlZmluZWQ7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGNvbmZpZzogeyBzcGVjOiBQbGF5c3BlYzxUcmFjZSwgU3RhdGU+LCBwcmVzZXJ2ZVN0YXRlczogZmFsc2UgfCB0cnVlIHwgXCJleHBsaWNpdFwiIH0sXG4gICAgICAgIHN0YXRlOiBQbGF5c3BlY1Jlc3VsdFN0YXRlPFRyYWNlPixcbiAgICAgICAgbWF0Y2g6IFBsYXlzcGVjTWF0Y2hSZXN1bHQ8U3RhdGU+IHwgdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnRyYWNlID0gdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5zdGFydCh0aGlzLnN0YXRlLnRyYWNlKTtcbiAgICAgICAgICAgIGxldCBpbml0VGhyZWFkID0gbmV3IFRocmVhZCgwLCAwLCAwLCBbeyBwcmlvcml0eTogMCwgaW5zdHJ1Y3Rpb25zOiBbXSB9XSk7XG4gICAgICAgICAgICB0aGlzLmVucXVldWVUaHJlYWQoaW5pdFRocmVhZCk7XG4gICAgICAgICAgICAvL3N3YXAgcXVldWVzXG4gICAgICAgICAgICBjb25zdCB0ZW1wID0gdGhpcy5zdGF0ZS5xdWV1ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUucXVldWUgPSB0aGlzLnN0YXRlLm5leHRRdWV1ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubmV4dFF1ZXVlID0gdGVtcDtcbiAgICAgICAgICAgIC8vY2xlYXIgbGl2ZSBhbmQgbWF0Y2ggc2V0c1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5saXZlU2V0LmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLm1hdGNoU2V0LmNsZWFyKCk7XG4gICAgICAgICAgICAvL21vdmUgaW5kZXggdG8gc3RhcnRcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWF0Y2ggPSBtYXRjaDtcbiAgICB9XG5cbiAgICBnZXQgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoID8gdGhpcy5tYXRjaC5zdGFydCA6IC0xO1xuICAgIH1cblxuICAgIGdldCBlbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoID8gdGhpcy5tYXRjaC5lbmQgOiAtMTtcbiAgICB9XG5cbiAgICBnZXQgc3RhdGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaCA/IHRoaXMubWF0Y2guc3RhdGVzIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGdldCBzdWJncm91cHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoID8gdGhpcy5tYXRjaC5zdWJncm91cHMgOiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaGFzUmVhZHlNYXRjaCgpOiBib29sZWFuIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXRlIS5tYXRjaFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZSEucXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZSEubWF0Y2hRdWV1ZS5maXJzdCEucHJpb3JpdHkgPD0gdGhpcy5zdGF0ZSEucXVldWUuZmlyc3QhLnByaW9yaXR5XG4gICAgfVxuXG4gICAgZW5xdWV1ZVRocmVhZCh0aHJlYWQ6IFRocmVhZCkge1xuICAgICAgICAvLyBVbmxpa2UgQ294J3MgaW1wbGVtZW50YXRpb24sIHdlIGNhbiBvbmx5IGRvIGR1cGxpY2F0ZSBjaGVja2luZyBmb3IgdGhyZWFkcyB0aGF0IGFyZSBhYm91dCB0byBwYXJrLlxuICAgICAgICAvLyBTbyB3ZSdsbCBkbyBzb21lIHJlZHVuZGFudCBqdW1waW5nL3NwbGl0dGluZy9tYXRjaGluZywgYnV0IHNpbmNlIHdlIG5lZWQgdG8gbWVyZ2UgdGhyZWFkcyBpdCBjYW4ndFxuICAgICAgICAvLyByZWFsbHkgYmUgYXZvaWRlZC5cbiAgICAgICAgY29uc3QgaW5zdHIgPSB0aGlzLmNvbmZpZy5zcGVjLnByb2dyYW1bdGhyZWFkLnBjXTtcbiAgICAgICAgc3dpdGNoIChpbnN0ci50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwianVtcFwiOlxuICAgICAgICAgICAgICAgIHRocmVhZC5wYyA9IGluc3RyLnRhcmdldCE7XG4gICAgICAgICAgICAgICAgdGhpcy5lbnF1ZXVlVGhyZWFkKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBcInNwbGl0XCI6XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSEubWF4VGhyZWFkSUQhKys7XG4gICAgICAgICAgICAgICAgdGhyZWFkLnBjID0gaW5zdHIubGVmdDtcbiAgICAgICAgICAgICAgICAvL21hdGNoIHNoYXJpbmc6IEJlIHN1cmUgdGhyZWFkMSBrbm93cyB0aHJlYWQyIGlzIHVzaW5nIGl0cyBtYXRjaGVzLlxuICAgICAgICAgICAgICAgIC8vdGhyZWFkLnNoYXJlZE1hdGNoZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRocmVhZDIgPSBuZXcgVGhyZWFkKHRoaXMuc3RhdGUhLm1heFRocmVhZElELCBpbnN0ci5yaWdodCEsIHRocmVhZC5wcmlvcml0eSArIDEsIHRocmVhZC5tYXRjaGVzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVucXVldWVUaHJlYWQodGhyZWFkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVucXVldWVUaHJlYWQodGhyZWFkMik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgICAgICAgICAgdGhyZWFkLnB1c2hNYXRjaEluc3RydWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICAvLyArMSBiZWNhdXNlIHRoZSBfY3VycmVudF8gdHJhY2UgaW5kZXgganVzdCBtYXRjaGVkIHByZXZpb3VzbHksIHNvIHdlIGRvbid0IHdhbnQgdG8gaW5jbHVkZSBpdCBpblxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbWF0Y2ggdGhhdCBzdGFydHMgd2l0aCB0aGUgX25leHRfIGNoYXJhY3Rlci5cbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuc3RhdGUhLmluZGV4ICsgMSxcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IGluc3RyLmdyb3VwLFxuICAgICAgICAgICAgICAgICAgICBncm91cEluZGV4OiBpbnN0ci5jYXB0dXJlSURcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aHJlYWQucGMrKztcbiAgICAgICAgICAgICAgICB0aGlzLmVucXVldWVUaHJlYWQodGhyZWFkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgICAgICAgdGhyZWFkLnB1c2hNYXRjaEluc3RydWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJlbmRcIixcbiAgICAgICAgICAgICAgICAgICAgLy8gKzEgZm9yIHNhbWUgcmVhc29uIGFzIGFib3ZlLlxuICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5zdGF0ZSEuaW5kZXggKyAxLFxuICAgICAgICAgICAgICAgICAgICBncm91cDogaW5zdHIuZ3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSW5kZXg6IGluc3RyLmNhcHR1cmVJRFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocmVhZC5wYysrO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5xdWV1ZVRocmVhZCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgXCJtYXRjaFwiOlxuICAgICAgICAgICAgICAgIC8vIEFkZCBtYXRjaGVzIHRvIHF1ZXVlXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aHJlYWQubWF0Y2hlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhyZWFkLm1hdGNoZXNbaV0ucHJpb3JpdHkgPj0gdGhyZWFkLnByaW9yaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIGEgbm92ZWwgbWF0Y2guLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlIS5tYXRjaFNldC5wdXNoKHRocmVhZC5tYXRjaGVzW2ldLCB0cnVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBpdCB0byB0aGUgcXVldWUhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZSEubWF0Y2hRdWV1ZS5wdXNoKHRocmVhZC5tYXRjaGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2Ryb3AgdGhyZWFkLCBpdHMgd29yayBpcyBkb25lXG4gICAgICAgICAgICAgICAgdGhyZWFkLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNhc2UgXCJjaGVja1wiOlxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGxpdmUgc2V0LCB0aGVuIGFkZCB0byBxdWV1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSB0aHJlYWQuaGFzaCgpO1xuICAgICAgICAgICAgICAgIGxldCBzdGF0ZSA9IHRoaXMuc3RhdGUhO1xuICAgICAgICAgICAgICAgIGxldCBsaXZlOiBUaHJlYWRTdGF0ZSB8IHVuZGVmaW5lZCA9IHN0YXRlLmxpdmVTZXQuZ2V0KGhhc2gpO1xuICAgICAgICAgICAgICAgIGlmICghbGl2ZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGhyZWFkTGlzdCA9IG5ldyBOb25TaHJpbmtpbmdBcnJheTxUaHJlYWQ+KCk7XG4gICAgICAgICAgICAgICAgICAgIHRocmVhZExpc3QucHVzaCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5saXZlU2V0LnB1c2goaGFzaCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHN0YXRlLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyZWFkczogdGhyZWFkTGlzdFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpdmUuaW5kZXggIT0gc3RhdGUhLmluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGxpdmUuaW5kZXggPSBzdGF0ZS5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgbGl2ZS50aHJlYWRzLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIGxpdmUudGhyZWFkcy5wdXNoKHRocmVhZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9tYXliZSBwcmVzZW50XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGl2ZS50aHJlYWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGl2ZS50aHJlYWRzLmdldChpKSEuZXF1YWxzKHRocmVhZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXZlLnRocmVhZHMuZ2V0KGkpIS5tZXJnZVRocmVhZCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyb3AgdGhlIG1lcmdlZC1pbiB0aHJlYWQsIG5vIG1vcmUgd29yayB0byBkb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZC50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9ub3QgcHJlc2VudDogYWRkIHN0dWNrIHRocmVhZCB0byBxdWV1ZS5cbiAgICAgICAgICAgICAgICBzdGF0ZS5uZXh0UXVldWUucHVzaCh0aHJlYWQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIC8vdG9kbzogY2FzZSBmb3JrLCBqb2luLCBqb2luZWQtbGVmdCwgam9pbmVkLXJpZ2h0XG4gICAgICAgICAgICAvLyBqb2luZWQtbGVmdCBhbmQgam9pbmVkLXJpZ2h0IHdpbGwgbmVlZCB0byBoYW5kbGUgbWVyZ2luZyFcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIGluc3RydWN0aW9uIHR5cGUgJHtpbnN0ci50eXBlfVwiKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByZXR0aWZ5TWF0Y2gobTogTWF0Y2gpOiBQbGF5c3BlY01hdGNoUmVzdWx0PFN0YXRlPiB7XG4gICAgICAgIGxldCBncm91cHMgPSBbXTtcbiAgICAgICAgbGV0IGxpdmVHcm91cHM6IHtcbiAgICAgICAgICAgIFtrZXk6IHN0cmluZ106IEdyb3VwRGF0YTxTdGF0ZT4sXG4gICAgICAgICAgICBbaW5kZXg6IG51bWJlcl06IEdyb3VwRGF0YTxTdGF0ZT5cbiAgICAgICAgfSA9IHt9O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG0uaW5zdHJ1Y3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBpbnN0ciA9IG0uaW5zdHJ1Y3Rpb25zW2ldO1xuICAgICAgICAgICAgc3dpdGNoIChpbnN0ci50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInN0YXJ0XCI6XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdHOiBHcm91cERhdGE8U3RhdGU+ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXA6IGluc3RyLmdyb3VwLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBJbmRleDogaW5zdHIuZ3JvdXBJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBpbnN0ci5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogSW5maW5pdHksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZXM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maWcucHJlc2VydmVTdGF0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0cuc3RhdGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdHLnJlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBncm91cHMucHVzaChuZXdHKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpdmVHcm91cHNbbmV3Ry5ncm91cF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZSBjYXB0dXJlIGdyb3VwXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGxpdmVHcm91cHNbbmV3Ry5ncm91cF0gPSBuZXdHO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic3RhdGVcIjpcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wZW5Hcm91cHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhsaXZlR3JvdXBzKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZ2kgPSAwOyBnaSA8IG9wZW5Hcm91cHMubGVuZ3RoOyBnaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY29udGludWVkRyA9IGxpdmVHcm91cHNbb3Blbkdyb3Vwc1tnaV1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9XZSdsbCBvbmx5IGdldCBoZXJlIGlmIHdlJ3JlIHByZXNlcnZpbmcgc3RhdGVzOyB1bmxlc3Mgd2UgcmV1c2UgXCJzdGF0ZVwiIGZvciBhdG9taWMgZWxlbWVudCBjYXB0dXJlc1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVkRy5zdGF0ZXMhLnB1c2goaW5zdHIuc3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWVkRy5yZXN1bHRzIS5wdXNoKGluc3RyLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgICAgICAgICAgICBsZXQgZmluaXNoZWRHID0gbGl2ZUdyb3Vwc1tpbnN0ci5ncm91cF07XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGVkRy5lbmQgPSBpbnN0ci5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGxpdmVHcm91cHNbaW5zdHIuZ3JvdXBdO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgb3Blbkdyb3VwcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGxpdmVHcm91cHMpO1xuICAgICAgICBpZiAob3Blbkdyb3Vwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT3BlbiBjYXB0dXJlIGdyb3VwczogJHtvcGVuR3JvdXBzLmpvaW4oXCIsXCIpfWApO1xuICAgICAgICB9XG4gICAgICAgIGxldCByb290R3JvdXAgPSBncm91cHMuc2hpZnQoKSE7XG4gICAgICAgIGxldCByb290TWF0Y2g6IFBsYXlzcGVjTWF0Y2hSZXN1bHQ8U3RhdGU+ID0ge1xuICAgICAgICAgICAgc3RhcnQ6IHJvb3RHcm91cC5zdGFydCxcbiAgICAgICAgICAgIGVuZDogcm9vdEdyb3VwLmVuZCxcbiAgICAgICAgICAgIC8vVE9ETzogT3VnaHQgZW1wdHkgY2FwdHVyZXMgdG8gYmUgZHJvcHBlZD9cbiAgICAgICAgICAgIHN1Ymdyb3VwczogZ3JvdXBzLmZpbHRlcihcbiAgICAgICAgICAgICAgICAoZ3JvdXApID0+IGdyb3VwLnN0YXJ0ICE9IGdyb3VwLmVuZFxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHN0YXRlczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgcmVzdWx0czogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5wcmVzZXJ2ZVN0YXRlcykge1xuICAgICAgICAgICAgcm9vdE1hdGNoLnN0YXRlcyA9IHJvb3RHcm91cC5zdGF0ZXM7XG4gICAgICAgICAgICByb290TWF0Y2gucmVzdWx0cyA9IHJvb3RHcm91cC5yZXN1bHRzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByb290TWF0Y2g7XG4gICAgfVxuXG4gICAgbmV4dCgpOiBQbGF5c3BlY1Jlc3VsdDxUcmFjZSwgU3RhdGU+IHwgbnVsbCB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRG9uJ3QgY2FsbCBuZXh0KCkgb24gdGhlIHNhbWUgUGxheXNwZWNSZXN1bHQgdHdpY2UhXCIpO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICghdGhpcy5oYXNSZWFkeU1hdGNoKCkgJiYgdGhpcy5zdGF0ZS5xdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5jdXJyZW50U3RhdGUodGhpcy5zdGF0ZS50cmFjZSk7XG4gICAgICAgICAgICBsZXQgY29waWVkU3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBsaW1pdCA9IHRoaXMuc3RhdGUucXVldWUubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IGxhc3RQcmlvcml0eSA9IDA7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMuc3RhdGUucXVldWUubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgICAgICAgICBpZiAodCA+PSBsaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdGhyZWFkIHF1ZXVlIHNob3VsZCBuZXZlciBncm93IGR1cmluZyBhIHNpbmdsZSB0cmFjZSBzdGF0ZSFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCB0aHJlYWQgPSB0aGlzLnN0YXRlLnF1ZXVlLmdldCh0KSE7XG4gICAgICAgICAgICAgICAgaWYgKHRocmVhZC5wcmlvcml0eSA8IGxhc3RQcmlvcml0eSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEZWNyZWFzaW5nIHByaW9yaXR5IVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdHIgPSB0aGlzLmNvbmZpZy5zcGVjLnByb2dyYW1bdGhyZWFkLnBjXTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGluc3RyLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNoZWNrXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGVja1Jlc3VsdCA9IHRoaXMuY29uZmlnLnNwZWMuY2hlY2soXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS50cmFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RyLmZvcm11bGFcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWQucGMrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhyZWFkLmhhc09wZW5NYXRjaCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5wcmVzZXJ2ZVN0YXRlcyAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRocmVhZC5oYXNFeHBsaWNpdE1hdGNoKCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5wcmVzZXJ2ZVN0YXRlcyAhPSBcImV4cGxpY2l0XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvcGllZFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29waWVkU3RhdGUgPSB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmNvcHlDdXJyZW50U3RhdGUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5zcGVjLnRyYWNlQVBJLmNvcHlDdXJyZW50U3RhdGUodGhpcy5zdGF0ZS50cmFjZSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZC5wdXNoTWF0Y2hJbnN0cnVjdGlvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnN0YXRlLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBjb3BpZWRTdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IGNoZWNrUmVzdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVucXVldWVUaHJlYWQodGhyZWFkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vb3RoZXJ3aXNlIGRyb3AgdGhlIHRocmVhZCBvbiB0aGUgZmxvb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWQudGVybWluYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRocmVhZCBzaG91bGQgYmUgcGFya2VkIG9uIGEgY2hlY2suXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vc3dhcCBxdWV1ZXMgYW5kIGNsZWFyIG9sZCBxdWV1ZVxuICAgICAgICAgICAgbGV0IHRlbXAgPSB0aGlzLnN0YXRlLnF1ZXVlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5xdWV1ZSA9IHRoaXMuc3RhdGUubmV4dFF1ZXVlO1xuICAgICAgICAgICAgdGVtcC5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5uZXh0UXVldWUgPSB0ZW1wO1xuICAgICAgICAgICAgLy9tYXliZSBjbGVhciBsaXZlc2V0IChkb24ndCB3YW50IHRvIGRvIGl0IGV2ZXJ5IHRpbWUsIHNvIHNob3J0IHNwZWNzL3N0cmluZ3MgY2FuIGF2b2lkIG1lbW9yeSBjaHVybilcbiAgICAgICAgICAgIGlmICgodGhpcy5zdGF0ZS5pbmRleCAlIExJVkVTRVRfQ0xFQVJfSU5URVJWQUwpID09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmxpdmVTZXQuY2xlYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vZGVmaW5pdGVseSBjbGVhciBtYXRjaHNldCAobGF0ZXIgbWF0Y2hlcyB3b24ndCBldmVyIGJlIGVxdWl2YWxlbnQgdG8gbWF0Y2hlcyBmcm9tIHRoaXMgdGltZSlcbiAgICAgICAgICAgIHRoaXMuc3RhdGUubWF0Y2hTZXQuY2xlYXIoKTtcbiAgICAgICAgICAgIC8vYWR2YW5jZSwgdW5sZXNzIGFscmVhZHkgYXQgZW5kXG4gICAgICAgICAgICBpZiAodGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc0F0RW5kKHRoaXMuc3RhdGUudHJhY2UpKSB7XG4gICAgICAgICAgICAgICAgLy93aXBlIG91dCBxdWV1ZSwgbm8gbW9yZSB0cmFjZSB0byBtYXRjaCFcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuaXNTdHJlYW1pbmcgfHxcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuaXNTdHJlYW1pbmcodGhpcy5zdGF0ZS50cmFjZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5xdWV1ZS5jbGVhcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29uZmlnLnNwZWMudHJhY2VBUEkuYWR2YW5jZVN0YXRlKHRoaXMuc3RhdGUudHJhY2UpO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5pbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc1JlYWR5TWF0Y2goKSkge1xuICAgICAgICAgICAgLy8gQWxzbyByZW1vdmVzIGZpcnN0IG1hdGNoIGZyb20gcXVldWUhXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuc3RhdGUubWF0Y2hRdWV1ZS5zaGlmdCgpITtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmxhc3RNYXRjaFByaW9yaXR5ID4gbWF0Y2gucHJpb3JpdHkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYXRjaGVzIHBvcHBlZCBvdXQgb2Ygb3JkZXIhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5sYXN0TWF0Y2hQcmlvcml0eSA9IG1hdGNoLnByaW9yaXR5O1xuICAgICAgICAgICAgY29uc3QgcHJldHR5TWF0Y2ggPSB0aGlzLnByZXR0aWZ5TWF0Y2gobWF0Y2gpO1xuICAgICAgICAgICAgY29uc3QgbmV4dFN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBsYXlzcGVjUmVzdWx0KFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgICAgIG5leHRTdGF0ZSxcbiAgICAgICAgICAgICAgICBwcmV0dHlNYXRjaFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc1N0cmVhbWluZyAmJlxuICAgICAgICAgICAgdGhpcy5jb25maWcuc3BlYy50cmFjZUFQSS5pc1N0cmVhbWluZyh0aGlzLnN0YXRlLnRyYWNlKSkge1xuICAgICAgICAgICAgY29uc3QgbmV4dFN0YXRlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBsYXlzcGVjUmVzdWx0KFxuICAgICAgICAgICAgICAgIHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgICAgIG5leHRTdGF0ZSxcbiAgICAgICAgICAgICAgICB1bmRlZmluZWRcbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICAvLyBPdGhlcndpc2UsIHdlJ3JlIG91dCBvZiBxdWV1ZSBvciB0cmFjZSBhbmQgaGF2ZSBub3doZXJlIHRvIGdvXG4gICAgICAgIHRoaXMuc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0=